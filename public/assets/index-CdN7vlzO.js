(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/** @license

dhtmlxScheduler v.7.2.5 Standard

To use dhtmlxScheduler in non-GPL projects (and get Pro version of the product), please obtain Commercial/Enterprise or Ultimate license on our site https://dhtmlx.com/docs/products/dhtmlxScheduler/#licensing or contact us at sales@dhtmlx.com

(c) XB Software Ltd.

*/const _t=typeof window<"u"?window:global;function mc(e){let t=[],n=!1,a=null,i=null;function r(){return e.config.drag_highlight&&e.markTimespan}function o(d){const c=e.getView(d);return c?c.layout:d}function l(d){const{event:c,layout:u,viewName:f,sectionId:y,eventNode:g}=d;(function(v,x){switch(x){case"month":v.style.top="",v.style.left="";break;case"timeline":v.style.left="",v.style.marginLeft="1px";break;default:v.style.top=""}})(g,u);const h={};let p={start_date:c.start_date,end_date:c.end_date,css:"dhx_scheduler_dnd_marker",html:g};if(u=="timeline"){const v=e.getView(f);if(v.round_position){const x=e._get_date_index(v,c.start_date),S=v._trace_x[x];p.start_date=S}}return u!="timeline"&&u!="month"||(p={...p,end_date:e.date.add(c.start_date,1,"minute")}),y&&(h[f]=y,p.sections=h),p}function s(d){const{layout:c}=d;let u;switch(c){case"month":u=function(f){let y=[];const{event:g,layout:h,viewName:p,sectionId:v}=f,x=[];let S=new Date(g.start_date);for(;S.valueOf()<g.end_date.valueOf();){let N={start_date:S};x.push(N),S=e.date.week_start(e.date.add(S,1,"week"))}let O=e.$container.querySelectorAll(`[${e.config.event_attribute}='${g.id}']`);for(let N=0;N<O.length;N++){const M={event:x[N],layout:h,viewName:p,sectionId:v,eventNode:O[N].cloneNode(!0)};y.push(l(M))}return y}(d);break;case"timeline":case"units":u=function(f){let y=[];const{event:g,layout:h,viewName:p,eventNode:v}=f;let x=function(S){const O=e.getView(S);return O.y_property?O.y_property:O.map_to?O.map_to:void 0}(p);if(x){const S=String(g[x]).split(e.config.section_delimiter).map(N=>String(N)),O=[];for(let N=0;N<S.length;N++){O[N]=v.cloneNode(!0);const M={event:g,layout:h,viewName:p,sectionId:S[N],eventNode:O[N]};y.push(l(M))}}return y}(d);break;default:u=function(f){const{event:y,layout:g,viewName:h,sectionId:p}=f;let v=[],x=e.$container.querySelectorAll(`[${e.config.event_attribute}='${y.id}']:not(.dhx_cal_select_menu):not(.dhx_drag_marker)`);if(x)for(let S=0;S<x.length;S++){let O=x[S].cloneNode(!0);const N={event:{start_date:new Date(+O.getAttribute("data-bar-start")),end_date:new Date(+O.getAttribute("data-bar-end"))},layout:g,viewName:h,sectionId:p,eventNode:O};v.push(l(N))}return v}(d)}u.forEach(f=>{t.push(e.markTimespan(f))})}e.attachEvent("onBeforeDrag",function(d,c,u){return r()&&(n=!0,i=e.getEvent(d),a=u.target.closest(`[${e.config.event_attribute}]`),o(e.getState().mode)=="units"&&e.config.cascade_event_display&&(e.unselect(d),a=u.target.closest(`[${e.config.event_attribute}]`))),!0}),e.attachEvent("onEventDrag",function(d,c,u){if(n&&r()){n=!1;const f=e.getState().mode,y=o(f),g=e.getActionData(u).section;i&&s({event:i,layout:y,viewName:f,sectionId:g,eventNode:a})}}),e.attachEvent("onDragEnd",function(d,c,u){for(let f=0;f<t.length;f++)e.unmarkTimespan(t[f]);t=[],a=null,i=null})}function gc(e){e.config.mark_now=!0,e.config.display_marked_timespans=!0,e.config.overwrite_marked_timespans=!0;var t="dhx_time_block",n="default",a=function(r,o,l){var s=typeof r=="object"?r:{days:r};return s.type=t,s.css="",o&&(l&&(s.sections=l),s=function(d,c,u){return c instanceof Date&&u instanceof Date?(d.start_date=c,d.end_date=u):(d.days=c,d.zones=u),d}(s,r,o)),s};function i(r,o,l,s,d){var c=e,u=[],f={_props:"map_to",matrix:"y_property"};for(var y in f){var g=f[y];if(c[y])for(var h in c[y]){var p=c[y][h][g];r[p]&&(u=c._add_timespan_zones(u,e._get_blocked_zones(o[h],r[p],l,s,d)))}}return u=c._add_timespan_zones(u,e._get_blocked_zones(o,"global",l,s,d))}e.blockTime=function(r,o,l){var s=a(r,o,l);return e.addMarkedTimespan(s)},e.unblockTime=function(r,o,l){var s=a(r,o=o||"fullday",l);return e.deleteMarkedTimespan(s)},e.checkInMarkedTimespan=function(r,o,l){o=o||n;for(var s=!0,d=new Date(r.start_date.valueOf()),c=e.date.add(d,1,"day"),u=e._marked_timespans;d<r.end_date;d=e.date.date_part(c),c=e.date.add(d,1,"day")){var f=+e.date.date_part(new Date(d)),y=i(r,u,d.getDay(),f,o);if(y)for(var g=0;g<y.length;g+=2){var h=e._get_zone_minutes(d),p=r.end_date>c||r.end_date.getDate()!=d.getDate()?1440:e._get_zone_minutes(r.end_date),v=y[g],x=y[g+1];if(v<p&&x>h&&!(s=typeof l=="function"&&l(r,h,p,v,x)))break}}return!s},e.checkLimitViolation=function(r){if(!r||!e.config.check_limits)return!0;var o=e,l=o.config,s=[];if(r.rec_type&&r._end_date||r.rrule){const y=r._end_date||r.end_date;return!l.limit_start||!l.limit_end||y.valueOf()>=l.limit_start.valueOf()&&r.start_date.valueOf()<=l.limit_end.valueOf()}s=[r];for(var d=!0,c=0;c<s.length;c++){var u=!0,f=s[c];f._timed=e.isOneDayEvent(f),(u=!l.limit_start||!l.limit_end||f.start_date.valueOf()>=l.limit_start.valueOf()&&f.end_date.valueOf()<=l.limit_end.valueOf())&&(u=!e.checkInMarkedTimespan(f,t,function(y,g,h,p,v){var x=!0;return g<=v&&g>=p&&((v==1440||h<=v)&&(x=!1),y._timed&&o._drag_id&&o._drag_mode=="new-size"?(y.start_date.setHours(0),y.start_date.setMinutes(v)):x=!1),(h>=p&&h<=v||g<p&&h>v)&&(y._timed&&o._drag_id&&o._drag_mode=="new-size"?(y.end_date.setHours(0),y.end_date.setMinutes(p)):x=!1),x})),u||(u=o.checkEvent("onLimitViolation")?o.callEvent("onLimitViolation",[f.id,f]):u),d=d&&u}return d||(o._drag_id=null,o._drag_mode=null),d},e._get_blocked_zones=function(r,o,l,s,d){var c=[];if(r&&r[o])for(var u=r[o],f=this._get_relevant_blocked_zones(l,s,u,d),y=0;y<f.length;y++)c=this._add_timespan_zones(c,f[y].zones);return c},e._get_relevant_blocked_zones=function(r,o,l,s){var d;return e.config.overwrite_marked_timespans?d=l[o]&&l[o][s]?l[o][s]:l[r]&&l[r][s]?l[r][s]:[]:(d=[],l[o]&&l[o][s]&&(d=d.concat(l[o][s])),l[r]&&l[r][s]&&(d=d.concat(l[r][s]))),d},e._mark_now=function(r){var o="dhx_now_time";this._els[o]||(this._els[o]=[]);var l=e._currentDate(),s=this.config;if(e._remove_mark_now(),!r&&s.mark_now&&l<this._max_date&&l>this._min_date&&l.getHours()>=s.first_hour&&l.getHours()<s.last_hour){var d=this.locate_holder_day(l);this._els[o]=e._append_mark_now(d,l)}},e._append_mark_now=function(r,o){var l="dhx_now_time",s=e._get_zone_minutes(o),d={zones:[s,s+1],css:l,type:l};if(!this._table_view){if(this._props&&this._props[this._mode]){var c,u,f=this._props[this._mode],y=f.size||f.options.length;f.days>1?(f.size&&f.options.length&&(r=(f.position+r)/f.options.length*f.size),c=r,u=r+y):u=(c=0)+y;for(var g=[],h=c;h<u;h++){var p=h;d.days=p;var v=e._render_marked_timespan(d,null,p)[0];g.push(v)}return g}return d.days=r,e._render_marked_timespan(d,null,r)}if(this._mode=="month")return d.days=+e.date.date_part(o),e._render_marked_timespan(d,null,null)},e._remove_mark_now=function(){for(var r="dhx_now_time",o=this._els[r],l=0;l<o.length;l++){var s=o[l],d=s.parentNode;d&&d.removeChild(s)}this._els[r]=[]},e._marked_timespans={global:{}},e._get_zone_minutes=function(r){return 60*r.getHours()+r.getMinutes()},e._prepare_timespan_options=function(r){var o=[],l=[];if(r.days=="fullweek"&&(r.days=[0,1,2,3,4,5,6]),r.days instanceof Array){for(var s=r.days.slice(),d=0;d<s.length;d++){var c=e._lame_clone(r);c.days=s[d],o.push.apply(o,e._prepare_timespan_options(c))}return o}if(!r||!(r.start_date&&r.end_date&&r.end_date>r.start_date||r.days!==void 0&&r.zones)&&!r.type)return o;r.zones=="fullday"&&(r.zones=[0,1440]),r.zones&&r.invert_zones&&(r.zones=e.invertZones(r.zones)),r.id=e.uid(),r.css=r.css||"",r.type=r.type||n;var u=r.sections;if(u){for(var f in u)if(u.hasOwnProperty(f)){var y=u[f];for(y instanceof Array||(y=[y]),d=0;d<y.length;d++)(O=e._lame_copy({},r)).sections={},O.sections[f]=y[d],l.push(O)}}else l.push(r);for(var g=0;g<l.length;g++){var h=l[g],p=h.start_date,v=h.end_date;if(p&&v)for(var x=e.date.date_part(new Date(p)),S=e.date.add(x,1,"day");x<v;){var O;delete(O=e._lame_copy({},h)).start_date,delete O.end_date,O.days=x.valueOf();var N=p>x?e._get_zone_minutes(p):0,M=v>S||v.getDate()!=x.getDate()?1440:e._get_zone_minutes(v);O.zones=[N,M],o.push(O),x=S,S=e.date.add(S,1,"day")}else h.days instanceof Date&&(h.days=e.date.date_part(h.days).valueOf()),h.zones=r.zones.slice(),o.push(h)}return o},e._get_dates_by_index=function(r,o,l){var s=[];o=e.date.date_part(new Date(o||e._min_date)),l=new Date(l||e._max_date);for(var d=o.getDay(),c=r-d>=0?r-d:7-o.getDay()+r,u=e.date.add(o,c,"day");u<l;u=e.date.add(u,1,"week"))s.push(u);return s},e._get_css_classes_by_config=function(r){var o=[];return r.type==t&&(o.push(t),r.css&&o.push(t+"_reset")),o.push("dhx_marked_timespan",r.css),o.join(" ")},e._get_block_by_config=function(r){var o=document.createElement("div");return r.html&&(typeof r.html=="string"?o.innerHTML=r.html:o.appendChild(r.html)),o},e._render_marked_timespan=function(r,o,l){var s=[],d=e.config,c=this._min_date,u=this._max_date,f=!1;if(!d.display_marked_timespans)return s;if(!l&&l!==0){if(r.days<7)l=r.days;else{var y=new Date(r.days);if(f=+y,!(+u>+y&&+c<=+y))return s;l=y.getDay()}var g=c.getDay();g>l?l=7-(g-l):l-=g}var h=r.zones,p=e._get_css_classes_by_config(r);if(e._table_view&&e._mode=="month"){var v=[],x=[];if(o)v.push(o),x.push(l);else{x=f?[f]:e._get_dates_by_index(l);for(var S=0;S<x.length;S++)v.push(this._scales[x[S]])}for(S=0;S<v.length;S++){o=v[S],l=x[S];var O=this.locate_holder_day(l,!1)%this._cols.length;if(!this._ignores[O]){var N=e._get_block_by_config(r);N.className=p,N.style.top="0px",N.style.height="100%";for(var M=0;M<h.length;M+=2){var A=h[S];if((E=h[S+1])<=A)return[];(D=N.cloneNode(!0)).style.left="0px",D.style.width="100%",o.appendChild(D),s.push(D)}}}}else{var m=l;if(this._ignores[this.locate_holder_day(l,!1)])return s;if(this._props&&this._props[this._mode]&&r.sections&&r.sections[this._mode]){var b=this._props[this._mode];m=b.order[r.sections[this._mode]];var k=b.order[r.sections[this._mode]];b.days>1?m=m*(b.size||b.options.length)+k:(m=k,b.size&&m>b.position+b.size&&(m=0))}for(o=o||e.locate_holder(m),S=0;S<h.length;S+=2){var E,D;if(A=Math.max(h[S],60*d.first_hour),(E=Math.min(h[S+1],60*d.last_hour))<=A){if(S+2<h.length)continue;return[]}(D=e._get_block_by_config(r)).className=p;var C=24*this.config.hour_size_px+1,R=36e5;D.style.top=Math.round((60*A*1e3-this.config.first_hour*R)*this.config.hour_size_px/R)%C+"px",D.style.height=Math.max(Math.round(60*(E-A)*1e3*this.config.hour_size_px/R)%C,1)+"px",o.appendChild(D),s.push(D)}}return s},e._mark_timespans=function(){var r=this._els.dhx_cal_data[0],o=[];if(e._table_view&&e._mode=="month")for(var l in this._scales){var s=new Date(+l);o.push.apply(o,e._on_scale_add_marker(this._scales[l],s))}else{s=new Date(e._min_date);for(var d=0,c=r.childNodes.length;d<c;d++){var u=r.childNodes[d];u.firstChild&&e._getClassName(u.firstChild).indexOf("dhx_scale_hour")>-1||(o.push.apply(o,e._on_scale_add_marker(u,s)),s=e.date.add(s,1,"day"))}}return o},e.markTimespan=function(r){if(!this._els)throw new Error("`scheduler.markTimespan` can't be used before scheduler initialization. Place `scheduler.markTimespan` call after `scheduler.init`.");var o=!1;this._els.dhx_cal_data||(e.get_elements(),o=!0);var l=e._marked_timespans_ids,s=e._marked_timespans_types,d=e._marked_timespans;e.deleteMarkedTimespan(),e.addMarkedTimespan(r);var c=e._mark_timespans();return o&&(e._els=[]),e._marked_timespans_ids=l,e._marked_timespans_types=s,e._marked_timespans=d,c},e.unmarkTimespan=function(r){if(r)for(var o=0;o<r.length;o++){var l=r[o];l.parentNode&&l.parentNode.removeChild(l)}},e._addMarkerTimespanConfig=function(r){var o="global",l=e._marked_timespans,s=r.id,d=e._marked_timespans_ids;d[s]||(d[s]=[]);var c=r.days,u=r.sections,f=r.type;if(r.id=s,u){for(var y in u)if(u.hasOwnProperty(y)){l[y]||(l[y]={});var g=u[y],h=l[y];h[g]||(h[g]={}),h[g][c]||(h[g][c]={}),h[g][c][f]||(h[g][c][f]=[],e._marked_timespans_types||(e._marked_timespans_types={}),e._marked_timespans_types[f]||(e._marked_timespans_types[f]=!0));var p=h[g][c][f];r._array=p,p.push(r),d[s].push(r)}}else l[o][c]||(l[o][c]={}),l[o][c][f]||(l[o][c][f]=[]),e._marked_timespans_types||(e._marked_timespans_types={}),e._marked_timespans_types[f]||(e._marked_timespans_types[f]=!0),p=l[o][c][f],r._array=p,p.push(r),d[s].push(r)},e._marked_timespans_ids={},e.addMarkedTimespan=function(r){var o=e._prepare_timespan_options(r);if(o.length){for(var l=o[0].id,s=0;s<o.length;s++)e._addMarkerTimespanConfig(o[s]);return l}},e._add_timespan_zones=function(r,o){var l=r.slice();if(o=o.slice(),!l.length)return o;for(var s=0;s<l.length;s+=2)for(var d=l[s],c=l[s+1],u=s+2==l.length,f=0;f<o.length;f+=2){var y=o[f],g=o[f+1];if(g>c&&y<=c||y<d&&g>=d)l[s]=Math.min(d,y),l[s+1]=Math.max(c,g),s-=2;else{if(!u)continue;var h=d>y?0:2;l.splice(s+h,0,y,g)}o.splice(f--,2);break}return l},e._subtract_timespan_zones=function(r,o){for(var l=r.slice(),s=0;s<l.length;s+=2)for(var d=l[s],c=l[s+1],u=0;u<o.length;u+=2){var f=o[u],y=o[u+1];if(y>d&&f<c){var g=!1;d>=f&&c<=y&&l.splice(s,2),d<f&&(l.splice(s,2,d,f),g=!0),c>y&&l.splice(g?s+2:s,g?0:2,y,c),s-=2;break}}return l},e.invertZones=function(r){return e._subtract_timespan_zones([0,1440],r.slice())},e._delete_marked_timespan_by_id=function(r){var o=e._marked_timespans_ids[r];if(o){for(var l=0;l<o.length;l++)for(var s=o[l],d=s._array,c=0;c<d.length;c++)if(d[c]==s){d.splice(c,1);break}}},e._delete_marked_timespan_by_config=function(r){var o,l=e._marked_timespans,s=r.sections,d=r.days,c=r.type||n;if(s){for(var u in s)if(s.hasOwnProperty(u)&&l[u]){var f=s[u];l[u][f]&&(o=l[u][f])}}else o=l.global;if(o){if(d!==void 0)o[d]&&o[d][c]&&(e._addMarkerTimespanConfig(r),e._delete_marked_timespans_list(o[d][c],r));else for(var y in o)if(o[y][c]){var g=e._lame_clone(r);r.days=y,e._addMarkerTimespanConfig(g),e._delete_marked_timespans_list(o[y][c],r)}}},e._delete_marked_timespans_list=function(r,o){for(var l=0;l<r.length;l++){var s=r[l],d=e._subtract_timespan_zones(s.zones,o.zones);if(d.length)s.zones=d;else{r.splice(l,1),l--;for(var c=e._marked_timespans_ids[s.id],u=0;u<c.length;u++)if(c[u]==s){c.splice(u,1);break}}}},e.deleteMarkedTimespan=function(r){if(arguments.length||(e._marked_timespans={global:{}},e._marked_timespans_ids={},e._marked_timespans_types={}),typeof r!="object")e._delete_marked_timespan_by_id(r);else{r.start_date&&r.end_date||(r.days!==void 0||r.type||(r.days="fullweek"),r.zones||(r.zones="fullday"));var o=[];if(r.type)o.push(r.type);else for(var l in e._marked_timespans_types)o.push(l);for(var s=e._prepare_timespan_options(r),d=0;d<s.length;d++)for(var c=s[d],u=0;u<o.length;u++){var f=e._lame_clone(c);f.type=o[u],e._delete_marked_timespan_by_config(f)}}},e._get_types_to_render=function(r,o){var l=r?e._lame_copy({},r):{};for(var s in o||{})o.hasOwnProperty(s)&&(l[s]=o[s]);return l},e._get_configs_to_render=function(r){var o=[];for(var l in r)r.hasOwnProperty(l)&&o.push.apply(o,r[l]);return o},e._on_scale_add_marker=function(r,o){if(!e._table_view||e._mode=="month"){var l=o.getDay(),s=o.valueOf(),d=this._mode,c=e._marked_timespans,u=[],f=[];if(this._props&&this._props[d]){var y=this._props[d],g=y.options,h=g[e._get_unit_index(y,o)];if(y.days>1){var p=Math.round((o-e._min_date)/864e5),v=y.size||g.length;o=e.date.add(e._min_date,Math.floor(p/v),"day"),o=e.date.date_part(o)}else o=e.date.date_part(new Date(this._date));if(l=o.getDay(),s=o.valueOf(),c[d]&&c[d][h.key]){var x=c[d][h.key],S=e._get_types_to_render(x[l],x[s]);u.push.apply(u,e._get_configs_to_render(S))}}var O=c.global;if(e.config.overwrite_marked_timespans){var N=O[s]||O[l];u.push.apply(u,e._get_configs_to_render(N))}else O[s]&&u.push.apply(u,e._get_configs_to_render(O[s])),O[l]&&u.push.apply(u,e._get_configs_to_render(O[l]));for(var M=0;M<u.length;M++)f.push.apply(f,e._render_marked_timespan(u[M],r,o));return f}},e.attachEvent("onScaleAdd",function(){e._on_scale_add_marker.apply(e,arguments)}),e.dblclick_dhx_marked_timespan=function(r,o){e.callEvent("onScaleDblClick",[e.getActionData(r).date,o,r]),e.config.dblclick_create&&e.addEventNow(e.getActionData(r).date,null,r)}}function vc(e){var t={},n=!1;function a(s,d){d=typeof d=="function"?d:function(){},t[s]||(t[s]=this[s],this[s]=d)}function i(s){t[s]&&(this[s]=t[s],t[s]=null)}function r(s){for(var d in s)a.call(this,d,s[d])}function o(){for(var s in t)i.call(this,s)}function l(s){try{s()}catch(d){window.console.error(d)}}return e.$stateProvider.registerProvider("batchUpdate",function(){return{batch_update:n}},!1),function(s,d){if(n)return void l(s);var c,u=this._dp&&this._dp.updateMode!="off";u&&(c=this._dp.updateMode,this._dp.setUpdateMode("off"));const f={setModeDate:{date:null,mode:null},needRender:!1,needUpdateView:!1,repaintEvents:{}},y=(h,p)=>{h&&(f.setModeDate.date=h),p&&(f.setModeDate.mode=p)};var g={render:(h,p)=>{f.needRender=!0,y(h,p)},setCurrentView:(h,p)=>{f.needRender=!0,y(h,p)},updateView:(h,p)=>{f.needUpdateView=!0,y(h,p)},render_data:()=>f.needRender=!0,render_view_data:h=>{h&&h.length?h.forEach(p=>f.repaintEvents[p.id]=!0):f.needRender=!0}};if(r.call(this,g),n=!0,this.callEvent("onBeforeBatchUpdate",[]),l(s),this.callEvent("onAfterBatchUpdate",[]),o.call(this),n=!1,!d)if(f.needRender)e.render(f.setModeDate.date,f.setModeDate.mode);else if(f.needUpdateView)e.updateView(f.setModeDate.date,f.setModeDate.mode);else for(const h in f.repaintEvents)e.updateEvent(h);u&&(this._dp.setUpdateMode(c),this._dp.sendData())}}let yc=class{constructor(t){const{url:n,token:a}=t;this._url=n,this._token=a,this._mode=1,this._seed=1,this._queue=[],this.data={},this.api={},this._events={}}headers(){return{Accept:"application/json","Content-Type":"application/json","Remote-Token":this._token}}fetch(t,n){const a={credentials:"include",headers:this.headers()};return n&&(a.method="POST",a.body=n),fetch(t,a).then(i=>i.json())}load(t){return t&&(this._url=t),this.fetch(this._url).then(n=>this.parse(n))}parse(t){const{key:n,websocket:a}=t;n&&(this._token=t.key);for(const i in t.data)this.data[i]=t.data[i];for(const i in t.api){const r=this.api[i]={},o=t.api[i];for(const l in o)r[l]=this._wrapper(i+"."+l)}return a&&this.connect(),this}connect(){const t=this._socket;t&&(this._socket=null,t.onclose=function(){},t.close()),this._mode=2,this._socket=function(n,a,i,r){let o=a;o[0]==="/"&&(o=document.location.protocol+"//"+document.location.host+a),o=o.replace(/^http(s|):/,"ws$1:");const l=o.indexOf("?")!=-1?"&":"?";o=`${o}${l}token=${i}&ws=1`;const s=new WebSocket(o);return s.onclose=()=>setTimeout(()=>n.connect(),2e3),s.onmessage=d=>{const c=JSON.parse(d.data);switch(c.action){case"result":n.result(c.body,[]);break;case"event":n.fire(c.body.name,c.body.value);break;case"start":r();break;default:n.onError(c.data)}},s}(this,this._url,this._token,()=>(this._mode=3,this._send(),this._resubscribe(),this))}_wrapper(t){return(function(){const n=[].slice.call(arguments);let a=null;const i=new Promise((r,o)=>{a={data:{id:this._uid(),name:t,args:n},status:1,resolve:r,reject:o},this._queue.push(a)});return this.onCall(a,i),this._mode===3?this._send(a):setTimeout(()=>this._send(),1),i}).bind(this)}_uid(){return(this._seed++).toString()}_send(t){if(this._mode==2)return void setTimeout(()=>this._send(),100);const n=t?[t]:this._queue.filter(i=>i.status===1);if(!n.length)return;const a=n.map(i=>(i.status=2,i.data));this._mode!==3?this.fetch(this._url,JSON.stringify(a)).catch(i=>this.onError(i)).then(i=>this.result(i,a)):this._socket.send(JSON.stringify({action:"call",body:a}))}result(t,n){const a={};if(t)for(let i=0;i<t.length;i++)a[t[i].id]=t[i];else for(let i=0;i<n.length;i++)a[n[i].id]={id:n[i].id,error:"Network Error",data:null};for(let i=this._queue.length-1;i>=0;i--){const r=this._queue[i],o=a[r.data.id];o&&(this.onResponse(r,o),o.error?r.reject(o.error):r.resolve(o.data),this._queue.splice(i,1))}}on(t,n){const a=this._uid();let i=this._events[t];const r=!!i;return r||(i=this._events[t]=[]),i.push({id:a,handler:n}),r||this._mode!=3||this._socket.send(JSON.stringify({action:"subscribe",name:t})),{name:t,id:a}}_resubscribe(){if(this._mode==3)for(const t in this._events)this._socket.send(JSON.stringify({action:"subscribe",name:t}))}detach(t){if(!t){if(this._mode==3)for(const r in this._events)this._socket.send(JSON.stringify({action:"unsubscribe",key:r}));return void(this._events={})}const{id:n,name:a}=t,i=this._events[a];if(i){const r=i.filter(o=>o.id!=n);r.length?this._events[a]=r:(delete this._events[a],this._mode==3&&this._socket.send(JSON.stringify({action:"unsubscribe",name:a})))}}fire(t,n){const a=this._events[t];if(a)for(let i=0;i<a.length;i++)a[i].handler(n)}onError(t){return null}onCall(t,n){}onResponse(t,n){}},bc=class{constructor(t,n){const a=new yc({url:t,token:n});a.fetch=function(i,r){const o={headers:this.headers()};return r&&(o.method="POST",o.body=r),fetch(i,o).then(l=>l.json())},this._ready=a.load().then(i=>this._remote=i)}ready(){return this._ready}on(t,n){this.ready().then(a=>{if(typeof t=="string")a.on(t,n);else for(const i in t)a.on(i,t[i])})}};function wc(e){function t(a,i){switch(a){case"add-event":(function(r){if(e.getEvent(r.id))return void console.warn(`Event with ID ${r.id} already exists. Skipping add.`);r.start_date=e.templates.parse_date(r.start_date),r.end_date=e.templates.parse_date(r.end_date),r.original_start&&(r.original_start=e.templates.parse_date(r.original_start)),n(()=>{e.addEvent(r)})})(i);break;case"update-event":(function(r){const o=r.id;if(!e.getEvent(o))return void console.warn(`Event with ID ${o} does not exist. Skipping update.`);const l=e.getEvent(o);n(()=>{for(let s in r)s!=="start_date"&&s!=="end_date"&&(l[s]=r[s]);l.start_date=e.templates.parse_date(r.start_date),l.end_date=e.templates.parse_date(r.end_date),r.original_start&&(r.original_start=e.templates.parse_date(r.original_start)),e.callEvent("onEventChanged",[o,l]),e.updateEvent(o),o!==r.id&&e.changeEventId(o,r.id)})})(i);break;case"delete-event":(function(r){const o=r.id;if(!e.getEvent(o))return void(r.event_pid&&n(()=>{e.addEvent(r)}));n(()=>{const l=e.getEvent(o);if(l){if(l.rec_type||l.rrule){e._roll_back_dates(l);const s=e._get_rec_markers(o);for(const d in s)e.getEvent(d)&&e.deleteEvent(d,!0)}if(e.getState().lightbox_id==o&&(this._new_event=this._lightbox_id,r.id=this._lightbox_id,this._events[this._lightbox_id]=r,e.callEvent("onLiveUpdateCollision",[o,null,"delete",r])===!1))return void e.endLightbox(!1,e._lightbox);e.deleteEvent(o,!0)}})})(i)}}function n(a){e._dp?e._dp.ignore(a):a()}return{events:function(a){if(!a||!a.event||!a.event.id)return void console.error("Invalid message format:",a);const{type:i,event:r}=a;if(!e._dp._in_progress[r.id]){if(i==="add-event"){for(const o in e._dp._in_progress)if(e._dp.getState(o)==="inserted")return void e._dp.attachEvent("onFullSync",function(){e.getEvent(r.id)||t(i,r)},{once:!0})}t(i,r)}}}}function xc(e){(function(t){const n={};t.attachEvent("onConfirmedBeforeEventDelete",function(a){return n[a]=!0,!0}),t.attachEvent("onEventDeleted",function(a,i){if(!n[a])return;delete n[a];let r=t.copy(i);t.config.undo_deleted&&!t.getState().new_event&&t.message({text:`<div class="dhx_info_message">
                            <span class="undo_popup_text">Event deleted</span>
                            <button class="undo_button" data-deleted-event-id="${i.id}">Undo</button>
                        </div>`,expire:1e4,type:"popup_after_delete",callback:function(o){o.target.closest(`[data-deleted-event-id="${i.id}"]`)&&(r.rrule&&r.duration&&(r.end_date=new Date(r.start_date.valueOf()+1e3*r.duration),t.addEvent(r)),t.addEvent(r),t.render())}})})})(e),mc(e),gc(e),function(t){t.batchUpdate=vc(t)}(e),function(t){t.ext||(t.ext={}),t.ext.liveUpdates={RemoteEvents:bc,remoteUpdates:wc(t)}}(e)}var kc=Date.now();function Er(e){return!(!e||typeof e!="object")&&!!(e.getFullYear&&e.getMonth&&e.getDate)}const Xe={uid:function(){return kc++},mixin:function(e,t,n){for(var a in t)(e[a]===void 0||n)&&(e[a]=t[a]);return e},copy:function e(t){var n,a,i;if(t&&typeof t=="object")switch(!0){case Er(t):a=new Date(t);break;case(i=t,Array.isArray?Array.isArray(i):i&&i.length!==void 0&&i.pop&&i.push):for(a=new Array(t.length),n=0;n<t.length;n++)a[n]=e(t[n]);break;case function(r){return r&&typeof r=="object"&&Function.prototype.toString.call(r.constructor)==="function String() { [native code] }"}(t):a=new String(t);break;case function(r){return r&&typeof r=="object"&&Function.prototype.toString.call(r.constructor)==="function Number() { [native code] }"}(t):a=new Number(t);break;case function(r){return r&&typeof r=="object"&&Function.prototype.toString.call(r.constructor)==="function Boolean() { [native code] }"}(t):a=new Boolean(t);break;default:for(n in a={},t){const r=typeof t[n];r==="string"||r==="number"||r==="boolean"?a[n]=t[n]:Er(t[n])?a[n]=new Date(t[n]):Object.prototype.hasOwnProperty.apply(t,[n])&&(a[n]=e(t[n]))}}return a||t},defined:function(e){return e!==void 0},isDate:Er,delay:function(e,t){var n,a=function(){a.$cancelTimeout(),a.$pending=!0;var i=Array.prototype.slice.call(arguments);n=setTimeout(function(){e.apply(this,i),a.$pending=!1},t)};return a.$pending=!1,a.$cancelTimeout=function(){clearTimeout(n),a.$pending=!1},a.$execute=function(){var i=Array.prototype.slice.call(arguments);e.apply(this,i),a.$cancelTimeout()},a}};function Ec(e){function t(g){var h=document.createElement("div");return(g||"").split(" ").forEach(function(p){h.classList.add(p)}),h}var n=function(){return t("dhx_cal_navbar_rows_container")},a=function(){return t("dhx_cal_navbar_row")},i=function(g){var h=t("dhx_cal_tab");return h.setAttribute("name",g.view+"_tab"),h.setAttribute("data-tab",g.view),e.config.fix_tab_position&&(g.$firstTab?h.classList.add("dhx_cal_tab_first"):g.$lastTab?h.classList.add("dhx_cal_tab_last"):g.view!=="week"&&h.classList.add("dhx_cal_tab_standalone"),g.$segmentedTab&&h.classList.add("dhx_cal_tab_segmented")),h},r=function(){return t("dhx_cal_date")},o=function(g){return t("dhx_cal_nav_button dhx_cal_nav_button_custom dhx_cal_tab")},l=function(g){return t("dhx_cal_"+g.view+"_button dhx_cal_nav_button")},s=function(){return t("dhx_cal_line_spacer")},d=function(g){var h=t("dhx_minical_icon");return g.click||h.$_eventAttached||e.event(h,"click",function(){e.isCalendarVisible()?e.destroyCalendar():e.renderCalendar({position:this,date:e.getState().date,navigation:!0,handler:function(p,v){e.setCurrentView(p),e.destroyCalendar()}})}),h};function c(g){var h=function(x){var S;if(x.view)switch(x.view){case"today":case"next":case"prev":S=l;break;case"date":S=r;break;case"spacer":S=s;break;case"button":S=o;break;case"minicalendar":S=d;break;default:S=i}else x.rows?S=n:x.cols&&(S=a);return S}(g);if(h){var p=h(g);if(g.css&&p.classList.add(g.css),g.width&&((v=g.width)===1*v&&(v+="px"),p.style.width=v),g.height&&((v=g.height)===1*v&&(v+="px"),p.style.height=v),g.click&&e.event(p,"click",g.click),g.html&&(p.innerHTML=g.html),g.align){var v="";g.align=="right"?v="flex-end":g.align=="left"&&(v="flex-start"),p.style.justifyContent=v}return p}}function u(g){return typeof g=="string"&&(g={view:g}),g.view||g.rows||g.cols||(g.view="button"),g}function f(g){var h,p=document.createDocumentFragment();h=Array.isArray(g)?g:[g];for(var v=0;v<h.length;v++){var x,S=u(h[v]);S.view==="day"&&h[v+1]&&((x=u(h[v+1])).view!=="week"&&x.view!=="month"||(S.$firstTab=!0,S.$segmentedTab=!0)),S.view==="week"&&h[v-1]&&((x=u(h[v+1])).view!=="week"&&x.view!=="month"||(S.$segmentedTab=!0)),S.view==="month"&&h[v-1]&&((x=u(h[v-1])).view!=="week"&&x.view!=="day"||(S.$lastTab=!0,S.$segmentedTab=!0));var O=c(S);p.appendChild(O),(S.cols||S.rows)&&O.appendChild(f(S.cols||S.rows))}return p}e._init_nav_bar=function(g){var h=this.$container.querySelector(".dhx_cal_navline");return h||((h=document.createElement("div")).className="dhx_cal_navline dhx_cal_navline_flex",e._update_nav_bar(g,h),h)};var y=null;e._update_nav_bar=function(g,h){if(g){var p=!1,v=g.height||e.xy.nav_height;y!==null&&y===v||(p=!0),p&&(e.xy.nav_height=v),h.innerHTML="",h.appendChild(f(g)),e.unset_actions(),e._els=[],e.get_elements(),e.set_actions(),h.style.display=v===0?"none":"",y=v}}}function Tc(e){function t(r){return r.isConnected!==void 0?r.isConnected:document.body.contains(r)}function n(r){return{w:r.innerWidth||document.documentElement.clientWidth,h:r.innerHeight||document.documentElement.clientHeight}}function a(r,o){var l,s=n(o);r.event(o,"resize",function(){clearTimeout(l),l=setTimeout(function(){if(t(r.$container)&&!r.$destroyed){var d,c,u=n(o);c=u,((d=s).w!=c.w||d.h!=c.h)&&(s=u,i(r))}},150)})}function i(r){r.$initialized&&!r.$destroyed&&r.$root&&t(r.$root)&&r.callEvent("onSchedulerResize",[])&&(r.updateView(),r.callEvent("onAfterSchedulerResize",[]))}(function(r){var o=r.$container;if(window.getComputedStyle(o).getPropertyValue("position")=="static"&&(o.style.position="relative"),window.ResizeObserver){let s=!0;const d=new ResizeObserver(function(c){s?s=!1:i(r)});d.observe(o),r.attachEvent("onDestroy",function(){d.unobserve(o)})}else{var l=document.createElement("iframe");l.className="scheduler_container_resize_watcher",l.tabIndex=-1,r.config.wai_aria_attributes&&(l.setAttribute("role","none"),l.setAttribute("aria-hidden",!0)),window.Sfdc||window.$A||window.Aura?function(s){var d=s.$root.offsetHeight,c=s.$root.offsetWidth;(function u(){s.$destroyed||(s.$root&&(s.$root.offsetHeight==d&&s.$root.offsetWidth==c||i(s),d=s.$root.offsetHeight,c=s.$root.offsetWidth),setTimeout(u,200))})()}(r):(o.appendChild(l),l.contentWindow?a(r,l.contentWindow):(o.removeChild(l),a(r,window)))}})(e)}let Ac=class{constructor(){this._silent_mode=!1,this.listeners={}}_silentStart(){this._silent_mode=!0}_silentEnd(){this._silent_mode=!1}};function di(e){const t=new Ac;e.attachEvent=function(n,a,i){n="ev_"+n.toLowerCase(),t.listeners[n]||(t.listeners[n]=function(o){let l={},s=0;const d=function(){let c=!0;for(const u in l){const f=l[u].apply(o,arguments);c=c&&f}return c};return d.addEvent=function(c,u){if(typeof c=="function"){let f;if(u&&u.id?f=u.id:(f=s,s++),u&&u.once){const y=c;c=function(){y(),d.removeEvent(f)}}return l[f]=c,f}return!1},d.removeEvent=function(c){delete l[c]},d.clear=function(){l={}},d}(this)),i&&i.thisObject&&(a=a.bind(i.thisObject));let r=n+":"+t.listeners[n].addEvent(a,i);return i&&i.id&&(r=i.id),r},e.attachAll=function(n){this.attachEvent("listen_all",n)},e.callEvent=function(n,a){if(t._silent_mode)return!0;const i="ev_"+n.toLowerCase(),r=t.listeners;return r.ev_listen_all&&r.ev_listen_all.apply(this,[n].concat(a)),!r[i]||r[i].apply(this,a)},e.checkEvent=function(n){return!!t.listeners["ev_"+n.toLowerCase()]},e.detachEvent=function(n){if(n){let a=t.listeners;for(const r in a)a[r].removeEvent(n);const i=n.split(":");if(a=t.listeners,i.length===2){const r=i[0],o=i[1];a[r]&&a[r].removeEvent(o)}}},e.detachAllEvents=function(){for(const n in t.listeners)t.listeners[n].clear()}}const Bo={event:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},eventRemove:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)}};function Sc(e){var t=function(){var n=function(a,i){a=a||Bo.event,i=i||Bo.eventRemove;var r=[],o={attach:function(l,s,d,c){r.push({element:l,event:s,callback:d,capture:c}),a(l,s,d,c)},detach:function(l,s,d,c){i(l,s,d,c);for(var u=0;u<r.length;u++){var f=r[u];f.element===l&&f.event===s&&f.callback===d&&f.capture===c&&(r.splice(u,1),u--)}},detachAll:function(){for(var l=r.slice(),s=0;s<l.length;s++){var d=l[s];o.detach(d.element,d.event,d.callback,d.capture),o.detach(d.element,d.event,d.callback,void 0),o.detach(d.element,d.event,d.callback,!1),o.detach(d.element,d.event,d.callback,!0)}r.splice(0,r.length)},extend:function(){return n(this.event,this.eventRemove)}};return o};return n()}();e.event=t.attach,e.eventRemove=t.detach,e._eventRemoveAll=t.detachAll,e._createDomEventScope=t.extend,e._trim=function(n){return(String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")}).apply(n)},e._isDate=function(n){return!(!n||typeof n!="object")&&!!(n.getFullYear&&n.getMonth&&n.getDate)},e._isObject=function(n){return n&&typeof n=="object"}}function cl(e){if(!e)return"";var t=e.className||"";return t.baseVal&&(t=t.baseVal),t.indexOf||(t=""),t||""}function _l(e,t,n){n===void 0&&(n=!0);for(var a=e.target||e.srcElement,i="";a;){if(i=cl(a)){var r=i.indexOf(t);if(r>=0){if(!n)return a;var o=r===0||!(i.charAt(r-1)||"").trim(),l=r+t.length>=i.length||!i.charAt(r+t.length).trim();if(o&&l)return a}}a=a.parentNode}return null}function Dc(e){var t=!1,n=!1;if(window.getComputedStyle){var a=window.getComputedStyle(e,null);t=a.display,n=a.visibility}else e.currentStyle&&(t=e.currentStyle.display,n=e.currentStyle.visibility);var i=!1,r=_l({target:e},"dhx_form_repeat",!1);return r&&(i=r.style.height=="0px"),i=i||!e.offsetHeight,t!="none"&&n!="hidden"&&!i}function Cc(e){return!isNaN(e.getAttribute("tabindex"))&&1*e.getAttribute("tabindex")>=0}function Nc(e){return!{a:!0,area:!0}[e.nodeName.loLowerCase()]||!!e.getAttribute("href")}function Mc(e){return!{input:!0,select:!0,textarea:!0,button:!0,object:!0}[e.nodeName.toLowerCase()]||!e.hasAttribute("disabled")}function ul(){return document.head.createShadowRoot||document.head.attachShadow}function Yo(e){if(!e||!ul())return document.body;for(;e.parentNode&&(e=e.parentNode);)if(e instanceof ShadowRoot)return e.host;return document.body}const vt={getAbsoluteLeft:function(e){return this.getOffset(e).left},getAbsoluteTop:function(e){return this.getOffset(e).top},getOffsetSum:function(e){for(var t=0,n=0;e;)t+=parseInt(e.offsetTop),n+=parseInt(e.offsetLeft),e=e.offsetParent;return{top:t,left:n}},getOffsetRect:function(e){var t=e.getBoundingClientRect(),n=0,a=0;if(/Mobi/.test(navigator.userAgent)){var i=document.createElement("div");i.style.position="absolute",i.style.left="0px",i.style.top="0px",i.style.width="1px",i.style.height="1px",document.body.appendChild(i);var r=i.getBoundingClientRect();n=t.top-r.top,a=t.left-r.left,i.parentNode.removeChild(i)}else{var o=document.body,l=document.documentElement,s=window.pageYOffset||l.scrollTop||o.scrollTop,d=window.pageXOffset||l.scrollLeft||o.scrollLeft,c=l.clientTop||o.clientTop||0,u=l.clientLeft||o.clientLeft||0;n=t.top+s-c,a=t.left+d-u}return{top:Math.round(n),left:Math.round(a)}},getOffset:function(e){return e.getBoundingClientRect?this.getOffsetRect(e):this.getOffsetSum(e)},closest:function(e,t){return e&&t?Pr(e,t):null},insertAfter:function(e,t){t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e)},remove:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},isChildOf:function(e,t){return t.contains(e)},getFocusableNodes:function(e){for(var t=e.querySelectorAll(["a[href]","area[href]","input","select","textarea","button","iframe","object","embed","[tabindex]","[contenteditable]"].join(", ")),n=Array.prototype.slice.call(t,0),a=0;a<n.length;a++)n[a].$position=a;for(n.sort(function(r,o){return r.tabIndex===0&&o.tabIndex!==0?1:r.tabIndex!==0&&o.tabIndex===0?-1:r.tabIndex===o.tabIndex?r.$position-o.$position:r.tabIndex<o.tabIndex?-1:1}),a=0;a<n.length;a++){var i=n[a];(Cc(i)||Mc(i)||Nc(i))&&Dc(i)||(n.splice(a,1),a--)}return n},getClassName:cl,locateCss:_l,getRootNode:Yo,hasShadowParent:function(e){return!!Yo(e)},isShadowDomSupported:ul,getActiveElement:function(){var e=document.activeElement;return e.shadowRoot&&(e=e.shadowRoot.activeElement),e===document.body&&document.getSelection&&(e=document.getSelection().focusNode||document.body),e},getRelativeEventPosition:function(e,t){var n=document.documentElement,a=function(i){var r=0,o=0,l=0,s=0;if(i.getBoundingClientRect){var d=i.getBoundingClientRect(),c=document.body,u=document.documentElement||document.body.parentNode||document.body,f=window.pageYOffset||u.scrollTop||c.scrollTop,y=window.pageXOffset||u.scrollLeft||c.scrollLeft,g=u.clientTop||c.clientTop||0,h=u.clientLeft||c.clientLeft||0;r=d.top+f-g,o=d.left+y-h,l=document.body.offsetWidth-d.right,s=document.body.offsetHeight-d.bottom}else{for(;i;)r+=parseInt(i.offsetTop,10),o+=parseInt(i.offsetLeft,10),i=i.offsetParent;l=document.body.offsetWidth-i.offsetWidth-o,s=document.body.offsetHeight-i.offsetHeight-r}return{y:Math.round(r),x:Math.round(o),width:i.offsetWidth,height:i.offsetHeight,right:Math.round(l),bottom:Math.round(s)}}(t);return{x:e.clientX-n.clientLeft-a.x+t.scrollLeft,y:e.clientY-n.clientTop-a.y+t.scrollTop}},getTargetNode:function(e){var t;return e.tagName?t=e:(t=(e=e||window.event).target||e.srcElement).shadowRoot&&e.composedPath&&(t=e.composedPath()[0]),t},getNodePosition:function(e){var t=0,n=0,a=0,i=0;if(e.getBoundingClientRect){var r=e.getBoundingClientRect(),o=document.body,l=document.documentElement||document.body.parentNode||document.body,s=window.pageYOffset||l.scrollTop||o.scrollTop,d=window.pageXOffset||l.scrollLeft||o.scrollLeft,c=l.clientTop||o.clientTop||0,u=l.clientLeft||o.clientLeft||0;t=r.top+s-c,n=r.left+d-u,a=document.body.offsetWidth-r.right,i=document.body.offsetHeight-r.bottom}else{for(;e;)t+=parseInt(e.offsetTop,10),n+=parseInt(e.offsetLeft,10),e=e.offsetParent;a=document.body.offsetWidth-e.offsetWidth-n,i=document.body.offsetHeight-e.offsetHeight-t}return{y:Math.round(t),x:Math.round(n),width:e.offsetWidth,height:e.offsetHeight,right:Math.round(a),bottom:Math.round(i)}}};var Pr;if(Element.prototype.closest)Pr=function(e,t){return e.closest(t)};else{var Ic=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;Pr=function(e,t){var n=e;do{if(Ic.call(n,t))return n;n=n.parentElement||n.parentNode}while(n!==null&&n.nodeType===1);return null}}var mt=typeof window<"u";const Oc={isIE:mt&&(navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0),isOpera:mt&&navigator.userAgent.indexOf("Opera")>=0,isChrome:mt&&navigator.userAgent.indexOf("Chrome")>=0,isKHTML:mt&&(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0),isFF:mt&&navigator.userAgent.indexOf("Firefox")>=0,isIPad:mt&&navigator.userAgent.search(/iPad/gi)>=0,isEdge:mt&&navigator.userAgent.indexOf("Edge")!=-1,isNode:!mt||typeof navigator>"u"};function Tr(e){if(typeof e=="string"||typeof e=="number")return e;var t="";for(var n in e){var a="";e.hasOwnProperty(n)&&(a=n+"="+(a=typeof e[n]=="string"?encodeURIComponent(e[n]):typeof e[n]=="number"?e[n]:encodeURIComponent(JSON.stringify(e[n]))),t.length&&(a="&"+a),t+=a)}return t}function Rc(e){var t=function(r,o){for(var l="var temp=date.match(/[a-zA-Z]+|[0-9]+/g);",s=r.match(/%[a-zA-Z]/g),d=0;d<s.length;d++)switch(s[d]){case"%j":case"%d":l+="set[2]=temp["+d+"]||1;";break;case"%n":case"%m":l+="set[1]=(temp["+d+"]||1)-1;";break;case"%y":l+="set[0]=temp["+d+"]*1+(temp["+d+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":l+="set[3]=temp["+d+"]||0;";break;case"%i":l+="set[4]=temp["+d+"]||0;";break;case"%Y":l+="set[0]=temp["+d+"]||0;";break;case"%a":case"%A":l+="set[3]=set[3]%12+((temp["+d+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":l+="set[5]=temp["+d+"]||0;";break;case"%M":l+="set[1]=this.locale.date.month_short_hash[temp["+d+"]]||0;";break;case"%F":l+="set[1]=this.locale.date.month_full_hash[temp["+d+"]]||0;"}var c="set[0],set[1],set[2],set[3],set[4],set[5]";return o&&(c=" Date.UTC("+c+")"),new Function("date","var set=[0,0,1,0,0,0]; "+l+" return new Date("+c+");")},n=function(r,o){const l=r.match(/%[a-zA-Z]/g);return function(s){for(var d=[0,0,1,0,0,0],c=s.match(/[a-zA-Z]+|[0-9]+/g),u=0;u<l.length;u++)switch(l[u]){case"%j":case"%d":d[2]=c[u]||1;break;case"%n":case"%m":d[1]=(c[u]||1)-1;break;case"%y":d[0]=1*c[u]+(c[u]>50?1900:2e3);break;case"%g":case"%G":case"%h":case"%H":d[3]=c[u]||0;break;case"%i":d[4]=c[u]||0;break;case"%Y":d[0]=c[u]||0;break;case"%a":case"%A":d[3]=d[3]%12+((c[u]||"").toLowerCase()=="am"?0:12);break;case"%s":d[5]=c[u]||0;break;case"%M":d[1]=e.locale.date.month_short_hash[c[u]]||0;break;case"%F":d[1]=e.locale.date.month_full_hash[c[u]]||0}return o?new Date(Date.UTC(d[0],d[1],d[2],d[3],d[4],d[5])):new Date(d[0],d[1],d[2],d[3],d[4],d[5])}};let a;function i(){var r=!1;return e.config.csp==="auto"?(a===void 0&&(a=function(){try{new Function("cspEnabled = false;"),a=!1}catch{a=!0}return a}()),r=a):r=e.config.csp,r}e.date={init:function(){for(var r=e.locale.date.month_short,o=e.locale.date.month_short_hash={},l=0;l<r.length;l++)o[r[l]]=l;for(r=e.locale.date.month_full,o=e.locale.date.month_full_hash={},l=0;l<r.length;l++)o[r[l]]=l},date_part:function(r){const o=new Date(r);var l=new Date(o);return o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),o.getHours()&&(o.getDate()<l.getDate()||o.getMonth()<l.getMonth()||o.getFullYear()<l.getFullYear())&&o.setTime(o.getTime()+36e5*(24-o.getHours())),o},time_part:function(r){return(r.valueOf()/1e3-60*r.getTimezoneOffset())%86400},week_start:function(r){var o=r.getDay();return e.config.start_on_monday&&(o===0?o=6:o--),this.date_part(this.add(r,-1*o,"day"))},month_start:function(r){const o=new Date(r);return o.setDate(1),this.date_part(o)},year_start:function(r){const o=new Date(r);return o.setMonth(0),this.month_start(o)},day_start:function(r){const o=new Date(r);return this.date_part(o)},_add_days:function(r,o){var l=new Date(r.valueOf());if(l.setDate(l.getDate()+o),o==Math.round(o)&&o>0){var s=(+l-+r)%864e5;if(s&&r.getTimezoneOffset()==l.getTimezoneOffset()){var d=s/36e5;l.setTime(l.getTime()+60*(24-d)*60*1e3)}}return o>=0&&!r.getHours()&&l.getHours()&&(l.getDate()<r.getDate()||l.getMonth()<r.getMonth()||l.getFullYear()<r.getFullYear())&&l.setTime(l.getTime()+36e5*(24-l.getHours())),l},add:function(r,o,l){var s=new Date(r.valueOf());switch(l){case"day":s=e.date._add_days(s,o);break;case"week":s=e.date._add_days(s,7*o);break;case"month":s.setMonth(s.getMonth()+o);break;case"year":s.setYear(s.getFullYear()+o);break;case"hour":s.setTime(s.getTime()+60*o*60*1e3);break;case"minute":s.setTime(s.getTime()+60*o*1e3);break;default:return e.date["add_"+l](r,o,l)}return s},to_fixed:function(r){return r<10?"0"+r:r},copy:function(r){return new Date(r.valueOf())},date_to_str:function(r,o){return i()?function(l,s){return function(d){return l.replace(/%[a-zA-Z]/g,function(c){switch(c){case"%d":return s?e.date.to_fixed(d.getUTCDate()):e.date.to_fixed(d.getDate());case"%m":return s?e.date.to_fixed(d.getUTCMonth()+1):e.date.to_fixed(d.getMonth()+1);case"%j":return s?d.getUTCDate():d.getDate();case"%n":return s?d.getUTCMonth()+1:d.getMonth()+1;case"%y":return s?e.date.to_fixed(d.getUTCFullYear()%100):e.date.to_fixed(d.getFullYear()%100);case"%Y":return s?d.getUTCFullYear():d.getFullYear();case"%D":return s?e.locale.date.day_short[d.getUTCDay()]:e.locale.date.day_short[d.getDay()];case"%l":return s?e.locale.date.day_full[d.getUTCDay()]:e.locale.date.day_full[d.getDay()];case"%M":return s?e.locale.date.month_short[d.getUTCMonth()]:e.locale.date.month_short[d.getMonth()];case"%F":return s?e.locale.date.month_full[d.getUTCMonth()]:e.locale.date.month_full[d.getMonth()];case"%h":return s?e.date.to_fixed((d.getUTCHours()+11)%12+1):e.date.to_fixed((d.getHours()+11)%12+1);case"%g":return s?(d.getUTCHours()+11)%12+1:(d.getHours()+11)%12+1;case"%G":return s?d.getUTCHours():d.getHours();case"%H":return s?e.date.to_fixed(d.getUTCHours()):e.date.to_fixed(d.getHours());case"%i":return s?e.date.to_fixed(d.getUTCMinutes()):e.date.to_fixed(d.getMinutes());case"%a":return s?d.getUTCHours()>11?"pm":"am":d.getHours()>11?"pm":"am";case"%A":return s?d.getUTCHours()>11?"PM":"AM":d.getHours()>11?"PM":"AM";case"%s":return s?e.date.to_fixed(d.getUTCSeconds()):e.date.to_fixed(d.getSeconds());case"%W":return s?e.date.to_fixed(e.date.getUTCISOWeek(d)):e.date.to_fixed(e.date.getISOWeek(d));default:return c}})}}(r,o):(r=r.replace(/%[a-zA-Z]/g,function(l){switch(l){case"%d":return'"+this.date.to_fixed(date.getDate())+"';case"%m":return'"+this.date.to_fixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+this.date.to_fixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+this.locale.date.day_short[date.getDay()]+"';case"%l":return'"+this.locale.date.day_full[date.getDay()]+"';case"%M":return'"+this.locale.date.month_short[date.getMonth()]+"';case"%F":return'"+this.locale.date.month_full[date.getMonth()]+"';case"%h":return'"+this.date.to_fixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+this.date.to_fixed(date.getHours())+"';case"%i":return'"+this.date.to_fixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+this.date.to_fixed(date.getSeconds())+"';case"%W":return'"+this.date.to_fixed(this.date.getISOWeek(date))+"';default:return l}}),o&&(r=r.replace(/date\.get/g,"date.getUTC")),new Function("date",'return "'+r+'";').bind(e))},str_to_date:function(r,o,l){var s=i()?n:t,d=s(r,o),c=/^[0-9]{4}(\-|\/)[0-9]{2}(\-|\/)[0-9]{2} ?(([0-9]{1,2}:[0-9]{1,2})(:[0-9]{1,2})?)?$/,u=/^[0-9]{2}\/[0-9]{2}\/[0-9]{4} ?(([0-9]{1,2}:[0-9]{2})(:[0-9]{1,2})?)?$/,f=/^[0-9]{2}\-[0-9]{2}\-[0-9]{4} ?(([0-9]{1,2}:[0-9]{1,2})(:[0-9]{1,2})?)?$/,y=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,g=s("%Y-%m-%d %H:%i:%s",o),h=s("%m/%d/%Y %H:%i:%s",o),p=s("%d-%m-%Y %H:%i:%s",o);return function(v){if(!l&&!e.config.parse_exact_format){if(v&&v.getISOWeek)return new Date(v);if(typeof v=="number")return new Date(v);if(x=v,c.test(String(x)))return g(v);if(function(S){return u.test(String(S))}(v))return h(v);if(function(S){return f.test(String(S))}(v))return p(v);if(function(S){return y.test(S)}(v))return new Date(v)}var x;return d.call(e,v)}},getISOWeek:function(r){if(!r)return!1;var o=(r=this.date_part(new Date(r))).getDay();o===0&&(o=7);var l=new Date(r.valueOf());l.setDate(r.getDate()+(4-o));var s=l.getFullYear(),d=Math.round((l.getTime()-new Date(s,0,1).getTime())/864e5);return 1+Math.floor(d/7)},getUTCISOWeek:function(r){return this.getISOWeek(this.convert_to_utc(r))},convert_to_utc:function(r){return new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds())}}}function hl(e){return(function(){var t={};for(var n in this._events){var a=this._events[n];a.id.toString().indexOf("#")==-1&&(t[a.id]=a)}return t}).bind(e)}function Lc(e){e._loaded={},e._load=function(n,a){if(n=n||this._load_url){var i;if(n+=(n.indexOf("?")==-1?"?":"&")+"timeshift="+new Date().getTimezoneOffset(),this.config.prevent_cache&&(n+="&uid="+this.uid()),a=a||this._date,this._load_mode){var r=this.templates.load_format;for(a=this.date[this._load_mode+"_start"](new Date(a.valueOf()));a>this._min_date;)a=this.date.add(a,-1,this._load_mode);i=a;for(var o=!0;i<this._max_date;)i=this.date.add(i,1,this._load_mode),this._loaded[r(a)]&&o?a=this.date.add(a,1,this._load_mode):o=!1;var l=i;do i=l,l=this.date.add(i,-1,this._load_mode);while(l>a&&this._loaded[r(l)]);if(i<=a)return!1;for(e.ajax.get(n+"&from="+r(a)+"&to="+r(i),s);a<i;)this._loaded[r(a)]=!0,a=this.date.add(a,1,this._load_mode)}else e.ajax.get(n,s);return this.callEvent("onXLS",[]),this.callEvent("onLoadStart",[]),!0}function s(d){e.on_load(d),e.callEvent("onLoadEnd",[])}},e._parsers={},function(n){n._parsers.xml={canParse:function(a,i){if(i.responseXML&&i.responseXML.firstChild)return!0;try{var r=n.ajax.parse(i.responseText),o=n.ajax.xmltop("data",r);if(o&&o.tagName==="data")return!0}catch{}return!1},parse:function(a){var i;if(a.xmlDoc.responseXML||(a.xmlDoc.responseXML=n.ajax.parse(a.xmlDoc.responseText)),(i=n.ajax.xmltop("data",a.xmlDoc)).tagName!="data")return null;var r=i.getAttribute("dhx_security");r&&(window.dhtmlx&&(window.dhtmlx.security_key=r),n.security_key=r);for(var o=n.ajax.xpath("//coll_options",a.xmlDoc),l=0;l<o.length;l++){var s=o[l].getAttribute("for"),d=n.serverList[s];d||(n.serverList[s]=d=[]),d.splice(0,d.length);for(var c=n.ajax.xpath(".//item",o[l]),u=0;u<c.length;u++){for(var f=c[u].attributes,y={key:c[u].getAttribute("value"),label:c[u].getAttribute("label")},g=0;g<f.length;g++){var h=f[g];h.nodeName!="value"&&h.nodeName!="label"&&(y[h.nodeName]=h.nodeValue)}d.push(y)}}o.length&&n.callEvent("onOptionsLoad",[]);var p=n.ajax.xpath("//userdata",a.xmlDoc);for(l=0;l<p.length;l++){var v=n._xmlNodeToJSON(p[l]);n._userdata[v.name]=v.text}var x=[];for(i=n.ajax.xpath("//event",a.xmlDoc),l=0;l<i.length;l++){var S=x[l]=n._xmlNodeToJSON(i[l]);n._init_event(S)}return x}}}(e),function(n){n.json=n._parsers.json={canParse:function(a){if(a&&typeof a=="object")return!0;if(typeof a=="string")try{var i=JSON.parse(a);return Object.prototype.toString.call(i)==="[object Object]"||Object.prototype.toString.call(i)==="[object Array]"}catch{return!1}return!1},parse:function(a){var i=[];typeof a=="string"&&(a=JSON.parse(a)),Object.prototype.toString.call(a)==="[object Array]"?i=a:a&&(a.events?i=a.events:a.data&&(i=a.data)),i=i||[],a.dhx_security&&(window.dhtmlx&&(window.dhtmlx.security_key=a.dhx_security),n.security_key=a.dhx_security);var r=a&&a.collections?a.collections:{},o=!1;for(var l in r)if(r.hasOwnProperty(l)){o=!0;var s=r[l],d=n.serverList[l];d||(n.serverList[l]=d=[]),d.splice(0,d.length);for(var c=0;c<s.length;c++){var u=s[c],f={key:u.value,label:u.label};for(var y in u)if(u.hasOwnProperty(y)){if(y=="value"||y=="label")continue;f[y]=u[y]}d.push(f)}}o&&n.callEvent("onOptionsLoad",[]);for(var g=[],h=0;h<i.length;h++){var p=i[h];n._init_event(p),g.push(p)}return g}}}(e),function(n){n.ical=n._parsers.ical={canParse:function(a){return typeof a=="string"&&new RegExp("^BEGIN:VCALENDAR").test(a)},parse:function(a){var i=a.match(RegExp(this.c_start+"[^\f]*"+this.c_end,""));if(i.length){i[0]=i[0].replace(/[\r\n]+ /g,""),i[0]=i[0].replace(/[\r\n]+(?=[a-z \t])/g," "),i[0]=i[0].replace(/;[^:\r\n]*:/g,":");for(var r,o=[],l=RegExp("(?:"+this.e_start+")([^\f]*?)(?:"+this.e_end+")","g");(r=l.exec(i))!==null;){for(var s,d={},c=/[^\r\n]+[\r\n]+/g;(s=c.exec(r[1]))!==null;)this.parse_param(s.toString(),d);d.uid&&!d.id&&(d.id=d.uid),o.push(d)}return o}},parse_param:function(a,i){var r=a.indexOf(":");if(r!=-1){var o=a.substr(0,r).toLowerCase(),l=a.substr(r+1).replace(/\\,/g,",").replace(/[\r\n]+$/,"");o=="summary"?o="text":o=="dtstart"?(o="start_date",l=this.parse_date(l,0,0)):o=="dtend"&&(o="end_date",l=this.parse_date(l,0,0)),i[o]=l}},parse_date:function(a,i,r){var o=a.split("T"),l=!1;o[1]&&(i=o[1].substr(0,2),r=o[1].substr(2,2),l=o[1][6]=="Z");var s=o[0].substr(0,4),d=parseInt(o[0].substr(4,2),10)-1,c=o[0].substr(6,2);return n.config.server_utc||l?new Date(Date.UTC(s,d,c,i,r)):new Date(s,d,c,i,r)},c_start:"BEGIN:VCALENDAR",e_start:"BEGIN:VEVENT",e_end:"END:VEVENT",c_end:"END:VCALENDAR"}}(e),e.on_load=function(n){var a;this.callEvent("onBeforeParse",[]);var i=!1,r=!1;for(var o in this._parsers){var l=this._parsers[o];if(l.canParse(n.xmlDoc.responseText,n.xmlDoc)){try{var s=n.xmlDoc.responseText;o==="xml"&&(s=n),(a=l.parse(s))||(i=!0)}catch{i=!0}r=!0;break}}if(!r)if(this._process&&this[this._process])try{a=this[this._process].parse(n.xmlDoc.responseText)}catch{i=!0}else i=!0;(i||n.xmlDoc.status&&n.xmlDoc.status>=400)&&(this.callEvent("onLoadError",[n.xmlDoc]),a=[]),this._process_loading(a),this.callEvent("onXLE",[]),this.callEvent("onParse",[])},e._process_loading=function(n){this._loading=!0,this._not_render=!0;for(var a=0;a<n.length;a++)this.callEvent("onEventLoading",[n[a]])&&this.addEvent(n[a]);this._not_render=!1,this._render_wait&&this.render_view_data(),this._loading=!1,this._after_call&&this._after_call(),this._after_call=null},e._init_event=function(n){n.text=n.text||n._tagvalue||"",n.start_date=e._init_date(n.start_date),n.end_date=e._init_date(n.end_date)},e._init_date=function(n){return n?typeof n=="string"?e._helpers.parseDate(n):new Date(n):null};const t=hl(e);e.serialize=function(){const n=[],a=t();for(var i in a){const l={};var r=a[i];for(var o in r){if(o.charAt(0)=="$"||o.charAt(0)=="_")continue;let s;const d=r[o];s=e.utils.isDate(d)?e.defined(e.templates.xml_format)?e.templates.xml_format(d):e.templates.format_date(d):d,l[o]=s}n.push(l)}return n},e.parse=function(n,a){this._process=a,this.on_load({xmlDoc:{responseText:n}})},e.load=function(n,a){typeof a=="string"&&(this._process=a,a=arguments[2]),this._load_url=n,this._after_call=a,this._load(n,this._date)},e.setLoadMode=function(n){n=="all"&&(n=""),this._load_mode=n},e.serverList=function(n,a){return a?(this.serverList[n]=a.slice(0),this.serverList[n]):(this.serverList[n]=this.serverList[n]||[],this.serverList[n])},e._userdata={},e._xmlNodeToJSON=function(n){for(var a={},i=0;i<n.attributes.length;i++)a[n.attributes[i].name]=n.attributes[i].value;for(i=0;i<n.childNodes.length;i++){var r=n.childNodes[i];r.nodeType==1&&(a[r.tagName]=r.firstChild?r.firstChild.nodeValue:"")}return a.text||(a.text=n.firstChild?n.firstChild.nodeValue:""),a},e.attachEvent("onXLS",function(){var n;this.config.show_loading===!0&&((n=this.config.show_loading=document.createElement("div")).className="dhx_loading",n.style.left=Math.round((this._x-128)/2)+"px",n.style.top=Math.round((this._y-15)/2)+"px",this._obj.appendChild(n))}),e.attachEvent("onXLE",function(){var n=this.config.show_loading;n&&typeof n=="object"&&(n.parentNode&&n.parentNode.removeChild(n),this.config.show_loading=!0)})}function Pc(e){function t(){const n=e.config.csp===!0,a=!!window.Sfdc||!!window.$A||window.Aura||"$shadowResolver$"in document.body;return n||a?e.$root:document.body}e._lightbox_controls={},e.formSection=function(n){for(var a=this.config.lightbox.sections,i=0;i<a.length&&a[i].name!=n;i++);if(i===a.length)return null;var r=a[i];e._lightbox||e.getLightbox();var o=e._lightbox.querySelector(`#${r.id}`),l=o.nextSibling,s={section:r,header:o,node:l,getValue:function(c){return e.form_blocks[r.type].get_value(l,c||{},r)},setValue:function(c,u){return e.form_blocks[r.type].set_value(l,c,u||{},r)}},d=e._lightbox_controls["get_"+r.type+"_control"];return d?d(s):s},e._lightbox_controls.get_template_control=function(n){return n.control=n.node,n},e._lightbox_controls.get_select_control=function(n){return n.control=n.node.getElementsByTagName("select")[0],n},e._lightbox_controls.get_textarea_control=function(n){return n.control=n.node.getElementsByTagName("textarea")[0],n},e._lightbox_controls.get_time_control=function(n){return n.control=n.node.getElementsByTagName("select"),n},e._lightbox_controls.defaults={template:{height:30},textarea:{height:200},select:{height:23},time:{height:20}},e.form_blocks={template:{render:function(n){return`<div class='dhx_cal_ltext dhx_cal_template' ${n.height?`style='height:${n.height}px;'`:""}></div>`},set_value:function(n,a,i,r){n.innerHTML=a||""},get_value:function(n,a,i){return n.innerHTML||""},focus:function(n){}},textarea:{render:function(n){return`<div class='dhx_cal_ltext' ${n.height?`style='height:${n.height}px;'`:""}><textarea ${n.placeholder?`placeholder='${n.placeholder}'`:""}></textarea></div>`},set_value:function(n,a,i){e.form_blocks.textarea._get_input(n).value=a||""},get_value:function(n,a){return e.form_blocks.textarea._get_input(n).value},focus:function(n){var a=e.form_blocks.textarea._get_input(n);e._focus(a,!0)},_get_input:function(n){return n.getElementsByTagName("textarea")[0]}},select:{render:function(n){for(var a=`<div class='dhx_cal_ltext dhx_cal_select' ${n.height?`style='height:${n.height}px;'`:""}><select style='width:100%;'>`,i=0;i<n.options.length;i++)a+="<option value='"+n.options[i].key+"'>"+n.options[i].label+"</option>";return a+="</select></div>"},set_value:function(n,a,i,r){var o=n.firstChild;!o._dhx_onchange&&r.onchange&&(e.event(o,"change",r.onchange),o._dhx_onchange=!0),a===void 0&&(a=(o.options[0]||{}).value),o.value=a||""},get_value:function(n,a){return n.firstChild.value},focus:function(n){var a=n.firstChild;e._focus(a,!0)}},time:{render:function(n){n.time_format||(n.time_format=["%H:%i","%d","%m","%Y"]),n._time_format_order={};var a=n.time_format,i=e.config,r=e.date.date_part(e._currentDate()),o=1440,l=0;e.config.limit_time_select&&(o=60*i.last_hour+1,l=60*i.first_hour,r.setHours(i.first_hour));for(var s="",d=0;d<a.length;d++){var c=a[d];d>0&&(s+=" ");var u="",f="";switch(c){case"%Y":var y,g,h;u="dhx_lightbox_year_select",n._time_format_order[3]=d,n.year_range&&(isNaN(n.year_range)?n.year_range.push&&(g=n.year_range[0],h=n.year_range[1]):y=n.year_range),y=y||10;var p=p||Math.floor(y/2);g=g||r.getFullYear()-p,h=h||g+y;for(var v=g;v<h;v++)f+="<option value='"+v+"'>"+v+"</option>";break;case"%m":for(u="dhx_lightbox_month_select",n._time_format_order[2]=d,v=0;v<12;v++)f+="<option value='"+v+"'>"+this.locale.date.month_full[v]+"</option>";break;case"%d":for(u="dhx_lightbox_day_select",n._time_format_order[1]=d,v=1;v<32;v++)f+="<option value='"+v+"'>"+v+"</option>";break;case"%H:%i":u="dhx_lightbox_time_select",n._time_format_order[0]=d,v=l;var x=r.getDate();for(n._time_values=[];v<o;)f+="<option value='"+v+"'>"+this.templates.time_picker(r)+"</option>",n._time_values.push(v),r.setTime(r.valueOf()+60*this.config.time_step*1e3),v=24*(r.getDate()!=x?1:0)*60+60*r.getHours()+r.getMinutes()}if(f){var S=e._waiAria.lightboxSelectAttrString(c);s+="<select class='"+u+"' "+(n.readonly?"disabled='disabled'":"")+S+">"+f+"</select> "}}return`<div class='dhx_section_time' ${n.height?`style='height:${n.height}px;'`:""}>${s}<span style='font-weight:normal; font-size:10pt;' class='dhx_section_time_spacer'> &nbsp;&ndash;&nbsp; </span>${s}</div>`},set_value:function(n,a,i,r){var o,l,s=e.config,d=n.getElementsByTagName("select"),c=r._time_format_order;if(s.full_day){if(!n._full_day){var u="<label class='dhx_fullday'><input type='checkbox' name='full_day' value='true'> "+e.locale.labels.full_day+"&nbsp;</label></input>";e.config.wide_form||(u=n.previousSibling.innerHTML+u),n.previousSibling.innerHTML=u,n._full_day=!0}var f=n.previousSibling.getElementsByTagName("input")[0];f.checked=e.date.time_part(i.start_date)===0&&e.date.time_part(i.end_date)===0,d[c[0]].disabled=f.checked,d[c[0]+d.length/2].disabled=f.checked,f.$_eventAttached||(f.$_eventAttached=!0,e.event(f,"click",function(){if(f.checked){var p={};e.form_blocks.time.get_value(n,p,r),o=e.date.date_part(p.start_date),(+(l=e.date.date_part(p.end_date))==+o||+l>=+o&&(i.end_date.getHours()!==0||i.end_date.getMinutes()!==0))&&(l=e.date.add(l,1,"day"))}else o=null,l=null;d[c[0]].disabled=f.checked,d[c[0]+d.length/2].disabled=f.checked,h(d,0,o||i.start_date),h(d,4,l||i.end_date)}))}if(s.auto_end_date&&s.event_duration)for(var y=function(){s.auto_end_date&&s.event_duration&&(o=new Date(d[c[3]].value,d[c[2]].value,d[c[1]].value,0,d[c[0]].value),l=new Date(o.getTime()+60*e.config.event_duration*1e3),h(d,4,l))},g=0;g<4;g++)d[g].$_eventAttached||(d[g].$_eventAttached=!0,e.event(d[g],"change",y));function h(p,v,x){for(var S=r._time_values,O=60*x.getHours()+x.getMinutes(),N=O,M=!1,A=0;A<S.length;A++){var m=S[A];if(m===O){M=!0;break}m<O&&(N=m)}p[v+c[0]].value=M?O:N,M||N||(p[v+c[0]].selectedIndex=-1),p[v+c[1]].value=x.getDate(),p[v+c[2]].value=x.getMonth(),p[v+c[3]].value=x.getFullYear()}h(d,0,i.start_date),h(d,4,i.end_date)},get_value:function(n,a,i){var r=n.getElementsByTagName("select"),o=i._time_format_order;if(a.start_date=new Date(r[o[3]].value,r[o[2]].value,r[o[1]].value,0,r[o[0]].value),a.end_date=new Date(r[o[3]+4].value,r[o[2]+4].value,r[o[1]+4].value,0,r[o[0]+4].value),!r[o[3]].value||!r[o[3]+4].value){var l=e.getEvent(e._lightbox_id);l&&(a.start_date=l.start_date,a.end_date=l.end_date)}return a.end_date<=a.start_date&&(a.end_date=e.date.add(a.start_date,e.config.time_step,"minute")),{start_date:new Date(a.start_date),end_date:new Date(a.end_date)}},focus:function(n){e._focus(n.getElementsByTagName("select")[0])}}},e._setLbPosition=function(n){n&&(n.style.top=Math.max(t().offsetHeight/2-n.offsetHeight/2,0)+"px",n.style.left=Math.max(t().offsetWidth/2-n.offsetWidth/2,0)+"px")},e.showCover=function(n){n&&(n.style.display="block",this._setLbPosition(n)),e.config.responsive_lightbox&&(document.documentElement.classList.add("dhx_cal_overflow_container"),t().classList.add("dhx_cal_overflow_container")),this.show_cover(),this._cover.style.display=""},e.showLightbox=function(n){if(n)if(this.callEvent("onBeforeLightbox",[n])){this.showCover(a);var a=this.getLightbox();this._setLbPosition(a),this._fill_lightbox(n,a),this._waiAria.lightboxVisibleAttr(a),this.callEvent("onLightbox",[n])}else this._new_event&&(this._new_event=null)},e._fill_lightbox=function(n,a){var i=this.getEvent(n),r=a.getElementsByTagName("span"),o=[];if(e.templates.lightbox_header){o.push("");var l=e.templates.lightbox_header(i.start_date,i.end_date,i);o.push(l),r[1].innerHTML="",r[2].innerHTML=l}else{var s=this.templates.event_header(i.start_date,i.end_date,i),d=(this.templates.event_bar_text(i.start_date,i.end_date,i)||"").substr(0,70);o.push(s),o.push(d),r[1].innerHTML=s,r[2].innerHTML=d}this._waiAria.lightboxHeader(a,o.join(" "));for(var c=this.config.lightbox.sections,u=0;u<c.length;u++){var f=c[u],y=e._get_lightbox_section_node(f),g=this.form_blocks[f.type],h=i[f.map_to]!==void 0?i[f.map_to]:f.default_value;g.set_value.call(this,y,h,i,f),c[u].focus&&g.focus.call(this,y)}e._lightbox_id=n},e._get_lightbox_section_node=function(n){return e._lightbox.querySelector(`#${n.id}`).nextSibling},e._lightbox_out=function(n){for(var a=this.config.lightbox.sections,i=0;i<a.length;i++){var r=e._lightbox.querySelector(`#${a[i].id}`);r=r&&r.nextSibling;var o=this.form_blocks[a[i].type].get_value.call(this,r,n,a[i]);a[i].map_to!="auto"&&(n[a[i].map_to]=o)}return n},e._empty_lightbox=function(n){var a=e._lightbox_id,i=this.getEvent(a);this._lame_copy(i,n),this.setEvent(i.id,i),this._edit_stop_event(i,!0),this.render_view_data()},e.hide_lightbox=function(n){e.endLightbox(!1,this.getLightbox())},e.hideCover=function(n){n&&(n.style.display="none"),this.hide_cover(),e.config.responsive_lightbox&&(document.documentElement.classList.remove("dhx_cal_overflow_container"),t().classList.remove("dhx_cal_overflow_container"))},e.hide_cover=function(){this._cover&&this._cover.parentNode.removeChild(this._cover),this._cover=null},e.show_cover=function(){this._cover||(this._cover=document.createElement("div"),this._cover.className="dhx_cal_cover",this._cover.style.display="none",e.event(this._cover,"mousemove",e._move_while_dnd),e.event(this._cover,"mouseup",e._finish_dnd),t().appendChild(this._cover))},e.save_lightbox=function(){var n=this._lightbox_out({},this._lame_copy(this.getEvent(this._lightbox_id)));this.checkEvent("onEventSave")&&!this.callEvent("onEventSave",[this._lightbox_id,n,this._new_event])||(this._empty_lightbox(n),this.hide_lightbox())},e.startLightbox=function(n,a){this._lightbox_id=n,this._custom_lightbox=!0,this._temp_lightbox=this._lightbox,this._lightbox=a,this.showCover(a)},e.endLightbox=function(n,a){a=a||e.getLightbox();var i=e.getEvent(this._lightbox_id);i&&this._edit_stop_event(i,n),n&&e.render_view_data(),this.hideCover(a),this._custom_lightbox&&(this._lightbox=this._temp_lightbox,this._custom_lightbox=!1),this._temp_lightbox=this._lightbox_id=null,this._waiAria.lightboxHiddenAttr(a),this.resetLightbox(),this.callEvent("onAfterLightbox",[])},e.resetLightbox=function(){e._lightbox&&!e._custom_lightbox&&e._lightbox.parentNode.removeChild(e._lightbox),e._lightbox=null},e.cancel_lightbox=function(){this._lightbox_id&&this.callEvent("onEventCancel",[this._lightbox_id,!!this._new_event]),this.hide_lightbox()},e.hideLightbox=e.cancel_lightbox,e._init_lightbox_events=function(){if(this.getLightbox().$_eventAttached)return;const n=this.getLightbox();n.$_eventAttached=!0,e.event(n,"click",function(a){a.target.closest(".dhx_cal_ltitle_close_btn")&&e.cancel_lightbox();const i=e.$domHelpers.closest(a.target,".dhx_btn_set");if(!i){const l=e.$domHelpers.closest(a.target,".dhx_custom_button[data-section-index]");if(l){const s=Number(l.getAttribute("data-section-index"));e.form_blocks[e.config.lightbox.sections[s].type].button_click(e.$domHelpers.closest(l,".dhx_cal_lsection"),l,a)}return}const r=i?i.getAttribute("data-action"):null;switch(r){case"dhx_save_btn":case"save":if(e.config.readonly_active)return;e.save_lightbox();break;case"dhx_delete_btn":case"delete":if(e.config.readonly_active)return;var o=e.locale.labels.confirm_deleting;e._dhtmlx_confirm({message:o,title:e.locale.labels.title_confirm_deleting,callback:function(){let l=e.getEvent(e._lightbox_id);l._thisAndFollowing?(l._removeFollowing=!0,e.callEvent("onEventSave",[l.id,l,e._new_event])):e.deleteEvent(e._lightbox_id),e._new_event=null,e.hide_lightbox()},config:{ok:e.locale.labels.icon_delete}});break;case"dhx_cancel_btn":case"cancel":e.cancel_lightbox();break;default:e.callEvent("onLightboxButton",[r,i,a])}}),e.event(n,"keydown",function(a){var i=a||window.event,r=a.target||a.srcElement,o=r.querySelector("[dhx_button]");switch(o||(o=r.parentNode.querySelector(".dhx_custom_button, .dhx_readonly")),(a||i).keyCode){case 32:if((a||i).shiftKey)return;o&&o.click&&o.click();break;case e.keys.edit_save:if((a||i).shiftKey)return;if(o&&o.click)o.click();else{if(e.config.readonly_active)return;e.save_lightbox()}break;case e.keys.edit_cancel:e.cancel_lightbox()}}),e.event(n,"click",function(a){if(a.target.closest(".dhx_lightbox_day_select")||a.target.closest(".dhx_lightbox_month_select")){const i=n.querySelectorAll(".dhx_lightbox_month_select"),r=n.querySelectorAll(".dhx_lightbox_day_select"),o=n.querySelectorAll(".dhx_lightbox_year_select");i.length&&r.length&&o&&i.forEach((l,s)=>{const d=r[s],c=parseInt(l.value,10);let u=parseInt(o[s].value,10);u||(u=new Date(e.getState().date).getFullYear());const f=function(h,p){return new Date(h,p+1,0).getDate()}(u,c),y=f||31;let g=d.value;d.innerHTML="";for(let h=1;h<=y;h++){const p=document.createElement("option");p.value=h,p.textContent=h,d.appendChild(p)}d.value=Math.min(g,y)})}})},e.setLightboxSize=function(){},e._init_dnd_events=function(){e.event(t(),"mousemove",e._move_while_dnd),e.event(t(),"mouseup",e._finish_dnd),e._init_dnd_events=function(){}},e._move_while_dnd=function(n){if(e._dnd_start_lb){document.dhx_unselectable||(t().classList.add("dhx_unselectable"),document.dhx_unselectable=!0);var a=e.getLightbox(),i=[n.pageX,n.pageY];a.style.top=e._lb_start[1]+i[1]-e._dnd_start_lb[1]+"px",a.style.left=e._lb_start[0]+i[0]-e._dnd_start_lb[0]+"px"}},e._ready_to_dnd=function(n){var a=e.getLightbox();e._lb_start=[a.offsetLeft,a.offsetTop],e._dnd_start_lb=[n.pageX,n.pageY]},e._finish_dnd=function(){e._lb_start&&(e._lb_start=e._dnd_start_lb=!1,t().classList.remove("dhx_unselectable"),document.dhx_unselectable=!1)},e.getLightbox=function(){if(!this._lightbox){var n=document.createElement("div");n.className="dhx_cal_light",e.config.wide_form&&(n.className+=" dhx_cal_light_wide"),e.form_blocks.recurring&&(n.className+=" dhx_cal_light_rec"),e.config.rtl&&(n.className+=" dhx_cal_light_rtl"),e.config.responsive_lightbox&&(n.className+=" dhx_cal_light_responsive"),n.style.visibility="hidden";var a=this._lightbox_template,i=this.config.buttons_right;a+="<div class='dhx_cal_lcontrols'>";for(var r=0;r<i.length;r++)a+="<div "+this._waiAria.lightboxButtonAttrString(i[r])+" data-action='"+i[r]+"' class='dhx_btn_set dhx_"+(e.config.rtl?"right":"left")+"_btn_set "+i[r]+"_set'><div class='dhx_btn_inner "+i[r]+"'></div><div>"+e.locale.labels[i[r]]+"</div></div>";i=this.config.buttons_left;var o=e.config.rtl;for(r=0;r<i.length;r++)a+="<div class='dhx_cal_lcontrols_push_right'></div>",a+="<div "+this._waiAria.lightboxButtonAttrString(i[r])+" data-action='"+i[r]+"' class='dhx_btn_set dhx_"+(o?"left":"right")+"_btn_set "+i[r]+"_set'><div class='dhx_btn_inner "+i[r]+"'></div><div>"+e.locale.labels[i[r]]+"</div></div>";a+="</div>",a+="</div>",n.innerHTML=a,e.config.drag_lightbox&&(e.event(n.firstChild,"mousedown",e._ready_to_dnd),e.event(n.firstChild,"selectstart",function(y){return y.preventDefault(),!1}),n.firstChild.style.cursor="move",e._init_dnd_events()),this._waiAria.lightboxAttr(n),this.show_cover(),this._cover.insertBefore(n,this._cover.firstChild),this._lightbox=n;var l=this.config.lightbox.sections;for(a="",r=0;r<l.length;r++){var s=this.form_blocks[l[r].type];if(s){l[r].id="area_"+this.uid();var d="";l[r].button&&(d="<div "+e._waiAria.lightboxSectionButtonAttrString(this.locale.labels["button_"+l[r].button])+" class='dhx_custom_button' data-section-index='"+r+"' index='"+r+"'><div class='dhx_custom_button_"+l[r].button+"'></div><div>"+this.locale.labels["button_"+l[r].button]+"</div></div>"),this.config.wide_form&&(a+="<div class='dhx_wrap_section'>");var c=this.locale.labels["section_"+l[r].name];typeof c!="string"&&(c=l[r].name),a+="<div id='"+l[r].id+"' class='dhx_cal_lsection dhx_cal_lsection_"+l[r].name+"'>"+d+"<label>"+c+"</label></div>"+s.render.call(this,l[r]),a+="</div>"}}var u=n.getElementsByTagName("div");for(r=0;r<u.length;r++){var f=u[r];if(e._getClassName(f)=="dhx_cal_larea"){f.innerHTML=a;break}}e._bindLightboxLabels(l),this.setLightboxSize(),this._init_lightbox_events(this),n.style.visibility="visible"}return this._lightbox},e._bindLightboxLabels=function(n){for(var a=0;a<n.length;a++){var i=n[a];if(i.id&&e._lightbox.querySelector(`#${i.id}`)){for(var r=e._lightbox.querySelector(`#${i.id}`).querySelector("label"),o=e._get_lightbox_section_node(i);o&&!o.querySelector;)o=o.nextSibling;var l=!0;if(o){var s=o.querySelector("input, select, textarea");s&&(i.inputId=s.id||"input_"+e.uid(),s.id||(s.id=i.inputId),r.setAttribute("for",i.inputId),l=!1)}l&&e.form_blocks[i.type].focus&&e.event(r,"click",function(d){return function(){var c=e.form_blocks[d.type],u=e._get_lightbox_section_node(d);c&&c.focus&&c.focus.call(e,u)}}(i))}}},e.attachEvent("onEventIdChange",function(n,a){this._lightbox_id==n&&(this._lightbox_id=a)}),e._lightbox_template=`<div class='dhx_cal_ltitle'><div class="dhx_cal_ltitle_descr"><span class='dhx_mark'>&nbsp;</span><span class='dhx_time'></span><span class='dhx_title'></span>
</div>
<div class="dhx_cal_ltitle_controls">
<a class="dhx_cal_ltitle_close_btn scheduler_icon close"></a>
</div></div><div class='dhx_cal_larea'></div>`}function Vc(e){e._init_touch_events=function(){if((this.config.touch&&(navigator.userAgent.indexOf("Mobile")!=-1||navigator.userAgent.indexOf("iPad")!=-1||navigator.userAgent.indexOf("Android")!=-1||navigator.userAgent.indexOf("Touch")!=-1)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&(this.xy.scroll_width=0,this._mobile=!0),this.config.touch){var t=!0;try{document.createEvent("TouchEvent")}catch{t=!1}t?this._touch_events(["touchmove","touchstart","touchend"],function(n){return n.touches&&n.touches.length>1?null:n.touches[0]?{target:n.target,pageX:n.touches[0].pageX,pageY:n.touches[0].pageY,clientX:n.touches[0].clientX,clientY:n.touches[0].clientY}:n},function(){return!1}):window.PointerEvent||window.navigator.pointerEnabled?this._touch_events(["pointermove","pointerdown","pointerup"],function(n){return n.pointerType=="mouse"?null:n},function(n){return!n||n.pointerType=="mouse"}):window.navigator.msPointerEnabled&&this._touch_events(["MSPointerMove","MSPointerDown","MSPointerUp"],function(n){return n.pointerType==n.MSPOINTER_TYPE_MOUSE?null:n},function(n){return!n||n.pointerType==n.MSPOINTER_TYPE_MOUSE})}},e._touch_events=function(t,n,a){var i,r,o,l,s,d,c=0;function u(y,g,h){e.event(y,g,function(p){return!!e._is_lightbox_open()||(a(p)?void 0:h(p))},{passive:!1})}function f(y){a(y)||(e._hide_global_tip(),l&&(e._on_mouse_up(n(y)),e._temp_touch_block=!1),e._drag_id=null,e._drag_mode=null,e._drag_pos=null,e._pointerDragId=null,clearTimeout(o),l=d=!1,s=!0)}u(document.body,t[0],function(y){if(!a(y)){var g=n(y);if(g){if(l)return function(h){if(!a(h)){var p=e.getState().drag_mode,v=!!e.matrix&&e.matrix[e._mode],x=e.render_view_data;p=="create"&&v&&(e.render_view_data=function(){for(var S=e.getState().drag_id,O=e.getEvent(S),N=v.y_property,M=e.getEvents(O.start_date,O.end_date),A=0;A<M.length;A++)M[A][N]!=O[N]&&(M.splice(A,1),A--);O._sorder=M.length-1,O._count=M.length,this.render_data([O],e.getState().mode)}),e._on_mouse_move(h),p=="create"&&v&&(e.render_view_data=x),h.preventDefault&&h.preventDefault(),h.cancelBubble=!0}}(g),y.preventDefault&&y.preventDefault(),y.cancelBubble=!0,e._update_global_tip(),!1;r=n(y),d&&(r?(i.target!=r.target||Math.abs(i.pageX-r.pageX)>5||Math.abs(i.pageY-r.pageY)>5)&&(s=!0,clearTimeout(o)):s=!0)}}}),u(this._els.dhx_cal_data[0],"touchcancel",f),u(this._els.dhx_cal_data[0],"contextmenu",function(y){if(!a(y))return d?(y&&y.preventDefault&&y.preventDefault(),y.cancelBubble=!0,!1):void 0}),u(this._obj,t[1],function(y){var g;if(document&&document.body&&document.body.classList.add("dhx_cal_touch_active"),!a(y))if(e._pointerDragId=y.pointerId,l=s=!1,d=!0,g=r=n(y)){var h=new Date;if(!s&&!l&&h-c<250)return e._click.dhx_cal_data(g),window.setTimeout(function(){e.$destroyed||e._on_dbl_click(g)},50),y.preventDefault&&y.preventDefault(),y.cancelBubble=!0,e._block_next_stop=!0,!1;if(c=h,!s&&!l&&e.config.touch_drag){var p=e._locate_event(document.activeElement),v=e._locate_event(g.target),x=i?e._locate_event(i.target):null;if(p&&v&&p==v&&p!=x)return y.preventDefault&&y.preventDefault(),y.cancelBubble=!0,e._ignore_next_click=!1,e._click.dhx_cal_data(g),i=g,!1;o=setTimeout(function(){if(!e.$destroyed){l=!0;var S=i.target,O=e._getClassName(S);S&&O.indexOf("dhx_body")!=-1&&(S=S.previousSibling),e._on_mouse_down(i,S),e._drag_mode&&e._drag_mode!="create"&&e.for_rendered(e._drag_id,function(N,M){N.style.display="none",e._rendered.splice(M,1)}),e.config.touch_tip&&e._show_global_tip(),e.updateEvent(e._drag_id)}},e.config.touch_drag),i=g}}else s=!0}),u(this._els.dhx_cal_data[0],t[2],function(y){if(document&&document.body&&document.body.classList.remove("dhx_cal_touch_active"),!a(y))return e.config.touch_swipe_dates&&!l&&function(g,h,p,v){if(!g||!h)return!1;for(var x=g.target;x&&x!=e._obj;)x=x.parentNode;if(x!=e._obj||e.matrix&&e.matrix[e.getState().mode]&&e.matrix[e.getState().mode].scrollable)return!1;var S=Math.abs(g.pageY-h.pageY),O=Math.abs(g.pageX-h.pageX);return S<v&&O>p&&(!S||O/S>3)&&(g.pageX>h.pageX?e._click.dhx_cal_next_button():e._click.dhx_cal_prev_button(),!0)}(i,r,200,100)&&(e._block_next_stop=!0),l&&(e._ignore_next_click=!0,setTimeout(function(){e._ignore_next_click=!1},100)),f(y),e._block_next_stop?(e._block_next_stop=!1,y.preventDefault&&y.preventDefault(),y.cancelBubble=!0,!1):void 0}),e.event(document.body,t[2],f)},e._show_global_tip=function(){e._hide_global_tip();var t=e._global_tip=document.createElement("div");t.className="dhx_global_tip",e._update_global_tip(1),document.body.appendChild(t)},e._update_global_tip=function(t){var n=e._global_tip;if(n){var a="";if(e._drag_id&&!t){var i=e.getEvent(e._drag_id);i&&(a="<div>"+(i._timed?e.templates.event_header(i.start_date,i.end_date,i):e.templates.day_date(i.start_date,i.end_date,i))+"</div>")}e._drag_mode=="create"||e._drag_mode=="new-size"?n.innerHTML=(e.locale.labels.drag_to_create||"Drag to create")+a:n.innerHTML=(e.locale.labels.drag_to_move||"Drag to move")+a}},e._hide_global_tip=function(){var t=e._global_tip;t&&t.parentNode&&(t.parentNode.removeChild(t),e._global_tip=0)}}function $c(e){var t,n;function a(){if(e._is_material_skin())return!0;if(n!==void 0)return n;var l=document.createElement("div");l.style.position="absolute",l.style.left="-9999px",l.style.top="-9999px",l.innerHTML="<div class='dhx_cal_container'><div class='dhx_cal_data'><div class='dhx_cal_event'><div class='dhx_body'></div></div><div>",document.body.appendChild(l);var s=window.getComputedStyle(l.querySelector(".dhx_body")).getPropertyValue("box-sizing");document.body.removeChild(l),(n=s==="border-box")||setTimeout(function(){n=void 0},1e3)}function i(){if(!e._is_material_skin()&&!e._border_box_events()){var l=n;n=void 0,t=void 0,l!==a()&&e.$container&&e.getState().mode&&e.setCurrentView()}}function r(l){var s=l.getMinutes();return s=s<10?"0"+s:s,"<span class='dhx_scale_h'>"+l.getHours()+"</span><span class='dhx_scale_m'>&nbsp;"+s+"</span>"}e._addThemeClass=function(){document.documentElement.setAttribute("data-scheduler-theme",e.skin)},e._skin_settings={fix_tab_position:[1,0],use_select_menu_space:[1,0],wide_form:[1,0],hour_size_px:[44,42],displayed_event_color:["#ff4a4a","ffc5ab"],displayed_event_text_color:["#ffef80","7e2727"]},e._skin_xy={lightbox_additional_height:[90,50],nav_height:[59,22],bar_height:[24,20]},e._is_material_skin=function(){return e.skin?(e.skin+"").indexOf("material")>-1:function(){if(t===void 0){var l=document.createElement("div");l.style.position="absolute",l.style.left="-9999px",l.style.top="-9999px",l.innerHTML="<div class='dhx_cal_container'><div class='dhx_cal_scale_placeholder'></div><div>",document.body.appendChild(l);var s=window.getComputedStyle(l.querySelector(".dhx_cal_scale_placeholder")).getPropertyValue("position");t=s==="absolute",setTimeout(function(){t=null,l&&l.parentNode&&l.parentNode.removeChild(l)},500)}return t}()},e._build_skin_info=function(){(function(){const y=e.$container;clearInterval(o),y&&(o=setInterval(()=>{const g=getComputedStyle(y).getPropertyValue("--dhx-scheduler-theme");g&&g!==e.skin&&e.setSkin(g)},100))})();const l=getComputedStyle(this.$container),s=l.getPropertyValue("--dhx-scheduler-theme");let d,c=!!s,u={},f=!1;if(c){d=s;for(let y in e.xy)u[y]=l.getPropertyValue(`--dhx-scheduler-xy-${y}`);u.hour_size_px=l.getPropertyValue("--dhx-scheduler-config-hour_size_px"),u.wide_form=l.getPropertyValue("--dhx-scheduler-config-form_wide")}else d=function(){for(var y=document.getElementsByTagName("link"),g=0;g<y.length;g++){var h=y[g].href.match("dhtmlxscheduler_([a-z]+).css");if(h)return h[1]}}(),f=e._is_material_skin();if(e._theme_info={theme:d,cssVarTheme:c,oldMaterialTheme:f,values:u},e._theme_info.cssVarTheme){const y=this._theme_info.values;for(let g in e.xy)isNaN(parseInt(y[g]))||(e.xy[g]=parseInt(y[g]))}},e.event(window,"DOMContentLoaded",i),e.event(window,"load",i),e._border_box_events=function(){return a()},e._configure=function(l,s,d){for(var c in s)l[c]===void 0&&(l[c]=s[c][d])},e.setSkin=function(l){this.skin=l,e._addThemeClass(),e.$container&&(this._skin_init(),this.render())};let o=null;e.attachEvent("onDestroy",function(){clearInterval(o)}),e._skin_init=function(){this._build_skin_info(),this.skin||(this.skin=this._theme_info.theme),e._addThemeClass(),e.skin==="flat"?e.templates.hour_scale=r:e.templates.hour_scale===r&&(e.templates.hour_scale=e.date.date_to_str(e.config.hour_date)),e.attachEvent("onTemplatesReady",function(){var l=e.date.date_to_str("%d");e.templates._old_month_day||(e.templates._old_month_day=e.templates.month_day);var s=e.templates._old_month_day;e.templates.month_day=function(d){if(this._mode=="month"){var c=l(d);return d.getDate()==1&&(c=e.locale.date.month_full[d.getMonth()]+" "+c),+d==+e.date.date_part(this._currentDate())&&(c=e.locale.labels.dhx_cal_today_button+" "+c),c}return s.call(this,d)},e.config.fix_tab_position&&(e._els.dhx_cal_navline[0].querySelectorAll("[data-tab]").forEach(d=>{switch(d.getAttribute("data-tab")||d.getAttribute("name")){case"day":case"day_tab":d.classList.add("dhx_cal_tab_first"),d.classList.add("dhx_cal_tab_segmented");break;case"week":case"week_tab":d.classList.add("dhx_cal_tab_segmented");break;case"month":case"month_tab":d.classList.add("dhx_cal_tab_last"),d.classList.add("dhx_cal_tab_segmented");break;default:d.classList.add("dhx_cal_tab_standalone")}}),function(d){if(e.config.header)return;const c=Array.from(d.querySelectorAll(".dhx_cal_tab")),u=["day","week","month"].map(y=>c.find(g=>g.getAttribute("data-tab")===y)).filter(y=>y!==void 0);let f=c.length>0?c[0]:null;u.reverse().forEach(y=>{d.insertBefore(y,f),f=y})}(e._els.dhx_cal_navline[0]))},{once:!0})}}function Hc(e,t){this.$scheduler=e,this.$dp=t,this._dataProcessorHandlers=[],this.attach=function(){var n=this.$dp,a=this.$scheduler;this._dataProcessorHandlers.push(a.attachEvent("onEventAdded",function(i){!this._loading&&this._validId(i)&&n.setUpdated(i,!0,"inserted")})),this._dataProcessorHandlers.push(a.attachEvent("onConfirmedBeforeEventDelete",function(i){if(this._validId(i)){var r=n.getState(i);return r=="inserted"||this._new_event?(n.setUpdated(i,!1),!0):r!="deleted"&&(r=="true_deleted"||(n.setUpdated(i,!0,"deleted"),!1))}})),this._dataProcessorHandlers.push(a.attachEvent("onEventChanged",function(i){!this._loading&&this._validId(i)&&n.setUpdated(i,!0,"updated")})),this._dataProcessorHandlers.push(a.attachEvent("onClearAll",function(){n._in_progress={},n._invalid={},n.updatedRows=[],n._waitMode=0})),n.attachEvent("insertCallback",a._update_callback),n.attachEvent("updateCallback",a._update_callback),n.attachEvent("deleteCallback",function(i,r){a.getEvent(r)?(a.setUserData(r,this.action_param,"true_deleted"),a.deleteEvent(r)):a._add_rec_marker&&a._update_callback(i,r)})},this.detach=function(){for(var n in this._dataProcessorHandlers){var a=this._dataProcessorHandlers[n];this.$scheduler.detachEvent(a)}this._dataProcessorHandlers=[]}}function Vr(e){return this.serverProcessor=e,this.action_param="!nativeeditor_status",this.object=null,this.updatedRows=[],this.autoUpdate=!0,this.updateMode="cell",this._tMode="GET",this._headers=null,this._payload=null,this.post_delim="_",this._waitMode=0,this._in_progress={},this._invalid={},this.messages=[],this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"},this.enableUTFencoding(!0),di(this),this}function Fc(e){var t="data-dhxbox",n=null;function a(v,x,S){var O=v.callback;O&&O(x,S),g.hide(v.box),n=v.box=null}function i(v){if(n){var x=v.which||v.keyCode,S=!1;if(h.keyboard){if(x==13||x==32){var O=v.target||v.srcElement;vt.getClassName(O).indexOf("scheduler_popup_button")>-1&&O.click?O.click():(a(n,!0),S=!0)}x==27&&(a(n,!1),S=!0)}return S?(v.preventDefault&&v.preventDefault(),!(v.cancelBubble=!0)):void 0}}function r(v){r.cover||(r.cover=document.createElement("div"),e.event(r.cover,"keydown",i),r.cover.className="dhx_modal_cover",document.body.appendChild(r.cover)),r.cover.style.display=v?"inline-block":"none"}function o(v,x,S){var O=e._waiAria.messageButtonAttrString(v),N=(x||"").toLowerCase().replace(/ /g,"_");return`<div ${O} class='scheduler_popup_button dhtmlx_popup_button ${`scheduler_${N}_button dhtmlx_${N}_button`}' data-result='${S}' result='${S}' ><div>${v}</div></div>`}function l(){for(var v=[].slice.apply(arguments,[0]),x=0;x<v.length;x++)if(v[x])return v[x]}function s(v,x,S){var O=v.tagName?v:function(A,m,b){var k=document.createElement("div"),E=Xe.uid();e._waiAria.messageModalAttr(k,E),k.className=" scheduler_modal_box dhtmlx_modal_box scheduler-"+A.type+" dhtmlx-"+A.type,k.setAttribute(t,1);var D="";if(A.width&&(k.style.width=A.width),A.height&&(k.style.height=A.height),A.title&&(D+='<div class="scheduler_popup_title dhtmlx_popup_title">'+A.title+"</div>"),D+='<div class="scheduler_popup_text dhtmlx_popup_text" id="'+E+'"><span>'+(A.content?"":A.text)+'</span></div><div  class="scheduler_popup_controls dhtmlx_popup_controls">',m&&(D+=o(l(A.ok,e.locale.labels.message_ok,"OK"),"ok",!0)),b&&(D+=o(l(A.cancel,e.locale.labels.message_cancel,"Cancel"),"cancel",!1)),A.buttons)for(var C=0;C<A.buttons.length;C++){var R=A.buttons[C];D+=typeof R=="object"?o(R.label,R.css||"scheduler_"+R.label.toLowerCase()+"_button dhtmlx_"+R.label.toLowerCase()+"_button",R.value||C):o(R,R,C)}if(D+="</div>",k.innerHTML=D,A.content){var P=A.content;typeof P=="string"&&(P=document.getElementById(P)),P.style.display=="none"&&(P.style.display=""),k.childNodes[A.title?1:0].appendChild(P)}return e.event(k,"click",function(F){var z=F.target||F.srcElement;if(z.className||(z=z.parentNode),vt.closest(z,".scheduler_popup_button")){var $=z.getAttribute("data-result");a(A,$=$=="true"||$!="false"&&$,F)}}),A.box=k,(m||b)&&(n=A),k}(v,x,S);v.hidden||r(!0),document.body.appendChild(O);var N=Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-O.offsetWidth)/2)),M=Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-O.offsetHeight)/2));return v.position=="top"?O.style.top="-3px":O.style.top=M+"px",O.style.left=N+"px",e.event(O,"keydown",i),g.focus(O),v.hidden&&g.hide(O),e.callEvent("onMessagePopup",[O]),O}function d(v){return s(v,!0,!1)}function c(v){return s(v,!0,!0)}function u(v){return s(v)}function f(v,x,S){return typeof v!="object"&&(typeof x=="function"&&(S=x,x=""),v={text:v,type:x,callback:S}),v}function y(v,x,S,O,N){return typeof v!="object"&&(v={text:v,type:x,expire:S,id:O,callback:N}),v.id=v.id||Xe.uid(),v.expire=v.expire||h.expire,v}e.event(document,"keydown",i,!0);var g=function(){var v=f.apply(this,arguments);return v.type=v.type||"alert",u(v)};g.hide=function(v){for(;v&&v.getAttribute&&!v.getAttribute(t);)v=v.parentNode;v&&(v.parentNode.removeChild(v),r(!1),e.callEvent("onAfterMessagePopup",[v]))},g.focus=function(v){setTimeout(function(){var x=vt.getFocusableNodes(v);x.length&&x[0].focus&&x[0].focus()},1)};var h=function(v,x,S,O){switch((v=y.apply(this,arguments)).type=v.type||"info",v.type.split("-")[0]){case"alert":return d(v);case"confirm":return c(v);case"modalbox":return u(v);default:return function(N){h.area||(h.area=document.createElement("div"),h.area.className="scheduler_message_area dhtmlx_message_area",h.area.style[h.position]="5px",document.body.appendChild(h.area)),h.hide(N.id);var M=document.createElement("div");return M.innerHTML="<div>"+N.text+"</div>",M.className="scheduler-info dhtmlx-info scheduler-"+N.type+" dhtmlx-"+N.type,e.event(M,"click",function(A){N.callback&&N.callback.call(this,A),h.hide(N.id),N=null}),e._waiAria.messageInfoAttr(M),h.position=="bottom"&&h.area.firstChild?h.area.insertBefore(M,h.area.firstChild):h.area.appendChild(M),N.expire>0&&(h.timers[N.id]=window.setTimeout(function(){h&&h.hide(N.id)},N.expire)),h.pull[N.id]=M,M=null,N.id}(v)}};h.seed=new Date().valueOf(),h.uid=Xe.uid,h.expire=4e3,h.keyboard=!0,h.position="top",h.pull={},h.timers={},h.hideAll=function(){for(var v in h.pull)h.hide(v)},h.hide=function(v){var x=h.pull[v];x&&x.parentNode&&(window.setTimeout(function(){x.parentNode.removeChild(x),x=null},2e3),x.className+=" hidden",h.timers[v]&&window.clearTimeout(h.timers[v]),delete h.pull[v])};var p=[];return e.attachEvent("onMessagePopup",function(v){p.push(v)}),e.attachEvent("onAfterMessagePopup",function(v){for(var x=0;x<p.length;x++)p[x]===v&&(p.splice(x,1),x--)}),e.attachEvent("onDestroy",function(){r.cover&&r.cover.parentNode&&r.cover.parentNode.removeChild(r.cover);for(var v=0;v<p.length;v++)p[v].parentNode&&p[v].parentNode.removeChild(p[v]);p=null,h.area&&h.area.parentNode&&h.area.parentNode.removeChild(h.area),h=null}),{alert:function(){var v=f.apply(this,arguments);return v.type=v.type||"confirm",d(v)},confirm:function(){var v=f.apply(this,arguments);return v.type=v.type||"alert",c(v)},message:h,modalbox:g}}Vr.prototype={setTransactionMode:function(e,t){typeof e=="object"?(this._tMode=e.mode||this._tMode,e.headers!==void 0&&(this._headers=e.headers),e.payload!==void 0&&(this._payload=e.payload),this._tSend=!!t):(this._tMode=e,this._tSend=t),this._tMode=="REST"&&(this._tSend=!1,this._endnm=!0),this._tMode==="JSON"||this._tMode==="REST-JSON"?(this._tSend=!1,this._endnm=!0,this._serializeAsJson=!0,this._headers=this._headers||{},this._headers["Content-Type"]="application/json"):this._headers&&!this._headers["Content-Type"]&&(this._headers["Content-Type"]="application/x-www-form-urlencoded"),this._tMode==="CUSTOM"&&(this._tSend=!1,this._endnm=!0,this._router=e.router)},escape:function(e){return this._utf?encodeURIComponent(e):escape(e)},enableUTFencoding:function(e){this._utf=!!e},setDataColumns:function(e){this._columns=typeof e=="string"?e.split(","):e},getSyncState:function(){return!this.updatedRows.length},enableDataNames:function(e){this._endnm=!!e},enablePartialDataSend:function(e){this._changed=!!e},setUpdateMode:function(e,t){this.autoUpdate=e=="cell",this.updateMode=e,this.dnd=t},ignore:function(e,t){this._silent_mode=!0,e.call(t||window),this._silent_mode=!1},setUpdated:function(e,t,n){if(!this._silent_mode){var a=this.findRow(e);n=n||"updated";var i=this.$scheduler.getUserData(e,this.action_param);i&&n=="updated"&&(n=i),t?(this.set_invalid(e,!1),this.updatedRows[a]=e,this.$scheduler.setUserData(e,this.action_param,n),this._in_progress[e]&&(this._in_progress[e]="wait")):this.is_invalid(e)||(this.updatedRows.splice(a,1),this.$scheduler.setUserData(e,this.action_param,"")),this.markRow(e,t,n),t&&this.autoUpdate&&this.sendData(e)}},markRow:function(e,t,n){var a="",i=this.is_invalid(e);if(i&&(a=this.styles[i],t=!0),this.callEvent("onRowMark",[e,t,n,i])&&(a=this.styles[t?n:"clear"]+a,this.$scheduler[this._methods[0]](e,a),i&&i.details)){a+=this.styles[i+"_cell"];for(var r=0;r<i.details.length;r++)i.details[r]&&this.$scheduler[this._methods[1]](e,r,a)}},getActionByState:function(e){return e==="inserted"?"create":e==="updated"?"update":e==="deleted"?"delete":"update"},getState:function(e){return this.$scheduler.getUserData(e,this.action_param)},is_invalid:function(e){return this._invalid[e]},set_invalid:function(e,t,n){n&&(t={value:t,details:n,toString:function(){return this.value.toString()}}),this._invalid[e]=t},checkBeforeUpdate:function(e){return!0},sendData:function(e){return this.$scheduler.editStop&&this.$scheduler.editStop(),e===void 0||this._tSend?this.sendAllData():!this._in_progress[e]&&(this.messages=[],!(!this.checkBeforeUpdate(e)&&this.callEvent("onValidationError",[e,this.messages]))&&void this._beforeSendData(this._getRowData(e),e))},_beforeSendData:function(e,t){if(!this.callEvent("onBeforeUpdate",[t,this.getState(t),e]))return!1;this._sendData(e,t)},serialize:function(e,t){if(this._serializeAsJson)return this._serializeAsJSON(e);if(typeof e=="string")return e;if(t!==void 0)return this.serialize_one(e,"");var n=[],a=[];for(var i in e)e.hasOwnProperty(i)&&(n.push(this.serialize_one(e[i],i+this.post_delim)),a.push(i));return n.push("ids="+this.escape(a.join(","))),this.$scheduler.security_key&&n.push("dhx_security="+this.$scheduler.security_key),n.join("&")},serialize_one:function(e,t){if(typeof e=="string")return e;var n=[],a="";for(var i in e)if(e.hasOwnProperty(i)){if((i=="id"||i==this.action_param)&&this._tMode=="REST")continue;a=typeof e[i]=="string"||typeof e[i]=="number"?e[i]:JSON.stringify(e[i]),n.push(this.escape((t||"")+i)+"="+this.escape(a))}return n.join("&")},_applyPayload:function(e){var t=this.$scheduler.ajax;if(this._payload)for(var n in this._payload)e=e+t.urlSeparator(e)+this.escape(n)+"="+this.escape(this._payload[n]);return e},_sendData:function(e,t){if(e){if(!this.callEvent("onBeforeDataSending",t?[t,this.getState(t),e]:[null,null,e]))return!1;t&&(this._in_progress[t]=new Date().valueOf());var n=this,a=this.$scheduler.ajax;if(this._tMode!=="CUSTOM"){var i,r={callback:function(g){var h=[];if(t)h.push(t);else if(e)for(var p in e)h.push(p);return n.afterUpdate(n,g,h)},headers:n._headers},o=this.serverProcessor+(this._user?a.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.$scheduler.getUserData(0,"version")].join("&"):""),l=this._applyPayload(o);switch(this._tMode){case"GET":i=this._cleanupArgumentsBeforeSend(e),r.url=l+a.urlSeparator(l)+this.serialize(i,t),r.method="GET";break;case"POST":i=this._cleanupArgumentsBeforeSend(e),r.url=l,r.method="POST",r.data=this.serialize(i,t);break;case"JSON":i={};var s=this._cleanupItemBeforeSend(e);for(var d in s)d!==this.action_param&&d!=="id"&&d!=="gr_id"&&(i[d]=s[d]);r.url=l,r.method="POST",r.data=JSON.stringify({id:t,action:e[this.action_param],data:i});break;case"REST":case"REST-JSON":switch(l=o.replace(/(&|\?)editing=true/,""),i="",this.getState(t)){case"inserted":r.method="POST",r.data=this.serialize(e,t);break;case"deleted":r.method="DELETE",l=l+(l.slice(-1)==="/"?"":"/")+t;break;default:r.method="PUT",r.data=this.serialize(e,t),l=l+(l.slice(-1)==="/"?"":"/")+t}r.url=this._applyPayload(l)}return this._waitMode++,a.query(r)}{var c=this.getState(t),u=this.getActionByState(c),f=function(h){var p=c;if(h&&h.responseText&&h.setRequestHeader){h.status!==200&&(p="error");try{h=JSON.parse(h.responseText)}catch{}}p=p||"updated";var v=t,x=t;h&&(p=h.action||p,v=h.sid||v,x=h.id||h.tid||x),n.afterUpdateCallback(v,x,p,h)};const g="event";var y;if(this._router instanceof Function)y=this._router(g,u,e,t);else switch(c){case"inserted":y=this._router[g].create(e);break;case"deleted":y=this._router[g].delete(t);break;default:y=this._router[g].update(e,t)}if(y){if(!y.then&&y.id===void 0&&y.tid===void 0&&y.action===void 0)throw new Error("Incorrect router return value. A Promise or a response object is expected");y.then?y.then(f).catch(function(h){h&&h.action?f(h):f({action:"error",value:h})}):f(y)}else f(null)}}},sendAllData:function(){if(this.updatedRows.length&&this.updateMode!=="off"){this.messages=[];var e=!0;if(this._forEachUpdatedRow(function(t){e=e&&this.checkBeforeUpdate(t)}),!e&&!this.callEvent("onValidationError",["",this.messages]))return!1;this._tSend?this._sendData(this._getAllData()):this._forEachUpdatedRow(function(t){if(!this._in_progress[t]){if(this.is_invalid(t))return;this._beforeSendData(this._getRowData(t),t)}})}},_getAllData:function(e){var t={},n=!1;return this._forEachUpdatedRow(function(a){if(!this._in_progress[a]&&!this.is_invalid(a)){var i=this._getRowData(a);this.callEvent("onBeforeUpdate",[a,this.getState(a),i])&&(t[a]=i,n=!0,this._in_progress[a]=new Date().valueOf())}}),n?t:null},findRow:function(e){var t=0;for(t=0;t<this.updatedRows.length&&e!=this.updatedRows[t];t++);return t},defineAction:function(e,t){this._uActions||(this._uActions={}),this._uActions[e]=t},afterUpdateCallback:function(e,t,n,a){if(this.$scheduler){var i=e,r=n!=="error"&&n!=="invalid";if(r||this.set_invalid(e,n),this._uActions&&this._uActions[n]&&!this._uActions[n](a))return delete this._in_progress[i];this._in_progress[i]!=="wait"&&this.setUpdated(e,!1);var o=e;switch(n){case"inserted":case"insert":t!=e&&(this.setUpdated(e,!1),this.$scheduler[this._methods[2]](e,t),e=t);break;case"delete":case"deleted":return this.$scheduler.setUserData(e,this.action_param,"true_deleted"),this.$scheduler[this._methods[3]](e,t),delete this._in_progress[i],this.callEvent("onAfterUpdate",[e,n,t,a])}this._in_progress[i]!=="wait"?(r&&this.$scheduler.setUserData(e,this.action_param,""),delete this._in_progress[i]):(delete this._in_progress[i],this.setUpdated(t,!0,this.$scheduler.getUserData(e,this.action_param))),this.callEvent("onAfterUpdate",[o,n,t,a])}},_errorResponse:function(e,t){return this.$scheduler&&this.$scheduler.callEvent&&this.$scheduler.callEvent("onSaveError",[t,e.xmlDoc]),this.cleanUpdate(t)},_setDefaultTransactionMode:function(){this.serverProcessor&&(this.setTransactionMode("POST",!0),this.serverProcessor+=(this.serverProcessor.indexOf("?")!==-1?"&":"?")+"editing=true",this._serverProcessor=this.serverProcessor)},afterUpdate:function(e,t,n){var a=this.$scheduler.ajax;if(t.xmlDoc.status===200){var i;try{i=JSON.parse(t.xmlDoc.responseText)}catch{t.xmlDoc.responseText.length||(i={})}if(i){var r=i.action||this.getState(n)||"updated",o=i.sid||n[0],l=i.tid||n[0];return e.afterUpdateCallback(o,l,r,i),void e.finalizeUpdate()}var s=a.xmltop("data",t.xmlDoc);if(!s)return this._errorResponse(t,n);var d=a.xpath("//data/action",s);if(!d.length)return this._errorResponse(t,n);for(var c=0;c<d.length;c++){var u=d[c];r=u.getAttribute("type"),o=u.getAttribute("sid"),l=u.getAttribute("tid"),e.afterUpdateCallback(o,l,r,u)}e.finalizeUpdate()}else this._errorResponse(t,n)},cleanUpdate:function(e){if(e)for(var t=0;t<e.length;t++)delete this._in_progress[e[t]]},finalizeUpdate:function(){this._waitMode&&this._waitMode--,this.callEvent("onAfterUpdateFinish",[]),this.updatedRows.length||this.callEvent("onFullSync",[])},init:function(e){if(!this._initialized){this.$scheduler=e,this.$scheduler._dp_init&&this.$scheduler._dp_init(this),this._setDefaultTransactionMode(),this._methods=this._methods||["_set_event_text_style","","_dp_change_event_id","_dp_hook_delete"],function(n,a){n._validId=function(i){return!this._is_virtual_event||!this._is_virtual_event(i)},n.setUserData=function(i,r,o){if(i){var l=this.getEvent(i);l&&(l[r]=o)}else this._userdata[r]=o},n.getUserData=function(i,r){if(i){var o=this.getEvent(i);return o?o[r]:null}return this._userdata[r]},n._set_event_text_style=function(i,r){if(n.getEvent(i)){this.for_rendered(i,function(l){l.style.cssText+=";"+r});var o=this.getEvent(i);o._text_style=r,this.event_updated(o)}},n._update_callback=function(i,r){var o=n._xmlNodeToJSON(i.firstChild);o.rec_type=="none"&&(o.rec_pattern="none"),o.text=o.text||o._tagvalue,o.start_date=n._helpers.parseDate(o.start_date),o.end_date=n._helpers.parseDate(o.end_date),n.addEvent(o),n._add_rec_marker&&n.setCurrentView()},n._dp_change_event_id=function(i,r){n.getEvent(i)&&n.changeEventId(i,r)},n._dp_hook_delete=function(i,r){if(n.getEvent(i))return r&&i!=r&&(this.getUserData(i,a.action_param)=="true_deleted"&&this.setUserData(i,a.action_param,"updated"),this.changeEventId(i,r)),this.deleteEvent(r,!0)},n.setDp=function(){this._dp=a},n.setDp()}(this.$scheduler,this);var t=new Hc(this.$scheduler,this);t.attach(),this.attachEvent("onDestroy",function(){delete this._getRowData,delete this.$scheduler._dp,delete this.$scheduler._dataprocessor,delete this.$scheduler._set_event_text_style,delete this.$scheduler._dp_change_event_id,delete this.$scheduler._dp_hook_delete,delete this.$scheduler,t.detach()}),this.$scheduler.callEvent("onDataProcessorReady",[this]),this._initialized=!0,e._dataprocessor=this}},setOnAfterUpdate:function(e){this.attachEvent("onAfterUpdate",e)},setOnBeforeUpdateHandler:function(e){this.attachEvent("onBeforeDataSending",e)},setAutoUpdate:function(e,t){e=e||2e3,this._user=t||new Date().valueOf(),this._need_update=!1,this._update_busy=!1,this.attachEvent("onAfterUpdate",function(i,r,o,l){this.afterAutoUpdate(i,r,o,l)}),this.attachEvent("onFullSync",function(){this.fullSync()});var n=this;let a=_t.setInterval(function(){n.loadUpdate()},e);this.attachEvent("onDestroy",function(){clearInterval(a)})},afterAutoUpdate:function(e,t,n,a){return t!="collision"||(this._need_update=!0,!1)},fullSync:function(){return this._need_update&&(this._need_update=!1,this.loadUpdate()),!0},getUpdates:function(e,t){var n=this.$scheduler.ajax;if(this._update_busy)return!1;this._update_busy=!0,n.get(e,t)},_getXmlNodeValue:function(e){return e.firstChild?e.firstChild.nodeValue:""},loadUpdate:function(){var e=this,t=this.$scheduler.ajax,n=this.$scheduler.getUserData(0,"version"),a=this.serverProcessor+t.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+n].join("&");a=a.replace("editing=true&",""),this.getUpdates(a,function(i){var r=t.xpath("//userdata",i);e.$scheduler.setUserData(0,"version",e._getXmlNodeValue(r[0]));var o=t.xpath("//update",i);if(o.length){e._silent_mode=!0;for(var l=0;l<o.length;l++){var s=o[l].getAttribute("status"),d=o[l].getAttribute("id"),c=o[l].getAttribute("parent");switch(s){case"inserted":this.callEvent("insertCallback",[o[l],d,c]);break;case"updated":this.callEvent("updateCallback",[o[l],d,c]);break;case"deleted":this.callEvent("deleteCallback",[o[l],d,c])}}e._silent_mode=!1}e._update_busy=!1,e=null})},destructor:function(){this.callEvent("onDestroy",[]),this.detachAllEvents(),this.updatedRows=[],this._in_progress={},this._invalid={},this._headers=null,this._payload=null,delete this._initialized},url:function(e){this.serverProcessor=this._serverProcessor=e},_serializeAsJSON:function(e){if(typeof e=="string")return e;var t=this.$scheduler.utils.copy(e);return this._tMode==="REST-JSON"&&(delete t.id,delete t[this.action_param]),JSON.stringify(t)},_cleanupArgumentsBeforeSend:function(e){var t;if(e[this.action_param]===void 0)for(var n in t={},e)t[n]=this._cleanupArgumentsBeforeSend(e[n]);else t=this._cleanupItemBeforeSend(e);return t},_cleanupItemBeforeSend:function(e){var t=null;return e&&(e[this.action_param]==="deleted"?((t={}).id=e.id,t[this.action_param]=e[this.action_param]):t=e),t},_forEachUpdatedRow:function(e){for(var t=this.updatedRows.slice(),n=0;n<t.length;n++){var a=t[n];this.$scheduler.getUserData(a,this.action_param)&&e.call(this,a)}},_prepareItemForJson(e){const t={},n=this.$scheduler,a=n.utils.copy(e);for(let i in a){let r=a[i];i.indexOf("_")!==0&&(r?r.getUTCFullYear?t[i]=n._helpers.formatDate(r):t[i]=typeof r=="object"?this._prepareItemForJson(r):r:r!==void 0&&(t[i]=r))}return t[this.action_param]=n.getUserData(e.id,this.action_param),t},_prepareItemForForm(e){const t={},n=this.$scheduler,a=n.utils.copy(e);for(var i in a){let r=a[i];i.indexOf("_")!==0&&(r?r.getUTCFullYear?t[i]=n._helpers.formatDate(r):t[i]=typeof r=="object"?this._prepareItemForForm(r):r:t[i]="")}return t[this.action_param]=n.getUserData(e.id,this.action_param),t},_prepareDataItem:function(e){return this._serializeAsJson?this._prepareItemForJson(e):this._prepareItemForForm(e)},_getRowData:function(e){var t=this.$scheduler.getEvent(e);return t||(t={id:e}),this._prepareDataItem(t)}};const Uc={date:{month_full:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول"],month_short:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],day_full:["الأحد","الأثنين","ألثلاثاء","الأربعاء","ألحميس","ألجمعة","السبت"],day_short:["احد","اثنين","ثلاثاء","اربعاء","خميس","جمعة","سبت"]},labels:{dhx_cal_today_button:"اليوم",day_tab:"يوم",week_tab:"أسبوع",month_tab:"شهر",new_event:"حدث جديد",icon_save:"اخزن",icon_cancel:"الغاء",icon_details:"تفاصيل",icon_edit:"تحرير",icon_delete:"حذف",confirm_closing:"التغييرات سوف تضيع, هل انت متأكد؟",confirm_deleting:"الحدث سيتم حذفها نهائيا ، هل أنت متأكد؟",section_description:"الوصف",section_time:"الفترة الزمنية",full_day:"طوال اليوم",confirm_recurring:"هل تريد تحرير مجموعة كاملة من الأحداث المتكررة؟",section_recurring:"تكرار الحدث",button_recurring:"تعطيل",button_recurring_open:"تمكين",button_edit_series:"تحرير سلسلة",button_edit_occurrence:"تعديل نسخة",button_edit_occurrence_and_following:"This and following events",grid_tab:"جدول",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"يومي",repeat_radio_week:"أسبوعي",repeat_radio_month:"شهري",repeat_radio_year:"سنوي",repeat_radio_day_type:"كل",repeat_text_day_count:"يوم",repeat_radio_day_type2:"كل يوم عمل",repeat_week:" تكرار كل",repeat_text_week_count:"أسبوع في الأيام التالية:",repeat_radio_month_type:"تكرار",repeat_radio_month_start:"في",repeat_text_month_day:"يوم كل",repeat_text_month_count:"شهر",repeat_text_month_count2_before:"كل",repeat_text_month_count2_after:"شهر",repeat_year_label:"في",select_year_day2:"من",repeat_text_year_day:"يوم",select_year_month:"شهر",repeat_radio_end:"بدون تاريخ انتهاء",repeat_text_occurrences_count:"تكرارات",repeat_radio_end2:"بعد",repeat_radio_end3:"ينتهي في",repeat_never:"أبداً",repeat_daily:"كل يوم",repeat_workdays:"كل يوم عمل",repeat_weekly:"كل أسبوع",repeat_monthly:"كل شهر",repeat_yearly:"كل سنة",repeat_custom:"تخصيص",repeat_freq_day:"يوم",repeat_freq_week:"أسبوع",repeat_freq_month:"شهر",repeat_freq_year:"سنة",repeat_on_date:"في التاريخ",repeat_ends:"ينتهي",month_for_recurring:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],day_for_recurring:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"]}},zc={date:{month_full:["Студзень","Люты","Сакавік","Красавік","Maй","Чэрвень","Ліпень","Жнівень","Верасень","Кастрычнік","Лістапад","Снежань"],month_short:["Студз","Лют","Сак","Крас","Maй","Чэр","Ліп","Жнів","Вер","Каст","Ліст","Снеж"],day_full:["Нядзеля","Панядзелак","Аўторак","Серада","Чацвер","Пятніца","Субота"],day_short:["Нд","Пн","Аўт","Ср","Чцв","Пт","Сб"]},labels:{dhx_cal_today_button:"Сёння",day_tab:"Дзень",week_tab:"Тыдзень",month_tab:"Месяц",new_event:"Новая падзея",icon_save:"Захаваць",icon_cancel:"Адмяніць",icon_details:"Дэталі",icon_edit:"Змяніць",icon_delete:"Выдаліць",confirm_closing:"",confirm_deleting:"Падзея будзе выдалена незваротна, працягнуць?",section_description:"Апісанне",section_time:"Перыяд часу",full_day:"Увесь дзень",confirm_recurring:"Вы хочаце змяніць усю серыю паўтаральных падзей?",section_recurring:"Паўтарэнне",button_recurring:"Адключана",button_recurring_open:"Уключана",button_edit_series:"Рэдагаваць серыю",button_edit_occurrence:"Рэдагаваць асобнік",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Спіс",date:"Дата",description:"Апісанне",year_tab:"Год",week_agenda_tab:"Спіс",grid_tab:"Спic",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Дзень",repeat_radio_week:"Тыдзень",repeat_radio_month:"Месяц",repeat_radio_year:"Год",repeat_radio_day_type:"Кожны",repeat_text_day_count:"дзень",repeat_radio_day_type2:"Кожны працоўны дзень",repeat_week:" Паўтараць кожны",repeat_text_week_count:"тыдзень",repeat_radio_month_type:"Паўтараць",repeat_radio_month_start:"",repeat_text_month_day:" чысла кожнага",repeat_text_month_count:"месяцу",repeat_text_month_count2_before:"кожны ",repeat_text_month_count2_after:"месяц",repeat_year_label:"",select_year_day2:"",repeat_text_year_day:"дзень",select_year_month:"",repeat_radio_end:"Без даты заканчэння",repeat_text_occurrences_count:"паўтораў",repeat_radio_end2:"",repeat_radio_end3:"Да ",repeat_never:"Ніколі",repeat_daily:"Кожны дзень",repeat_workdays:"Кожны працоўны дзень",repeat_weekly:"Кожны тыдзень",repeat_monthly:"Кожны месяц",repeat_yearly:"Кожны год",repeat_custom:"Наладжвальны",repeat_freq_day:"Дзень",repeat_freq_week:"Тыдзень",repeat_freq_month:"Месяц",repeat_freq_year:"Год",repeat_on_date:"На дату",repeat_ends:"Заканчваецца",month_for_recurring:["Студзеня","Лютага","Сакавіка","Красавіка","Мая","Чэрвеня","Ліпeня","Жніўня","Верасня","Кастрычніка","Лістапада","Снежня"],day_for_recurring:["Нядзелю","Панядзелак","Аўторак","Сераду","Чацвер","Пятніцу","Суботу"]}},jc={date:{month_full:["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],month_short:["Gen","Feb","Mar","Abr","Mai","Jun","Jul","Ago","Set","Oct","Nov","Des"],day_full:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte"],day_short:["Dg","Dl","Dm","Dc","Dj","Dv","Ds"]},labels:{dhx_cal_today_button:"Hui",day_tab:"Dia",week_tab:"Setmana",month_tab:"Mes",new_event:"Nou esdeveniment",icon_save:"Guardar",icon_cancel:"Cancel·lar",icon_details:"Detalls",icon_edit:"Editar",icon_delete:"Esborrar",confirm_closing:"",confirm_deleting:"L'esdeveniment s'esborrarà definitivament, continuar ?",section_description:"Descripció",section_time:"Periode de temps",full_day:"Tot el dia",confirm_recurring:"¿Desitja modificar el conjunt d'esdeveniments repetits?",section_recurring:"Repeteixca l'esdeveniment",button_recurring:"Impedit",button_recurring_open:"Permés",button_edit_series:"Edit sèrie",button_edit_occurrence:"Edita Instància",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Agenda",date:"Data",description:"Descripció",year_tab:"Any",week_agenda_tab:"Agenda",grid_tab:"Taula",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Diari",repeat_radio_week:"Setmanal",repeat_radio_month:"Mensual",repeat_radio_year:"Anual",repeat_radio_day_type:"Cada",repeat_text_day_count:"dia",repeat_radio_day_type2:"Cada dia laborable",repeat_week:" Repetir cada",repeat_text_week_count:"setmana els dies següents:",repeat_radio_month_type:"Repetir",repeat_radio_month_start:"El",repeat_text_month_day:"dia cada",repeat_text_month_count:"mes",repeat_text_month_count2_before:"cada",repeat_text_month_count2_after:"mes",repeat_year_label:"El",select_year_day2:"de",repeat_text_year_day:"dia",select_year_month:"mes",repeat_radio_end:"Sense data de finalització",repeat_text_occurrences_count:"ocurrències",repeat_radio_end2:"Després",repeat_radio_end3:"Finalitzar el",repeat_never:"Mai",repeat_daily:"Cada dia",repeat_workdays:"Cada dia laborable",repeat_weekly:"Cada setmana",repeat_monthly:"Cada mes",repeat_yearly:"Cada any",repeat_custom:"Personalitzat",repeat_freq_day:"Dia",repeat_freq_week:"Setmana",repeat_freq_month:"Mes",repeat_freq_year:"Any",repeat_on_date:"En la data",repeat_ends:"Finalitza",month_for_recurring:["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],day_for_recurring:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte"]}},qc={date:{month_full:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],month_short:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],day_full:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],day_short:["日","一","二","三","四","五","六"]},labels:{dhx_cal_today_button:"今天",day_tab:"日",week_tab:"周",month_tab:"月",new_event:"新建日程",icon_save:"保存",icon_cancel:"关闭",icon_details:"详细",icon_edit:"编辑",icon_delete:"删除",confirm_closing:"请确认是否撤销修改!",confirm_deleting:"是否删除日程?",section_description:"描述",section_time:"时间范围",full_day:"整天",confirm_recurring:"请确认是否将日程设为重复模式?",section_recurring:"重复周期",button_recurring:"禁用",button_recurring_open:"启用",button_edit_series:"编辑系列",button_edit_occurrence:"编辑实例",button_edit_occurrence_and_following:"This and following events",agenda_tab:"议程",date:"日期",description:"说明",year_tab:"今年",week_agenda_tab:"议程",grid_tab:"电网",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"按天",repeat_radio_week:"按周",repeat_radio_month:"按月",repeat_radio_year:"按年",repeat_radio_day_type:"每",repeat_text_day_count:"天",repeat_radio_day_type2:"每个工作日",repeat_week:" 重复 每",repeat_text_week_count:"星期的:",repeat_radio_month_type:"重复",repeat_radio_month_start:"在",repeat_text_month_day:"日 每",repeat_text_month_count:"月",repeat_text_month_count2_before:"每",repeat_text_month_count2_after:"月",repeat_year_label:"在",select_year_day2:"的",repeat_text_year_day:"日",select_year_month:"月",repeat_radio_end:"无结束日期",repeat_text_occurrences_count:"次结束",repeat_radio_end2:"重复",repeat_radio_end3:"结束于",repeat_never:"从不",repeat_daily:"每天",repeat_workdays:"每个工作日",repeat_weekly:"每周",repeat_monthly:"每月",repeat_yearly:"每年",repeat_custom:"自定义",repeat_freq_day:"天",repeat_freq_week:"周",repeat_freq_month:"月",repeat_freq_year:"年",repeat_on_date:"在日期",repeat_ends:"结束",month_for_recurring:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],day_for_recurring:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]}},Bc={date:{month_full:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],month_short:["Led","Ún","Bře","Dub","Kvě","Čer","Čec","Srp","Září","Říj","List","Pro"],day_full:["Neděle","Pondělí","Úterý","Středa","Čtvrtek","Pátek","Sobota"],day_short:["Ne","Po","Út","St","Čt","Pá","So"]},labels:{dhx_cal_today_button:"Dnes",day_tab:"Den",week_tab:"Týden",month_tab:"Měsíc",new_event:"Nová událost",icon_save:"Uložit",icon_cancel:"Zpět",icon_details:"Detail",icon_edit:"Edituj",icon_delete:"Smazat",confirm_closing:"",confirm_deleting:"Událost bude trvale smazána, opravdu?",section_description:"Poznámky",section_time:"Doba platnosti",confirm_recurring:"Přejete si upravit celou řadu opakovaných událostí?",section_recurring:"Opakování události",button_recurring:"Vypnuto",button_recurring_open:"Zapnuto",button_edit_series:"Edit series",button_edit_occurrence:"Upravit instance",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Program",date:"Datum",description:"Poznámka",year_tab:"Rok",full_day:"Full day",week_agenda_tab:"Program",grid_tab:"Mřížka",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Denně",repeat_radio_week:"Týdně",repeat_radio_month:"Měsíčně",repeat_radio_year:"Ročně",repeat_radio_day_type:"každý",repeat_text_day_count:"Den",repeat_radio_day_type2:"pracovní dny",repeat_week:"Opakuje každých",repeat_text_week_count:"Týdnů na:",repeat_radio_month_type:"u každého",repeat_radio_month_start:"na",repeat_text_month_day:"Den každého",repeat_text_month_count:"Měsíc",repeat_text_month_count2_before:"každý",repeat_text_month_count2_after:"Měsíc",repeat_year_label:"na",select_year_day2:"v",repeat_text_year_day:"Den v",select_year_month:"",repeat_radio_end:"bez data ukončení",repeat_text_occurrences_count:"Události",repeat_radio_end2:"po",repeat_radio_end3:"Konec",repeat_never:"Nikdy",repeat_daily:"Každý den",repeat_workdays:"Každý pracovní den",repeat_weekly:"Každý týden",repeat_monthly:"Každý měsíc",repeat_yearly:"Každý rok",repeat_custom:"Vlastní",repeat_freq_day:"Den",repeat_freq_week:"Týden",repeat_freq_month:"Měsíc",repeat_freq_year:"Rok",repeat_on_date:"Na datum",repeat_ends:"Končí",month_for_recurring:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],day_for_recurring:["Neděle ","Pondělí","Úterý","Středa","Čtvrtek","Pátek","Sobota"]}},Yc={date:{month_full:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"],day_short:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},labels:{dhx_cal_today_button:"Idag",day_tab:"Dag",week_tab:"Uge",month_tab:"Måned",new_event:"Ny begivenhed",icon_save:"Gem",icon_cancel:"Fortryd",icon_details:"Detaljer",icon_edit:"Tilret",icon_delete:"Slet",confirm_closing:"Dine rettelser vil gå tabt.. Er dy sikker?",confirm_deleting:"Bigivenheden vil blive slettet permanent. Er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",confirm_recurring:"Vil du tilrette hele serien af gentagne begivenheder?",section_recurring:"Gentag begivenhed",button_recurring:"Frakoblet",button_recurring_open:"Tilkoblet",button_edit_series:"Rediger serien",button_edit_occurrence:"Rediger en kopi",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Dagsorden",date:"Dato",description:"Beskrivelse",year_tab:"År",week_agenda_tab:"Dagsorden",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Daglig",repeat_radio_week:"Ugenlig",repeat_radio_month:"Månedlig",repeat_radio_year:"Årlig",repeat_radio_day_type:"Hver",repeat_text_day_count:"dag",repeat_radio_day_type2:"På hver arbejdsdag",repeat_week:" Gentager sig hver",repeat_text_week_count:"uge på følgende dage:",repeat_radio_month_type:"Hver den",repeat_radio_month_start:"Den",repeat_text_month_day:" i hver",repeat_text_month_count:"måned",repeat_text_month_count2_before:"hver",repeat_text_month_count2_after:"måned",repeat_year_label:"Den",select_year_day2:"i",repeat_text_year_day:"dag i",select_year_month:"",repeat_radio_end:"Ingen slutdato",repeat_text_occurrences_count:"gentagelse",repeat_radio_end2:"Efter",repeat_radio_end3:"Slut",repeat_never:"Aldrig",repeat_daily:"Hver dag",repeat_workdays:"Hver hverdag",repeat_weekly:"Hver uge",repeat_monthly:"Hver måned",repeat_yearly:"Hvert år",repeat_custom:"Brugerdefineret",repeat_freq_day:"Dag",repeat_freq_week:"Uge",repeat_freq_month:"Måned",repeat_freq_year:"År",repeat_on_date:"På dato",repeat_ends:"Slutter",month_for_recurring:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],day_for_recurring:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"]}},Wc={date:{month_full:[" Januar"," Februar"," März "," April"," Mai"," Juni"," Juli"," August"," September "," Oktober"," November "," Dezember"],month_short:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],day_full:["Sonntag","Montag","Dienstag"," Mittwoch"," Donnerstag","Freitag","Samstag"],day_short:["So","Mo","Di","Mi","Do","Fr","Sa"]},labels:{dhx_cal_today_button:"Heute",day_tab:"Tag",week_tab:"Woche",month_tab:"Monat",new_event:"neuer Eintrag",icon_save:"Speichern",icon_cancel:"Abbrechen",icon_details:"Details",icon_edit:"Ändern",icon_delete:"Löschen",confirm_closing:"",confirm_deleting:"Der Eintrag wird gelöscht",section_description:"Beschreibung",section_time:"Zeitspanne",full_day:"Ganzer Tag",confirm_recurring:"Wollen Sie alle Einträge bearbeiten oder nur diesen einzelnen Eintrag?",section_recurring:"Wiederholung",button_recurring:"Aus",button_recurring_open:"An",button_edit_series:"Bearbeiten Sie die Serie",button_edit_occurrence:"Bearbeiten Sie eine Kopie",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Agenda",date:"Datum",description:"Beschreibung",year_tab:"Jahre",week_agenda_tab:"Agenda",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Täglich",repeat_radio_week:"Wöchentlich",repeat_radio_month:"Monatlich",repeat_radio_year:"Jährlich",repeat_radio_day_type:"jeden",repeat_text_day_count:"Tag",repeat_radio_day_type2:"an jedem Arbeitstag",repeat_week:" Wiederholt sich jede",repeat_text_week_count:"Woche am:",repeat_radio_month_type:"an jedem",repeat_radio_month_start:"am",repeat_text_month_day:"Tag eines jeden",repeat_text_month_count:"Monats",repeat_text_month_count2_before:"jeden",repeat_text_month_count2_after:"Monats",repeat_year_label:"am",select_year_day2:"im",repeat_text_year_day:"Tag im",select_year_month:"",repeat_radio_end:"kein Enddatum",repeat_text_occurrences_count:"Ereignissen",repeat_radio_end3:"Schluß",repeat_radio_end2:"nach",repeat_never:"Nie",repeat_daily:"Jeden Tag",repeat_workdays:"Jeden Werktag",repeat_weekly:"Jede Woche",repeat_monthly:"Jeden Monat",repeat_yearly:"Jedes Jahr",repeat_custom:"Benutzerdefiniert",repeat_freq_day:"Tag",repeat_freq_week:"Woche",repeat_freq_month:"Monat",repeat_freq_year:"Jahr",repeat_on_date:"Am Datum",repeat_ends:"Endet",month_for_recurring:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],day_for_recurring:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]}},Kc={date:{month_full:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάϊος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],month_short:["ΙΑΝ","ΦΕΒ","ΜΑΡ","ΑΠΡ","ΜΑΙ","ΙΟΥΝ","ΙΟΥΛ","ΑΥΓ","ΣΕΠ","ΟΚΤ","ΝΟΕ","ΔΕΚ"],day_full:["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"],day_short:["ΚΥ","ΔΕ","ΤΡ","ΤΕ","ΠΕ","ΠΑ","ΣΑ"]},labels:{dhx_cal_today_button:"Σήμερα",day_tab:"Ημέρα",week_tab:"Εβδομάδα",month_tab:"Μήνας",new_event:"Νέο έργο",icon_save:"Αποθήκευση",icon_cancel:"Άκυρο",icon_details:"Λεπτομέρειες",icon_edit:"Επεξεργασία",icon_delete:"Διαγραφή",confirm_closing:"",confirm_deleting:"Το έργο θα διαγραφεί οριστικά. Θέλετε να συνεχίσετε;",section_description:"Περιγραφή",section_time:"Χρονική περίοδος",full_day:"Πλήρης Ημέρα",confirm_recurring:"Θέλετε να επεξεργασθείτε ολόκληρη την ομάδα των επαναλαμβανόμενων έργων;",section_recurring:"Επαναλαμβανόμενο έργο",button_recurring:"Ανενεργό",button_recurring_open:"Ενεργό",button_edit_series:"Επεξεργαστείτε τη σειρά",button_edit_occurrence:"Επεξεργασία ένα αντίγραφο",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Ημερήσια Διάταξη",date:"Ημερομηνία",description:"Περιγραφή",year_tab:"Έτος",week_agenda_tab:"Ημερήσια Διάταξη",grid_tab:"Πλέγμα",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Ημερησίως",repeat_radio_week:"Εβδομαδιαίως",repeat_radio_month:"Μηνιαίως",repeat_radio_year:"Ετησίως",repeat_radio_day_type:"Κάθε",repeat_text_day_count:"ημέρα",repeat_radio_day_type2:"Κάθε εργάσιμη",repeat_week:" Επανάληψη κάθε",repeat_text_week_count:"εβδομάδα τις επόμενες ημέρες:",repeat_radio_month_type:"Επανάληψη",repeat_radio_month_start:"Την",repeat_text_month_day:"ημέρα κάθε",repeat_text_month_count:"μήνα",repeat_text_month_count2_before:"κάθε",repeat_text_month_count2_after:"μήνα",repeat_year_label:"Την",select_year_day2:"του",repeat_text_year_day:"ημέρα",select_year_month:"μήνα",repeat_radio_end:"Χωρίς ημερομηνία λήξεως",repeat_text_occurrences_count:"επαναλήψεις",repeat_radio_end3:"Λήγει την",repeat_radio_end2:"Μετά από",repeat_never:"Ποτέ",repeat_daily:"Κάθε μέρα",repeat_workdays:"Κάθε εργάσιμη μέρα",repeat_weekly:"Κάθε εβδομάδα",repeat_monthly:"Κάθε μήνα",repeat_yearly:"Κάθε χρόνο",repeat_custom:"Προσαρμοσμένο",repeat_freq_day:"Ημέρα",repeat_freq_week:"Εβδομάδα",repeat_freq_month:"Μήνας",repeat_freq_year:"Χρόνος",repeat_on_date:"Σε ημερομηνία",repeat_ends:"Λήγει",month_for_recurring:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάϊος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],day_for_recurring:["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"]}},Jc={date:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},labels:{dhx_cal_today_button:"Today",day_tab:"Day",week_tab:"Week",month_tab:"Month",new_event:"New event",icon_save:"Save",icon_cancel:"Cancel",icon_details:"Details",icon_edit:"Edit",icon_delete:"Delete",confirm_closing:"",confirm_deleting:"Event will be deleted permanently, are you sure?",section_description:"Description",section_time:"Time period",full_day:"Full day",confirm_recurring:"Edit recurring event",section_recurring:"Repeat event",button_recurring:"Disabled",button_recurring_open:"Enabled",button_edit_series:"All events",button_edit_occurrence:"This event",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Agenda",date:"Date",description:"Description",year_tab:"Year",week_agenda_tab:"Agenda",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Daily",repeat_radio_week:"Weekly",repeat_radio_month:"Monthly",repeat_radio_year:"Yearly",repeat_radio_day_type:"Every",repeat_text_day_count:"day",repeat_radio_day_type2:"Every workday",repeat_week:" Repeat every",repeat_text_week_count:"week next days:",repeat_radio_month_type:"Repeat",repeat_radio_month_start:"On",repeat_text_month_day:"day every",repeat_text_month_count:"month",repeat_text_month_count2_before:"every",repeat_text_month_count2_after:"month",repeat_year_label:"On",select_year_day2:"of",repeat_text_year_day:"day",select_year_month:"month",repeat_radio_end:"No end date",repeat_text_occurrences_count:"occurrences",repeat_radio_end2:"After",repeat_radio_end3:"End by",repeat_never:"Never",repeat_daily:"Every day",repeat_workdays:"Every weekday",repeat_weekly:"Every week",repeat_monthly:"Every month",repeat_yearly:"Every year",repeat_custom:"Custom",repeat_freq_day:"Day",repeat_freq_week:"Week",repeat_freq_month:"Month",repeat_freq_year:"Year",repeat_on_date:"On date",repeat_ends:"Ends",month_for_recurring:["January","February","March","April","May","June","July","August","September","October","November","December"],day_for_recurring:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},Gc={date:{month_full:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],month_short:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],day_full:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],day_short:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"]},labels:{dhx_cal_today_button:"Hoy",day_tab:"Día",week_tab:"Semana",month_tab:"Mes",new_event:"Nuevo evento",icon_save:"Guardar",icon_cancel:"Cancelar",icon_details:"Detalles",icon_edit:"Editar",icon_delete:"Eliminar",confirm_closing:"",confirm_deleting:"El evento se borrará definitivamente, ¿continuar?",section_description:"Descripción",section_time:"Período",full_day:"Todo el día",confirm_recurring:"¿Desea modificar el conjunto de eventos repetidos?",section_recurring:"Repita el evento",button_recurring:"Impedido",button_recurring_open:"Permitido",button_edit_series:"Editar la serie",button_edit_occurrence:"Editar este evento",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Día",date:"Fecha",description:"Descripción",year_tab:"Año",week_agenda_tab:"Día",grid_tab:"Reja",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Diariamente",repeat_radio_week:"Semanalmente",repeat_radio_month:"Mensualmente",repeat_radio_year:"Anualmente",repeat_radio_day_type:"Cada",repeat_text_day_count:"dia",repeat_radio_day_type2:"Cada jornada de trabajo",repeat_week:" Repetir cada",repeat_text_week_count:"semana:",repeat_radio_month_type:"Repita",repeat_radio_month_start:"El",repeat_text_month_day:"dia cada ",repeat_text_month_count:"mes",repeat_text_month_count2_before:"cada",repeat_text_month_count2_after:"mes",repeat_year_label:"El",select_year_day2:"del",repeat_text_year_day:"dia",select_year_month:"mes",repeat_radio_end:"Sin fecha de finalización",repeat_text_occurrences_count:"ocurrencias",repeat_radio_end3:"Fin",repeat_radio_end2:"Después de",repeat_never:"Nunca",repeat_daily:"Cada día",repeat_workdays:"Cada día laborable",repeat_weekly:"Cada semana",repeat_monthly:"Cada mes",repeat_yearly:"Cada año",repeat_custom:"Personalizado",repeat_freq_day:"Día",repeat_freq_week:"Semana",repeat_freq_month:"Mes",repeat_freq_year:"Año",repeat_on_date:"En la fecha",repeat_ends:"Termina",month_for_recurring:["Enero","Febrero","Маrzo","Аbril","Mayo","Junio","Julio","Аgosto","Setiembre","Octubre","Noviembre","Diciembre"],day_for_recurring:["Domingo","Lunes","Martes","Miércoles","Jeuves","Viernes","Sabado"]}},Qc={date:{month_full:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kes&auml;kuu","Hein&auml;kuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],month_short:["Tam","Hel","Maa","Huh","Tou","Kes","Hei","Elo","Syy","Lok","Mar","Jou"],day_full:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"],day_short:["Su","Ma","Ti","Ke","To","Pe","La"]},labels:{dhx_cal_today_button:"Tänään",day_tab:"Päivä",week_tab:"Viikko",month_tab:"Kuukausi",new_event:"Uusi tapahtuma",icon_save:"Tallenna",icon_cancel:"Peru",icon_details:"Tiedot",icon_edit:"Muokkaa",icon_delete:"Poista",confirm_closing:"",confirm_deleting:"Haluatko varmasti poistaa tapahtuman?",section_description:"Kuvaus",section_time:"Aikajakso",full_day:"Koko päivä",confirm_recurring:"Haluatko varmasti muokata toistuvan tapahtuman kaikkia jaksoja?",section_recurring:"Toista tapahtuma",button_recurring:"Ei k&auml;yt&ouml;ss&auml;",button_recurring_open:"K&auml;yt&ouml;ss&auml;",button_edit_series:"Muokkaa sarja",button_edit_occurrence:"Muokkaa kopio",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Esityslista",date:"Päivämäärä",description:"Kuvaus",year_tab:"Vuoden",week_agenda_tab:"Esityslista",grid_tab:"Ritilä",drag_to_create:"Luo uusi vetämällä",drag_to_move:"Siirrä vetämällä",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"P&auml;ivitt&auml;in",repeat_radio_week:"Viikoittain",repeat_radio_month:"Kuukausittain",repeat_radio_year:"Vuosittain",repeat_radio_day_type:"Joka",repeat_text_day_count:"p&auml;iv&auml;",repeat_radio_day_type2:"Joka arkip&auml;iv&auml;",repeat_week:"Toista joka",repeat_text_week_count:"viikko n&auml;in&auml; p&auml;ivin&auml;:",repeat_radio_month_type:"Toista",repeat_radio_month_start:"",repeat_text_month_day:"p&auml;iv&auml;n&auml; joka",repeat_text_month_count:"kuukausi",repeat_text_month_count2_before:"joka",repeat_text_month_count2_after:"kuukausi",repeat_year_label:"",select_year_day2:"",repeat_text_year_day:"p&auml;iv&auml;",select_year_month:"kuukausi",repeat_radio_end:"Ei loppumisaikaa",repeat_text_occurrences_count:"Toiston j&auml;lkeen",repeat_radio_end3:"Loppuu",repeat_radio_end2:"",repeat_never:"Ei koskaan",repeat_daily:"Joka päivä",repeat_workdays:"Joka arkipäivä",repeat_weekly:"Joka viikko",repeat_monthly:"Joka kuukausi",repeat_yearly:"Joka vuosi",repeat_custom:"Mukautettu",repeat_freq_day:"Päivä",repeat_freq_week:"Viikko",repeat_freq_month:"Kuukausi",repeat_freq_year:"Vuosi",repeat_on_date:"Tiettynä päivänä",repeat_ends:"Päättyy",month_for_recurring:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kes&auml;kuu","Hein&auml;kuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],day_for_recurring:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"]}},Xc={date:{month_full:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],month_short:["Jan","Fév","Mar","Avr","Mai","Juin","Juil","Aoû","Sep","Oct","Nov","Déc"],day_full:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],day_short:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},labels:{dhx_cal_today_button:"Aujourd'hui",day_tab:"Jour",week_tab:"Semaine",month_tab:"Mois",new_event:"Nouvel événement",icon_save:"Enregistrer",icon_cancel:"Annuler",icon_details:"Détails",icon_edit:"Modifier",icon_delete:"Effacer",confirm_closing:"",confirm_deleting:"L'événement sera effacé sans appel, êtes-vous sûr ?",section_description:"Description",section_time:"Période",full_day:"Journée complète",confirm_recurring:"Voulez-vous éditer toute une série d'évènements répétés?",section_recurring:"Périodicité",button_recurring:"Désactivé",button_recurring_open:"Activé",button_edit_series:"Modifier la série",button_edit_occurrence:"Modifier une copie",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Jour",date:"Date",description:"Description",year_tab:"Année",week_agenda_tab:"Jour",grid_tab:"Grille",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Quotidienne",repeat_radio_week:"Hebdomadaire",repeat_radio_month:"Mensuelle",repeat_radio_year:"Annuelle",repeat_radio_day_type:"Chaque",repeat_text_day_count:"jour",repeat_radio_day_type2:"Chaque journée de travail",repeat_week:" Répéter toutes les",repeat_text_week_count:"semaine:",repeat_radio_month_type:"Répéter",repeat_radio_month_start:"Le",repeat_text_month_day:"jour chaque",repeat_text_month_count:"mois",repeat_text_month_count2_before:"chaque",repeat_text_month_count2_after:"mois",repeat_year_label:"Le",select_year_day2:"du",repeat_text_year_day:"jour",select_year_month:"mois",repeat_radio_end:"Pas de date d&quot;achèvement",repeat_text_occurrences_count:"occurrences",repeat_radio_end3:"Fin",repeat_radio_end2:"Après",repeat_never:"Jamais",repeat_daily:"Chaque jour",repeat_workdays:"Chaque jour ouvrable",repeat_weekly:"Chaque semaine",repeat_monthly:"Chaque mois",repeat_yearly:"Chaque année",repeat_custom:"Personnalisé",repeat_freq_day:"Jour",repeat_freq_week:"Semaine",repeat_freq_month:"Mois",repeat_freq_year:"Année",repeat_on_date:"À la date",repeat_ends:"Se termine",month_for_recurring:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],day_for_recurring:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"]}},Zc={date:{month_full:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],month_short:["ינו","פבר","מרץ","אפר","מאי","יונ","יול","אוג","ספט","אוק","נוב","דצמ"],day_full:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"],day_short:["א","ב","ג","ד","ה","ו","ש"]},labels:{dhx_cal_today_button:"היום",day_tab:"יום",week_tab:"שבוע",month_tab:"חודש",new_event:"ארוע חדש",icon_save:"שמור",icon_cancel:"בטל",icon_details:"פרטים",icon_edit:"ערוך",icon_delete:"מחק",confirm_closing:"",confirm_deleting:"ארוע ימחק סופית.להמשיך?",section_description:"תיאור",section_time:"תקופה",confirm_recurring:"האם ברצונך לשנות כל סדרת ארועים מתמשכים?",section_recurring:"להעתיק ארוע",button_recurring:"לא פעיל",button_recurring_open:"פעיל",full_day:"יום שלם",button_edit_series:"ערוך את הסדרה",button_edit_occurrence:"עריכת עותק",button_edit_occurrence_and_following:"This and following events",agenda_tab:"סדר יום",date:"תאריך",description:"תיאור",year_tab:"לשנה",week_agenda_tab:"סדר יום",grid_tab:"סורג",drag_to_create:"Drag to create",drag_to_move:"גרור כדי להזיז",message_ok:"OK",message_cancel:"בטל",next:"הבא",prev:"הקודם",year:"שנה",month:"חודש",day:"יום",hour:"שעה",minute:"דקה",repeat_radio_day:"יומי",repeat_radio_week:"שבועי",repeat_radio_month:"חודשי",repeat_radio_year:"שנתי",repeat_radio_day_type:"חזור כל",repeat_text_day_count:"ימים",repeat_radio_day_type2:"חזור כל יום עבודה",repeat_week:" חזור כל",repeat_text_week_count:"שבוע לפי ימים:",repeat_radio_month_type:"חזור כל",repeat_radio_month_start:"כל",repeat_text_month_day:"ימים כל",repeat_text_month_count:"חודשים",repeat_text_month_count2_before:"חזור כל",repeat_text_month_count2_after:"חודש",repeat_year_label:"כל",select_year_day2:"בחודש",repeat_text_year_day:"ימים",select_year_month:"חודש",repeat_radio_end:"לעולם לא מסתיים",repeat_text_occurrences_count:"אירועים",repeat_radio_end3:"מסתיים ב",repeat_radio_end2:"אחרי",repeat_never:"אף פעם",repeat_daily:"כל יום",repeat_workdays:"כל יום עבודה",repeat_weekly:"כל שבוע",repeat_monthly:"כל חודש",repeat_yearly:"כל שנה",repeat_custom:"מותאם אישית",repeat_freq_day:"יום",repeat_freq_week:"שבוע",repeat_freq_month:"חודש",repeat_freq_year:"שנה",repeat_on_date:"בתאריך",repeat_ends:"מסתיים",month_for_recurring:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],day_for_recurring:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"]}},e_={date:{month_full:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],month_short:["Jan","Feb","Már","Ápr","Máj","Jún","Júl","Aug","Sep","Okt","Nov","Dec"],day_full:["Vasárnap","Hétfõ","Kedd","Szerda","Csütörtök","Péntek","szombat"],day_short:["Va","Hé","Ke","Sze","Csü","Pé","Szo"]},labels:{dhx_cal_today_button:"Ma",day_tab:"Nap",week_tab:"Hét",month_tab:"Hónap",new_event:"Új esemény",icon_save:"Mentés",icon_cancel:"Mégse",icon_details:"Részletek",icon_edit:"Szerkesztés",icon_delete:"Törlés",confirm_closing:"",confirm_deleting:"Az esemény törölve lesz, biztosan folytatja?",section_description:"Leírás",section_time:"Idõszak",full_day:"Egesz napos",confirm_recurring:"Biztosan szerkeszteni akarod az összes ismétlõdõ esemény beállítását?",section_recurring:"Esemény ismétlése",button_recurring:"Tiltás",button_recurring_open:"Engedélyezés",button_edit_series:"Edit series",button_edit_occurrence:"Szerkesztés bíróság",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Napirend",date:"Dátum",description:"Leírás",year_tab:"Év",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Napi",repeat_radio_week:"Heti",repeat_radio_month:"Havi",repeat_radio_year:"Éves",repeat_radio_day_type:"Minden",repeat_text_day_count:"nap",repeat_radio_day_type2:"Minden munkanap",repeat_week:" Ismételje meg minden",repeat_text_week_count:"héten a következő napokon:",repeat_radio_month_type:"Ismétlés",repeat_radio_month_start:"Ekkor",repeat_text_month_day:"nap minden",repeat_text_month_count:"hónapban",repeat_text_month_count2_before:"minden",repeat_text_month_count2_after:"hónapban",repeat_year_label:"Ekkor",select_year_day2:"-án/-én",repeat_text_year_day:"nap",select_year_month:"hónap",repeat_radio_end:"Nincs befejezési dátum",repeat_text_occurrences_count:"esemény",repeat_radio_end2:"Után",repeat_radio_end3:"Befejező dátum",repeat_never:"Soha",repeat_daily:"Minden nap",repeat_workdays:"Minden munkanap",repeat_weekly:"Minden héten",repeat_monthly:"Minden hónapban",repeat_yearly:"Minden évben",repeat_custom:"Egyedi",repeat_freq_day:"Nap",repeat_freq_week:"Hét",repeat_freq_month:"Hónap",repeat_freq_year:"Év",repeat_on_date:"Dátum szerint",repeat_ends:"Befejeződik",month_for_recurring:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],day_for_recurring:["Vasárnap","Hétfő","Kedd","Szerda","Csütörtök","Péntek","Szombat"]}},t_={date:{month_full:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Ags","Sep","Okt","Nov","Des"],day_full:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],day_short:["Ming","Sen","Sel","Rab","Kam","Jum","Sab"]},labels:{dhx_cal_today_button:"Hari Ini",day_tab:"Hari",week_tab:"Minggu",month_tab:"Bulan",new_event:"Acara Baru",icon_save:"Simpan",icon_cancel:"Batal",icon_details:"Detail",icon_edit:"Edit",icon_delete:"Hapus",confirm_closing:"",confirm_deleting:"Acara akan dihapus",section_description:"Keterangan",section_time:"Periode",full_day:"Hari penuh",confirm_recurring:"Apakah acara ini akan berulang?",section_recurring:"Acara Rutin",button_recurring:"Tidak Difungsikan",button_recurring_open:"Difungsikan",button_edit_series:"Mengedit seri",button_edit_occurrence:"Mengedit salinan",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Agenda",date:"Tanggal",description:"Keterangan",year_tab:"Tahun",week_agenda_tab:"Agenda",grid_tab:"Tabel",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Harian",repeat_radio_week:"Mingguan",repeat_radio_month:"Bulanan",repeat_radio_year:"Tahunan",repeat_radio_day_type:"Setiap",repeat_text_day_count:"hari",repeat_radio_day_type2:"Setiap hari kerja",repeat_week:" Ulangi setiap",repeat_text_week_count:"minggu pada hari berikut:",repeat_radio_month_type:"Ulangi",repeat_radio_month_start:"Pada",repeat_text_month_day:"hari setiap",repeat_text_month_count:"bulan",repeat_text_month_count2_before:"setiap",repeat_text_month_count2_after:"bulan",repeat_year_label:"Pada",select_year_day2:"dari",repeat_text_year_day:"hari",select_year_month:"bulan",repeat_radio_end:"Tanpa tanggal akhir",repeat_text_occurrences_count:"kejadian",repeat_radio_end2:"Setelah",repeat_radio_end3:"Berakhir pada",repeat_never:"Tidak pernah",repeat_daily:"Setiap hari",repeat_workdays:"Setiap hari kerja",repeat_weekly:"Setiap minggu",repeat_monthly:"Setiap bulan",repeat_yearly:"Setiap tahun",repeat_custom:"Kustom",repeat_freq_day:"Hari",repeat_freq_week:"Minggu",repeat_freq_month:"Bulan",repeat_freq_year:"Tahun",repeat_on_date:"Pada tanggal",repeat_ends:"Berakhir",month_for_recurring:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],day_for_recurring:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]}},n_={date:{month_full:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],month_short:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],day_full:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],day_short:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]},labels:{dhx_cal_today_button:"Oggi",day_tab:"Giorno",week_tab:"Settimana",month_tab:"Mese",new_event:"Nuovo evento",icon_save:"Salva",icon_cancel:"Chiudi",icon_details:"Dettagli",icon_edit:"Modifica",icon_delete:"Elimina",confirm_closing:"",confirm_deleting:"L'evento sarà eliminato, siete sicuri?",section_description:"Descrizione",section_time:"Periodo di tempo",full_day:"Intera giornata",confirm_recurring:"Vuoi modificare l'intera serie di eventi?",section_recurring:"Ripetere l'evento",button_recurring:"Disattivato",button_recurring_open:"Attivato",button_edit_series:"Modificare la serie",button_edit_occurrence:"Modificare una copia",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Agenda",date:"Data",description:"Descrizione",year_tab:"Anno",week_agenda_tab:"Agenda",grid_tab:"Griglia",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Quotidiano",repeat_radio_week:"Settimanale",repeat_radio_month:"Mensile",repeat_radio_year:"Annuale",repeat_radio_day_type:"Ogni",repeat_text_day_count:"giorno",repeat_radio_day_type2:"Ogni giornata lavorativa",repeat_week:" Ripetere ogni",repeat_text_week_count:"settimana:",repeat_radio_month_type:"Ripetere",repeat_radio_month_start:"Il",repeat_text_month_day:"giorno ogni",repeat_text_month_count:"mese",repeat_text_month_count2_before:"ogni",repeat_text_month_count2_after:"mese",repeat_year_label:"Il",select_year_day2:"del",repeat_text_year_day:"giorno",select_year_month:"mese",repeat_radio_end:"Senza data finale",repeat_text_occurrences_count:"occorenze",repeat_radio_end3:"Fine",repeat_radio_end2:"Dopo",repeat_never:"Mai",repeat_daily:"Ogni giorno",repeat_workdays:"Ogni giorno feriale",repeat_weekly:"Ogni settimana",repeat_monthly:"Ogni mese",repeat_yearly:"Ogni anno",repeat_custom:"Personalizzato",repeat_freq_day:"Giorno",repeat_freq_week:"Settimana",repeat_freq_month:"Mese",repeat_freq_year:"Anno",repeat_on_date:"Alla data",repeat_ends:"Finisce",month_for_recurring:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Jiugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],day_for_recurring:["Domenica","Lunedì","Martedì","Mercoledì","Jovedì","Venerdì","Sabato"]}},a_={date:{month_full:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],month_short:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],day_full:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],day_short:["日","月","火","水","木","金","土"]},labels:{dhx_cal_today_button:"今日",day_tab:"日",week_tab:"週",month_tab:"月",new_event:"新イベント",icon_save:"保存",icon_cancel:"キャンセル",icon_details:"詳細",icon_edit:"編集",icon_delete:"削除",confirm_closing:"",confirm_deleting:"イベント完全に削除されます、宜しいですか？",section_description:"デスクリプション",section_time:"期間",confirm_recurring:"繰り返されているイベントを全て編集しますか？",section_recurring:"イベントを繰り返す",button_recurring:"無効",button_recurring_open:"有効",full_day:"終日",button_edit_series:"シリーズを編集します",button_edit_occurrence:"コピーを編集",button_edit_occurrence_and_following:"This and following events",agenda_tab:"議題は",date:"日付",description:"説明",year_tab:"今年",week_agenda_tab:"議題は",grid_tab:"グリッド",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"毎日",repeat_radio_week:"毎週",repeat_radio_month:"毎月",repeat_radio_year:"毎年",repeat_radio_day_type:"毎",repeat_text_day_count:"日",repeat_radio_day_type2:"毎営業日",repeat_week:" 繰り返し毎",repeat_text_week_count:"週 次の日:",repeat_radio_month_type:"繰り返し",repeat_radio_month_start:"オン",repeat_text_month_day:"日毎",repeat_text_month_count:"月",repeat_text_month_count2_before:"毎",repeat_text_month_count2_after:"月",repeat_year_label:"オン",select_year_day2:"の",repeat_text_year_day:"日",select_year_month:"月",repeat_radio_end:"終了日なし",repeat_text_occurrences_count:"回数",repeat_radio_end2:"後",repeat_radio_end3:"終了日まで",repeat_never:"決して",repeat_daily:"毎日",repeat_workdays:"毎営業日",repeat_weekly:"毎週",repeat_monthly:"毎月",repeat_yearly:"毎年",repeat_custom:"カスタム",repeat_freq_day:"日",repeat_freq_week:"週",repeat_freq_month:"月",repeat_freq_year:"年",repeat_on_date:"日にち",repeat_ends:"終了",month_for_recurring:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],day_for_recurring:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"]}};class r_{constructor(t){this._locales={};for(const n in t)this._locales[n]=t[n]}addLocale(t,n){this._locales[t]=n}getLocale(t){return this._locales[t]}}const i_={date:{month_full:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],day_full:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"],day_short:["Søn","Mon","Tir","Ons","Tor","Fre","Lør"]},labels:{dhx_cal_today_button:"I dag",day_tab:"Dag",week_tab:"Uke",month_tab:"Måned",new_event:"Ny hendelse",icon_save:"Lagre",icon_cancel:"Avbryt",icon_details:"Detaljer",icon_edit:"Rediger",icon_delete:"Slett",confirm_closing:"",confirm_deleting:"Hendelsen vil bli slettet permanent. Er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",confirm_recurring:"Vil du forandre hele dette settet av repeterende hendelser?",section_recurring:"Repeter hendelsen",button_recurring:"Av",button_recurring_open:"På",button_edit_series:"Rediger serien",button_edit_occurrence:"Redigere en kopi",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Agenda",date:"Dato",description:"Beskrivelse",year_tab:"År",week_agenda_tab:"Agenda",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Daglig",repeat_radio_week:"Ukentlig",repeat_radio_month:"Månedlig",repeat_radio_year:"Årlig",repeat_radio_day_type:"Hver",repeat_text_day_count:"dag",repeat_radio_day_type2:"Alle hverdager",repeat_week:" Gjentas hver",repeat_text_week_count:"uke på:",repeat_radio_month_type:"På hver",repeat_radio_month_start:"På",repeat_text_month_day:"dag hver",repeat_text_month_count:"måned",repeat_text_month_count2_before:"hver",repeat_text_month_count2_after:"måned",repeat_year_label:"på",select_year_day2:"i",repeat_text_year_day:"dag i",select_year_month:"",repeat_radio_end:"Ingen sluttdato",repeat_text_occurrences_count:"forekomst",repeat_radio_end3:"Stop den",repeat_radio_end2:"Etter",repeat_never:"Aldri",repeat_daily:"Hver dag",repeat_workdays:"Hver ukedag",repeat_weekly:"Hver uke",repeat_monthly:"Hver måned",repeat_yearly:"Hvert år",repeat_custom:"Tilpasset",repeat_freq_day:"Dag",repeat_freq_week:"Uke",repeat_freq_month:"Måned",repeat_freq_year:"År",repeat_on_date:"På dato",repeat_ends:"Slutter",month_for_recurring:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],day_for_recurring:["Sondag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"]}},o_={date:{month_full:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],month_short:["Jan","Feb","mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"],day_short:["Zo","Ma","Di","Wo","Do","Vr","Za"]},labels:{dhx_cal_today_button:"Vandaag",day_tab:"Dag",week_tab:"Week",month_tab:"Maand",new_event:"Nieuw item",icon_save:"Opslaan",icon_cancel:"Annuleren",icon_details:"Details",icon_edit:"Bewerken",icon_delete:"Verwijderen",confirm_closing:"",confirm_deleting:"Item zal permanent worden verwijderd, doorgaan?",section_description:"Beschrijving",section_time:"Tijd periode",full_day:"Hele dag",confirm_recurring:"Wilt u alle terugkerende items bijwerken?",section_recurring:"Item herhalen",button_recurring:"Uit",button_recurring_open:"Aan",button_edit_series:"Bewerk de serie",button_edit_occurrence:"Bewerk een kopie",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Agenda",date:"Datum",description:"Omschrijving",year_tab:"Jaar",week_agenda_tab:"Agenda",grid_tab:"Tabel",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Dagelijks",repeat_radio_week:"Wekelijks",repeat_radio_month:"Maandelijks",repeat_radio_year:"Jaarlijks",repeat_radio_day_type:"Elke",repeat_text_day_count:"dag(en)",repeat_radio_day_type2:"Elke werkdag",repeat_week:" Herhaal elke",repeat_text_week_count:"week op de volgende dagen:",repeat_radio_month_type:"Herhaal",repeat_radio_month_start:"Op",repeat_text_month_day:"dag iedere",repeat_text_month_count:"maanden",repeat_text_month_count2_before:"iedere",repeat_text_month_count2_after:"maanden",repeat_year_label:"Op",select_year_day2:"van",repeat_text_year_day:"dag",select_year_month:"maand",repeat_radio_end:"Geen eind datum",repeat_text_occurrences_count:"keren",repeat_radio_end3:"Eindigd per",repeat_radio_end2:"Na",repeat_never:"Nooit",repeat_daily:"Elke dag",repeat_workdays:"Elke werkdag",repeat_weekly:"Elke week",repeat_monthly:"Elke maand",repeat_yearly:"Elk jaar",repeat_custom:"Aangepast",repeat_freq_day:"Dag",repeat_freq_week:"Week",repeat_freq_month:"Maand",repeat_freq_year:"Jaar",repeat_on_date:"Op datum",repeat_ends:"Eindigt",month_for_recurring:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],day_for_recurring:["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"]}},s_={date:{month_full:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],day_full:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"],day_short:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},labels:{dhx_cal_today_button:"Idag",day_tab:"Dag",week_tab:"Uke",month_tab:"Måned",new_event:"Ny",icon_save:"Lagre",icon_cancel:"Avbryt",icon_details:"Detaljer",icon_edit:"Endre",icon_delete:"Slett",confirm_closing:"Endringer blir ikke lagret, er du sikker?",confirm_deleting:"Oppføringen vil bli slettet, er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",full_day:"Full dag",confirm_recurring:"Vil du endre hele settet med repeterende oppføringer?",section_recurring:"Repeterende oppføring",button_recurring:"Ikke aktiv",button_recurring_open:"Aktiv",button_edit_series:"Rediger serien",button_edit_occurrence:"Redigere en kopi",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Agenda",date:"Dato",description:"Beskrivelse",year_tab:"År",week_agenda_tab:"Agenda",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Daglig",repeat_radio_week:"Ukentlig",repeat_radio_month:"Månedlig",repeat_radio_year:"Årlig",repeat_radio_day_type:"Hver",repeat_text_day_count:"dag",repeat_radio_day_type2:"Hver arbeidsdag",repeat_week:" Gjenta hver",repeat_text_week_count:"uke neste dager:",repeat_radio_month_type:"Gjenta",repeat_radio_month_start:"På",repeat_text_month_day:"dag hver",repeat_text_month_count:"måned",repeat_text_month_count2_before:"hver",repeat_text_month_count2_after:"måned",repeat_year_label:"På",select_year_day2:"av",repeat_text_year_day:"dag",select_year_month:"måned",repeat_radio_end:"Ingen sluttdato",repeat_text_occurrences_count:"forekomster",repeat_radio_end2:"Etter",repeat_radio_end3:"Slutt innen",repeat_never:"Aldri",repeat_daily:"Hver dag",repeat_workdays:"Hver ukedag",repeat_weekly:"Hver uke",repeat_monthly:"Hver måned",repeat_yearly:"Hvert år",repeat_custom:"Tilpasset",repeat_freq_day:"Dag",repeat_freq_week:"Uke",repeat_freq_month:"Måned",repeat_freq_year:"År",repeat_on_date:"På dato",repeat_ends:"Slutter",month_for_recurring:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],day_for_recurring:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"]}},l_={date:{month_full:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],month_short:["Sty","Lut","Mar","Kwi","Maj","Cze","Lip","Sie","Wrz","Paź","Lis","Gru"],day_full:["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"],day_short:["Nie","Pon","Wto","Śro","Czw","Pią","Sob"]},labels:{dhx_cal_today_button:"Dziś",day_tab:"Dzień",week_tab:"Tydzień",month_tab:"Miesiąc",new_event:"Nowe zdarzenie",icon_save:"Zapisz",icon_cancel:"Anuluj",icon_details:"Szczegóły",icon_edit:"Edytuj",icon_delete:"Usuń",confirm_closing:"",confirm_deleting:"Zdarzenie zostanie usunięte na zawsze, kontynuować?",section_description:"Opis",section_time:"Okres czasu",full_day:"Cały dzień",confirm_recurring:"Czy chcesz edytować cały zbiór powtarzających się zdarzeń?",section_recurring:"Powtórz zdarzenie",button_recurring:"Nieaktywne",button_recurring_open:"Aktywne",button_edit_series:"Edytuj serię",button_edit_occurrence:"Edytuj kopię",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Agenda",date:"Data",description:"Opis",year_tab:"Rok",week_agenda_tab:"Agenda",grid_tab:"Tabela",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Codziennie",repeat_radio_week:"Co tydzie",repeat_radio_month:"Co miesic",repeat_radio_year:"Co rok",repeat_radio_day_type:"Kadego",repeat_text_day_count:"dnia",repeat_radio_day_type2:"Kadego dnia roboczego",repeat_week:" Powtarzaj kadego",repeat_text_week_count:"tygodnia w dni:",repeat_radio_month_type:"Powtrz",repeat_radio_month_start:"W",repeat_text_month_day:"dnia kadego",repeat_text_month_count:"miesica",repeat_text_month_count2_before:"kadego",repeat_text_month_count2_after:"miesica",repeat_year_label:"W",select_year_day2:"miesica",repeat_text_year_day:"dnia miesica",select_year_month:"",repeat_radio_end:"Bez daty kocowej",repeat_text_occurrences_count:"wystpieniu/ach",repeat_radio_end3:"Zakocz w",repeat_radio_end2:"Po",repeat_never:"Nigdy",repeat_daily:"Codziennie",repeat_workdays:"Każdy dzień roboczy",repeat_weekly:"Co tydzień",repeat_monthly:"Co miesiąc",repeat_yearly:"Co rok",repeat_custom:"Niestandardowy",repeat_freq_day:"Dzień",repeat_freq_week:"Tydzień",repeat_freq_month:"Miesiąc",repeat_freq_year:"Rok",repeat_on_date:"W dniu",repeat_ends:"Kończy się",month_for_recurring:["Stycznia","Lutego","Marca","Kwietnia","Maja","Czerwca","Lipca","Sierpnia","Wrzenia","Padziernka","Listopada","Grudnia"],day_for_recurring:["Niedziela","Poniedziaek","Wtorek","roda","Czwartek","Pitek","Sobota"]}},d_={date:{month_full:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],month_short:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],day_full:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],day_short:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},labels:{dhx_cal_today_button:"Hoje",day_tab:"Dia",week_tab:"Semana",month_tab:"Mês",new_event:"Novo evento",icon_save:"Salvar",icon_cancel:"Cancelar",icon_details:"Detalhes",icon_edit:"Editar",icon_delete:"Deletar",confirm_closing:"",confirm_deleting:"Tem certeza que deseja excluir?",section_description:"Descrição",section_time:"Período de tempo",full_day:"Dia inteiro",confirm_recurring:"Deseja editar todos esses eventos repetidos?",section_recurring:"Repetir evento",button_recurring:"Desabilitar",button_recurring_open:"Habilitar",button_edit_series:"Editar a série",button_edit_occurrence:"Editar uma cópia",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Dia",date:"Data",description:"Descrição",year_tab:"Ano",week_agenda_tab:"Dia",grid_tab:"Grade",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Diário",repeat_radio_week:"Semanal",repeat_radio_month:"Mensal",repeat_radio_year:"Anual",repeat_radio_day_type:"Cada",repeat_text_day_count:"dia(s)",repeat_radio_day_type2:"Cada trabalho diário",repeat_week:" Repita cada",repeat_text_week_count:"semana:",repeat_radio_month_type:"Repetir",repeat_radio_month_start:"Em",repeat_text_month_day:"todo dia",repeat_text_month_count:"mês",repeat_text_month_count2_before:"todo",repeat_text_month_count2_after:"mês",repeat_year_label:"Em",select_year_day2:"of",repeat_text_year_day:"dia",select_year_month:"mês",repeat_radio_end:"Sem data final",repeat_text_occurrences_count:"ocorrências",repeat_radio_end3:"Fim",repeat_radio_end2:"Depois",repeat_never:"Nunca",repeat_daily:"Todos os dias",repeat_workdays:"Todos os dias úteis",repeat_weekly:"Toda semana",repeat_monthly:"Todo mês",repeat_yearly:"Todo ano",repeat_custom:"Personalizado",repeat_freq_day:"Dia",repeat_freq_week:"Semana",repeat_freq_month:"Mês",repeat_freq_year:"Ano",repeat_on_date:"Na data",repeat_ends:"Termina",month_for_recurring:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],day_for_recurring:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"]}},c_={date:{month_full:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","November","December"],month_short:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Nov","Dec"],day_full:["Duminica","Luni","Marti","Miercuri","Joi","Vineri","Sambata"],day_short:["Du","Lu","Ma","Mi","Jo","Vi","Sa"]},labels:{dhx_cal_today_button:"Astazi",day_tab:"Zi",week_tab:"Saptamana",month_tab:"Luna",new_event:"Eveniment nou",icon_save:"Salveaza",icon_cancel:"Anuleaza",icon_details:"Detalii",icon_edit:"Editeaza",icon_delete:"Sterge",confirm_closing:"Schimbarile nu vor fi salvate, esti sigur?",confirm_deleting:"Evenimentul va fi sters permanent, esti sigur?",section_description:"Descriere",section_time:"Interval",full_day:"Toata ziua",confirm_recurring:"Vrei sa editezi toata seria de evenimente repetate?",section_recurring:"Repetare",button_recurring:"Dezactivata",button_recurring_open:"Activata",button_edit_series:"Editeaza serie",button_edit_occurrence:"Editeaza doar intrare",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Agenda",date:"Data",description:"Descriere",year_tab:"An",week_agenda_tab:"Agenda",grid_tab:"Lista",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Zilnic",repeat_radio_week:"Saptamanal",repeat_radio_month:"Lunar",repeat_radio_year:"Anual",repeat_radio_day_type:"La fiecare",repeat_text_day_count:"zi(le)",repeat_radio_day_type2:"Fiecare zi lucratoare",repeat_week:" Repeta la fiecare",repeat_text_week_count:"saptamana in urmatoarele zile:",repeat_radio_month_type:"Repeta in",repeat_radio_month_start:"In a",repeat_text_month_day:"zi la fiecare",repeat_text_month_count:"luni",repeat_text_month_count2_before:"la fiecare",repeat_text_month_count2_after:"luni",repeat_year_label:"In",select_year_day2:"a lunii",repeat_text_year_day:"zi a lunii",select_year_month:"",repeat_radio_end:"Fara data de sfarsit",repeat_text_occurrences_count:"evenimente",repeat_radio_end3:"La data",repeat_radio_end2:"Dupa",repeat_never:"Niciodată",repeat_daily:"În fiecare zi",repeat_workdays:"În fiecare zi lucrătoare",repeat_weekly:"În fiecare săptămână",repeat_monthly:"În fiecare lună",repeat_yearly:"În fiecare an",repeat_custom:"Personalizat",repeat_freq_day:"Zi",repeat_freq_week:"Săptămână",repeat_freq_month:"Lună",repeat_freq_year:"An",repeat_on_date:"La data",repeat_ends:"Se termină",month_for_recurring:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],day_for_recurring:["Duminica","Luni","Marti","Miercuri","Joi","Vineri","Sambata"]}},__={date:{month_full:["Январь","Февраль","Март","Апрель","Maй","Июнь","Июль","Август","Сентябрь","Oктябрь","Ноябрь","Декабрь"],month_short:["Янв","Фев","Maр","Aпр","Maй","Июн","Июл","Aвг","Сен","Окт","Ноя","Дек"],day_full:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],day_short:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},labels:{dhx_cal_today_button:"Сегодня",day_tab:"День",week_tab:"Неделя",month_tab:"Месяц",new_event:"Новое событие",icon_save:"Сохранить",icon_cancel:"Отменить",icon_details:"Детали",icon_edit:"Изменить",icon_delete:"Удалить",confirm_closing:"",confirm_deleting:"Событие будет удалено безвозвратно, продолжить?",section_description:"Описание",section_time:"Период времени",full_day:"Весь день",confirm_recurring:"Вы хотите изменить всю серию повторяющихся событий?",section_recurring:"Повторение",button_recurring:"Отключено",button_recurring_open:"Включено",button_edit_series:"Редактировать серию",button_edit_occurrence:"Редактировать экземпляр",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Список",date:"Дата",description:"Описание",year_tab:"Год",week_agenda_tab:"Список",grid_tab:"Таблица",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"День",repeat_radio_week:"Неделя",repeat_radio_month:"Месяц",repeat_radio_year:"Год",repeat_radio_day_type:"Каждый",repeat_text_day_count:"день",repeat_radio_day_type2:"Каждый рабочий день",repeat_week:" Повторять каждую",repeat_text_week_count:"неделю , в:",repeat_radio_month_type:"Повторять",repeat_radio_month_start:"",repeat_text_month_day:" числа каждый ",repeat_text_month_count:"месяц",repeat_text_month_count2_before:"каждый ",repeat_text_month_count2_after:"месяц",repeat_year_label:"",select_year_day2:"",repeat_text_year_day:"день",select_year_month:"",repeat_radio_end:"Без даты окончания",repeat_text_occurrences_count:"повторений",repeat_radio_end3:"До ",repeat_radio_end2:"",repeat_never:"Никогда",repeat_daily:"Каждый день",repeat_workdays:"Каждый будний день",repeat_weekly:"Каждую неделю",repeat_monthly:"Каждый месяц",repeat_yearly:"Каждый год",repeat_custom:"Настроить",repeat_freq_day:"День",repeat_freq_week:"Неделя",repeat_freq_month:"Месяц",repeat_freq_year:"Год",repeat_on_date:"В дату",repeat_ends:"Заканчивается",month_for_recurring:["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"],day_for_recurring:["Воскресенье","Понедельник","Вторник","Среду","Четверг","Пятницу","Субботу"]}},u_={date:{month_full:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Nedelja","Ponedeljek","Torek","Sreda","Četrtek","Petek","Sobota"],day_short:["Ned","Pon","Tor","Sre","Čet","Pet","Sob"]},labels:{dhx_cal_today_button:"Danes",day_tab:"Dan",week_tab:"Teden",month_tab:"Mesec",new_event:"Nov dogodek",icon_save:"Shrani",icon_cancel:"Prekliči",icon_details:"Podrobnosti",icon_edit:"Uredi",icon_delete:"Izbriši",confirm_closing:"",confirm_deleting:"Dogodek bo izbrisan. Želite nadaljevati?",section_description:"Opis",section_time:"Časovni okvir",full_day:"Ves dan",confirm_recurring:"Želite urediti celoten set ponavljajočih dogodkov?",section_recurring:"Ponovi dogodek",button_recurring:"Onemogočeno",button_recurring_open:"Omogočeno",button_edit_series:"Edit series",button_edit_occurrence:"Edit occurrence",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Zadeva",date:"Datum",description:"Opis",year_tab:"Leto",week_agenda_tab:"Zadeva",grid_tab:"Miza",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Dnevno",repeat_radio_week:"Tedensko",repeat_radio_month:"Mesečno",repeat_radio_year:"Letno",repeat_radio_day_type:"Vsak",repeat_text_day_count:"dan",repeat_radio_day_type2:"Vsak delovni dan",repeat_week:" Ponavljaj vsak",repeat_text_week_count:"teden na naslednje dni:",repeat_radio_month_type:"Ponavljaj",repeat_radio_month_start:"Na",repeat_text_month_day:"dan vsak",repeat_text_month_count:"mesec",repeat_text_month_count2_before:"vsak",repeat_text_month_count2_after:"mesec",repeat_year_label:"Na",select_year_day2:"od",repeat_text_year_day:"dan",select_year_month:"mesec",repeat_radio_end:"Brez končnega datuma",repeat_text_occurrences_count:"pojavitve",repeat_radio_end2:"Po",repeat_radio_end3:"Končaj do",repeat_never:"Nikoli",repeat_daily:"Vsak dan",repeat_workdays:"Vsak delovni dan",repeat_weekly:"Vsak teden",repeat_monthly:"Vsak mesec",repeat_yearly:"Vsako leto",repeat_custom:"Po meri",repeat_freq_day:"Dan",repeat_freq_week:"Teden",repeat_freq_month:"Mesec",repeat_freq_year:"Leto",repeat_on_date:"Na datum",repeat_ends:"Konča se",month_for_recurring:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],day_for_recurring:["Nedelja","Ponedeljek","Torek","Sreda","Četrtek","Petek","Sobota"]}},h_={date:{month_full:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],month_short:["Jan","Feb","Mar","Apr","Máj","Jún","Júl","Aug","Sept","Okt","Nov","Dec"],day_full:["Nedeľa","Pondelok","Utorok","Streda","Štvrtok","Piatok","Sobota"],day_short:["Ne","Po","Ut","St","Št","Pi","So"]},labels:{dhx_cal_today_button:"Dnes",day_tab:"Deň",week_tab:"Týždeň",month_tab:"Mesiac",new_event:"Nová udalosť",icon_save:"Uložiť",icon_cancel:"Späť",icon_details:"Detail",icon_edit:"Edituj",icon_delete:"Zmazať",confirm_closing:"Vaše zmeny nebudú uložené. Skutočne?",confirm_deleting:"Udalosť bude natrvalo vymazaná. Skutočne?",section_description:"Poznámky",section_time:"Doba platnosti",confirm_recurring:"Prajete si upraviť celú radu opakovaných udalostí?",section_recurring:"Opakovanie udalosti",button_recurring:"Vypnuté",button_recurring_open:"Zapnuté",button_edit_series:"Upraviť opakovania",button_edit_occurrence:"Upraviť inštancie",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Program",date:"Dátum",description:"Poznámka",year_tab:"Rok",full_day:"Celý deň",week_agenda_tab:"Program",grid_tab:"Mriežka",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Denne",repeat_radio_week:"Týždenne",repeat_radio_month:"Mesaène",repeat_radio_year:"Roène",repeat_radio_day_type:"Každý",repeat_text_day_count:"deò",repeat_radio_day_type2:"Každý prac. deò",repeat_week:"Opakova každý",repeat_text_week_count:"týždeò v dòoch:",repeat_radio_month_type:"Opakova",repeat_radio_month_start:"On",repeat_text_month_day:"deò každý",repeat_text_month_count:"mesiac",repeat_text_month_count2_before:"každý",repeat_text_month_count2_after:"mesiac",repeat_year_label:"On",select_year_day2:"poèas",repeat_text_year_day:"deò",select_year_month:"mesiac",repeat_radio_end:"Bez dátumu ukonèenia",repeat_text_occurrences_count:"udalostiach",repeat_radio_end3:"Ukonèi",repeat_radio_end2:"Po",repeat_never:"Nikdy",repeat_daily:"Každý deň",repeat_workdays:"Každý pracovný deň",repeat_weekly:"Každý týždeň",repeat_monthly:"Každý mesiac",repeat_yearly:"Každý rok",repeat_custom:"Vlastné",repeat_freq_day:"Deň",repeat_freq_week:"Týždeň",repeat_freq_month:"Mesiac",repeat_freq_year:"Rok",repeat_on_date:"Na dátum",repeat_ends:"Koniec",month_for_recurring:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],day_for_recurring:["Nede¾a","Pondelok","Utorok","Streda","Štvrtok","Piatok","Sobota"]}},f_={date:{month_full:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"],day_short:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},labels:{dhx_cal_today_button:"Idag",day_tab:"Dag",week_tab:"Vecka",month_tab:"Månad",new_event:"Ny händelse",icon_save:"Spara",icon_cancel:"Ångra",icon_details:"Detaljer",icon_edit:"Ändra",icon_delete:"Ta bort",confirm_closing:"",confirm_deleting:"Är du säker på att du vill ta bort händelsen permanent?",section_description:"Beskrivning",section_time:"Tid",full_day:"Hela dagen",confirm_recurring:"Vill du redigera hela serien med repeterande händelser?",section_recurring:"Upprepa händelse",button_recurring:"Inaktiverat",button_recurring_open:"Aktiverat",button_edit_series:"Redigera serien",button_edit_occurrence:"Redigera en kopia",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Dagordning",date:"Datum",description:"Beskrivning",year_tab:"År",week_agenda_tab:"Dagordning",grid_tab:"Galler",drag_to_create:"Dra för att skapa ny",drag_to_move:"Dra för att flytta",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Dagligen",repeat_radio_week:"Veckovis",repeat_radio_month:"Månadsvis",repeat_radio_year:"Årligen",repeat_radio_day_type:"Var",repeat_text_day_count:"dag",repeat_radio_day_type2:"Varje arbetsdag",repeat_week:" Upprepa var",repeat_text_week_count:"vecka dessa dagar:",repeat_radio_month_type:"Upprepa",repeat_radio_month_start:"Den",repeat_text_month_day:"dagen var",repeat_text_month_count:"månad",repeat_text_month_count2_before:"var",repeat_text_month_count2_after:"månad",repeat_year_label:"Den",select_year_day2:"i",repeat_text_year_day:"dag i",select_year_month:"månad",repeat_radio_end:"Inget slutdatum",repeat_text_occurrences_count:"upprepningar",repeat_radio_end3:"Sluta efter",repeat_radio_end2:"Efter",repeat_never:"Aldrig",repeat_daily:"Varje dag",repeat_workdays:"Varje vardag",repeat_weekly:"Varje vecka",repeat_monthly:"Varje månad",repeat_yearly:"Varje år",repeat_custom:"Anpassad",repeat_freq_day:"Dag",repeat_freq_week:"Vecka",repeat_freq_month:"Månad",repeat_freq_year:"År",repeat_on_date:"På datum",repeat_ends:"Slutar",month_for_recurring:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],day_for_recurring:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"]}},p_={date:{month_full:["Ocak","Þubat","Mart","Nisan","Mayýs","Haziran","Temmuz","Aðustos","Eylül","Ekim","Kasým","Aralýk"],month_short:["Oca","Þub","Mar","Nis","May","Haz","Tem","Aðu","Eyl","Eki","Kas","Ara"],day_full:["Pazar","Pazartes,","Salý","Çarþamba","Perþembe","Cuma","Cumartesi"],day_short:["Paz","Pts","Sal","Çar","Per","Cum","Cts"]},labels:{dhx_cal_today_button:"Bugün",day_tab:"Gün",week_tab:"Hafta",month_tab:"Ay",new_event:"Uygun",icon_save:"Kaydet",icon_cancel:"Ýptal",icon_details:"Detaylar",icon_edit:"Düzenle",icon_delete:"Sil",confirm_closing:"",confirm_deleting:"Etkinlik silinecek, devam?",section_description:"Açýklama",section_time:"Zaman aralýðý",full_day:"Tam gün",confirm_recurring:"Tüm tekrar eden etkinlikler silinecek, devam?",section_recurring:"Etkinliði tekrarla",button_recurring:"Pasif",button_recurring_open:"Aktif",button_edit_series:"Dizi düzenleme",button_edit_occurrence:"Bir kopyasını düzenleyin",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Ajanda",date:"Tarih",description:"Açýklama",year_tab:"Yýl",week_agenda_tab:"Ajanda",grid_tab:"Izgara",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Günlük",repeat_radio_week:"Haftalık",repeat_radio_month:"Aylık",repeat_radio_year:"Yıllık",repeat_radio_day_type:"Her",repeat_text_day_count:"gün",repeat_radio_day_type2:"Her iş günü",repeat_week:" Tekrar her",repeat_text_week_count:"hafta şu günlerde:",repeat_radio_month_type:"Tekrar et",repeat_radio_month_start:"Tarihinde",repeat_text_month_day:"gün her",repeat_text_month_count:"ay",repeat_text_month_count2_before:"her",repeat_text_month_count2_after:"ay",repeat_year_label:"Tarihinde",select_year_day2:"ayın",repeat_text_year_day:"günü",select_year_month:"ay",repeat_radio_end:"Bitiş tarihi yok",repeat_text_occurrences_count:"olay",repeat_radio_end2:"Sonra",repeat_radio_end3:"Tarihinde bitir",repeat_never:"Asla",repeat_daily:"Her gün",repeat_workdays:"Her iş günü",repeat_weekly:"Her hafta",repeat_monthly:"Her ay",repeat_yearly:"Her yıl",repeat_custom:"Özel",repeat_freq_day:"Gün",repeat_freq_week:"Hafta",repeat_freq_month:"Ay",repeat_freq_year:"Yıl",repeat_on_date:"Tarihinde",repeat_ends:"Biter",month_for_recurring:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],day_for_recurring:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"]}},m_={date:{month_full:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],month_short:["Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру"],day_full:["Неділя","Понеділок","Вівторок","Середа","Четвер","П'ятниця","Субота"],day_short:["Нед","Пон","Вів","Сер","Чет","Птн","Суб"]},labels:{dhx_cal_today_button:"Сьогодні",day_tab:"День",week_tab:"Тиждень",month_tab:"Місяць",new_event:"Нова подія",icon_save:"Зберегти",icon_cancel:"Відміна",icon_details:"Деталі",icon_edit:"Редагувати",icon_delete:"Вилучити",confirm_closing:"",confirm_deleting:"Подія вилучиться назавжди. Ви впевнені?",section_description:"Опис",section_time:"Часовий проміжок",full_day:"Весь день",confirm_recurring:"Хочете редагувати весь перелік повторюваних подій?",section_recurring:"Повторювана подія",button_recurring:"Відключено",button_recurring_open:"Включено",button_edit_series:"Редагувати серію",button_edit_occurrence:"Редагувати примірник",button_edit_occurrence_and_following:"This and following events",agenda_tab:"Перелік",date:"Дата",description:"Опис",year_tab:"Рік",week_agenda_tab:"Перелік",grid_tab:"Таблиця",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"День",repeat_radio_week:"Тиждень",repeat_radio_month:"Місяць",repeat_radio_year:"Рік",repeat_radio_day_type:"Кожний",repeat_text_day_count:"день",repeat_radio_day_type2:"Кожний робочий день",repeat_week:" Повторювати кожен",repeat_text_week_count:"тиждень , по:",repeat_radio_month_type:"Повторювати",repeat_radio_month_start:"",repeat_text_month_day:" числа кожний ",repeat_text_month_count:"місяць",repeat_text_month_count2_before:"кожен ",repeat_text_month_count2_after:"місяць",repeat_year_label:"",select_year_day2:"",repeat_text_year_day:"день",select_year_month:"",repeat_radio_end:"Без дати закінчення",repeat_text_occurrences_count:"повторень",repeat_radio_end3:"До ",repeat_radio_end2:"",repeat_never:"Ніколи",repeat_daily:"Щодня",repeat_workdays:"Щодня в робочі дні",repeat_weekly:"Щотижня",repeat_monthly:"Щомісяця",repeat_yearly:"Щороку",repeat_custom:"Налаштоване",repeat_freq_day:"День",repeat_freq_week:"Тиждень",repeat_freq_month:"Місяць",repeat_freq_year:"Рік",repeat_on_date:"На дату",repeat_ends:"Закінчується",month_for_recurring:["січня","лютого","березня","квітня","травня","червня","липня","серпня","вересня","жовтня","листопада","грудня"],day_for_recurring:["Неділям","Понеділкам","Вівторкам","Середам","Четвергам","П'ятницям","Суботам"]}};class g_{constructor(t,n,a={}){this.state={date:new Date,modes:["days","months","years"],currentRange:[],eventDates:[],filterDays:null,currentModeIndex:0,...a},this.container=null,this.element=null,this.onStateChangeHandlers=[],this.scheduler=t,this._domEvents=t._createDomEventScope(),this.state=this.getState(),di(this),n&&(this.container=n,this.render(this.container)),this.onStateChange((i,r)=>{this.callEvent("onStateChange",[r,i])})}getState(){return{...this.state,mode:this.state.modes[this.state.currentModeIndex]}}setState(t){const n={...this.state};t.mode&&(t.currentModeIndex=this.state.modes.indexOf(t.mode)),this.state={...this.state,...t},this._notifyStateChange(n,this.state),this.container&&this.render(this.container)}onStateChange(t){return this.onStateChangeHandlers.push(t),()=>{const n=this.onStateChangeHandlers.indexOf(t);n!==-1&&this.onStateChangeHandlers.splice(n,1)}}_notifyStateChange(t,n){this.onStateChangeHandlers.forEach(a=>a(t,n))}_adjustDate(t){const{mode:n,date:a}=this.getState(),i=new Date(a);n==="days"?i.setMonth(a.getMonth()+t):n==="months"?i.setFullYear(a.getFullYear()+t):i.setFullYear(a.getFullYear()+10*t),this.setState({date:i})}_toggleMode(){const t=(this.state.currentModeIndex+1)%this.state.modes.length;this.setState({currentModeIndex:t})}_renderCalendarHeader(t){const{mode:n,date:a}=this.getState(),i=document.createElement("div");i.classList.add("dhx_cal_datepicker_header");const r=document.createElement("button");r.classList.add("dhx_cal_datepicker_arrow","scheduler_icon","arrow_left"),i.appendChild(r);const o=document.createElement("div");if(o.classList.add("dhx_cal_datepicker_title"),n==="days")o.innerText=a.toLocaleString("default",{month:"long"})+" "+a.getFullYear();else if(n==="months")o.innerText=a.getFullYear();else{const s=10*Math.floor(a.getFullYear()/10);o.innerText=`${s} - ${s+9}`}this._domEvents.attach(o,"click",this._toggleMode.bind(this)),i.appendChild(o);const l=document.createElement("button");l.classList.add("dhx_cal_datepicker_arrow","scheduler_icon","arrow_right"),i.appendChild(l),t.appendChild(i),this._domEvents.attach(r,"click",this._adjustDate.bind(this,-1)),this._domEvents.attach(l,"click",this._adjustDate.bind(this,1))}render(t){this._domEvents.detachAll(),this.container=t||this.container,this.container.innerHTML="",this.element||(this.element=document.createElement("div"),this.element.classList.add("dhx_cal_datepicker")),this.element.innerHTML="",this.container.appendChild(this.element),this._renderCalendarHeader(this.element);const n=document.createElement("div");n.classList.add("dhx_cal_datepicker_data"),this.element.appendChild(n);const{mode:a}=this.getState();a==="days"?this._renderDayGrid(n):a==="months"?this._renderMonthGrid(n):this._renderYearGrid(n)}_renderDayGridHeader(t){const{date:n,filterDays:a}=this.getState(),i=this.scheduler;let r=i.date.week_start(new Date(n));const o=i.date.add(i.date.week_start(new Date(n)),1,"week");t.classList.add("dhx_cal_datepicker_days");const l=i.date.date_to_str("%D");for(;r.valueOf()<o.valueOf();){if(!a||!a(r)){const s=l(r),d=document.createElement("div");d.setAttribute("data-day",r.getDay()),d.classList.add("dhx_cal_datepicker_dayname"),d.innerText=s,t.appendChild(d)}r=i.date.add(r,1,"day")}}_weeksBetween(t,n){const a=this.scheduler;let i=0,r=new Date(t);for(;r.valueOf()<n.valueOf();)i+=1,r=a.date.week_start(a.date.add(r,1,"week"));return i}_renderDayGrid(t){const{date:n,currentRange:a,eventDates:i,minWeeks:r,filterDays:o}=this.getState();let l=a[0],s=a[1];const d=i.reduce((N,M)=>(N[this.scheduler.date.day_start(new Date(M)).valueOf()]=!0,N),{}),c=document.createElement("div");this._renderDayGridHeader(c);const u=c.children.length;t.appendChild(c),u!==7&&t.style.setProperty("--dhx-scheduler-week-length",u);const f=this.scheduler,y=f.date.week_start(f.date.month_start(new Date(n))),g=f.date.month_start(new Date(n)),h=f.date.add(f.date.month_start(new Date(n)),1,"month");let p=f.date.add(f.date.month_start(new Date(n)),1,"month");const v=f.date.date_part(f._currentDate());p.getDay()!==0&&(p=f.date.add(f.date.week_start(p),1,"week"));let x=this._weeksBetween(y,p);r&&x<r&&(p=f.date.add(p,r-x,"week"));let S=y;const O=document.createElement("div");for(O.classList.add("dhx_cal_datepicker_days"),this._domEvents.attach(O,"click",N=>{const M=N.target.closest("[data-cell-date]"),A=new Date(M.getAttribute("data-cell-date"));this.callEvent("onDateClick",[A,N])});S.valueOf()<p.valueOf();){if(!o||!o(S)){const N=document.createElement("div");N.setAttribute("data-cell-date",f.templates.format_date(S)),N.setAttribute("data-day",S.getDay()),N.innerHTML=f.templates.month_day(S),S.valueOf()<g.valueOf()?N.classList.add("dhx_before"):S.valueOf()>=h.valueOf()&&N.classList.add("dhx_after"),S.getDay()!==0&&S.getDay()!==6||N.classList.add("dhx_cal_datepicker_weekend"),S.valueOf()==v.valueOf()&&N.classList.add("dhx_now"),l&&s&&S.valueOf()>=l.valueOf()&&S.valueOf()<s.valueOf()&&N.classList.add("dhx_cal_datepicker_current"),d[S.valueOf()]&&N.classList.add("dhx_cal_datepicker_event"),N.classList.add("dhx_cal_datepicker_date"),O.appendChild(N)}S=f.date.add(S,1,"day")}t.appendChild(O)}_renderMonthGrid(t){const{date:n}=this.getState(),a=document.createElement("div");a.classList.add("dhx_cal_datepicker_months");const i=[];for(let s=0;s<12;s++)i.push(new Date(n.getFullYear(),s,1));const r=this.scheduler.date.date_to_str("%M");i.forEach(s=>{const d=document.createElement("div");d.classList.add("dhx_cal_datepicker_month"),n.getMonth()===s.getMonth()&&d.classList.add("dhx_cal_datepicker_current"),d.setAttribute("data-month",s.getMonth()),d.innerHTML=r(s),this._domEvents.attach(d,"click",()=>{const c=new Date(s);this.setState({date:c,mode:"days"})}),a.appendChild(d)}),t.appendChild(a);const o=document.createElement("div");o.classList.add("dhx_cal_datepicker_done");const l=document.createElement("button");l.innerText="Done",l.classList.add("dhx_cal_datepicker_done_btn"),this._domEvents.attach(l,"click",()=>{this.setState({mode:"days"})}),o.appendChild(l),t.appendChild(o)}_renderYearGrid(t){const{date:n}=this.getState(),a=10*Math.floor(n.getFullYear()/10),i=document.createElement("div");i.classList.add("dhx_cal_datepicker_years");for(let l=a-1;l<=a+10;l++){const s=document.createElement("div");s.innerText=l,s.classList.add("dhx_cal_datepicker_year"),s.setAttribute("data-year",l),n.getFullYear()===l&&s.classList.add("dhx_cal_datepicker_current"),this._domEvents.attach(s,"click",()=>{this.setState({date:new Date(l,n.getMonth(),1),mode:"months"})}),i.appendChild(s)}t.appendChild(i);const r=document.createElement("div");r.classList.add("dhx_cal_datepicker_done");const o=document.createElement("button");o.innerText="Done",o.classList.add("dhx_cal_datepicker_done_btn"),this._domEvents.attach(o,"click",()=>{this.setState({mode:"months"})}),r.appendChild(o),t.appendChild(r)}destructor(){this.onStateChangeHandlers=[],this.element&&(this.element.innerHTML="",this.element.remove()),this._domEvents.detachAll(),this.callEvent("onDestroy",[]),this.detachAllEvents(),this.scheduler=null}}function v_(e){const t={version:"7.2.5"};t.$stateProvider=function(){const s={};return{getState:function(d){if(s[d])return s[d].method();{const c={};for(const u in s)s[u].internal||Xe.mixin(c,s[u].method(),!0);return c}},registerProvider:function(d,c,u){s[d]={method:c,internal:u}},unregisterProvider:function(d){delete s[d]}}}(),t.getState=t.$stateProvider.getState,function(s){var d={agenda:"https://docs.dhtmlx.com/scheduler/agenda_view.html",grid:"https://docs.dhtmlx.com/scheduler/grid_view.html",map:"https://docs.dhtmlx.com/scheduler/map_view.html",unit:"https://docs.dhtmlx.com/scheduler/units_view.html",timeline:"https://docs.dhtmlx.com/scheduler/timeline_view.html",week_agenda:"https://docs.dhtmlx.com/scheduler/weekagenda_view.html",year:"https://docs.dhtmlx.com/scheduler/year_view.html",anythingElse:"https://docs.dhtmlx.com/scheduler/views.html"},c={agenda:"ext/dhtmlxscheduler_agenda_view.js",grid:"ext/dhtmlxscheduler_grid_view.js",map:"ext/dhtmlxscheduler_map_view.js",unit:"ext/dhtmlxscheduler_units.js",timeline:"ext/dhtmlxscheduler_timeline.js, ext/dhtmlxscheduler_treetimeline.js, ext/dhtmlxscheduler_daytimeline.js",week_agenda:"ext/dhtmlxscheduler_week_agenda.js",year:"ext/dhtmlxscheduler_year_view.js",limit:"ext/dhtmlxscheduler_limit.js"};s._commonErrorMessages={unknownView:function(u){var f=c[u]?"You're probably missing "+c[u]+".":"";return"`"+u+"` view is not defined. \nPlease check parameters you pass to `scheduler.init` or `scheduler.setCurrentView` in your code and ensure you've imported appropriate extensions. \nRelated docs: "+(d[u]||d.anythingElse)+`
`+(f?f+`
`:"")},collapsedContainer:function(u){return`Scheduler container height is set to *100%* but the rendered height is zero and the scheduler is not visible. 
Make sure that the container has some initial height or use different units. For example:
<div id='scheduler_here' class='dhx_cal_container' style='width:100%; height:600px;'> 
`}},s.createTimelineView=function(){throw new Error("scheduler.createTimelineView is not implemented. Be sure to add the required extension: "+c.timeline+`
Related docs: `+d.timeline)},s.createUnitsView=function(){throw new Error("scheduler.createUnitsView is not implemented. Be sure to add the required extension: "+c.unit+`
Related docs: `+d.unit)},s.createGridView=function(){throw new Error("scheduler.createGridView is not implemented. Be sure to add the required extension: "+c.grid+`
Related docs: `+d.grid)},s.addMarkedTimespan=function(){throw new Error(`scheduler.addMarkedTimespan is not implemented. Be sure to add the required extension: ext/dhtmlxscheduler_limit.js
Related docs: https://docs.dhtmlx.com/scheduler/limits.html`)},s.renderCalendar=function(){throw new Error(`scheduler.renderCalendar is not implemented. Be sure to add the required extension: ext/dhtmlxscheduler_minical.js
https://docs.dhtmlx.com/scheduler/minicalendar.html`)},s.exportToPNG=function(){throw new Error(["scheduler.exportToPNG is not implemented.","This feature requires an additional module, be sure to check the related doc here https://docs.dhtmlx.com/scheduler/png.html","Licensing info: https://dhtmlx.com/docs/products/dhtmlxScheduler/export.shtml"].join(`
`))},s.exportToPDF=function(){throw new Error(["scheduler.exportToPDF is not implemented.","This feature requires an additional module, be sure to check the related doc here https://docs.dhtmlx.com/scheduler/pdf.html","Licensing info: https://dhtmlx.com/docs/products/dhtmlxScheduler/export.shtml"].join(`
`))}}(t),Sc(t),function(s){di(s),Ec(s),s._detachDomEvent=function(h,p,v){h.removeEventListener?h.removeEventListener(p,v,!1):h.detachEvent&&h.detachEvent("on"+p,v)},s._init_once=function(){Tc(s),s._init_once=function(){}};const d={render:function(h){return s._init_nav_bar(h)}},c={render:function(h){const p=document.createElement("div");return p.className="dhx_cal_header",p}},u={render:function(h){const p=document.createElement("div");return p.className="dhx_cal_data",p}};function f(h){return!!(h.querySelector(".dhx_cal_header")&&h.querySelector(".dhx_cal_data")&&h.querySelector(".dhx_cal_navline"))}s.init=function(h,p,v){if(!this.$destroyed){if(p=p||s._currentDate(),v=v||"week",this._obj&&this.unset_actions(),this._obj=typeof h=="string"?document.getElementById(h):h,this.$container=this._obj,this.$root=this._obj,!this.$container.offsetHeight&&this.$container.offsetWidth&&this.$container.style.height==="100%"&&window.console.error(s._commonErrorMessages.collapsedContainer(),this.$container),this.config.wai_aria_attributes&&this.config.wai_aria_application_role&&this.$container.setAttribute("role","application"),this.config.header||f(this.$container)||(this.config.header=function(x){const S=["day","week","month"];if(x.matrix)for(const O in x.matrix)S.push(O);if(x._props)for(const O in x._props)S.push(O);if(x._grid&&x._grid.names)for(const O in x._grid.names)S.push(O);return["map","agenda","week_agenda","year"].forEach(function(O){x[O+"_view"]&&S.push(O)}),S.concat(["date"]).concat(["prev","today","next"])}(this),window.console.log(["Required DOM elements are missing from the scheduler container and **scheduler.config.header** is not specified.","Using a default header configuration: ","scheduler.config.header = "+JSON.stringify(this.config.header,null,2),"Check this article for the details: https://docs.dhtmlx.com/scheduler/initialization.html"].join(`
`))),this.config.header)this.$container.innerHTML="",this.$container.classList.add("dhx_cal_container"),this.config.header.height&&(this.xy.nav_height=this.config.header.height),this.$container.appendChild(d.render(this.config.header)),this.$container.appendChild(c.render()),this.$container.appendChild(u.render());else if(!f(this.$container))throw new Error(["Required DOM elements are missing from the scheduler container.","Be sure to either specify them manually in the markup: https://docs.dhtmlx.com/scheduler/initialization.html#initializingschedulerviamarkup","Or to use **scheduler.config.header** setting so they could be created automatically: https://docs.dhtmlx.com/scheduler/initialization.html#initializingschedulerviaheaderconfig"].join(`
`));this.config.rtl&&(this.$container.className+=" dhx_cal_container_rtl"),this._skin_init&&s._skin_init(),s.date.init(),this._scroll=!0,this._els=[],this.get_elements(),this.init_templates(),this.set_actions(),this._init_once(),this._init_touch_events(),this.set_sizes(),s.callEvent("onSchedulerReady",[]),s.$initialized=!0,this.setCurrentView(p,v)}},s.xy={min_event_height:20,bar_height:24,scale_width:50,scroll_width:18,scale_height:20,month_scale_height:20,menu_width:25,margin_top:0,margin_left:0,editor_width:140,month_head_height:22,event_header_height:14},s.keys={edit_save:13,edit_cancel:27},s.bind=function(h,p){return h.bind?h.bind(p):function(){return h.apply(p,arguments)}},s.set_sizes=function(){var h=this._x=this._obj.clientWidth-this.xy.margin_left,p=this._table_view?0:this.xy.scale_width+this.xy.scroll_width,v=this.$container.querySelector(".dhx_cal_scale_placeholder");s._is_material_skin()?(v||((v=document.createElement("div")).className="dhx_cal_scale_placeholder",this.$container.insertBefore(v,this._els.dhx_cal_header[0])),v.style.display="block",this.set_xy(v,h,this.xy.scale_height+1,0,this._els.dhx_cal_header[0].offsetTop)):v&&v.parentNode.removeChild(v),this._lightbox&&(s.$container.offsetWidth<1200||this._setLbPosition(document.querySelector(".dhx_cal_light"))),this._data_width=h-p,this._els.dhx_cal_navline[0].style.width=h+"px";const x=this._els.dhx_cal_header[0];this.set_xy(x,this._data_width,this.xy.scale_height),x.style.left="",x.style.right="",this._table_view?this.config.rtl?x.style.right="-1px":x.style.left="-1px":this.config.rtl?x.style.right=`${this.xy.scale_width}px`:x.style.left=`${this.xy.scale_width}px`},s.set_xy=function(h,p,v,x,S){function O(M){let A=M;return isNaN(Number(A))||(A=Math.max(0,A)+"px"),A}var N="left";p!==void 0&&(h.style.width=O(p)),v!==void 0&&(h.style.height=O(v)),arguments.length>3&&(x!==void 0&&(this.config.rtl&&(N="right"),h.style[N]=x+"px"),S!==void 0&&(h.style.top=S+"px"))},s.get_elements=function(){const h=this._obj.getElementsByTagName("DIV");for(let p=0;p<h.length;p++){let v=s._getClassName(h[p]);const x=h[p].getAttribute("data-tab")||h[p].getAttribute("name")||"";v&&(v=v.split(" ")[0]),this._els[v]||(this._els[v]=[]),this._els[v].push(h[p]);let S=s.locale.labels[x+"_tab"]||s.locale.labels[x||v];typeof S!="string"&&x&&!h[p].innerHTML&&(S=x.split("_")[0]),S&&(this._waiAria.labelAttr(h[p],S),h[p].innerHTML=S)}};const y=s._createDomEventScope();function g(h,p){const v=new Date(h),x=(new Date(p).getTime()-v.getTime())/864e5;return Math.abs(x)}s.unset_actions=function(){y.detachAll()},s.set_actions=function(){for(const h in this._els)if(this._click[h])for(let p=0;p<this._els[h].length;p++){const v=this._els[h][p],x=this._click[h].bind(v);y.attach(v,"click",x)}y.attach(this._obj,"selectstart",function(h){return h.preventDefault(),!1}),y.attach(this._obj,"mousemove",function(h){s._temp_touch_block||s._on_mouse_move(h)}),y.attach(this._obj,"mousedown",function(h){s._ignore_next_click||s._on_mouse_down(h)}),y.attach(this._obj,"mouseup",function(h){s._ignore_next_click||s._on_mouse_up(h)}),y.attach(this._obj,"dblclick",function(h){s._on_dbl_click(h)}),y.attach(this._obj,"contextmenu",function(h){return s.checkEvent("onContextMenu")&&h.preventDefault(),s.callEvent("onContextMenu",[s._locate_event(h.target),h])})},s.select=function(h){this._select_id!=h&&(s._close_not_saved(),this.editStop(!1),this._select_id&&this.unselect(),this._select_id=h,this.updateEvent(h),this.callEvent("onEventSelected",[h]))},s.unselect=function(h){if(h&&h!=this._select_id)return;const p=this._select_id;this._select_id=null,p&&this.getEvent(p)&&this.updateEvent(p),this.callEvent("onEventUnselected",[p])},s.$stateProvider.registerProvider("global",(function(){return{mode:this._mode,date:new Date(this._date),min_date:new Date(this._min_date),max_date:new Date(this._max_date),editor_id:this._edit_id,lightbox_id:this._lightbox_id,new_event:this._new_event,select_id:this._select_id,expanded:this.expanded,drag_id:this._drag_id,drag_mode:this._drag_mode}}).bind(s)),s._click={dhx_cal_data:function(h){if(s._ignore_next_click)return h.preventDefault&&h.preventDefault(),h.cancelBubble=!0,s._ignore_next_click=!1,!1;const p=s._locate_event(h.target);if(p){if(!s.callEvent("onClick",[p,h])||s.config.readonly)return}else s.callEvent("onEmptyClick",[s.getActionData(h).date,h]);if(p&&s.config.select){s.select(p);const v=h.target.closest(".dhx_menu_icon"),x=s._getClassName(v);x.indexOf("_icon")!=-1&&s._click.buttons[x.split(" ")[1].replace("icon_","")](p)}else s._close_not_saved(),s.getState().select_id&&new Date().valueOf()-(s._new_event||0)>500&&s.unselect()},dhx_cal_prev_button:function(){s._click.dhx_cal_next_button(0,-1)},dhx_cal_next_button:function(h,p){let v=1;s.config.rtl&&(p=-p,v=-v),s.setCurrentView(s.date.add(s.date[s._mode+"_start"](new Date(s._date)),p||v,s._mode))},dhx_cal_today_button:function(){s.callEvent("onBeforeTodayDisplayed",[])&&s.setCurrentView(s._currentDate())},dhx_cal_tab:function(){const h=this.getAttribute("data-tab"),p=this.getAttribute("name"),v=h||p.substring(0,p.search("_tab"));s.setCurrentView(s._date,v)},buttons:{delete:function(h){const p=s.locale.labels.confirm_deleting;s._dhtmlx_confirm({message:p,title:s.locale.labels.title_confirm_deleting,callback:function(){s.deleteEvent(h)},config:{ok:s.locale.labels.icon_delete}})},edit:function(h){s.edit(h)},save:function(h){s.editStop(!0)},details:function(h){s.showLightbox(h)},form:function(h){s.showLightbox(h)},cancel:function(h){s.editStop(!1)}}},s._dhtmlx_confirm=function({message:h,title:p,callback:v,config:x}){if(!h)return v();x=x||{};const S={...x,text:h};p&&(S.title=p),v&&(S.callback=function(O){O&&v()}),s.confirm(S)},s.addEventNow=function(h,p,v){let x={};s._isObject(h)&&!s._isDate(h)&&(x=h,h=null);const S=6e4*(this.config.event_duration||this.config.time_step);h||(h=x.start_date||Math.round(s._currentDate().valueOf()/S)*S);let O=new Date(h);if(!p){let A=this.config.first_hour;A>O.getHours()&&(O.setHours(A),h=O.valueOf()),p=h.valueOf()+S}let N=new Date(p);O.valueOf()==N.valueOf()&&N.setTime(N.valueOf()+S),x.start_date=x.start_date||O,x.end_date=x.end_date||N,x.text=x.text||this.locale.labels.new_event,x.id=this._drag_id=x.id||this.uid(),this._drag_mode="new-size",this._loading=!0;const M=this.addEvent(x);return this.callEvent("onEventCreated",[this._drag_id,v]),this._loading=!1,this._drag_event={},this._on_mouse_up(v),M},s._on_dbl_click=function(h,p){if(p=p||h.target,this.config.readonly)return;const v=s._getClassName(p).split(" ")[0];switch(v){case"dhx_scale_holder":case"dhx_scale_holder_now":case"dhx_month_body":case"dhx_wa_day_data":if(!s.config.dblclick_create)break;this.addEventNow(this.getActionData(h).date,null,h);break;case"dhx_cal_event":case"dhx_wa_ev_body":case"dhx_agenda_line":case"dhx_cal_agenda_event_line":case"dhx_grid_event":case"dhx_cal_event_line":case"dhx_cal_event_clear":{const x=this._locate_event(p);if(!this.callEvent("onDblClick",[x,h]))return;this.config.details_on_dblclick||this._table_view||!this.getEvent(x)._timed||!this.config.select?this.showLightbox(x):this.edit(x);break}case"dhx_time_block":case"dhx_cal_container":return;default:{const x=this["dblclick_"+v];if(x)x.call(this,h);else if(p.parentNode&&p!=this)return s._on_dbl_click(h,p.parentNode);break}}},s._get_column_index=function(h){let p=0;if(this._cols){let v=0,x=0;for(;v+this._cols[x]<h&&x<this._cols.length;)v+=this._cols[x],x++;if(p=x+(this._cols[x]?(h-v)/this._cols[x]:0),this._ignores&&p>=this._cols.length)for(;p>=1&&this._ignores[Math.floor(p)];)p--}return p},s._week_indexes_from_pos=function(h){if(this._cols){const p=this._get_column_index(h.x);return h.x=Math.min(this._cols.length-1,Math.max(0,Math.ceil(p)-1)),h.y=Math.max(0,Math.ceil(60*h.y/(this.config.time_step*this.config.hour_size_px))-1)+this.config.first_hour*(60/this.config.time_step),h}return h},s._mouse_coords=function(h){let p;const v=document.body,x=document.documentElement;p=this.$env.isIE||!h.pageX&&!h.pageY?{x:h.clientX+(v.scrollLeft||x.scrollLeft||0)-v.clientLeft,y:h.clientY+(v.scrollTop||x.scrollTop||0)-v.clientTop}:{x:h.pageX,y:h.pageY},this.config.rtl&&this._colsS?(p.x=this.$container.querySelector(".dhx_cal_data").offsetWidth-p.x,p.x+=this.$domHelpers.getAbsoluteLeft(this._obj),this._mode!=="month"&&(p.x-=this.xy.scale_width)):p.x-=this.$domHelpers.getAbsoluteLeft(this._obj)+(this._table_view?0:this.xy.scale_width);const S=this.$container.querySelector(".dhx_cal_data");p.y-=this.$domHelpers.getAbsoluteTop(S)-this._els.dhx_cal_data[0].scrollTop,p.ev=h;const O=this["mouse_"+this._mode];if(O)p=O.call(this,p);else if(this._table_view){const N=this._get_column_index(p.x);if(!this._cols||!this._colsS)return p;let M=0;for(M=1;M<this._colsS.heights.length&&!(this._colsS.heights[M]>p.y);M++);p.y=Math.ceil(24*(Math.max(0,N)+7*Math.max(0,M-1))*60/this.config.time_step),(s._drag_mode||this._mode=="month")&&(p.y=24*(Math.max(0,Math.ceil(N)-1)+7*Math.max(0,M-1))*60/this.config.time_step),this._drag_mode=="move"&&s._ignores_detected&&s.config.preserve_length&&(p._ignores=!0,this._drag_event._event_length||(this._drag_event._event_length=this._get_real_event_length(this._drag_event.start_date,this._drag_event.end_date,{x_step:1,x_unit:"day"}))),p.x=0}else p=this._week_indexes_from_pos(p);return p.timestamp=+new Date,p},s._close_not_saved=function(){if(new Date().valueOf()-(s._new_event||0)>500&&s._edit_id){const h=s.locale.labels.confirm_closing;s._dhtmlx_confirm({message:h,title:s.locale.labels.title_confirm_closing,callback:function(){s.editStop(s.config.positive_closing)}}),h&&(this._drag_id=this._drag_pos=this._drag_mode=null)}},s._correct_shift=function(h,p){return h-6e4*(new Date(s._min_date).getTimezoneOffset()-new Date(h).getTimezoneOffset())*(p?-1:1)},s._is_pos_changed=function(h,p){function v(x,S,O){return Math.abs(x-S)>O}return!h||!this._drag_pos||!!(this._drag_pos.has_moved||!this._drag_pos.timestamp||p.timestamp-this._drag_pos.timestamp>100||v(h.ev.clientX,p.ev.clientX,5)||v(h.ev.clientY,p.ev.clientY,5))},s._correct_drag_start_date=function(h){let p;s.matrix&&(p=s.matrix[s._mode]),p=p||{x_step:1,x_unit:"day"},h=new Date(h);let v=1;return(p._start_correction||p._end_correction)&&(v=60*(p.last_hour||0)-(60*h.getHours()+h.getMinutes())||1),1*h+(s._get_fictional_event_length(h,v,p)-v)},s._correct_drag_end_date=function(h,p){let v;s.matrix&&(v=s.matrix[s._mode]),v=v||{x_step:1,x_unit:"day"};const x=1*h+s._get_fictional_event_length(h,p,v);return new Date(1*x-(s._get_fictional_event_length(x,-1,v,-1)+1))},s._on_mouse_move=function(h){if(this._drag_mode){var p=this._mouse_coords(h);if(this._is_pos_changed(this._drag_pos,p)){var v,x;if(this._edit_id!=this._drag_id&&this._close_not_saved(),!this._drag_mode)return;var S=null;if(this._drag_pos&&!this._drag_pos.has_moved&&((S=this._drag_pos).has_moved=!0),this._drag_pos=p,this._drag_pos.has_moved=!0,this._drag_mode=="create"){if(S&&(p=S),this._close_not_saved(),this.unselect(this._select_id),this._loading=!0,v=this._get_date_from_pos(p).valueOf(),!this._drag_start)return this.callEvent("onBeforeEventCreated",[h,this._drag_id])?(this._loading=!1,void(this._drag_start=v)):void(this._loading=!1);x=v,this._drag_start;var O=new Date(this._drag_start),N=new Date(x);this._mode!="day"&&this._mode!="week"||O.getHours()!=N.getHours()||O.getMinutes()!=N.getMinutes()||(N=new Date(this._drag_start+1e3)),this._drag_id=this.uid(),this.addEvent(O,N,this.locale.labels.new_event,this._drag_id,p.fields),this.callEvent("onEventCreated",[this._drag_id,h]),this._loading=!1,this._drag_mode="new-size"}var M,A=this.config.time_step,m=this.getEvent(this._drag_id);if(s.matrix&&(M=s.matrix[s._mode]),M=M||{x_step:1,x_unit:"day"},this._drag_mode=="move")v=this._min_date.valueOf()+6e4*(p.y*this.config.time_step+24*p.x*60),!p.custom&&this._table_view&&(v+=1e3*this.date.time_part(m.start_date)),!this._table_view&&this._dragEventBody&&this._drag_event._move_event_shift===void 0&&(this._drag_event._move_event_shift=v-m.start_date),this._drag_event._move_event_shift&&(v-=this._drag_event._move_event_shift),v=this._correct_shift(v),p._ignores&&this.config.preserve_length&&this._table_view&&M?(v=s._correct_drag_start_date(v),x=s._correct_drag_end_date(v,this._drag_event._event_length)):x=m.end_date.valueOf()-(m.start_date.valueOf()-v);else{if(v=m.start_date.valueOf(),x=m.end_date.valueOf(),this._table_view){var b=this._min_date.valueOf()+p.y*this.config.time_step*6e4+(p.custom?0:864e5);if(this._mode=="month")if(b=this._correct_shift(b,!1),this._drag_from_start){var k=864e5;b<=s.date.date_part(new Date(x+k-1)).valueOf()&&(v=b-k)}else x=b;else if(this.config.preserve_length){if(p.resize_from_start)v=s._correct_drag_start_date(b),M.round_position&&M.first_hour&&M.last_hour&&M.x_unit=="day"&&(v=new Date(1*v+M._start_correction));else if(x=s._correct_drag_end_date(b,0),M.round_position&&M.first_hour&&M.last_hour&&M.x_unit=="day"&&(x=s.date.date_part(new Date(x)),x=new Date(1*x-M._end_correction)),M.round_position&&s["ignore_"+s._mode]&&M.x_unit=="day"){const fe=this["ignore_"+this._mode];let Ve=s.date.add(new Date(x),-M.x_step,M.x_unit);fe(Ve)&&(x=Ve)}}else p.resize_from_start?v=b:x=b}else{var E=this.date.date_part(new Date(m.end_date.valueOf()-1)).valueOf(),D=new Date(E),C=this.config.first_hour,R=60/A*(this.config.last_hour-C);this.config.time_step=1;var P=this._mouse_coords(h);this.config.time_step=A;var F=p.y*A*6e4,z=Math.min(p.y+1,R)*A*6e4,$=6e4*P.y;x=Math.abs(F-$)>Math.abs(z-$)?E+z:E+F,x+=6e4*(new Date(x).getTimezoneOffset()-D.getTimezoneOffset()),this._els.dhx_cal_data[0].style.cursor="s-resize",this._mode!="week"&&this._mode!="day"||(x=this._correct_shift(x))}if(this._drag_mode=="new-size")if(x<=this._drag_start){var X=p.shift||(this._table_view&&!p.custom?864e5:0);v=x-(p.shift?0:X),x=this._drag_start+(X||6e4*A)}else v=this._drag_start;else x<=v&&(x=M&&M.round_position?M.x_unit=="hour"||M.x_unit=="minute"?s.date.add(v,M.x_step,M.x_unit):s.date.add(s.date.date_part(new Date(v)),1,M.x_unit):v+6e4*A)}var te=new Date(x-1),G=new Date(v);if(this._drag_mode=="move"&&s.config.limit_drag_out&&(+G<+s._min_date||+x>+s._max_date)){if(+m.start_date<+s._min_date||+m.end_date>+s._max_date)G=new Date(m.start_date),x=new Date(m.end_date);else{var W=x-G;+G<+s._min_date?(G=new Date(s._min_date),p._ignores&&this.config.preserve_length&&this._table_view?(G=new Date(s._correct_drag_start_date(G)),M._start_correction&&(G=new Date(G.valueOf()+M._start_correction)),x=new Date(1*G+this._get_fictional_event_length(G,this._drag_event._event_length,M))):x=new Date(+G+W)):(x=new Date(s._max_date),p._ignores&&this.config.preserve_length&&this._table_view?(M._end_correction&&(x=new Date(x.valueOf()-M._end_correction)),x=new Date(1*x-this._get_fictional_event_length(x,0,M,!0)),G=new Date(1*x-this._get_fictional_event_length(x,this._drag_event._event_length,M,!0)),this._ignores_detected&&(G=s.date.add(G,M.x_step,M.x_unit),x=new Date(1*x-this._get_fictional_event_length(x,0,M,!0)),x=s.date.add(x,M.x_step,M.x_unit))):G=new Date(+x-W))}te=new Date(x-1)}if(!this._table_view&&this._dragEventBody&&!s.config.all_timed&&(!s._get_section_view()&&p.x!=this._get_event_sday({start_date:new Date(v),end_date:new Date(v)})||new Date(v).getHours()<this.config.first_hour)&&(W=x-G,this._drag_mode=="move"&&(k=this._min_date.valueOf()+24*p.x*60*6e4,(G=new Date(k)).setHours(this.config.first_hour),+G<=+m.start_date?x=new Date(+G+W):G=new Date(+x-W))),this._table_view||s.config.all_timed||!(!s.getView()&&p.x!=this._get_event_sday({start_date:new Date(x),end_date:new Date(x)})||new Date(x).getHours()>=this.config.last_hour)||(W=x-G,k=this._min_date.valueOf()+24*p.x*60*6e4,(x=s.date.date_part(new Date(k))).setHours(this.config.last_hour),te=new Date(x-1),this._drag_mode=="move"&&(+G<=+m.start_date?x=new Date(+G+W):G=new Date(+x-W))),!this._table_view&&s.config.all_timed){let fe=this._min_date.valueOf()+24*p.x*60*6e4;new Date(s._drag_start).getDay()!=new Date(fe)&&(fe=new Date(s._drag_start));let Ve=new Date(fe).setHours(this.config.last_hour);s._drag_start&&this._drag_mode=="new-size"&&Ve<new Date(x)&&((x=s.date.date_part(new Date(fe))).setHours(this.config.last_hour),te=new Date(x-1))}if(this._table_view&&s["ignore_"+this._mode]&&(this._drag_mode=="resize"||this._drag_mode=="new-size")&&+x>+s._max_date){x=new Date(s._max_date);const fe=this["ignore_"+this._mode];for(;fe(x);)x=s.date.add(x,-M.x_step,M.x_unit);x=s.date.add(x,M.x_step,M.x_unit)}if(this._table_view||te.getDate()==G.getDate()&&te.getHours()<this.config.last_hour||s._allow_dnd)if(m.start_date=G,m.end_date=new Date(x),this.config.update_render){var J=s._els.dhx_cal_data[0].scrollTop;this.update_view(),s._els.dhx_cal_data[0].scrollTop=J}else this.updateEvent(this._drag_id);this._table_view&&this.for_rendered(this._drag_id,function(fe){fe.className+=" dhx_in_move dhx_cal_event_drag"}),this.callEvent("onEventDrag",[this._drag_id,this._drag_mode,h])}}else if(s.checkEvent("onMouseMove")){var Z=this._locate_event(h.target||h.srcElement);this.callEvent("onMouseMove",[Z,h])}},s._on_mouse_down=function(h,p){if(h.button!=2&&!this.config.readonly&&!this._drag_mode){p=p||h.target||h.srcElement;var v=s._getClassName(p).split(" ")[0];switch(this.config.drag_event_body&&v=="dhx_body"&&p.parentNode&&p.parentNode.className.indexOf("dhx_cal_select_menu")===-1&&(v="dhx_event_move",this._dragEventBody=!0),v){case"dhx_cal_event_line":case"dhx_cal_event_clear":this._table_view&&(this._drag_mode="move");break;case"dhx_event_move":case"dhx_wa_ev_body":this._drag_mode="move";break;case"dhx_event_resize":this._drag_mode="resize",s._getClassName(p).indexOf("dhx_event_resize_end")<0?s._drag_from_start=!0:s._drag_from_start=!1;break;case"dhx_scale_holder":case"dhx_scale_holder_now":case"dhx_month_body":case"dhx_matrix_cell":case"dhx_marked_timespan":this._drag_mode="create";break;case"":if(p.parentNode)return s._on_mouse_down(h,p.parentNode);break;default:if((!s.checkEvent("onMouseDown")||s.callEvent("onMouseDown",[v,h]))&&p.parentNode&&p!=this&&v!="dhx_body")return s._on_mouse_down(h,p.parentNode);this._drag_mode=null,this._drag_id=null}if(this._drag_mode){var x=this._locate_event(p);if(this.config["drag_"+this._drag_mode]&&this.callEvent("onBeforeDrag",[x,this._drag_mode,h])){if(this._drag_id=x,(this._edit_id!=this._drag_id||this._edit_id&&this._drag_mode=="create")&&this._close_not_saved(),!this._drag_mode)return;this._drag_event=s._lame_clone(this.getEvent(this._drag_id)||{}),this._drag_pos=this._mouse_coords(h)}else this._drag_mode=this._drag_id=0}this._drag_start=null}},s._get_private_properties=function(h){var p={};for(var v in h)v.indexOf("_")===0&&(p[v]=!0);return p},s._clear_temporary_properties=function(h,p){var v=this._get_private_properties(h),x=this._get_private_properties(p);for(var S in x)v[S]||delete p[S]},s._on_mouse_up=function(h){if(!h||h.button!=2||!this._mobile){if(this._drag_mode&&this._drag_id){this._els.dhx_cal_data[0].style.cursor="default";var p=this._drag_id,v=this._drag_mode,x=!this._drag_pos||this._drag_pos.has_moved;delete this._drag_event._move_event_shift;var S=this.getEvent(this._drag_id);if(x&&(this._drag_event._dhx_changed||!this._drag_event.start_date||S.start_date.valueOf()!=this._drag_event.start_date.valueOf()||S.end_date.valueOf()!=this._drag_event.end_date.valueOf())){var O=this._drag_mode=="new-size";if(this.callEvent("onBeforeEventChanged",[S,h,O,this._drag_event]))if(this._drag_id=this._drag_mode=null,O&&this.config.edit_on_create){if(this.unselect(),this._new_event=new Date,this._table_view||this.config.details_on_create||!this.config.select||!this.isOneDayEvent(this.getEvent(p)))return s.callEvent("onDragEnd",[p,v,h]),this.showLightbox(p);this._drag_pos=!0,this._select_id=this._edit_id=p}else this._new_event||this.callEvent(O?"onEventAdded":"onEventChanged",[p,this.getEvent(p)]);else O?this.deleteEvent(S.id,!0):(this._drag_event._dhx_changed=!1,this._clear_temporary_properties(S,this._drag_event),s._lame_copy(S,this._drag_event),this.updateEvent(S.id))}this._drag_pos&&(this._drag_pos.has_moved||this._drag_pos===!0)&&(this._drag_id=this._drag_mode=null,this.render_view_data()),s.callEvent("onDragEnd",[p,v,h])}this._drag_id=null,this._drag_mode=null,this._drag_pos=null,this._drag_event=null,this._drag_from_start=null}},s._trigger_dyn_loading=function(){return!(!this._load_mode||!this._load()||(this._render_wait=!0,0))},s.update_view=function(){this._reset_ignores(),this._update_nav_bar(this.config.header,this.$container.querySelector(".dhx_cal_navline"));var h=this[this._mode+"_view"];if(h?h.call(this,!0):this._reset_scale(),this._trigger_dyn_loading())return!0;this.render_view_data()},s.isViewExists=function(h){return!!(s[h+"_view"]||s.date[h+"_start"]&&s.templates[h+"_date"]&&s.templates[h+"_scale_date"])},s._set_aria_buttons_attrs=function(){for(var h=["dhx_cal_next_button","dhx_cal_prev_button","dhx_cal_tab","dhx_cal_today_button"],p=0;p<h.length;p++)for(var v=this._els[h[p]],x=0;v&&x<v.length;x++){var S=v[x].getAttribute("data-tab")||v[x].getAttribute("name"),O=this.locale.labels[h[p]];S&&(O=this.locale.labels[S+"_tab"]||this.locale.labels[S]||O),h[p]=="dhx_cal_next_button"?O=this.locale.labels.next:h[p]=="dhx_cal_prev_button"&&(O=this.locale.labels.prev),this._waiAria.headerButtonsAttributes(v[x],O||"")}},s.updateView=function(h,p){if(!this.$container)throw new Error(`The scheduler is not initialized. 
 **scheduler.updateView** or **scheduler.setCurrentView** can be called only after **scheduler.init**`);h=h||this._date,p=p||this._mode;var v="dhx_cal_data";this.locale.labels.icon_form||(this.locale.labels.icon_form=this.locale.labels.icon_edit);var x=this._obj,S="dhx_scheduler_"+this._mode,O="dhx_scheduler_"+p;this._mode&&x.className.indexOf(S)!=-1?x.className=x.className.replace(S,O):x.className+=" "+O;var N,M="dhx_multi_day",A=!(this._mode!=p||!this.config.preserve_scroll)&&this._els[v][0].scrollTop;this._els[M]&&this._els[M][0]&&(N=this._els[M][0].scrollTop),this[this._mode+"_view"]&&p&&this._mode!=p&&this[this._mode+"_view"](!1),this._close_not_saved(),this._els[M]&&(this._els[M][0].parentNode.removeChild(this._els[M][0]),this._els[M]=null),this._mode=p,this._date=h,this._table_view=this._mode=="month",this._dy_shift=0,this.update_view(),this._set_aria_buttons_attrs();var m=this._els.dhx_cal_tab;if(m)for(var b=0;b<m.length;b++){var k=m[b];k.getAttribute("data-tab")==this._mode||k.getAttribute("name")==this._mode+"_tab"?(k.classList.add("active"),this._waiAria.headerToggleState(k,!0)):(k.classList.remove("active"),this._waiAria.headerToggleState(k,!1))}typeof A=="number"&&(this._els[v][0].scrollTop=A),typeof N=="number"&&this._els[M]&&this._els[M][0]&&(this._els[M][0].scrollTop=N)},s.setCurrentView=function(h,p){this.callEvent("onBeforeViewChange",[this._mode,this._date,p||this._mode,h||this._date])&&(this.updateView(h,p),this.callEvent("onViewChange",[this._mode,this._date]))},s.render=function(h,p){s.setCurrentView(h,p)},s._render_x_header=function(h,p,v,x,S){S=S||0;var O=document.createElement("div");O.className="dhx_scale_bar",this.templates[this._mode+"_scalex_class"]&&(O.className+=" "+this.templates[this._mode+"_scalex_class"](v));var N=this._cols[h];this._mode=="month"&&h===0&&this.config.left_border&&(O.className+=" dhx_scale_bar_border",p+=1),this.set_xy(O,N,this.xy.scale_height-1,p,S);var M=this.templates[this._mode+"_scale_date"](v,this._mode);O.innerHTML=M,this._waiAria.dayHeaderAttr(O,M),x.appendChild(O)},s._get_columns_num=function(h,p){var v=7;if(!s._table_view){var x=s.date["get_"+s._mode+"_end"];x&&(p=x(h)),v=Math.round((p.valueOf()-h.valueOf())/864e5)}return v},s._get_timeunit_start=function(){return this.date[this._mode+"_start"](new Date(this._date.valueOf()))},s._get_view_end=function(){var h=this._get_timeunit_start(),p=s.date.add(h,1,this._mode);if(!s._table_view){var v=s.date["get_"+s._mode+"_end"];v&&(p=v(h))}return p},s._calc_scale_sizes=function(h,p,v){var x=this.config.rtl,S=h,O=this._get_columns_num(p,v);this._process_ignores(p,O,"day",1);for(var N=O-this._ignores_detected,M=0;M<O;M++)this._ignores[M]?(this._cols[M]=0,N++):this._cols[M]=Math.floor(S/(N-M)),S-=this._cols[M],this._colsS[M]=(this._cols[M-1]||0)+(this._colsS[M-1]||(this._table_view?0:x?this.xy.scroll_width:this.xy.scale_width));this._colsS.col_length=O,this._colsS[O]=this._cols[O-1]+this._colsS[O-1]||0},s._set_scale_col_size=function(h,p,v){var x=this.config;this.set_xy(h,p,x.hour_size_px*(x.last_hour-x.first_hour),v+this.xy.scale_width+1,0)},s._render_scales=function(h,p){var v=new Date(s._min_date),x=new Date(s._max_date),S=this.date.date_part(s._currentDate()),O=parseInt(h.style.width,10)-1,N=new Date(this._min_date),M=this._get_columns_num(v,x);this._calc_scale_sizes(O,v,x);var A=0;h.innerHTML="";for(var m=0;m<M;m++){if(this._ignores[m]||this._render_x_header(m,A,N,h),!this._table_view){var b=document.createElement("div"),k="dhx_scale_holder";N.valueOf()==S.valueOf()&&(k+=" dhx_scale_holder_now"),b.setAttribute("data-column-index",m),this._ignores_detected&&this._ignores[m]&&(k+=" dhx_scale_ignore");for(let E=1*this.config.first_hour;E<this.config.last_hour;E++){const D=document.createElement("div");D.className="dhx_scale_time_slot dhx_scale_time_slot_hour_start",D.style.height=this.config.hour_size_px/2+"px";let C=new Date(N.getFullYear(),N.getMonth(),N.getDate(),E,0);D.setAttribute("data-slot-date",this.templates.format_date(C));let R=this.templates.time_slot_text(C);R&&(D.innerHTML=R);let P=this.templates.time_slot_class(C);P&&D.classList.add(P),b.appendChild(D);const F=document.createElement("div");F.className="dhx_scale_time_slot",C=new Date(N.getFullYear(),N.getMonth(),N.getDate(),E,30),F.setAttribute("data-slot-date",this.templates.format_date(C)),F.style.height=this.config.hour_size_px/2+"px",R=this.templates.time_slot_text(C),R&&(F.innerHTML=R),P=this.templates.time_slot_class(C),P&&F.classList.add(P),b.appendChild(F)}b.className=k+" "+this.templates.week_date_class(N,S),this._waiAria.dayColumnAttr(b,N),this._set_scale_col_size(b,this._cols[m],A),p.appendChild(b),this.callEvent("onScaleAdd",[b,N])}A+=this._cols[m],N=this.date.add(N,1,"day"),N=this.date.day_start(N)}},s._getNavDateElement=function(){return this.$container.querySelector(".dhx_cal_date")},s._reset_scale=function(){if(this.templates[this._mode+"_date"]){var h=this._els.dhx_cal_header[0],p=this._els.dhx_cal_data[0],v=this.config;h.innerHTML="",p.innerHTML="";var x,S,O=(v.readonly||!v.drag_resize?" dhx_resize_denied":"")+(v.readonly||!v.drag_move?" dhx_move_denied":"");p.className="dhx_cal_data"+O,this._scales={},this._cols=[],this._colsS={height:0},this._dy_shift=0,this.set_sizes();var N=this._get_timeunit_start(),M=s._get_view_end();x=S=this._table_view?s.date.week_start(N):N,this._min_date=x;var A=this.templates[this._mode+"_date"](N,M,this._mode),m=this._getNavDateElement();if(m&&(m.innerHTML=A,this._waiAria.navBarDateAttr(m,A)),this._max_date=M,s._render_scales(h,p),this._table_view)this._reset_month_scale(p,N,S);else if(this._reset_hours_scale(p,N,S),v.multi_day){var b="dhx_multi_day";this._els[b]&&(this._els[b][0].parentNode.removeChild(this._els[b][0]),this._els[b]=null);var k=document.createElement("div");k.className=b,k.style.visibility="hidden",k.style.display="none";var E=this._colsS[this._colsS.col_length],D=v.rtl?this.xy.scale_width:this.xy.scroll_width,C=Math.max(E+D,0);this.set_xy(k,C,0,0),p.parentNode.insertBefore(k,p);var R=k.cloneNode(!0);R.className=b+"_icon",R.style.visibility="hidden",R.style.display="none",this.set_xy(R,this.xy.scale_width+1,0,0),k.appendChild(R),this._els[b]=[k,R],s.event(this._els[b][0],"click",this._click.dhx_cal_data)}}},s._reset_hours_scale=function(h,p,v){var x=document.createElement("div");x.className="dhx_scale_holder";for(var S=new Date(1980,1,1,this.config.first_hour,0,0),O=1*this.config.first_hour;O<this.config.last_hour;O++){var N=document.createElement("div");N.className="dhx_scale_hour",N.style.height=this.config.hour_size_px+"px";var M=this.xy.scale_width;this.config.left_border&&(N.className+=" dhx_scale_hour_border"),N.style.width=M+"px";var A=s.templates.hour_scale(S);N.innerHTML=A,this._waiAria.hourScaleAttr(N,A),x.appendChild(N),S=this.date.add(S,1,"hour")}h.appendChild(x),this.config.scroll_hour&&(h.scrollTop=this.config.hour_size_px*(this.config.scroll_hour-this.config.first_hour))},s._currentDate=function(){return s.config.now_date?new Date(s.config.now_date):new Date},s._reset_ignores=function(){this._ignores={},this._ignores_detected=0},s._process_ignores=function(h,p,v,x,S){this._reset_ignores();var O=s["ignore_"+this._mode];if(O)for(var N=new Date(h),M=0;M<p;M++)O(N)&&(this._ignores_detected+=1,this._ignores[M]=!0,S&&p++),N=s.date.add(N,x,v),s.date[v+"_start"]&&(N=s.date[v+"_start"](N))},s._render_month_scale=function(h,p,v,x){var S=s.date.add(p,1,"month"),O=new Date(v),N=s._currentDate();N=this.date.date_part(N),v=this.date.date_part(v),x=x||Math.ceil(Math.round((S.valueOf()-v.valueOf())/864e5)/7);for(var M=[],A=0;A<=7;A++){var m=this._cols[A]||0;isNaN(Number(m))||(m+="px"),M[A]=m}function b(G){var W=s._colsS.height;return s._colsS.heights[G+1]!==void 0&&(W=s._colsS.heights[G+1]-(s._colsS.heights[G]||0)),W}var k=0;const E=document.createElement("div");for(E.classList.add("dhx_cal_month_table"),A=0;A<x;A++){var D=document.createElement("div");D.classList.add("dhx_cal_month_row"),D.style.height=b(A)+"px",E.appendChild(D);for(var C=0;C<7;C++){var R=document.createElement("div");D.appendChild(R);var P="dhx_cal_month_cell";v<p?P+=" dhx_before":v>=S?P+=" dhx_after":v.valueOf()==N.valueOf()&&(P+=" dhx_now"),this._ignores_detected&&this._ignores[C]&&(P+=" dhx_scale_ignore"),R.className=P+" "+this.templates.month_date_class(v,N),R.setAttribute("data-cell-date",s.templates.format_date(v));var F="dhx_month_body",z="dhx_month_head";if(C===0&&this.config.left_border&&(F+=" dhx_month_body_border",z+=" dhx_month_head_border"),this._ignores_detected&&this._ignores[C])R.appendChild(document.createElement("div")),R.appendChild(document.createElement("div"));else{R.style.width=M[C],this._waiAria.monthCellAttr(R,v);var $=document.createElement("div");$.style.height=s.xy.month_head_height+"px",$.className=z,$.innerHTML=this.templates.month_day(v),R.appendChild($);var X=document.createElement("div");X.className=F,R.appendChild(X)}var te=v.getDate();(v=this.date.add(v,1,"day")).getDate()-te>1&&(v=new Date(v.getFullYear(),v.getMonth(),te+1,12,0))}s._colsS.heights[A]=k,k+=b(A)}return this._min_date=O,this._max_date=v,h.innerHTML="",h.appendChild(E),this._scales={},h.querySelectorAll("[data-cell-date]").forEach(G=>{const W=s.templates.parse_date(G.getAttribute("data-cell-date")),J=G.querySelector(".dhx_month_body");this._scales[+W]=J,this.callEvent("onScaleAdd",[this._scales[+W],W])}),this._max_date},s._reset_month_scale=function(h,p,v,x){var S=s.date.add(p,1,"month");v=this.date.date_part(v),x=x||Math.ceil(Math.round((S.valueOf()-v.valueOf())/864e5)/7);var O=Math.floor(h.clientHeight/x)-this.xy.month_head_height;return this._colsS.height=O+this.xy.month_head_height,this._colsS.heights=[],s._render_month_scale(h,p,v,x)},s.getView=function(h){return h||(h=s.getState().mode),s.matrix&&s.matrix[h]?s.matrix[h]:s._props&&s._props[h]?s._props[h]:null},s.getLabel=function(h,p){for(var v=this.config.lightbox.sections,x=0;x<v.length;x++)if(v[x].map_to==h){for(var S=v[x].options,O=0;O<S.length;O++)if(S[O].key==p)return S[O].label}return""},s.updateCollection=function(h,p){var v=s.serverList(h);return!!v&&(v.splice(0,v.length),v.push.apply(v,p||[]),s.callEvent("onOptionsLoad",[]),s.resetLightbox(),s.hideCover(),!0)},s._lame_clone=function(h,p){var v,x,S;for(p=p||[],v=0;v<p.length;v+=2)if(h===p[v])return p[v+1];if(h&&typeof h=="object"){for(S=Object.create(h),x=[Array,Date,Number,String,Boolean],v=0;v<x.length;v++)h instanceof x[v]&&(S=v?new x[v](h):new x[v]);for(v in p.push(h,S),h)Object.prototype.hasOwnProperty.apply(h,[v])&&(S[v]=s._lame_clone(h[v],p))}return S||h},s._lame_copy=function(h,p){for(var v in p)p.hasOwnProperty(v)&&(h[v]=p[v]);return h},s._get_date_from_pos=function(h){var p=this._min_date.valueOf()+6e4*(h.y*this.config.time_step+24*(this._table_view?0:h.x)*60);return new Date(this._correct_shift(p))},s.getActionData=function(h){var p=this._mouse_coords(h);return{date:this._get_date_from_pos(p),section:p.section}},s._focus=function(h,p){if(h&&h.focus)if(this._mobile)window.setTimeout(function(){h.focus()},10);else try{p&&h.select&&h.offsetWidth&&h.select(),h.focus()}catch{}},s._get_real_event_length=function(h,p,v){var x,S=p-h,O=this["ignore_"+this._mode],N=0;v.render?(N=this._get_date_index(v,h),x=this._get_date_index(v,p),h.valueOf()<s.getState().min_date.valueOf()&&(N=-g(h,s.getState().min_date)),p.valueOf()>s.getState().max_date.valueOf()&&(x+=g(p,s.getState().max_date))):x=Math.round(S/60/60/1e3/24);for(var M=!0;N<x;){var A=s.date.add(p,-v.x_step,v.x_unit);if(O&&O(p)&&(!M||M&&O(A)))S-=p-A;else{let m=0;const b=new Date(Math.max(A.valueOf(),h.valueOf())),k=p,E=new Date(b.getFullYear(),b.getMonth(),b.getDate(),v.first_hour||0),D=new Date(b.getFullYear(),b.getMonth(),b.getDate(),v.last_hour||24),C=new Date(p.getFullYear(),p.getMonth(),p.getDate(),v.first_hour||0),R=new Date(p.getFullYear(),p.getMonth(),p.getDate(),v.last_hour||24);k.valueOf()>R.valueOf()&&(m+=k-R),k.valueOf()>C.valueOf()?m+=v._start_correction:m+=60*k.getHours()*60*1e3+60*k.getMinutes()*1e3,b.valueOf()<=D.valueOf()&&(m+=v._end_correction),b.valueOf()<E.valueOf()&&(m+=E.valueOf()-b.valueOf()),S-=m,M=!1}p=A,x--}return S},s._get_fictional_event_length=function(h,p,v,x){var S=new Date(h),O=x?-1:1;if(v._start_correction||v._end_correction){var N;N=x?60*S.getHours()+S.getMinutes()-60*(v.first_hour||0):60*(v.last_hour||0)-(60*S.getHours()+S.getMinutes());var M=60*(v.last_hour-v.first_hour),A=Math.ceil((p/6e4-N)/M);A<0&&(A=0),p+=A*(1440-M)*60*1e3}var m,b=new Date(1*h+p*O),k=this["ignore_"+this._mode],E=0;for(v.render?(E=this._get_date_index(v,S),m=this._get_date_index(v,b)):m=Math.round(p/60/60/1e3/24);v.x_unit==="day"?E*O<m*O:E*O<=m*O;){var D=s.date.add(S,v.x_step*O,v.x_unit);k&&k(S)&&(p+=(D-S)*O,m+=O),S=D,E+=O}return p},s._get_section_view=function(){return this.getView()},s._get_section_property=function(){return this.matrix&&this.matrix[this._mode]?this.matrix[this._mode].y_property:this._props&&this._props[this._mode]?this._props[this._mode].map_to:null},s._is_initialized=function(){var h=this.getState();return this._obj&&h.date&&h.mode},s._is_lightbox_open=function(){var h=this.getState();return h.lightbox_id!==null&&h.lightbox_id!==void 0}}(t),function(s){(function(){var d=new RegExp(`<(?:.|
)*?>`,"gm"),c=new RegExp(" +","gm");function u(h){return(h+"").replace(d," ").replace(c," ")}var f=new RegExp("'","gm");function y(h){return(h+"").replace(f,"&#39;")}for(var g in s._waiAria={getAttributeString:function(h){var p=[" "];for(var v in h)if(typeof h[v]!="function"&&typeof h[v]!="object"){var x=y(u(h[v]));p.push(v+"='"+x+"'")}return p.push(" "),p.join(" ")},setAttributes:function(h,p){for(var v in p)h.setAttribute(v,u(p[v]));return h},labelAttr:function(h,p){return this.setAttributes(h,{"aria-label":p})},label:function(h){return s._waiAria.getAttributeString({"aria-label":h})},hourScaleAttr:function(h,p){this.labelAttr(h,p)},monthCellAttr:function(h,p){this.labelAttr(h,s.templates.day_date(p))},navBarDateAttr:function(h,p){this.labelAttr(h,p)},dayHeaderAttr:function(h,p){this.labelAttr(h,p)},dayColumnAttr:function(h,p){this.dayHeaderAttr(h,s.templates.day_date(p))},headerButtonsAttributes:function(h,p){return this.setAttributes(h,{role:"button","aria-label":p})},headerToggleState:function(h,p){return this.setAttributes(h,{"aria-pressed":p?"true":"false"})},getHeaderCellAttr:function(h){return s._waiAria.getAttributeString({"aria-label":h})},eventAttr:function(h,p){this._eventCommonAttr(h,p)},_eventCommonAttr:function(h,p){p.setAttribute("aria-label",u(s.templates.event_text(h.start_date,h.end_date,h))),s.config.readonly&&p.setAttribute("aria-readonly",!0),h.$dataprocessor_class&&p.setAttribute("aria-busy",!0),p.setAttribute("aria-selected",s.getState().select_id==h.id?"true":"false")},setEventBarAttr:function(h,p){this._eventCommonAttr(h,p)},_getAttributes:function(h,p){var v={setAttribute:function(x,S){this[x]=S}};return h.apply(this,[p,v]),v},eventBarAttrString:function(h){return this.getAttributeString(this._getAttributes(this.setEventBarAttr,h))},agendaHeadAttrString:function(){return this.getAttributeString({role:"row"})},agendaHeadDateString:function(h){return this.getAttributeString({role:"columnheader","aria-label":h})},agendaHeadDescriptionString:function(h){return this.agendaHeadDateString(h)},agendaDataAttrString:function(){return this.getAttributeString({role:"grid"})},agendaEventAttrString:function(h){var p=this._getAttributes(this._eventCommonAttr,h);return p.role="row",this.getAttributeString(p)},agendaDetailsBtnString:function(){return this.getAttributeString({role:"button","aria-label":s.locale.labels.icon_details})},gridAttrString:function(){return this.getAttributeString({role:"grid"})},gridRowAttrString:function(h){return this.agendaEventAttrString(h)},gridCellAttrString:function(h,p,v){return this.getAttributeString({role:"gridcell","aria-label":[p.label===void 0?p.id:p.label,": ",v]})},mapAttrString:function(){return this.gridAttrString()},mapRowAttrString:function(h){return this.gridRowAttrString(h)},mapDetailsBtnString:function(){return this.agendaDetailsBtnString()},minicalHeader:function(h,p){this.setAttributes(h,{id:p+"","aria-live":"assertice","aria-atomic":"true"})},minicalGrid:function(h,p){this.setAttributes(h,{"aria-labelledby":p+"",role:"grid"})},minicalRow:function(h){this.setAttributes(h,{role:"row"})},minicalDayCell:function(h,p){var v=p.valueOf()<s._max_date.valueOf()&&p.valueOf()>=s._min_date.valueOf();this.setAttributes(h,{role:"gridcell","aria-label":s.templates.day_date(p),"aria-selected":v?"true":"false"})},minicalHeadCell:function(h){this.setAttributes(h,{role:"columnheader"})},weekAgendaDayCell:function(h,p){var v=h.querySelector(".dhx_wa_scale_bar"),x=h.querySelector(".dhx_wa_day_data"),S=s.uid()+"";this.setAttributes(v,{id:S}),this.setAttributes(x,{"aria-labelledby":S})},weekAgendaEvent:function(h,p){this.eventAttr(p,h)},lightboxHiddenAttr:function(h){h.setAttribute("aria-hidden","true")},lightboxVisibleAttr:function(h){h.setAttribute("aria-hidden","false")},lightboxSectionButtonAttrString:function(h){return this.getAttributeString({role:"button","aria-label":h,tabindex:"0"})},yearHeader:function(h,p){this.setAttributes(h,{id:p+""})},yearGrid:function(h,p){this.minicalGrid(h,p)},yearHeadCell:function(h){return this.minicalHeadCell(h)},yearRow:function(h){return this.minicalRow(h)},yearDayCell:function(h){this.setAttributes(h,{role:"gridcell"})},lightboxAttr:function(h){h.setAttribute("role","dialog"),h.setAttribute("aria-hidden","true"),h.firstChild.setAttribute("role","heading")},lightboxButtonAttrString:function(h){return this.getAttributeString({role:"button","aria-label":s.locale.labels[h],tabindex:"0"})},eventMenuAttrString:function(h){return this.getAttributeString({role:"button","aria-label":s.locale.labels[h]})},lightboxHeader:function(h,p){h.setAttribute("aria-label",p)},lightboxSelectAttrString:function(h){var p="";switch(h){case"%Y":p=s.locale.labels.year;break;case"%m":p=s.locale.labels.month;break;case"%d":p=s.locale.labels.day;break;case"%H:%i":p=s.locale.labels.hour+" "+s.locale.labels.minute}return s._waiAria.getAttributeString({"aria-label":p})},messageButtonAttrString:function(h){return"tabindex='0' role='button' aria-label='"+h+"'"},messageInfoAttr:function(h){h.setAttribute("role","alert")},messageModalAttr:function(h,p){h.setAttribute("role","dialog"),p&&h.setAttribute("aria-labelledby",p)},quickInfoAttr:function(h){h.setAttribute("role","dialog")},quickInfoHeaderAttrString:function(){return" role='heading' "},quickInfoHeader:function(h,p){h.setAttribute("aria-label",p)},quickInfoButtonAttrString:function(h){return s._waiAria.getAttributeString({role:"button","aria-label":h,tabindex:"0"})},tooltipAttr:function(h){h.setAttribute("role","tooltip")},tooltipVisibleAttr:function(h){h.setAttribute("aria-hidden","false")},tooltipHiddenAttr:function(h){h.setAttribute("aria-hidden","true")}},s._waiAria)s._waiAria[g]=function(h){return function(){return s.config.wai_aria_attributes?h.apply(this,arguments):" "}}(s._waiAria[g])})()}(t),t.utils=Xe,t.$domHelpers=vt,t.utils.dom=vt,t.uid=Xe.uid,t.mixin=Xe.mixin,t.defined=Xe.defined,t.assert=function(s){return function(d,c){d||s.config.show_errors&&s.callEvent("onError",[c])!==!1&&(s.message?s.message({type:"error",text:c,expire:-1}):console.log(c))}}(t),t.copy=Xe.copy,t._createDatePicker=function(s,d){return new g_(t,s,d)},t._getFocusableNodes=vt.getFocusableNodes,t._getClassName=vt.getClassName,t._locate_css=vt.locateCss;const n=Fc(t);var a,i,r;t.utils.mixin(t,n),t.env=t.$env=Oc,t.Promise=window.Promise,function(s){s.destructor=function(){for(var d in s.callEvent("onDestroy",[]),this.clearAll(),this.$container&&(this.$container.innerHTML=""),this._eventRemoveAll&&this._eventRemoveAll(),this.resetLightbox&&this.resetLightbox(),this._dp&&this._dp.destructor&&this._dp.destructor(),this.detachAllEvents(),this)d.indexOf("$")===0&&delete this[d];s.$destroyed=!0}}(t),function(s){function d(c,u){var f={method:c};if(u.length===0)throw new Error("Arguments list of query is wrong.");if(u.length===1)return typeof u[0]=="string"?(f.url=u[0],f.async=!0):(f.url=u[0].url,f.async=u[0].async||!0,f.callback=u[0].callback,f.headers=u[0].headers),u[0].data?typeof u[0].data!="string"?f.data=Tr(u[0].data):f.data=u[0].data:f.data="",f;switch(f.url=u[0],c){case"GET":case"DELETE":f.callback=u[1],f.headers=u[2];break;case"POST":case"PUT":u[1]?typeof u[1]!="string"?f.data=Tr(u[1]):f.data=u[1]:f.data="",f.callback=u[2],f.headers=u[3]}return f}s.Promise=window.Promise,s.ajax={cache:!0,method:"get",serializeRequestParams:Tr,parse:function(c){return typeof c!="string"?c:(c=c.replace(/^[\s]+/,""),typeof DOMParser>"u"||s.$env.isIE?window.ActiveXObject!==void 0&&((u=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",u.loadXML(c)):u=new DOMParser().parseFromString(c,"text/xml"),u);var u},xmltop:function(c,u,f){if(u.status===void 0||u.status<400){var y=u.responseXML?u.responseXML||u:this.parse(u.responseText||u);if(y&&y.documentElement!==null&&!y.getElementsByTagName("parsererror").length)return y.getElementsByTagName(c)[0]}return f!==-1&&s.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],f]),document.createElement("DIV")},xpath:function(c,u){if(u.nodeName||(u=u.responseXML||u),s.$env.isIE)return u.selectNodes(c)||[];for(var f,y=[],g=(u.ownerDocument||u).evaluate(c,u,null,XPathResult.ANY_TYPE,null);f=g.iterateNext();)y.push(f);return y},query:function(c){return this._call(c.method||"GET",c.url,c.data||"",c.async||!0,c.callback,c.headers)},get:function(c,u,f){var y=d("GET",arguments);return this.query(y)},getSync:function(c,u){var f=d("GET",arguments);return f.async=!1,this.query(f)},put:function(c,u,f,y){var g=d("PUT",arguments);return this.query(g)},del:function(c,u,f){var y=d("DELETE",arguments);return this.query(y)},post:function(c,u,f,y){arguments.length==1?u="":arguments.length==2&&typeof u=="function"&&(f=u,u="");var g=d("POST",arguments);return this.query(g)},postSync:function(c,u,f){u=u===null?"":String(u);var y=d("POST",arguments);return y.async=!1,this.query(y)},_call:function(c,u,f,y,g,h){return new s.Promise((function(p,v){var x=typeof XMLHttpRequest===void 0||s.$env.isIE?new window.ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest,S=navigator.userAgent.match(/AppleWebKit/)!==null&&navigator.userAgent.match(/Qt/)!==null&&navigator.userAgent.match(/Safari/)!==null;if(y&&x.addEventListener("readystatechange",function(){if(x.readyState==4||S&&x.readyState==3){if((x.status!=200||x.responseText==="")&&!s.callEvent("onAjaxError",[x]))return;setTimeout(function(){typeof g=="function"&&g.apply(window,[{xmlDoc:x,filePath:u}]),p(x),typeof g=="function"&&(g=null,x=null)},0)}}),c!="GET"||this.cache||(u+=(u.indexOf("?")>=0?"&":"?")+"dhxr"+new Date().getTime()+"=1"),x.open(c,u,y),h)for(var O in h)x.setRequestHeader(O,h[O]);else c.toUpperCase()=="POST"||c=="PUT"||c=="DELETE"?x.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):c=="GET"&&(f=null);if(x.setRequestHeader("X-Requested-With","XMLHttpRequest"),x.send(f),!y)return{xmlDoc:x,filePath:u}}).bind(this))},urlSeparator:function(c){return c.indexOf("?")!=-1?"&":"?"}},s.$ajax=s.ajax}(t),Rc(t),function(s){s.config={default_date:"%j %M %Y",month_date:"%F %Y",load_date:"%Y-%m-%d",week_date:"%l",day_date:"%D %j",hour_date:"%H:%i",month_day:"%d",date_format:"%Y-%m-%d %H:%i",api_date:"%d-%m-%Y %H:%i",parse_exact_format:!1,preserve_length:!0,time_step:5,displayed_event_color:"#ff4a4a",displayed_event_text_color:"#ffef80",wide_form:0,day_column_padding:8,use_select_menu_space:!0,fix_tab_position:!0,start_on_monday:!0,first_hour:0,last_hour:24,readonly:!1,drag_resize:!0,drag_move:!0,drag_create:!0,drag_event_body:!0,dblclick_create:!0,details_on_dblclick:!0,edit_on_create:!0,details_on_create:!0,header:null,hour_size_px:44,resize_month_events:!1,resize_month_timed:!1,responsive_lightbox:!1,separate_short_events:!0,rtl:!1,cascade_event_display:!1,cascade_event_count:4,cascade_event_margin:30,multi_day:!0,multi_day_height_limit:200,drag_lightbox:!0,preserve_scroll:!0,select:!0,undo_deleted:!0,server_utc:!1,touch:!0,touch_tip:!0,touch_drag:500,touch_swipe_dates:!1,quick_info_detached:!0,positive_closing:!1,drag_highlight:!0,limit_drag_out:!1,icons_edit:["icon_save","icon_cancel"],icons_select:["icon_details","icon_edit","icon_delete"],buttons_right:["dhx_save_btn","dhx_cancel_btn"],buttons_left:["dhx_delete_btn"],lightbox:{sections:[{name:"description",map_to:"text",type:"textarea",focus:!0},{name:"time",height:72,type:"time",map_to:"auto"}]},highlight_displayed_event:!0,left_border:!1,ajax_error:"alert",delay_render:0,timeline_swap_resize:!0,wai_aria_attributes:!0,wai_aria_application_role:!0,csp:"auto",event_attribute:"data-event-id",show_errors:!0},s.config.buttons_left.$initial=s.config.buttons_left.join(),s.config.buttons_right.$initial=s.config.buttons_right.join(),s._helpers={parseDate:function(d){return(s.templates.xml_date||s.templates.parse_date)(d)},formatDate:function(d){return(s.templates.xml_format||s.templates.format_date)(d)}},s.templates={},s.init_templates=function(){var d=s.date.date_to_str,c=s.config;(function(u,f){for(var y in f)u[y]||(u[y]=f[y])})(s.templates,{day_date:d(c.default_date),month_date:d(c.month_date),week_date:function(u,f){return c.rtl?s.templates.day_date(s.date.add(f,-1,"day"))+" &ndash; "+s.templates.day_date(u):s.templates.day_date(u)+" &ndash; "+s.templates.day_date(s.date.add(f,-1,"day"))},day_scale_date:d(c.default_date),time_slot_text:function(u){return""},time_slot_class:function(u){return""},month_scale_date:d(c.week_date),week_scale_date:d(c.day_date),hour_scale:d(c.hour_date),time_picker:d(c.hour_date),event_date:d(c.hour_date),month_day:d(c.month_day),load_format:d(c.load_date),format_date:d(c.date_format,c.server_utc),parse_date:s.date.str_to_date(c.date_format,c.server_utc),api_date:s.date.str_to_date(c.api_date,!1,!1),event_header:function(u,f,y){return y._mode==="small"||y._mode==="smallest"?s.templates.event_date(u):s.templates.event_date(u)+" - "+s.templates.event_date(f)},event_text:function(u,f,y){return y.text},event_class:function(u,f,y){return""},month_date_class:function(u){return""},week_date_class:function(u){return""},event_bar_date:function(u,f,y){return s.templates.event_date(u)},event_bar_text:function(u,f,y){return y.text},month_events_link:function(u,f){return"<a>View more("+f+" events)</a>"},drag_marker_class:function(u,f,y){return""},drag_marker_content:function(u,f,y){return""},tooltip_date_format:s.date.date_to_str("%Y-%m-%d %H:%i"),tooltip_text:function(u,f,y){return"<b>Event:</b> "+y.text+"<br/><b>Start date:</b> "+s.templates.tooltip_date_format(u)+"<br/><b>End date:</b> "+s.templates.tooltip_date_format(f)},calendar_month:d("%F %Y"),calendar_scale_date:d("%D"),calendar_date:d("%d"),calendar_time:d("%d-%m-%Y")}),this.callEvent("onTemplatesReady",[])}}(t),function(s){s._events={},s.clearAll=function(){this._events={},this._loaded={},this._edit_id=null,this._select_id=null,this._drag_id=null,this._drag_mode=null,this._drag_pos=null,this._new_event=null,this.clear_view(),this.callEvent("onClearAll",[])},s.addEvent=function(d,c,u,f,y){if(!arguments.length)return this.addEventNow();var g=d;arguments.length!=1&&((g=y||{}).start_date=d,g.end_date=c,g.text=u,g.id=f),g.id=g.id||s.uid(),g.text=g.text||"",typeof g.start_date=="string"&&(g.start_date=this.templates.api_date(g.start_date)),typeof g.end_date=="string"&&(g.end_date=this.templates.api_date(g.end_date));var h=6e4*(this.config.event_duration||this.config.time_step);g.start_date.valueOf()==g.end_date.valueOf()&&g.end_date.setTime(g.end_date.valueOf()+h),g.start_date.setMilliseconds(0),g.end_date.setMilliseconds(0),g._timed=this.isOneDayEvent(g);var p=!this._events[g.id];return this._events[g.id]=g,this.event_updated(g),this._loading||this.callEvent(p?"onEventAdded":"onEventChanged",[g.id,g]),g.id},s.deleteEvent=function(d,c){var u=this._events[d];(c||this.callEvent("onBeforeEventDelete",[d,u])&&this.callEvent("onConfirmedBeforeEventDelete",[d,u]))&&(u&&(s.getState().select_id==d&&s.unselect(),delete this._events[d],this.event_updated(u),this._drag_id==u.id&&(this._drag_id=null,this._drag_mode=null,this._drag_pos=null)),this.callEvent("onEventDeleted",[d,u]))},s.getEvent=function(d){return this._events[d]},s.setEvent=function(d,c){c.id||(c.id=d),this._events[d]=c},s.for_rendered=function(d,c){for(var u=this._rendered.length-1;u>=0;u--)this._rendered[u].getAttribute(this.config.event_attribute)==d&&c(this._rendered[u],u)},s.changeEventId=function(d,c){if(d!=c){var u=this._events[d];u&&(u.id=c,this._events[c]=u,delete this._events[d]),this.for_rendered(d,function(f){f.setAttribute("event_id",c),f.setAttribute(s.config.event_attribute,c)}),this._select_id==d&&(this._select_id=c),this._edit_id==d&&(this._edit_id=c),this.callEvent("onEventIdChange",[d,c])}},function(){for(var d=["text","Text","start_date","StartDate","end_date","EndDate"],c=function(y){return function(g){return s.getEvent(g)[y]}},u=function(y){return function(g,h){var p=s.getEvent(g);p[y]=h,p._changed=!0,p._timed=this.isOneDayEvent(p),s.event_updated(p,!0)}},f=0;f<d.length;f+=2)s["getEvent"+d[f+1]]=c(d[f]),s["setEvent"+d[f+1]]=u(d[f])}(),s.event_updated=function(d,c){this.is_visible_events(d)?this.render_view_data():this.clear_event(d.id)},s.is_visible_events=function(d){if(!this._min_date||!this._max_date)return!1;if(d.start_date.valueOf()<this._max_date.valueOf()&&this._min_date.valueOf()<d.end_date.valueOf()){var c=d.start_date.getHours(),u=d.end_date.getHours()+d.end_date.getMinutes()/60,f=this.config.last_hour,y=this.config.first_hour;return!(!this._table_view&&(u>f||u<=y)&&(c>=f||c<y)&&!((d.end_date.valueOf()-d.start_date.valueOf())/36e5>24-(this.config.last_hour-this.config.first_hour)||c<f&&u>y))}return!1},s.isOneDayEvent=function(d){var c=new Date(d.end_date.valueOf()-1);return d.start_date.getFullYear()===c.getFullYear()&&d.start_date.getMonth()===c.getMonth()&&d.start_date.getDate()===c.getDate()&&d.end_date.valueOf()-d.start_date.valueOf()<864e5},s.get_visible_events=function(d){var c=[];for(var u in this._events)this.is_visible_events(this._events[u])&&(d&&!this._events[u]._timed||this.filter_event(u,this._events[u])&&c.push(this._events[u]));return c},s.filter_event=function(d,c){var u=this["filter_"+this._mode];return!u||u(d,c)},s._is_main_area_event=function(d){return!!d._timed},s.render_view_data=function(d,c){var u=!1;if(!d){if(u=!0,this._not_render)return void(this._render_wait=!0);this._render_wait=!1,this.clear_view(),d=this.get_visible_events(!(this._table_view||this.config.multi_day))}for(var f=0,y=d.length;f<y;f++)this._recalculate_timed(d[f]);if(this.config.multi_day&&!this._table_view){var g=[],h=[];for(f=0;f<d.length;f++)this._is_main_area_event(d[f])?g.push(d[f]):h.push(d[f]);if(!this._els.dhx_multi_day){var p=s._commonErrorMessages.unknownView(this._mode);throw new Error(p)}this._rendered_location=this._els.dhx_multi_day[0],this._table_view=!0,this.render_data(h,c),this._table_view=!1,this._rendered_location=this._els.dhx_cal_data[0],this._table_view=!1,this.render_data(g,c)}else{var v=document.createDocumentFragment(),x=this._els.dhx_cal_data[0];this._rendered_location=v,this.render_data(d,c),x.appendChild(v),this._rendered_location=x}u&&this.callEvent("onDataRender",[])},s._view_month_day=function(d){var c=s.getActionData(d).date;s.callEvent("onViewMoreClick",[c])&&s.setCurrentView(c,"day")},s._render_month_link=function(d){for(var c=this._rendered_location,u=this._lame_clone(d),f=d._sday;f<d._eday;f++){u._sday=f,u._eday=f+1;var y=s.date,g=s._min_date;g=y.add(g,u._sweek,"week"),g=y.add(g,u._sday,"day");var h=s.getEvents(g,y.add(g,1,"day")).length,p=this._get_event_bar_pos(u),v=p.x2-p.x,x=document.createElement("div");s.event(x,"click",function(S){s._view_month_day(S)}),x.className="dhx_month_link",x.style.top=p.y+"px",x.style.left=p.x+"px",x.style.width=v+"px",x.innerHTML=s.templates.month_events_link(g,h),this._rendered.push(x),c.appendChild(x)}},s._recalculate_timed=function(d){var c;d&&(c=typeof d!="object"?this._events[d]:d)&&(c._timed=s.isOneDayEvent(c))},s.attachEvent("onEventChanged",s._recalculate_timed),s.attachEvent("onEventAdded",s._recalculate_timed),s.render_data=function(d,c){d=this._pre_render_events(d,c);for(var u={},f=0;f<d.length;f++)if(this._table_view)if(s._mode!="month")this.render_event_bar(d[f]);else{var y=s.config.max_month_events;y!==1*y||d[f]._sorder<y?this.render_event_bar(d[f]):y!==void 0&&d[f]._sorder==y&&s._render_month_link(d[f])}else{var g=d[f],h=s.locate_holder(g._sday);if(!h)continue;u[g._sday]||(u[g._sday]={real:h,buffer:document.createDocumentFragment(),width:h.clientWidth});var p=u[g._sday];this.render_event(g,p.buffer,p.width)}for(var f in u)(p=u[f]).real&&p.buffer&&p.real.appendChild(p.buffer)},s._get_first_visible_cell=function(d){for(var c=0;c<d.length;c++)if((d[c].className||"").indexOf("dhx_scale_ignore")==-1)return d[c];return d[0]},s._pre_render_events=function(d,c){var u=this.xy.bar_height,f=this._colsS.heights,y=this._colsS.heights=[0,0,0,0,0,0,0],g=this._els.dhx_cal_data[0];if(d=this._table_view?this._pre_render_events_table(d,c):this._pre_render_events_line(d,c),this._table_view)if(c)this._colsS.heights=f;else{var h=g.querySelectorAll(".dhx_cal_month_row");if(h.length){for(var p=0;p<h.length;p++){y[p]++;var v=h[p].querySelectorAll(".dhx_cal_month_cell"),x=this._colsS.height-this.xy.month_head_height;if(y[p]*u>x){var S=x;1*this.config.max_month_events!==this.config.max_month_events||y[p]<=this.config.max_month_events?S=y[p]*u:(this.config.max_month_events+1)*u>x&&(S=(this.config.max_month_events+1)*u),h[p].style.height=S+this.xy.month_head_height+"px"}y[p]=(y[p-1]||0)+s._get_first_visible_cell(v).offsetHeight}y.unshift(0);const D=this.$container.querySelector(".dhx_cal_data");if(D.offsetHeight<D.scrollHeight&&!s._colsS.scroll_fix&&s.xy.scroll_width){var O=s._colsS,N=O[O.col_length],M=O.heights.slice();N-=s.xy.scroll_width||0,this._calc_scale_sizes(N,this._min_date,this._max_date),s._colsS.heights=M,this.set_xy(this._els.dhx_cal_header[0],N),s._render_scales(this._els.dhx_cal_header[0]),s._render_month_scale(this._els.dhx_cal_data[0],this._get_timeunit_start(),this._min_date),O.scroll_fix=!0}}else if(d.length||this._els.dhx_multi_day[0].style.visibility!="visible"||(y[0]=-1),d.length||y[0]==-1){var A=(y[0]+1)*u+4,m=A,b=A+"px";this.config.multi_day_height_limit&&(b=(m=Math.min(A,this.config.multi_day_height_limit))+"px");var k=this._els.dhx_multi_day[0];k.style.height=b,k.style.visibility=y[0]==-1?"hidden":"visible",k.style.display=y[0]==-1?"none":"";var E=this._els.dhx_multi_day[1];E.style.height=b,E.style.visibility=y[0]==-1?"hidden":"visible",E.style.display=y[0]==-1?"none":"",E.className=y[0]?"dhx_multi_day_icon":"dhx_multi_day_icon_small",this._dy_shift=(y[0]+1)*u,this.config.multi_day_height_limit&&(this._dy_shift=Math.min(this.config.multi_day_height_limit,this._dy_shift)),y[0]=0,m!=A&&(k.style.overflowY="auto",E.style.position="fixed",E.style.top="",E.style.left="")}}return d},s._get_event_sday=function(d){var c=this.date.day_start(new Date(d.start_date));return Math.round((c.valueOf()-this._min_date.valueOf())/864e5)},s._get_event_mapped_end_date=function(d){var c=d.end_date;if(this.config.separate_short_events){var u=(d.end_date-d.start_date)/6e4;u<this._min_mapped_duration&&(c=this.date.add(c,this._min_mapped_duration-u,"minute"))}return c},s._pre_render_events_line=function(d,c){d.sort(function(E,D){return E.start_date.valueOf()==D.start_date.valueOf()?E.id>D.id?1:-1:E.start_date>D.start_date?1:-1});var u=[],f=[];this._min_mapped_duration=Math.floor(60*this.xy.min_event_height/this.config.hour_size_px);for(var y=0;y<d.length;y++){var g=d[y],h=g.start_date,p=g.end_date,v=h.getHours(),x=p.getHours();if(g._sday=this._get_event_sday(g),this._ignores[g._sday])d.splice(y,1),y--;else{if(u[g._sday]||(u[g._sday]=[]),!c){g._inner=!1;for(var S=u[g._sday];S.length;){var O=S[S.length-1];if(!(this._get_event_mapped_end_date(O).valueOf()<=g.start_date.valueOf()))break;S.splice(S.length-1,1)}for(var N=S.length,M=!1,A=0;A<S.length;A++)if(O=S[A],this._get_event_mapped_end_date(O).valueOf()<=g.start_date.valueOf()){M=!0,g._sorder=O._sorder,N=A,g._inner=!0;break}if(S.length&&(S[S.length-1]._inner=!0),!M)if(S.length)if(S.length<=S[S.length-1]._sorder){if(S[S.length-1]._sorder)for(A=0;A<S.length;A++){for(var m=!1,b=0;b<S.length;b++)if(S[b]._sorder==A){m=!0;break}if(!m){g._sorder=A;break}}else g._sorder=0;g._inner=!0}else{var k=S[0]._sorder;for(A=1;A<S.length;A++)S[A]._sorder>k&&(k=S[A]._sorder);g._sorder=k+1,g._inner=!1}else g._sorder=0;S.splice(N,N==S.length?0:1,g),S.length>(S.max_count||0)?(S.max_count=S.length,g._count=S.length):g._count=g._count?g._count:1}(v<this.config.first_hour||x>=this.config.last_hour)&&(f.push(g),d[y]=g=this._copy_event(g),v<this.config.first_hour&&(g.start_date.setHours(this.config.first_hour),g.start_date.setMinutes(0)),x>=this.config.last_hour&&(g.end_date.setMinutes(0),g.end_date.setHours(this.config.last_hour)),g.start_date>g.end_date||v==this.config.last_hour)&&(d.splice(y,1),y--)}}if(!c){for(y=0;y<d.length;y++)d[y]._count=u[d[y]._sday].max_count;for(y=0;y<f.length;y++)f[y]._count=u[f[y]._sday].max_count}return d},s._time_order=function(d){d.sort(function(c,u){return c.start_date.valueOf()==u.start_date.valueOf()?c._timed&&!u._timed?1:!c._timed&&u._timed?-1:c.id>u.id?1:-1:c.start_date>u.start_date?1:-1})},s._is_any_multiday_cell_visible=function(d,c,u){var f=this._cols.length,y=!1,g=d,h=!0,p=new Date(c);for(s.date.day_start(new Date(c)).valueOf()!=c.valueOf()&&(p=s.date.day_start(p),p=s.date.add(p,1,"day"));g<p;){h=!1;var v=this.locate_holder_day(g,!1,u)%f;if(!this._ignores[v]){y=!0;break}g=s.date.add(g,1,"day")}return h||y},s._pre_render_events_table=function(d,c){this._time_order(d);for(var u,f=[],y=[[],[],[],[],[],[],[]],g=this._colsS.heights,h=this._cols.length,p={},v=0;v<d.length;v++){var x=d[v],S=x.id;p[S]||(p[S]={first_chunk:!0,last_chunk:!0});var O=p[S],N=u||x.start_date,M=x.end_date;N<this._min_date&&(O.first_chunk=!1,N=this._min_date),M>this._max_date&&(O.last_chunk=!1,M=this._max_date);var A=this.locate_holder_day(N,!1,x);if(x._sday=A%h,!this._ignores[x._sday]||!x._timed){var m=this.locate_holder_day(M,!0,x)||h;if(x._eday=m%h||h,x._length=m-A,x._sweek=Math.floor((this._correct_shift(N.valueOf(),1)-this._min_date.valueOf())/(864e5*h)),s._is_any_multiday_cell_visible(N,M,x)){var b,k=y[x._sweek];for(b=0;b<k.length&&!(k[b]._eday<=x._sday);b++);if(x._sorder&&c||(x._sorder=b),x._sday+x._length<=h)u=null,f.push(x),k[b]=x,g[x._sweek]=k.length-1,x._first_chunk=O.first_chunk,x._last_chunk=O.last_chunk;else{var E=this._copy_event(x);E.id=x.id,E._length=h-x._sday,E._eday=h,E._sday=x._sday,E._sweek=x._sweek,E._sorder=x._sorder,E.end_date=this.date.add(N,E._length,"day"),E._first_chunk=O.first_chunk,O.first_chunk&&(O.first_chunk=!1),f.push(E),k[b]=E,u=E.end_date,g[x._sweek]=k.length-1,v--}}else u=null}}return f},s._copy_dummy=function(){var d=new Date(this.start_date),c=new Date(this.end_date);this.start_date=d,this.end_date=c},s._copy_event=function(d){return this._copy_dummy.prototype=d,new this._copy_dummy},s._rendered=[],s.clear_view=function(){for(var d=0;d<this._rendered.length;d++){var c=this._rendered[d];c.parentNode&&c.parentNode.removeChild(c)}this._rendered=[]},s.updateEvent=function(d){var c=this.getEvent(d);this.clear_event(d),c&&this.is_visible_events(c)&&this.filter_event(d,c)&&(this._table_view||this.config.multi_day||c._timed)&&(this.config.update_render?this.render_view_data():this.getState().mode!="month"||this.getState().drag_id||this.isOneDayEvent(c)?this.render_view_data([c],!0):this.render_view_data())},s.clear_event=function(d){this.for_rendered(d,function(c,u){c.parentNode&&c.parentNode.removeChild(c),s._rendered.splice(u,1)})},s._y_from_date=function(d){var c=60*d.getHours()+d.getMinutes();return Math.round((60*c*1e3-60*this.config.first_hour*60*1e3)*this.config.hour_size_px/36e5)%(24*this.config.hour_size_px)},s._calc_event_y=function(d,c){c=c||0;var u=60*d.start_date.getHours()+d.start_date.getMinutes(),f=60*d.end_date.getHours()+d.end_date.getMinutes()||60*s.config.last_hour;return{top:this._y_from_date(d.start_date),height:Math.max(c,(f-u)*this.config.hour_size_px/60)}},s.render_event=function(d,c,u){var f=s.xy.menu_width,y=this.config.use_select_menu_space?0:f;if(!(d._sday<0)){var g=s.locate_holder(d._sday);if(g){c=c||g;var h=this._calc_event_y(d,s.xy.min_event_height),p=h.top,v=h.height,x=d._count||1,S=d._sorder||0;u=u||g.clientWidth,this.config.day_column_padding&&(u-=this.config.day_column_padding);var O=Math.floor((u-y)/x),N=S*O+1;if(d._inner||(O*=x-S),this.config.cascade_event_display){const R=this.config.cascade_event_count,P=this.config.cascade_event_margin;let F,z=(x-S-1)%R*P,$=S%R*P;x*P<u-this.config.day_column_padding?F=d._inner?z/2:0:(F=d._inner?z/3:0,N=$/3,x*P/2>u-this.config.day_column_padding&&(F=d._inner?z/R:0,N=$/R)),O=Math.floor(u-y-N-F)}d._mode=v<30?"smallest":v<42?"small":null;var M=this._render_v_bar(d,y+N,p,O,v,d._text_style,s.templates.event_header(d.start_date,d.end_date,d),s.templates.event_text(d.start_date,d.end_date,d));if(d._mode==="smallest"?M.classList.add("dhx_cal_event--xsmall"):d._mode==="small"&&M.classList.add("dhx_cal_event--small"),this._waiAria.eventAttr(d,M),this._rendered.push(M),c.appendChild(M),N=N+parseInt(this.config.rtl?g.style.right:g.style.left,10)+y,this._edit_id==d.id){M.style.zIndex=1,O=Math.max(O,s.xy.editor_width),(M=document.createElement("div")).setAttribute("event_id",d.id),M.setAttribute(this.config.event_attribute,d.id),this._waiAria.eventAttr(d,M),M.className="dhx_cal_event dhx_cal_editor",this.config.rtl&&N++,this.set_xy(M,O,v,N,p),d.color&&M.style.setProperty("--dhx-scheduler-event-background",d.color);var A=s.templates.event_class(d.start_date,d.end_date,d);A&&(M.className+=" "+A);var m=document.createElement("div");m.style.cssText+="overflow:hidden;height:100%",M.appendChild(m),this._els.dhx_cal_data[0].appendChild(M),this._rendered.push(M),m.innerHTML="<textarea class='dhx_cal_editor'>"+d.text+"</textarea>",this._editor=m.querySelector("textarea"),s.event(this._editor,"keydown",function(R){if(R.shiftKey)return!0;var P=R.keyCode;P==s.keys.edit_save&&s.editStop(!0),P==s.keys.edit_cancel&&s.editStop(!1),P!=s.keys.edit_save&&P!=s.keys.edit_cancel||R.preventDefault&&R.preventDefault()}),s.event(this._editor,"selectstart",function(R){return R.cancelBubble=!0,!0}),s._focus(this._editor,!0),this._els.dhx_cal_data[0].scrollLeft=0}if(this.xy.menu_width!==0&&this._select_id==d.id){this.config.cascade_event_display&&this._drag_mode&&(M.style.zIndex=1);for(var b,k=this.config["icons_"+(this._edit_id==d.id?"edit":"select")],E="",D=0;D<k.length;D++){const R=k[D];b=this._waiAria.eventMenuAttrString(R),E+=`<div class='dhx_menu_icon ${R}' title='${this.locale.labels[R]}' ${b}></div>`}var C=this._render_v_bar(d,N-f-1,p,f,null,"","<div class='dhx_menu_head'></div>",E,!0);d.color&&C.style.setProperty("--dhx-scheduler-event-background",d.color),d.textColor&&C.style.setProperty("--dhx-scheduler-event-color",d.textColor),this._els.dhx_cal_data[0].appendChild(C),this._rendered.push(C)}this.config.drag_highlight&&this._drag_id==d.id&&this.highlightEventPosition(d)}}},s._render_v_bar=function(d,c,u,f,y,g,h,p,v){var x=document.createElement("div"),S=d.id,O=v?"dhx_cal_event dhx_cal_select_menu":"dhx_cal_event",N=s.getState();N.drag_id==d.id&&(O+=" dhx_cal_event_drag"),N.select_id==d.id&&(O+=" dhx_cal_event_selected");var M=s.templates.event_class(d.start_date,d.end_date,d);M&&(O=O+" "+M),this.config.cascade_event_display&&(O+=" dhx_cal_event_cascade");var A=f-1,m=`<div event_id="${S}" ${this.config.event_attribute}="${S}" class="${O}"
				style="position:absolute; top:${u}px; ${this.config.rtl?"right:":"left:"}${c}px; width:${A}px; height:${y}px; ${g||""}" 
				data-bar-start="${d.start_date.valueOf()}" data-bar-end="${d.end_date.valueOf()}">
				</div>`;x.innerHTML=m;var b=x.cloneNode(!0).firstChild;if(!v&&s.renderEvent(b,d,f,y,h,p))return d.color&&b.style.setProperty("--dhx-scheduler-event-background",d.color),d.textColor&&b.style.setProperty("--dhx-scheduler-event-color",d.textColor),b;b=x.firstChild,d.color&&b.style.setProperty("--dhx-scheduler-event-background",d.color),d.textColor&&b.style.setProperty("--dhx-scheduler-event-color",d.textColor);var k='<div class="dhx_event_move dhx_header" >&nbsp;</div>';k+='<div class="dhx_event_move dhx_title">'+h+"</div>",k+='<div class="dhx_body">'+p+"</div>";var E="dhx_event_resize dhx_footer";return(v||d._drag_resize===!1)&&(E="dhx_resize_denied "+E),k+='<div class="'+E+'" style=" width:'+(v?" margin-top:-1px;":"")+'" ></div>',b.innerHTML=k,b},s.renderEvent=function(){return!1},s.locate_holder=function(d){return this._mode=="day"?this._els.dhx_cal_data[0].firstChild:this._els.dhx_cal_data[0].childNodes[d]},s.locate_holder_day=function(d,c){var u=Math.floor((this._correct_shift(d,1)-this._min_date)/864e5);return c&&this.date.time_part(d)&&u++,u},s._get_dnd_order=function(d,c,u){if(!this._drag_event)return d;this._drag_event._orig_sorder?d=this._drag_event._orig_sorder:this._drag_event._orig_sorder=d;for(var f=c*d;f+c>u;)d--,f-=c;return Math.max(d,0)},s._get_event_bar_pos=function(d){var c=this.config.rtl,u=this._colsS,f=u[d._sday],y=u[d._eday];c&&(f=u[u.col_length]-u[d._eday]+u[0],y=u[u.col_length]-u[d._sday]+u[0]),y==f&&(y=u[d._eday+1]);var g=this.xy.bar_height,h=d._sorder;if(d.id==this._drag_id){var p=u.heights[d._sweek+1]-u.heights[d._sweek]-this.xy.month_head_height;h=s._get_dnd_order(h,g,p)}var v=h*g;return{x:f,x2:y,y:u.heights[d._sweek]+(u.height?this.xy.month_scale_height+2:2)+v}},s.render_event_bar=function(d){var c=this._rendered_location,u=this._get_event_bar_pos(d),f=u.y,y=u.x,g=u.x2,h="";if(g){var p=s.config.resize_month_events&&this._mode=="month"&&(!d._timed||s.config.resize_month_timed),v=document.createElement("div"),x=d.hasOwnProperty("_first_chunk")&&d._first_chunk,S=d.hasOwnProperty("_last_chunk")&&d._last_chunk,O=p&&(d._timed||x),N=p&&(d._timed||S),M=!0,A="dhx_cal_event_clear";d._timed&&!p||(M=!1,A="dhx_cal_event_line"),x&&(A+=" dhx_cal_event_line_start"),S&&(A+=" dhx_cal_event_line_end"),O&&(h+="<div class='dhx_event_resize dhx_event_resize_start'></div>"),N&&(h+="<div class='dhx_event_resize dhx_event_resize_end'></div>");var m=s.templates.event_class(d.start_date,d.end_date,d);m&&(A+=" "+m);var b=d.color?"--dhx-scheduler-event-background:"+d.color+";":"",k=d.textColor?"--dhx-scheduler-event-color:"+d.textColor+";":"",E=["position:absolute","top:"+f+"px","left:"+y+"px","width:"+(g-y-(M?1:0))+"px","height:"+(this.xy.bar_height-2)+"px",k,b,d._text_style||""].join(";"),D="<div event_id='"+d.id+"' "+this.config.event_attribute+"='"+d.id+"' class='"+A+"' style='"+E+"'"+this._waiAria.eventBarAttrString(d)+">";p&&(D+=h),s.getState().mode!="month"||d._beforeEventChangedFlag||(d=s.getEvent(d.id)),d._timed&&(D+=`<span class='dhx_cal_event_clear_date'>${s.templates.event_bar_date(d.start_date,d.end_date,d)}</span>`),D+="<div class='dhx_cal_event_line_content'>",D+=s.templates.event_bar_text(d.start_date,d.end_date,d)+"</div>",D+="</div>",D+="</div>",v.innerHTML=D,this._rendered.push(v.firstChild),c.appendChild(v.firstChild)}},s._locate_event=function(d){for(var c=null;d&&!c&&d.getAttribute;)c=d.getAttribute(this.config.event_attribute),d=d.parentNode;return c},s.edit=function(d){this._edit_id!=d&&(this.editStop(!1,d),this._edit_id=d,this.updateEvent(d))},s.editStop=function(d,c){if(!c||this._edit_id!=c){var u=this.getEvent(this._edit_id);u&&(d&&(u.text=this._editor.value),this._edit_id=null,this._editor=null,this.updateEvent(u.id),this._edit_stop_event(u,d))}},s._edit_stop_event=function(d,c){this._new_event?(c?this.callEvent("onEventAdded",[d.id,d]):d&&this.deleteEvent(d.id,!0),this._new_event=null):c&&this.callEvent("onEventChanged",[d.id,d])},s.getEvents=function(d,c){var u=[];for(var f in this._events){var y=this._events[f];y&&(!d&&!c||y.start_date<c&&y.end_date>d)&&u.push(y)}return u},s.getRenderedEvent=function(d){if(d){for(var c=s._rendered,u=0;u<c.length;u++){var f=c[u];if(f.getAttribute(s.config.event_attribute)==d)return f}return null}},s.showEvent=function(d,c){d&&typeof d=="object"&&(c=d.mode,S=d.section,d=d.section);var u=typeof d=="number"||typeof d=="string"?s.getEvent(d):d;if(c=c||s._mode,u&&(!this.checkEvent("onBeforeEventDisplay")||this.callEvent("onBeforeEventDisplay",[u,c]))){var f=s.config.scroll_hour;s.config.scroll_hour=u.start_date.getHours();var y=s.config.preserve_scroll;s.config.preserve_scroll=!1;var g=u.color,h=u.textColor;if(s.config.highlight_displayed_event&&(u.color=s.config.displayed_event_color,u.textColor=s.config.displayed_event_text_color),s.setCurrentView(new Date(u.start_date),c),s.config.scroll_hour=f,s.config.preserve_scroll=y,s.matrix&&s.matrix[c]){var p=s.getView(),v=p.y_property,x=s.getEvent(u.id);if(x){if(!S){var S=x[v];Array.isArray(S)?S=S[0]:typeof S=="string"&&s.config.section_delimiter&&S.indexOf(s.config.section_delimiter)>-1&&(S=S.split(s.config.section_delimiter)[0])}var O=p.getSectionTop(S),N=p.posFromDate(x.start_date),M=s.$container.querySelector(".dhx_timeline_data_wrapper");if(N-=(M.offsetWidth-p.dx)/2,O=O-M.offsetHeight/2+p.dy/2,p._smartRenderingEnabled())var A=p.attachEvent("onScroll",function(){m(),p.detachEvent(A)});p.scrollTo({left:N,top:O}),p._smartRenderingEnabled()||m()}}else m();s.callEvent("onAfterEventDisplay",[u,c])}function m(){u.color=g,u.textColor=h}}}(t),function(s){s._append_drag_marker=function(d){if(!d.parentNode){var c=s._els.dhx_cal_data[0].lastChild,u=s._getClassName(c);u.indexOf("dhx_scale_holder")<0&&c.previousSibling&&(c=c.previousSibling),u=s._getClassName(c),c&&u.indexOf("dhx_scale_holder")===0&&c.appendChild(d)}},s._update_marker_position=function(d,c){var u=s._calc_event_y(c,0);d.style.top=u.top+"px",d.style.height=u.height+"px"},s.highlightEventPosition=function(d){var c=document.createElement("div");c.setAttribute("event_id",d.id),c.setAttribute(this.config.event_attribute,d.id),this._rendered.push(c),this._update_marker_position(c,d);var u=this.templates.drag_marker_class(d.start_date,d.end_date,d),f=this.templates.drag_marker_content(d.start_date,d.end_date,d);c.className="dhx_drag_marker",u&&(c.className+=" "+u),f&&(c.innerHTML=f),this._append_drag_marker(c)}}(t),Lc(t),Pc(t),Vc(t),function(s){s.getRootView=function(){return{view:{render:function(){return{tag:"div",type:1,attrs:{style:"width:100%;height:100%;"},hooks:{didInsert:function(){s.setCurrentView()}},body:[{el:this.el,type:1}]}},init:function(){var d=document.createElement("DIV");d.id="scheduler_"+s.uid(),d.style.width="100%",d.style.height="100%",d.classList.add("dhx_cal_container"),d.cmp="grid",d.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button"></div><div class="dhx_cal_next_button"></div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div><div class="dhx_cal_tab" data-tab="day"></div><div class="dhx_cal_tab" data-tab="week"></div><div class="dhx_cal_tab" data-tab="month"></div></div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>',s.init(d),this.el=d}},type:4}}}(t),$c(t),window.jQuery&&(a=window.jQuery,i=0,r=[],a.fn.dhx_scheduler=function(s){if(typeof s!="string"){var d=[];return this.each(function(){if(this&&this.getAttribute)if(this.getAttribute("dhxscheduler"))d.push(window[this.getAttribute("dhxscheduler")]);else{var c="scheduler";i&&(c="scheduler"+(i+1),window[c]=Scheduler.getSchedulerInstance());var u=window[c];for(var f in this.setAttribute("dhxscheduler",c),s)f!="data"&&(u.config[f]=s[f]);this.getElementsByTagName("div").length||(this.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button"></div><div class="dhx_cal_next_button"></div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div><div class="dhx_cal_tab" name="day_tab" data-tab="day" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" data-tab="week" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" data-tab="month" style="right:76px;"></div></div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>',this.className+=" dhx_cal_container"),u.init(this,u.config.date,u.config.mode),s.data&&u.parse(s.data),d.push(u),i++}}),d.length===1?d[0]:d}if(r[s])return r[s].apply(this,[]);a.error("Method "+s+" does not exist on jQuery.dhx_scheduler")}),function(s){(function(){var d=s.setCurrentView,c=s.updateView,u=null,f=null,y=function(p,v){var x=this;_t.clearTimeout(f),_t.clearTimeout(u);var S=x._date,O=x._mode;h(this,p,v),f=setTimeout(function(){s.$destroyed||(x.callEvent("onBeforeViewChange",[O,S,v||x._mode,p||x._date])?(c.call(x,p,v),x.callEvent("onViewChange",[x._mode,x._date]),_t.clearTimeout(u),f=0):h(x,S,O))},s.config.delay_render)},g=function(p,v){var x=this,S=arguments;h(this,p,v),_t.clearTimeout(u),u=setTimeout(function(){s.$destroyed||f||c.apply(x,S)},s.config.delay_render)};function h(p,v,x){v&&(p._date=v),x&&(p._mode=x)}s.attachEvent("onSchedulerReady",function(){s.config.delay_render?(s.setCurrentView=y,s.updateView=g):(s.setCurrentView=d,s.updateView=c)})})()}(t),function(s){s.createDataProcessor=function(d){var c,u;d instanceof Function?c=d:d.hasOwnProperty("router")?c=d.router:d.hasOwnProperty("event")&&(c=d),u=c?"CUSTOM":d.mode||"REST-JSON";var f=new Vr(d.url);return f.init(s),f.setTransactionMode({mode:u,router:c},d.batchUpdate),f},s.DataProcessor=Vr}(t),function(s){s.attachEvent("onSchedulerReady",function(){typeof dhtmlxError<"u"&&window.dhtmlxError.catchError("LoadXML",function(d,c,u){var f=u[0].responseText;switch(s.config.ajax_error){case"alert":_t.alert(f);break;case"console":_t.console.log(f)}})})}(t);const o=new r_({en:Jc,ar:Uc,be:zc,ca:jc,cn:qc,cs:Bc,da:Yc,de:Wc,el:Kc,es:Gc,fi:Qc,fr:Xc,he:Zc,hu:e_,id:t_,it:n_,jp:a_,nb:i_,nl:o_,no:s_,pl:l_,pt:d_,ro:c_,ru:__,si:u_,sk:h_,sv:f_,tr:p_,ua:m_});t.i18n={addLocale:o.addLocale,setLocale:function(s){if(typeof s=="string"){var d=o.getLocale(s);d||(d=o.getLocale("en")),t.locale=d}else if(s)if(t.locale)for(var c in s)s[c]&&typeof s[c]=="object"?(t.locale[c]||(t.locale[c]={}),t.mixin(t.locale[c],s[c],!0)):t.locale[c]=s[c];else t.locale=s;var u=t.locale.labels;u.dhx_save_btn=u.icon_save,u.dhx_cancel_btn=u.icon_cancel,u.dhx_delete_btn=u.icon_delete,t.$container&&t.get_elements()},getLocale:o.getLocale},t.i18n.setLocale("en"),t.ext={},xc(t);const l={};return t.plugins=function(s){(function(d,c,u){const f=[];for(const y in d)if(d[y]){const g=y.toLowerCase();c[g]&&c[g].forEach(function(h){const p=h.toLowerCase();d[p]||f.push(p)}),f.push(g)}return f.sort(function(y,g){const h=u[y]||0,p=u[g]||0;return h>p?1:h<p?-1:0}),f})(s,{treetimeline:["timeline"],daytimeline:["timeline"],outerdrag:["legacy"]},{legacy:1,limit:1,timeline:2,daytimeline:3,treetimeline:3,outerdrag:6}).forEach(function(d){if(!l[d]){const c=e.getExtension(d);if(!c)throw new Error("unknown plugin "+d);c(t),l[d]=!0}})},t.plugins({all_timed:"short"}),t}class y_{constructor(t){this._extensions={};for(const n in t)this._extensions[n]=t[n]}addExtension(t,n){this._extensions[t]=n}getExtension(t){return this._extensions[t]}}typeof dhtmlx<"u"&&dhtmlx.attaches&&(dhtmlx.attaches.attachScheduler=function(e,t,n,a){n=n||'<div class="dhx_cal_tab" name="day_tab" data-tab="day" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" data-tab="week" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" data-tab="month" style="right:76px;"></div>';var i=document.createElement("DIV");return i.id="dhxSchedObj_"+this._genStr(12),i.innerHTML='<div id="'+i.id+'" class="dhx_cal_container" style="width:100%; height:100%;"><div class="dhx_cal_navline"><div class="dhx_cal_prev_button"></div><div class="dhx_cal_next_button"></div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+n+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div></div>',document.body.appendChild(i.firstChild),this.attachObject(i.id,!1,!0),this.vs[this.av].sched=a,this.vs[this.av].schedId=i.id,a.setSizes=a.updateView,a.destructor=function(){},a.init(i.id,e,t),this.vs[this._viewRestore()].sched});const gt=(e,t)=>{t(!1,`The ${e} extension is not included in this version of dhtmlxScheduler.<br>
		You may need a <a href="https://docs.dhtmlx.com/scheduler/editions_comparison.html" target="_blank">Professional version of the component</a>.<br>
		Contact us at <a href="https://dhtmlx.com/docs/contact.shtml" target="_blank">https://dhtmlx.com/docs/contact.shtml</a> if you have any questions.`)};function b_(e){(function(){var t=[];function n(){return!!t.length}function a(l){setTimeout(function(){if(e.$destroyed)return!0;n()||function(s,d){for(;s&&s!=d;)s=s.parentNode;return s==d}(document.activeElement,e.$container)||e.focus()},1)}function i(l){var s=(l=l||window.event).currentTarget;s==t[t.length-1]&&e.$keyboardNavigation.trapFocus(s,l)}if(e.attachEvent("onLightbox",function(){var l;l=e.getLightbox(),e.eventRemove(l,"keydown",i),e.event(l,"keydown",i),t.push(l)}),e.attachEvent("onAfterLightbox",function(){var l=t.pop();l&&e.eventRemove(l,"keydown",i),a()}),e.attachEvent("onAfterQuickInfo",function(){a()}),!e._keyNavMessagePopup){e._keyNavMessagePopup=!0;var r=null,o=null;const l=[];e.attachEvent("onMessagePopup",function(s){for(r=document.activeElement,o=r;o&&e._getClassName(o).indexOf("dhx_cal_data")<0;)o=o.parentNode;o&&(o=o.parentNode),e.eventRemove(s,"keydown",i),e.event(s,"keydown",i),l.push(s)}),e.attachEvent("onAfterMessagePopup",function(){var s=l.pop();s&&e.eventRemove(s,"keydown",i),setTimeout(function(){if(e.$destroyed)return!0;for(var d=document.activeElement;d&&e._getClassName(d).indexOf("dhx_cal_light")<0;)d=d.parentNode;d||(r&&r.parentNode?r.focus():o&&o.parentNode&&o.focus(),r=null,o=null)},1)})}e.$keyboardNavigation.isModal=n})()}function w_(e){e._temp_key_scope=function(){e.config.key_nav=!0,e.$keyboardNavigation._pasteDate=null,e.$keyboardNavigation._pasteSection=null;var t=null,n={};function a(o){o=o||window.event,n.x=o.clientX,n.y=o.clientY}function i(){for(var o,l,s=document.elementFromPoint(n.x,n.y);s&&s!=e._obj;)s=s.parentNode;return o=s==e._obj,l=e.$keyboardNavigation.dispatcher.isEnabled(),o||l}function r(o){return e._lame_copy({},o)}document.body?e.event(document.body,"mousemove",a):e.event(window,"load",function(){e.event(document.body,"mousemove",a)}),e.attachEvent("onMouseMove",function(o,l){var s=e.getState();if(s.mode&&s.min_date){var d=e.getActionData(l);e.$keyboardNavigation._pasteDate=d.date,e.$keyboardNavigation._pasteSection=d.section}}),e._make_pasted_event=function(o){var l=e.$keyboardNavigation._pasteDate,s=e.$keyboardNavigation._pasteSection,d=o.end_date-o.start_date,c=r(o);if(function(f){delete f.rec_type,delete f.rec_pattern,delete f.event_pid,delete f.event_length}(c),c.start_date=new Date(l),c.end_date=new Date(c.start_date.valueOf()+d),s){var u=e._get_section_property();e.config.multisection&&o[u]&&e.isMultisectionEvent&&e.isMultisectionEvent(o)?c[u]=o[u]:c[u]=s}return c},e._do_paste=function(o,l,s){e.callEvent("onBeforeEventPasted",[o,l,s])!==!1&&(e.addEvent(l),e.callEvent("onEventPasted",[o,l,s]))},e._is_key_nav_active=function(){return!(!this._is_initialized()||this._is_lightbox_open()||!this.config.key_nav)},e.event(document,"keydown",function(o){(o.ctrlKey||o.metaKey)&&o.keyCode==86&&e._buffer_event&&!e.$keyboardNavigation.dispatcher.isEnabled()&&(e.$keyboardNavigation.dispatcher.isActive=i())}),e._key_nav_copy_paste=function(o){if(!e._is_key_nav_active())return!0;if(o.keyCode==37||o.keyCode==39){o.cancelBubble=!0;var l=e.date.add(e._date,o.keyCode==37?-1:1,e._mode);return e.setCurrentView(l),!0}var s,d=(s=e.$keyboardNavigation.dispatcher.getActiveNode())&&s.eventId?s.eventId:e._select_id;if((o.ctrlKey||o.metaKey)&&o.keyCode==67)return d&&(e._buffer_event=r(e.getEvent(d)),t=!0,e.callEvent("onEventCopied",[e.getEvent(d)])),!0;if((o.ctrlKey||o.metaKey)&&o.keyCode==88&&d){t=!1;var c=e._buffer_event=r(e.getEvent(d));e.updateEvent(c.id),e.callEvent("onEventCut",[c])}if((o.ctrlKey||o.metaKey)&&o.keyCode==86&&i()){if(c=(c=e._buffer_event?e.getEvent(e._buffer_event.id):e._buffer_event)||e._buffer_event){var u=e._make_pasted_event(c);t?(u.id=e.uid(),e._do_paste(t,u,c)):e.callEvent("onBeforeEventChanged",[u,o,!1,c])&&(e._do_paste(t,u,c),t=!0)}return!0}}},e._temp_key_scope()}function x_(e){e.$keyboardNavigation.attachSchedulerHandlers=function(){var t,n=e.$keyboardNavigation.dispatcher,a=function(s){if(e.config.key_nav)return n.keyDownHandler(s)},i=function(){n.keepScrollPosition(function(){n.focusGlobalNode()})};e.attachEvent("onDataRender",function(){e.config.key_nav&&n.isEnabled()&&!e.getState().editor_id&&(clearTimeout(t),t=setTimeout(function(){if(e.$destroyed)return!0;n.isEnabled()||n.enable(),r()}))});var r=function(){if(n.isEnabled()){var s=n.getActiveNode();s&&(s.isValid()||(s=s.fallback()),!s||s instanceof e.$keyboardNavigation.MinicalButton||s instanceof e.$keyboardNavigation.MinicalCell||n.keepScrollPosition(function(){s.focus(!0)}))}};function o(s){if(!e.config.key_nav)return!0;const d=e.getView();let c=!1;if(e.getState().mode==="month")c=e.$keyboardNavigation.isChildOf(s.target||s.srcElement,e.$container.querySelector(".dhx_cal_month_table"));else if(d&&d.layout==="timeline")c=e.$keyboardNavigation.isChildOf(s.target||s.srcElement,e.$container.querySelector(".dhx_timeline_data_col"));else{const y=e.$container.querySelectorAll(".dhx_scale_holder");c=Array.from(y).some(g=>g===s.target.parentNode)}var u,f=e.getActionData(s);e._locate_event(s.target||s.srcElement)?u=new e.$keyboardNavigation.Event(e._locate_event(s.target||s.srcElement)):c&&(u=new e.$keyboardNavigation.TimeSlot,f.date&&c&&(u=u.nextSlot(new e.$keyboardNavigation.TimeSlot(f.date,null,f.section)))),u&&(n.isEnabled()?f.date&&c&&n.delay(function(){n.setActiveNode(u)}):n.activeNode=u)}e.attachEvent("onSchedulerReady",function(){var s=e.$container;e.eventRemove(document,"keydown",a),e.eventRemove(s,"mousedown",o),e.eventRemove(s,"focus",i),e.config.key_nav?(e.event(document,"keydown",a),e.event(s,"mousedown",o),e.event(s,"focus",i),s.setAttribute("tabindex","0")):s.removeAttribute("tabindex")});var l=e.updateEvent;e.updateEvent=function(s){var d=l.apply(this,arguments);if(e.config.key_nav&&n.isEnabled()&&e.getState().select_id==s){var c=new e.$keyboardNavigation.Event(s);e.getState().lightbox_id||function(u){if(e.config.key_nav&&n.isEnabled()){var f=u,y=new e.$keyboardNavigation.Event(f.eventId);if(!y.isValid()){var g=y.start||f.start,h=y.end||f.end,p=y.section||f.section;(y=new e.$keyboardNavigation.TimeSlot(g,h,p)).isValid()||(y=new e.$keyboardNavigation.TimeSlot)}n.setActiveNode(y);var v=n.getActiveNode();v&&v.getNode&&document.activeElement!=v.getNode()&&n.focusNode(n.getActiveNode())}}(c)}return d},e.attachEvent("onEventDeleted",function(s){return e.config.key_nav&&n.isEnabled()&&n.getActiveNode().eventId==s&&n.setActiveNode(new e.$keyboardNavigation.TimeSlot),!0}),e.attachEvent("onClearAll",function(){if(!e.config.key_nav)return!0;n.isEnabled()&&n.getActiveNode()instanceof e.$keyboardNavigation.Event&&n.setActiveNode(new e.$keyboardNavigation.TimeSlot)})}}class k_{constructor(t){this.map=null,this._markers=[],this.scheduler=t}onEventClick(t){if(this._markers&&this._markers.length>0){for(let n=0;n<this._markers.length;n++)if(t.id==this._markers[n].event.id){let a=this.settings.zoom_after_resolve||this.settings.initial_zoom;t.lat&&t.lng?(this.map.setCenter({lat:t.lat,lng:t.lng}),this.map.setZoom(a)):(this.map.setCenter({lat:this.settings.error_position.lat,lng:this.settings.error_position.lng}),this.map.setZoom(a)),google.maps.event.trigger(this._markers[n].marker,"click")}}}initialize(t,n){this.settings=n;let a=this.scheduler,i={center:{lat:n.initial_position.lat,lng:n.initial_position.lng},zoom:n.initial_zoom,mapId:t.id,scrollwheel:!0,mapTypeId:n.type};if(this.map===null)this.map=new google.maps.Map(t,i);else{let r=this.map;t.appendChild(this.map.__gm.messageOverlay),t.appendChild(this.map.__gm.outerContainer),setTimeout(function(){r.setOptions({container:t.id})},500)}google.maps.event.addListener(this.map,"dblclick",function(r){const o=new google.maps.Geocoder;if(!a.config.readonly&&a.config.dblclick_create){let l=r.latLng;o.geocode({latLng:l},function(s,d){d==google.maps.GeocoderStatus.OK?(l=s[0].geometry.location,a.addEventNow({lat:l.lat(),lng:l.lng(),event_location:s[0].formatted_address,start_date:a.getState().date,end_date:a.date.add(a.getState().date,a.config.time_step,"minute")})):console.error("Geocode was not successful for the following reason: "+d)})}})}destroy(t){for(google.maps.event.clearInstanceListeners(window),google.maps.event.clearInstanceListeners(document),google.maps.event.clearInstanceListeners(t);t.firstChild;)t.firstChild.remove();t.innerHTML=""}async addEventMarker(t){let n={title:t.text,position:{},map:{}};t.lat&&t.lng?n.position={lat:t.lat,lng:t.lng}:n.position={lat:this.settings.error_position.lat,lng:this.settings.error_position.lng};const{AdvancedMarkerElement:a}=await google.maps.importLibrary("marker");let i;this.scheduler.ext.mapView.createMarker?(n.map=this.map,i=this.scheduler.ext.mapView.createMarker(n)):(i=new a(n),i.map=this.map),i.setMap(this.map),t["!nativeeditor_status"]=="true_deleted"&&i.setMap(null),google.maps.event.addListener(i,"click",()=>{this.infoWindow&&this.infoWindow.close(),this.infoWindow=new google.maps.InfoWindow({maxWidth:this.settings.info_window_max_width}),this.infoWindow.setContent(this.scheduler.templates.map_info_content(t)),this.infoWindow.open({anchor:i,map:this.map})});let r={event:t,...n,marker:i};this._markers.push(r)}removeEventMarker(t){for(let n=0;n<this._markers.length;n++)t==this._markers[n].event.id&&(this._markers[n].marker.setVisible(!1),this._markers[n].marker.setMap(null),this._markers[n].marker.setPosition(null),this._markers[n].marker=null,this._markers.splice(n,1),n--)}updateEventMarker(t){for(let n=0;n<this._markers.length;n++)if(this._markers[n].event.id==t.id){this._markers[n].event=t,this._markers[n].position.lat=t.lat,this._markers[n].position.lng=t.lng,this._markers[n].text=t.text;let a=new google.maps.LatLng(t.lat,t.lng);this._markers[n].marker.setPosition(a)}}clearEventMarkers(){if(this._markers.length>0){for(let t=0;t<this._markers.length;t++)this._markers[t].marker.setMap(null);this._markers=[]}}setView(t,n,a){this.map.setCenter({lat:t,lng:n}),this.map.setZoom(a)}async resolveAddress(t){const n=new google.maps.Geocoder;return await new Promise(a=>{n.geocode({address:t},function(i,r){r==google.maps.GeocoderStatus.OK?a({lat:i[0].geometry.location.lat(),lng:i[0].geometry.location.lng()}):(console.error("Geocode was not successful for the following reason: "+r),a({}))})})}}class E_{constructor(t){this.map=null,this._markers=[],this.scheduler=t}onEventClick(t){if(this._markers&&this._markers.length>0)for(let n=0;n<this._markers.length;n++)t.id==this._markers[n].event.id&&(this._markers[n].marker.openPopup(),this._markers[n].marker.closeTooltip(),t.lat&&t.lng?this.setView(t.lat,t.lng,this.settings.zoom_after_resolve||this.settings.initial_zoom):this.setView(this.settings.error_position.lat,this.settings.error_position.lng,this.settings.zoom_after_resolve||this.settings.initial_zoom))}initialize(t,n){let a=this.scheduler,i=document.createElement("div");i.className="mapWrapper",i.id="mapWrapper",i.style.width=t.style.width,i.style.height=t.style.height,t.appendChild(i);let r=L.map(i,{center:L.latLng(n.initial_position.lat,n.initial_position.lng),zoom:n.initial_zoom,keyboard:!1});L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(r),r.on("dblclick",async function(o){let l=await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${o.latlng.lat}&lon=${o.latlng.lng}&format=json`,{method:"GET",headers:{"Accept-Language":"en"}}).then(s=>s.json());if(l.address){let s=l.address.country;a.addEventNow({lat:o.latlng.lat,lng:o.latlng.lng,event_location:s,start_date:a.getState().date,end_date:a.date.add(a.getState().date,a.config.time_step,"minute")})}else console.error("unable recieve a position of the event",l.error)}),this.map=r,this.settings=n}destroy(t){for(this.map.remove();t.firstChild;)t.firstChild.remove();t.innerHTML=""}addEventMarker(t){const n=L.icon({iconUrl:"https://unpkg.com/leaflet@1.0.3/dist/images/marker-icon.png",iconSize:[25,41],shadowSize:[30,65],iconAnchor:[12,41],shadowAnchor:[7,65]});let a={minWidth:180,maxWidth:this.settings.info_window_max_width};const i=L.popup(a).setContent(this.scheduler.templates.map_info_content(t)),r=L.tooltip().setContent(t.text);let o=[t.lat,t.lng];t.lat&&t.lng||(o=[this.settings.error_position.lat,this.settings.error_position.lng]);const l={event:t,marker:L.marker(o,{icon:n}).bindPopup(i).bindTooltip(r).addTo(this.map)};this._markers.push(l)}removeEventMarker(t){for(let n=0;n<this._markers.length;n++)t==this._markers[n].event.id&&(this.map.removeLayer(this._markers[n].marker),this._markers.splice(n,1),n--)}updateEventMarker(t){for(let n=0;n<this._markers.length;n++)this._markers[n].event.id==t.id&&(this._markers[n].event=t,t.lat&&t.lng?this._markers[n].marker.setLatLng([t.lat,t.lng]):this._markers[n].marker.setLatLng([this.settings.error_position.lat,this.settings.error_position.lng]))}clearEventMarkers(){if(this._markers){for(let t=0;t<this._markers.length;t++)this.map.removeLayer(this._markers[t].marker);this._markers=[]}}setView(t,n,a){this.map.setView([t,n],a)}async resolveAddress(t){let n={},a=await fetch(`https://nominatim.openstreetmap.org/search?q=${t}&format=json`,{method:"GET",headers:{"Accept-Language":"en"}}).then(i=>i.json());return a&&a.length?(n.lat=+a[0].lat,n.lng=+a[0].lon):console.error(`Unable recieve a position of the event's location: ${t}`),n}}class T_{constructor(t){this.map=null,this._markers=[],this.scheduler=t}onEventClick(t){if(this._markers&&this._markers.length>0)for(let n=0;n<this._markers.length;n++){const a=this._markers[n].marker.getPopup();a.isOpen()&&a.remove(),t.id==this._markers[n].event.id&&(this._markers[n].marker.togglePopup(),t.lat&&t.lng?this.setView(t.lat,t.lng,this.settings.zoom_after_resolve||this.settings.initial_zoom):this.setView(this.settings.error_position.lat,this.settings.error_position.lng,this.settings.zoom_after_resolve||this.settings.initial_zoom))}}initialize(t,n){let a=this.scheduler;mapboxgl.accessToken=n.accessToken;const i=new mapboxgl.Map({container:t,center:[n.initial_position.lng,n.initial_position.lat],zoom:n.initial_zoom+1});i.on("dblclick",async function(r){let o=await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${r.lngLat.lng},${r.lngLat.lat}.json?access_token=${n.accessToken}`).then(l=>l.json());if(o.features){let l=o.features[0].place_name;a.addEventNow({lat:r.lngLat.lat,lng:r.lngLat.lng,event_location:l,start_date:a.getState().date,end_date:a.date.add(a.getState().date,a.config.time_step,"minute")})}else console.error("unable recieve a position of the event")}),this.map=i,this.settings=n}destroy(t){for(this.map.remove();t.firstChild;)t.firstChild.remove();t.innerHTML=""}addEventMarker(t){let n=[t.lng,t.lat];t.lat&&t.lng||(n=[this.settings.error_position.lng,this.settings.error_position.lat]);const a=new mapboxgl.Popup({offset:25,focusAfterOpen:!1}).setMaxWidth(`${this.settings.info_window_max_width}px`).setHTML(this.scheduler.templates.map_info_content(t)),i={event:t,marker:new mapboxgl.Marker().setLngLat(n).setPopup(a).addTo(this.map)};this._markers.push(i)}removeEventMarker(t){for(let n=0;n<this._markers.length;n++)t==this._markers[n].event.id&&(this._markers[n].marker.remove(),this._markers.splice(n,1),n--)}updateEventMarker(t){for(let n=0;n<this._markers.length;n++)this._markers[n].event.id==t.id&&(this._markers[n].event=t,t.lat&&t.lng?this._markers[n].marker.setLngLat([t.lng,t.lat]):this._markers[n].marker.setLngLat([this.settings.error_position.lng,this.settings.error_position.lat]))}clearEventMarkers(){for(let t=0;t<this._markers.length;t++)this._markers[t].marker.remove();this._markers=[]}setView(t,n,a){this.map.setCenter([n,t]),this.map.setZoom(a)}async resolveAddress(t){let n=await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${t}.json?access_token=${this.settings.accessToken}`).then(i=>i.json()),a={};return n&&n.features.length?(a.lng=n.features[0].center[0],a.lat=n.features[0].center[1]):console.error(`Unable recieve a position of the event's location: ${t}`),a}}var $r=["MO","TU","WE","TH","FR","SA","SU"],Fe=function(){function e(t,n){if(n===0)throw new Error("Can't create weekday with n == 0");this.weekday=t,this.n=n}return e.fromStr=function(t){return new e($r.indexOf(t))},e.prototype.nth=function(t){return this.n===t?this:new e(this.weekday,t)},e.prototype.equals=function(t){return this.weekday===t.weekday&&this.n===t.n},e.prototype.toString=function(){var t=$r[this.weekday];return this.n&&(t=(this.n>0?"+":"")+String(this.n)+t),t},e.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},e}(),ye=function(e){return e!=null},tt=function(e){return typeof e=="number"},Wo=function(e){return typeof e=="string"&&$r.includes(e)},Be=Array.isArray,st=function(e,t){t===void 0&&(t=e),arguments.length===1&&(t=e,e=0);for(var n=[],a=e;a<t;a++)n.push(a);return n},se=function(e,t){var n=0,a=[];if(Be(e))for(;n<t;n++)a[n]=[].concat(e);else for(;n<t;n++)a[n]=e;return a};function Jt(e,t,n){n===void 0&&(n=" ");var a=String(e);return t|=0,a.length>t?String(a):((t-=a.length)>n.length&&(n+=se(n,t/n.length)),n.slice(0,t)+String(a))}var Ke=function(e,t){var n=e%t;return n*t<0?n+t:n},Ar=function(e,t){return{div:Math.floor(e/t),mod:Ke(e,t)}},at=function(e){return!ye(e)||e.length===0},xe=function(e){return!at(e)},ce=function(e,t){return xe(e)&&e.indexOf(t)!==-1},Pt=function(e,t,n,a,i,r){return a===void 0&&(a=0),i===void 0&&(i=0),r===void 0&&(r=0),new Date(Date.UTC(e,t-1,n,a,i,r))},A_=[31,28,31,30,31,30,31,31,30,31,30,31],fl=864e5,pl=Pt(1970,1,1),S_=[6,0,1,2,3,4,5],An=function(e){return e%4==0&&e%100!=0||e%400==0},ml=function(e){return e instanceof Date},Sn=function(e){return ml(e)&&!isNaN(e.getTime())},Hr=function(e){return t=pl,n=e.getTime()-t.getTime(),Math.round(n/fl);var t,n},gl=function(e){return new Date(pl.getTime()+e*fl)},D_=function(e){var t=e.getUTCMonth();return t===1&&An(e.getUTCFullYear())?29:A_[t]},en=function(e){return S_[e.getUTCDay()]},Ko=function(e,t){var n=Pt(e,t+1,1);return[en(n),D_(n)]},vl=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},Fr=function(e){return new Date(e.getTime())},Jo=function(e){for(var t=[],n=0;n<e.length;n++)t.push(Fr(e[n]));return t},Ln=function(e){e.sort(function(t,n){return t.getTime()-n.getTime()})},ci=function(e,t){t===void 0&&(t=!0);var n=new Date(e);return[Jt(n.getUTCFullYear().toString(),4,"0"),Jt(n.getUTCMonth()+1,2,"0"),Jt(n.getUTCDate(),2,"0"),"T",Jt(n.getUTCHours(),2,"0"),Jt(n.getUTCMinutes(),2,"0"),Jt(n.getUTCSeconds(),2,"0"),t?"Z":""].join("")},_i=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/.exec(e);if(!t)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[5],10)||0,parseInt(t[6],10)||0,parseInt(t[7],10)||0))},Go=function(e,t){return e.toLocaleString("sv-SE",{timeZone:t}).replace(" ","T")+"Z"},Zt=function(){function e(t,n){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=t,this.args=n,t==="between"?(this.maxDate=n.inc?n.before:new Date(n.before.getTime()-1),this.minDate=n.inc?n.after:new Date(n.after.getTime()+1)):t==="before"?this.maxDate=n.inc?n.dt:new Date(n.dt.getTime()-1):t==="after"&&(this.minDate=n.inc?n.dt:new Date(n.dt.getTime()+1))}return e.prototype.accept=function(t){++this.total;var n=this.minDate&&t<this.minDate,a=this.maxDate&&t>this.maxDate;if(this.method==="between"){if(n)return!0;if(a)return!1}else if(this.method==="before"){if(a)return!1}else if(this.method==="after")return!!n||(this.add(t),!1);return this.add(t)},e.prototype.add=function(t){return this._result.push(t),!0},e.prototype.getValue=function(){var t=this._result;switch(this.method){case"all":case"between":return t;default:return t.length?t[t.length-1]:null}},e.prototype.clone=function(){return new e(this.method,this.args)},e}(),Ur=function(e,t){return Ur=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},Ur(e,t)};function ui(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ur(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var We=function(){return We=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},We.apply(this,arguments)};function Y(e,t,n){for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}var le,Qo=function(e){function t(n,a,i){var r=e.call(this,n,a)||this;return r.iterator=i,r}return ui(t,e),t.prototype.add=function(n){return!!this.iterator(n,this._result.length)&&(this._result.push(n),!0)},t}(Zt),ka={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},Xo=function(e,t){return e.indexOf(t)!==-1},C_=function(e){return e.toString()},N_=function(e,t,n){return"".concat(t," ").concat(n,", ").concat(e)},ct=function(){function e(t,n,a,i){if(n===void 0&&(n=C_),a===void 0&&(a=ka),i===void 0&&(i=N_),this.text=[],this.language=a||ka,this.gettext=n,this.dateFormatter=i,this.rrule=t,this.options=t.options,this.origOptions=t.origOptions,this.origOptions.bymonthday){var r=[].concat(this.options.bymonthday),o=[].concat(this.options.bynmonthday);r.sort(function(c,u){return c-u}),o.sort(function(c,u){return u-c}),this.bymonthday=r.concat(o),this.bymonthday.length||(this.bymonthday=null)}if(ye(this.origOptions.byweekday)){var l=Be(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],s=String(l);this.byweekday={allWeeks:l.filter(function(c){return!c.n}),someWeeks:l.filter(function(c){return!!c.n}),isWeekdays:s.indexOf("MO")!==-1&&s.indexOf("TU")!==-1&&s.indexOf("WE")!==-1&&s.indexOf("TH")!==-1&&s.indexOf("FR")!==-1&&s.indexOf("SA")===-1&&s.indexOf("SU")===-1,isEveryDay:s.indexOf("MO")!==-1&&s.indexOf("TU")!==-1&&s.indexOf("WE")!==-1&&s.indexOf("TH")!==-1&&s.indexOf("FR")!==-1&&s.indexOf("SA")!==-1&&s.indexOf("SU")!==-1};var d=function(c,u){return c.weekday-u.weekday};this.byweekday.allWeeks.sort(d),this.byweekday.someWeeks.sort(d),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return e.isFullyConvertible=function(t){if(!(t.options.freq in e.IMPLEMENTED)||t.origOptions.until&&t.origOptions.count)return!1;for(var n in t.origOptions){if(Xo(["dtstart","tzid","wkst","freq"],n))return!0;if(!Xo(e.IMPLEMENTED[t.options.freq],n))return!1}return!0},e.prototype.isFullyConvertible=function(){return e.isFullyConvertible(this.rrule)},e.prototype.toString=function(){var t=this.gettext;if(!(this.options.freq in e.IMPLEMENTED))return t("RRule error: Unable to fully convert this rrule to text");if(this.text=[t("every")],this[q.FREQUENCIES[this.options.freq]](),this.options.until){this.add(t("until"));var n=this.options.until;this.add(this.dateFormatter(n.getUTCFullYear(),this.language.monthNames[n.getUTCMonth()],n.getUTCDate()))}else this.options.count&&this.add(t("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?t("times"):t("time"));return this.isFullyConvertible()||this.add(t("(~ approximate)")),this.text.join("")},e.prototype.HOURLY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("hours"):t("hour"))},e.prototype.MINUTELY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("minutes"):t("minute"))},e.prototype.DAILY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(this.plural(this.options.interval)?t("days"):t("day")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},e.prototype.WEEKLY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?t("weeks"):t("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(t("on")).add(t("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?t("days"):t("day")):(this.options.interval===1&&this.add(t("week")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.origOptions.byhour&&this._byhour())},e.prototype.MONTHLY=function(){var t=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(t("months")),this.plural(this.options.interval)&&this.add(t("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("months"):t("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(t("on")).add(t("weekdays")):this.byweekday&&this._byweekday()},e.prototype.YEARLY=function(){var t=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(t("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("years"):t("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(t("on the")).add(this.list(this.options.byyearday,this.nth,t("and"))).add(t("day")),this.options.byweekno&&this.add(t("in")).add(this.plural(this.options.byweekno.length)?t("weeks"):t("week")).add(this.list(this.options.byweekno,void 0,t("and")))},e.prototype._bymonthday=function(){var t=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,t("or"))).add(t("the")).add(this.list(this.bymonthday,this.nth,t("or"))):this.add(t("on the")).add(this.list(this.bymonthday,this.nth,t("and")))},e.prototype._byweekday=function(){var t=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(t("and")),this.add(t("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,t("and"))))},e.prototype._byhour=function(){var t=this.gettext;this.add(t("at")).add(this.list(this.origOptions.byhour,void 0,t("and")))},e.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},e.prototype.nth=function(t){var n;t=parseInt(t.toString(),10);var a=this.gettext;if(t===-1)return a("last");var i=Math.abs(t);switch(i){case 1:case 21:case 31:n=i+a("st");break;case 2:case 22:n=i+a("nd");break;case 3:case 23:n=i+a("rd");break;default:n=i+a("th")}return t<0?n+" "+a("last"):n},e.prototype.monthtext=function(t){return this.language.monthNames[t-1]},e.prototype.weekdaytext=function(t){var n=tt(t)?(t+1)%7:t.getJsWeekday();return(t.n?this.nth(t.n)+" ":"")+this.language.dayNames[n]},e.prototype.plural=function(t){return t%100!=1},e.prototype.add=function(t){return this.text.push(" "),this.text.push(t),this},e.prototype.list=function(t,n,a,i){var r=this;i===void 0&&(i=","),Be(t)||(t=[t]),n=n||function(l){return l.toString()};var o=function(l){return n&&n.call(r,l)};return a?function(l,s,d){for(var c="",u=0;u<l.length;u++)u!==0&&(u===l.length-1?c+=" "+d+" ":c+=s+" "),c+=l[u];return c}(t.map(o),i,a):t.map(o).join(i+" ")},e}(),M_=function(){function e(t){this.done=!0,this.rules=t}return e.prototype.start=function(t){return this.text=t,this.done=!1,this.nextSymbol()},e.prototype.isDone=function(){return this.done&&this.symbol===null},e.prototype.nextSymbol=function(){var t,n;this.symbol=null,this.value=null;do{if(this.done)return!1;for(var a in t=null,this.rules){var i=this.rules[a].exec(this.text);i&&(t===null||i[0].length>t[0].length)&&(t=i,n=a)}if(t!=null&&(this.text=this.text.substr(t[0].length),this.text===""&&(this.done=!0)),t==null)return this.done=!0,this.symbol=null,void(this.value=null)}while(n==="SKIP");return this.symbol=n,this.value=t,!0},e.prototype.accept=function(t){if(this.symbol===t){if(this.value){var n=this.value;return this.nextSymbol(),n}return this.nextSymbol(),!0}return!1},e.prototype.acceptNumber=function(){return this.accept("number")},e.prototype.expect=function(t){if(this.accept(t))return!0;throw new Error("expected "+t+" but found "+this.symbol)},e}();function yl(e,t){t===void 0&&(t=ka);var n={},a=new M_(t.tokens);return a.start(e)?(function(){a.expect("every");var c=a.acceptNumber();if(c&&(n.interval=parseInt(c[0],10)),a.isDone())throw new Error("Unexpected end");switch(a.symbol){case"day(s)":n.freq=q.DAILY,a.nextSymbol()&&(r(),d());break;case"weekday(s)":n.freq=q.WEEKLY,n.byweekday=[q.MO,q.TU,q.WE,q.TH,q.FR],a.nextSymbol(),r(),d();break;case"week(s)":n.freq=q.WEEKLY,a.nextSymbol()&&(i(),r(),d());break;case"hour(s)":n.freq=q.HOURLY,a.nextSymbol()&&(i(),d());break;case"minute(s)":n.freq=q.MINUTELY,a.nextSymbol()&&(i(),d());break;case"month(s)":n.freq=q.MONTHLY,a.nextSymbol()&&(i(),d());break;case"year(s)":n.freq=q.YEARLY,a.nextSymbol()&&(i(),d());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":n.freq=q.WEEKLY;var u=a.symbol.substr(0,2).toUpperCase();if(n.byweekday=[q[u]],!a.nextSymbol())return;for(;a.accept("comma");){if(a.isDone())throw new Error("Unexpected end");var f=l();if(!f)throw new Error("Unexpected symbol "+a.symbol+", expected weekday");n.byweekday.push(q[f]),a.nextSymbol()}r(),function(){a.accept("on"),a.accept("the");var g=s();if(g)for(n.bymonthday=[g],a.nextSymbol();a.accept("comma");){if(!(g=s()))throw new Error("Unexpected symbol "+a.symbol+"; expected monthday");n.bymonthday.push(g),a.nextSymbol()}}(),d();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(n.freq=q.YEARLY,n.bymonth=[o()],!a.nextSymbol())return;for(;a.accept("comma");){if(a.isDone())throw new Error("Unexpected end");var y=o();if(!y)throw new Error("Unexpected symbol "+a.symbol+", expected month");n.bymonth.push(y),a.nextSymbol()}i(),d();break;default:throw new Error("Unknown symbol")}}(),n):null;function i(){var c=a.accept("on"),u=a.accept("the");if(c||u)do{var f=s(),y=l(),g=o();if(f)y?(a.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(q[y].nth(f))):(n.bymonthday||(n.bymonthday=[]),n.bymonthday.push(f),a.accept("day(s)"));else if(y)a.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(q[y]);else if(a.symbol==="weekday(s)")a.nextSymbol(),n.byweekday||(n.byweekday=[q.MO,q.TU,q.WE,q.TH,q.FR]);else if(a.symbol==="week(s)"){a.nextSymbol();var h=a.acceptNumber();if(!h)throw new Error("Unexpected symbol "+a.symbol+", expected week number");for(n.byweekno=[parseInt(h[0],10)];a.accept("comma");){if(!(h=a.acceptNumber()))throw new Error("Unexpected symbol "+a.symbol+"; expected monthday");n.byweekno.push(parseInt(h[0],10))}}else{if(!g)return;a.nextSymbol(),n.bymonth||(n.bymonth=[]),n.bymonth.push(g)}}while(a.accept("comma")||a.accept("the")||a.accept("on"))}function r(){if(a.accept("at"))do{var c=a.acceptNumber();if(!c)throw new Error("Unexpected symbol "+a.symbol+", expected hour");for(n.byhour=[parseInt(c[0],10)];a.accept("comma");){if(!(c=a.acceptNumber()))throw new Error("Unexpected symbol "+a.symbol+"; expected hour");n.byhour.push(parseInt(c[0],10))}}while(a.accept("comma")||a.accept("at"))}function o(){switch(a.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function l(){switch(a.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return a.symbol.substr(0,2).toUpperCase();default:return!1}}function s(){switch(a.symbol){case"last":return a.nextSymbol(),-1;case"first":return a.nextSymbol(),1;case"second":return a.nextSymbol(),a.accept("last")?-2:2;case"third":return a.nextSymbol(),a.accept("last")?-3:3;case"nth":var c=parseInt(a.value[1],10);if(c<-366||c>366)throw new Error("Nth out of range: "+c);return a.nextSymbol(),a.accept("last")?-c:c;default:return!1}}function d(){if(a.symbol==="until"){var c=Date.parse(a.text);if(!c)throw new Error("Cannot parse until date:"+a.text);n.until=new Date(c)}else a.accept("for")&&(n.count=parseInt(a.value[0],10),a.expect("number"))}}function Sr(e){return e<le.HOURLY}(function(e){e[e.YEARLY=0]="YEARLY",e[e.MONTHLY=1]="MONTHLY",e[e.WEEKLY=2]="WEEKLY",e[e.DAILY=3]="DAILY",e[e.HOURLY=4]="HOURLY",e[e.MINUTELY=5]="MINUTELY",e[e.SECONDLY=6]="SECONDLY"})(le||(le={}));var I_=function(e,t){return t===void 0&&(t=ka),new q(yl(e,t)||void 0)},Gt=["count","until","interval","byweekday","bymonthday","bymonth"];ct.IMPLEMENTED=[],ct.IMPLEMENTED[le.HOURLY]=Gt,ct.IMPLEMENTED[le.MINUTELY]=Gt,ct.IMPLEMENTED[le.DAILY]=["byhour"].concat(Gt),ct.IMPLEMENTED[le.WEEKLY]=Gt,ct.IMPLEMENTED[le.MONTHLY]=Gt,ct.IMPLEMENTED[le.YEARLY]=["byweekno","byyearday"].concat(Gt);var O_=ct.isFullyConvertible,Ea=function(){function e(t,n,a,i){this.hour=t,this.minute=n,this.second=a,this.millisecond=i||0}return e.prototype.getHours=function(){return this.hour},e.prototype.getMinutes=function(){return this.minute},e.prototype.getSeconds=function(){return this.second},e.prototype.getMilliseconds=function(){return this.millisecond},e.prototype.getTime=function(){return 1e3*(60*this.hour*60+60*this.minute+this.second)+this.millisecond},e}(),R_=function(e){function t(n,a,i,r,o,l,s){var d=e.call(this,r,o,l,s)||this;return d.year=n,d.month=a,d.day=i,d}return ui(t,e),t.fromDate=function(n){return new this(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.valueOf()%1e3)},t.prototype.getWeekday=function(){return en(new Date(this.getTime()))},t.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},t.prototype.getDay=function(){return this.day},t.prototype.getMonth=function(){return this.month},t.prototype.getYear=function(){return this.year},t.prototype.addYears=function(n){this.year+=n},t.prototype.addMonths=function(n){if(this.month+=n,this.month>12){var a=Math.floor(this.month/12),i=Ke(this.month,12);this.month=i,this.year+=a,this.month===0&&(this.month=12,--this.year)}},t.prototype.addWeekly=function(n,a){a>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-a))+7*n:this.day+=-(this.getWeekday()-a)+7*n,this.fixDay()},t.prototype.addDaily=function(n){this.day+=n,this.fixDay()},t.prototype.addHours=function(n,a,i){for(a&&(this.hour+=Math.floor((23-this.hour)/n)*n);;){this.hour+=n;var r=Ar(this.hour,24),o=r.div,l=r.mod;if(o&&(this.hour=l,this.addDaily(o)),at(i)||ce(i,this.hour))break}},t.prototype.addMinutes=function(n,a,i,r){for(a&&(this.minute+=Math.floor((1439-(60*this.hour+this.minute))/n)*n);;){this.minute+=n;var o=Ar(this.minute,60),l=o.div,s=o.mod;if(l&&(this.minute=s,this.addHours(l,!1,i)),(at(i)||ce(i,this.hour))&&(at(r)||ce(r,this.minute)))break}},t.prototype.addSeconds=function(n,a,i,r,o){for(a&&(this.second+=Math.floor((86399-(3600*this.hour+60*this.minute+this.second))/n)*n);;){this.second+=n;var l=Ar(this.second,60),s=l.div,d=l.mod;if(s&&(this.second=d,this.addMinutes(s,!1,i,r)),(at(i)||ce(i,this.hour))&&(at(r)||ce(r,this.minute))&&(at(o)||ce(o,this.second)))break}},t.prototype.fixDay=function(){if(!(this.day<=28)){var n=Ko(this.year,this.month-1)[1];if(!(this.day<=n))for(;this.day>n;){if(this.day-=n,++this.month,this.month===13&&(this.month=1,++this.year,this.year>9999))return;n=Ko(this.year,this.month-1)[1]}}},t.prototype.add=function(n,a){var i=n.freq,r=n.interval,o=n.wkst,l=n.byhour,s=n.byminute,d=n.bysecond;switch(i){case le.YEARLY:return this.addYears(r);case le.MONTHLY:return this.addMonths(r);case le.WEEKLY:return this.addWeekly(r,o);case le.DAILY:return this.addDaily(r);case le.HOURLY:return this.addHours(r,a,l);case le.MINUTELY:return this.addMinutes(r,a,l,s);case le.SECONDLY:return this.addSeconds(r,a,l,s,d)}},t}(Ea);function bl(e){for(var t=[],n=0,a=Object.keys(e);n<a.length;n++){var i=a[n];ce(au,i)||t.push(i),ml(e[i])&&!Sn(e[i])&&t.push(i)}if(t.length)throw new Error("Invalid options: "+t.join(", "));return We({},e)}function L_(e){var t=We(We({},hi),bl(e));if(ye(t.byeaster)&&(t.freq=q.YEARLY),!ye(t.freq)||!q.FREQUENCIES[t.freq])throw new Error("Invalid frequency: ".concat(t.freq," ").concat(e.freq));if(t.dtstart||(t.dtstart=new Date(new Date().setMilliseconds(0))),ye(t.wkst)?tt(t.wkst)||(t.wkst=t.wkst.weekday):t.wkst=q.MO.weekday,ye(t.bysetpos)){tt(t.bysetpos)&&(t.bysetpos=[t.bysetpos]);for(var n=0;n<t.bysetpos.length;n++)if((r=t.bysetpos[n])===0||!(r>=-366&&r<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}if(!(t.byweekno||xe(t.byweekno)||xe(t.byyearday)||t.bymonthday||xe(t.bymonthday)||ye(t.byweekday)||ye(t.byeaster)))switch(t.freq){case q.YEARLY:t.bymonth||(t.bymonth=t.dtstart.getUTCMonth()+1),t.bymonthday=t.dtstart.getUTCDate();break;case q.MONTHLY:t.bymonthday=t.dtstart.getUTCDate();break;case q.WEEKLY:t.byweekday=[en(t.dtstart)]}if(ye(t.bymonth)&&!Be(t.bymonth)&&(t.bymonth=[t.bymonth]),ye(t.byyearday)&&!Be(t.byyearday)&&tt(t.byyearday)&&(t.byyearday=[t.byyearday]),ye(t.bymonthday))if(Be(t.bymonthday)){var a=[],i=[];for(n=0;n<t.bymonthday.length;n++){var r;(r=t.bymonthday[n])>0?a.push(r):r<0&&i.push(r)}t.bymonthday=a,t.bynmonthday=i}else t.bymonthday<0?(t.bynmonthday=[t.bymonthday],t.bymonthday=[]):(t.bynmonthday=[],t.bymonthday=[t.bymonthday]);else t.bymonthday=[],t.bynmonthday=[];if(ye(t.byweekno)&&!Be(t.byweekno)&&(t.byweekno=[t.byweekno]),ye(t.byweekday))if(tt(t.byweekday))t.byweekday=[t.byweekday],t.bynweekday=null;else if(Wo(t.byweekday))t.byweekday=[Fe.fromStr(t.byweekday).weekday],t.bynweekday=null;else if(t.byweekday instanceof Fe)!t.byweekday.n||t.freq>q.MONTHLY?(t.byweekday=[t.byweekday.weekday],t.bynweekday=null):(t.bynweekday=[[t.byweekday.weekday,t.byweekday.n]],t.byweekday=null);else{var o=[],l=[];for(n=0;n<t.byweekday.length;n++){var s=t.byweekday[n];tt(s)?o.push(s):Wo(s)?o.push(Fe.fromStr(s).weekday):!s.n||t.freq>q.MONTHLY?o.push(s.weekday):l.push([s.weekday,s.n])}t.byweekday=xe(o)?o:null,t.bynweekday=xe(l)?l:null}else t.bynweekday=null;return ye(t.byhour)?tt(t.byhour)&&(t.byhour=[t.byhour]):t.byhour=t.freq<q.HOURLY?[t.dtstart.getUTCHours()]:null,ye(t.byminute)?tt(t.byminute)&&(t.byminute=[t.byminute]):t.byminute=t.freq<q.MINUTELY?[t.dtstart.getUTCMinutes()]:null,ye(t.bysecond)?tt(t.bysecond)&&(t.bysecond=[t.bysecond]):t.bysecond=t.freq<q.SECONDLY?[t.dtstart.getUTCSeconds()]:null,{parsedOptions:t}}function zr(e){var t=e.split(`
`).map(P_).filter(function(n){return n!==null});return We(We({},t[0]),t[1])}function Ta(e){var t={},n=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(e);if(!n)return t;var a=n[1],i=n[2];return a&&(t.tzid=a),t.dtstart=_i(i),t}function P_(e){if(!(e=e.replace(/^\s+|\s+$/,"")).length)return null;var t=/^([A-Z]+?)[:;]/.exec(e.toUpperCase());if(!t)return Zo(e);var n=t[1];switch(n.toUpperCase()){case"RRULE":case"EXRULE":return Zo(e);case"DTSTART":return Ta(e);default:throw new Error("Unsupported RFC prop ".concat(n," in ").concat(e))}}function Zo(e){var t=Ta(e.replace(/^RRULE:/i,""));return e.replace(/^(?:RRULE|EXRULE):/i,"").split(";").forEach(function(n){var a=n.split("="),i=a[0],r=a[1];switch(i.toUpperCase()){case"FREQ":t.freq=le[r.toUpperCase()];break;case"WKST":t.wkst=Qe[r.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var o=function(d){return d.indexOf(",")!==-1?d.split(",").map(es):es(d)}(r),l=i.toLowerCase();t[l]=o;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=function(d){var c=d.split(",");return c.map(function(u){if(u.length===2)return Qe[u];var f=u.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!f||f.length<3)throw new SyntaxError("Invalid weekday string: ".concat(u));var y=Number(f[1]),g=f[2],h=Qe[g].weekday;return new Fe(h,y)})}(r);break;case"DTSTART":case"TZID":var s=Ta(e);t.tzid=s.tzid,t.dtstart=s.dtstart;break;case"UNTIL":t.until=_i(r);break;case"BYEASTER":t.byeaster=Number(r);break;default:throw new Error("Unknown RRULE property '"+i+"'")}}),t}function es(e){return/^[+-]?\d+$/.test(e)?Number(e):e}var Aa=function(){function e(t,n){if(isNaN(t.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=t,this.tzid=n}return Object.defineProperty(e.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var t=ci(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(t):";TZID=".concat(this.tzid,":").concat(t)},e.prototype.getTime=function(){return this.date.getTime()},e.prototype.rezonedDate=function(){return this.isUTC?this.date:(t=this.date,n=this.tzid,a=Intl.DateTimeFormat().resolvedOptions().timeZone,i=new Date(Go(t,a)),r=new Date(Go(t,n??"UTC")).getTime()-i.getTime(),new Date(t.getTime()-r));var t,n,a,i,r},e}();function jr(e){for(var t,n=[],a="",i=Object.keys(e),r=Object.keys(hi),o=0;o<i.length;o++)if(i[o]!=="tzid"&&ce(r,i[o])){var l=i[o].toUpperCase(),s=e[i[o]],d="";if(ye(s)&&(!Be(s)||s.length)){switch(l){case"FREQ":d=q.FREQUENCIES[e.freq];break;case"WKST":d=tt(s)?new Fe(s).toString():s.toString();break;case"BYWEEKDAY":l="BYDAY",d=(t=s,Be(t)?t:[t]).map(function(g){return g instanceof Fe?g:Be(g)?new Fe(g[0],g[1]):new Fe(g)}).toString();break;case"DTSTART":a=V_(s,e.tzid);break;case"UNTIL":d=ci(s,!e.tzid);break;default:if(Be(s)){for(var c=[],u=0;u<s.length;u++)c[u]=String(s[u]);d=c.toString()}else d=String(s)}d&&n.push([l,d])}}var f=n.map(function(g){var h=g[0],p=g[1];return"".concat(h,"=").concat(p.toString())}).join(";"),y="";return f!==""&&(y="RRULE:".concat(f)),[a,y].filter(function(g){return!!g}).join(`
`)}function V_(e,t){return e?"DTSTART"+new Aa(new Date(e),t).toString():""}function $_(e,t){return Array.isArray(e)?!!Array.isArray(t)&&e.length===t.length&&e.every(function(n,a){return n.getTime()===t[a].getTime()}):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():e===t}var H_=function(){function e(){this.all=!1,this.before=[],this.after=[],this.between=[]}return e.prototype._cacheAdd=function(t,n,a){n&&(n=n instanceof Date?Fr(n):Jo(n)),t==="all"?this.all=n:(a._value=n,this[t].push(a))},e.prototype._cacheGet=function(t,n){var a=!1,i=n?Object.keys(n):[],r=function(c){for(var u=0;u<i.length;u++){var f=i[u];if(!$_(n[f],c[f]))return!0}return!1},o=this[t];if(t==="all")a=this.all;else if(Be(o))for(var l=0;l<o.length;l++){var s=o[l];if(!i.length||!r(s)){a=s._value;break}}if(!a&&this.all){var d=new Zt(t,n);for(l=0;l<this.all.length&&d.accept(this.all[l]);l++);a=d.getValue(),this._cacheAdd(t,a,n)}return Be(a)?Jo(a):a instanceof Date?Fr(a):a},e}(),F_=Y(Y(Y(Y(Y(Y(Y(Y(Y(Y(Y(Y(Y([],se(1,31),!0),se(2,28),!0),se(3,31),!0),se(4,30),!0),se(5,31),!0),se(6,30),!0),se(7,31),!0),se(8,31),!0),se(9,30),!0),se(10,31),!0),se(11,30),!0),se(12,31),!0),se(1,7)),U_=Y(Y(Y(Y(Y(Y(Y(Y(Y(Y(Y(Y(Y([],se(1,31),!0),se(2,29),!0),se(3,31),!0),se(4,30),!0),se(5,31),!0),se(6,30),!0),se(7,31),!0),se(8,31),!0),se(9,30),!0),se(10,31),!0),se(11,30),!0),se(12,31),!0),se(1,7)),z_=st(1,29),j_=st(1,30),yt=st(1,31),Oe=st(1,32),q_=Y(Y(Y(Y(Y(Y(Y(Y(Y(Y(Y(Y(Y([],Oe,!0),j_,!0),Oe,!0),yt,!0),Oe,!0),yt,!0),Oe,!0),Oe,!0),yt,!0),Oe,!0),yt,!0),Oe,!0),Oe.slice(0,7)),B_=Y(Y(Y(Y(Y(Y(Y(Y(Y(Y(Y(Y(Y([],Oe,!0),z_,!0),Oe,!0),yt,!0),Oe,!0),yt,!0),Oe,!0),Oe,!0),yt,!0),Oe,!0),yt,!0),Oe,!0),Oe.slice(0,7)),Y_=st(-28,0),W_=st(-29,0),bt=st(-30,0),Re=st(-31,0),K_=Y(Y(Y(Y(Y(Y(Y(Y(Y(Y(Y(Y(Y([],Re,!0),W_,!0),Re,!0),bt,!0),Re,!0),bt,!0),Re,!0),Re,!0),bt,!0),Re,!0),bt,!0),Re,!0),Re.slice(0,7)),J_=Y(Y(Y(Y(Y(Y(Y(Y(Y(Y(Y(Y(Y([],Re,!0),Y_,!0),Re,!0),bt,!0),Re,!0),bt,!0),Re,!0),Re,!0),bt,!0),Re,!0),bt,!0),Re,!0),Re.slice(0,7)),G_=[0,31,60,91,121,152,182,213,244,274,305,335,366],Q_=[0,31,59,90,120,151,181,212,243,273,304,334,365],ts=function(){for(var e=[],t=0;t<55;t++)e=e.concat(st(7));return e}();function X_(e,t){var n,a,i=Pt(e,1,1),r=An(e)?366:365,o=An(e+1)?366:365,l=Hr(i),s=en(i),d=We(We({yearlen:r,nextyearlen:o,yearordinal:l,yearweekday:s},function(A){var m=An(A)?366:365,b=Pt(A,1,1),k=en(b);return m===365?{mmask:F_,mdaymask:B_,nmdaymask:J_,wdaymask:ts.slice(k),mrange:Q_}:{mmask:U_,mdaymask:q_,nmdaymask:K_,wdaymask:ts.slice(k),mrange:G_}}(e)),{wnomask:null});if(at(t.byweekno))return d;d.wnomask=se(0,r+7);var c=n=Ke(7-s+t.wkst,7);c>=4?(c=0,a=d.yearlen+Ke(s-t.wkst,7)):a=r-c;for(var u=Math.floor(a/7),f=Ke(a,7),y=Math.floor(u+f/4),g=0;g<t.byweekno.length;g++){var h=t.byweekno[g];if(h<0&&(h+=y+1),h>0&&h<=y){var p=void 0;h>1?(p=c+7*(h-1),c!==n&&(p-=7-n)):p=c;for(var v=0;v<7&&(d.wnomask[p]=1,p++,d.wdaymask[p]!==t.wkst);v++);}}if(ce(t.byweekno,1)&&(p=c+7*y,c!==n&&(p-=7-n),p<r))for(g=0;g<7&&(d.wnomask[p]=1,p+=1,d.wdaymask[p]!==t.wkst);g++);if(c){var x=void 0;if(ce(t.byweekno,-1))x=-1;else{var S=en(Pt(e-1,1,1)),O=Ke(7-S.valueOf()+t.wkst,7),N=An(e-1)?366:365,M=void 0;O>=4?(O=0,M=N+Ke(S-t.wkst,7)):M=r-c,x=Math.floor(52+Ke(M,7)/4)}if(ce(t.byweekno,x))for(p=0;p<c;p++)d.wnomask[p]=1}return d}var Z_=function(){function e(t){this.options=t}return e.prototype.rebuild=function(t,n){var a=this.options;if(t!==this.lastyear&&(this.yearinfo=X_(t,a)),xe(a.bynweekday)&&(n!==this.lastmonth||t!==this.lastyear)){var i=this.yearinfo,r=i.yearlen,o=i.mrange,l=i.wdaymask;this.monthinfo=function(s,d,c,u,f,y){var g={lastyear:s,lastmonth:d,nwdaymask:[]},h=[];if(y.freq===q.YEARLY)if(at(y.bymonth))h=[[0,c]];else for(var p=0;p<y.bymonth.length;p++)d=y.bymonth[p],h.push(u.slice(d-1,d+1));else y.freq===q.MONTHLY&&(h=[u.slice(d-1,d+1)]);if(at(h))return g;for(g.nwdaymask=se(0,c),p=0;p<h.length;p++)for(var v=h[p],x=v[0],S=v[1]-1,O=0;O<y.bynweekday.length;O++){var N=void 0,M=y.bynweekday[O],A=M[0],m=M[1];m<0?(N=S+7*(m+1),N-=Ke(f[N]-A,7)):(N=x+7*(m-1),N+=Ke(7-f[N]+A,7)),x<=N&&N<=S&&(g.nwdaymask[N]=1)}return g}(t,n,r,o,l,a)}ye(a.byeaster)&&(this.eastermask=function(s,d){d===void 0&&(d=0);var c=s%19,u=Math.floor(s/100),f=s%100,y=Math.floor(u/4),g=u%4,h=Math.floor((u+8)/25),p=Math.floor((u-h+1)/3),v=Math.floor(19*c+u-y-p+15)%30,x=Math.floor(f/4),S=f%4,O=Math.floor(32+2*g+2*x-v-S)%7,N=Math.floor((c+11*v+22*O)/451),M=Math.floor((v+O-7*N+114)/31),A=(v+O-7*N+114)%31+1,m=Date.UTC(s,M-1,A+d),b=Date.UTC(s,0,1);return[Math.ceil((m-b)/864e5)]}(t,a.byeaster))},Object.defineProperty(e.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),e.prototype.ydayset=function(){return[st(this.yearlen),0,this.yearlen]},e.prototype.mdayset=function(t,n){for(var a=this.mrange[n-1],i=this.mrange[n],r=se(null,this.yearlen),o=a;o<i;o++)r[o]=o;return[r,a,i]},e.prototype.wdayset=function(t,n,a){for(var i=se(null,this.yearlen+7),r=Hr(Pt(t,n,a))-this.yearordinal,o=r,l=0;l<7&&(i[r]=r,++r,this.wdaymask[r]!==this.options.wkst);l++);return[i,o,r]},e.prototype.ddayset=function(t,n,a){var i=se(null,this.yearlen),r=Hr(Pt(t,n,a))-this.yearordinal;return i[r]=r,[i,r,r+1]},e.prototype.htimeset=function(t,n,a,i){var r=this,o=[];return this.options.byminute.forEach(function(l){o=o.concat(r.mtimeset(t,l,a,i))}),Ln(o),o},e.prototype.mtimeset=function(t,n,a,i){var r=this.options.bysecond.map(function(o){return new Ea(t,n,o,i)});return Ln(r),r},e.prototype.stimeset=function(t,n,a,i){return[new Ea(t,n,a,i)]},e.prototype.getdayset=function(t){switch(t){case le.YEARLY:return this.ydayset.bind(this);case le.MONTHLY:return this.mdayset.bind(this);case le.WEEKLY:return this.wdayset.bind(this);case le.DAILY:default:return this.ddayset.bind(this)}},e.prototype.gettimeset=function(t){switch(t){case le.HOURLY:return this.htimeset.bind(this);case le.MINUTELY:return this.mtimeset.bind(this);case le.SECONDLY:return this.stimeset.bind(this)}},e}();function eu(e,t,n,a,i,r){for(var o=[],l=0;l<e.length;l++){var s=void 0,d=void 0,c=e[l];c<0?(s=Math.floor(c/t.length),d=Ke(c,t.length)):(s=Math.floor((c-1)/t.length),d=Ke(c-1,t.length));for(var u=[],f=n;f<a;f++){var y=r[f];ye(y)&&u.push(y)}var g=void 0;g=s<0?u.slice(s)[0]:u[s];var h=t[d],p=gl(i.yearordinal+g),v=vl(p,h);ce(o,v)||o.push(v)}return Ln(o),o}function wl(e,t){var n=t.dtstart,a=t.freq,i=t.interval,r=t.until,o=t.bysetpos,l=t.count;if(l===0||i===0)return En(e);var s=R_.fromDate(n),d=new Z_(t);d.rebuild(s.year,s.month);for(var c=function(m,b,k){var E=k.freq,D=k.byhour,C=k.byminute,R=k.bysecond;return Sr(E)?function(P){var F=P.dtstart.getTime()%1e3;if(!Sr(P.freq))return[];var z=[];return P.byhour.forEach(function($){P.byminute.forEach(function(X){P.bysecond.forEach(function(te){z.push(new Ea($,X,te,F))})})}),z}(k):E>=q.HOURLY&&xe(D)&&!ce(D,b.hour)||E>=q.MINUTELY&&xe(C)&&!ce(C,b.minute)||E>=q.SECONDLY&&xe(R)&&!ce(R,b.second)?[]:m.gettimeset(E)(b.hour,b.minute,b.second,b.millisecond)}(d,s,t);;){var u=d.getdayset(a)(s.year,s.month,s.day),f=u[0],y=u[1],g=u[2],h=nu(f,y,g,d,t);if(xe(o))for(var p=eu(o,c,y,g,d,f),v=0;v<p.length;v++){var x=p[v];if(r&&x>r)return En(e);if(x>=n){var S=ns(x,t);if(!e.accept(S)||l&&!--l)return En(e)}}else for(v=y;v<g;v++){var O=f[v];if(ye(O))for(var N=gl(d.yearordinal+O),M=0;M<c.length;M++){var A=c[M];if(x=vl(N,A),r&&x>r||x>=n&&(S=ns(x,t),!e.accept(S)||l&&!--l))return En(e)}}if(t.interval===0||(s.add(t,h),s.year>9999))return En(e);Sr(a)||(c=d.gettimeset(a)(s.hour,s.minute,s.second,0)),d.rebuild(s.year,s.month)}}function tu(e,t,n){var a=n.bymonth,i=n.byweekno,r=n.byweekday,o=n.byeaster,l=n.bymonthday,s=n.bynmonthday,d=n.byyearday;return xe(a)&&!ce(a,e.mmask[t])||xe(i)&&!e.wnomask[t]||xe(r)&&!ce(r,e.wdaymask[t])||xe(e.nwdaymask)&&!e.nwdaymask[t]||o!==null&&!ce(e.eastermask,t)||(xe(l)||xe(s))&&!ce(l,e.mdaymask[t])&&!ce(s,e.nmdaymask[t])||xe(d)&&(t<e.yearlen&&!ce(d,t+1)&&!ce(d,-e.yearlen+t)||t>=e.yearlen&&!ce(d,t+1-e.yearlen)&&!ce(d,-e.nextyearlen+t-e.yearlen))}function ns(e,t){return new Aa(e,t.tzid).rezonedDate()}function En(e){return e.getValue()}function nu(e,t,n,a,i){for(var r=!1,o=t;o<n;o++){var l=e[o];(r=tu(a,l,i))&&(e[l]=null)}return r}var Qe={MO:new Fe(0),TU:new Fe(1),WE:new Fe(2),TH:new Fe(3),FR:new Fe(4),SA:new Fe(5),SU:new Fe(6)},hi={freq:le.YEARLY,dtstart:null,interval:1,wkst:Qe.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},au=Object.keys(hi),q=function(){function e(t,n){t===void 0&&(t={}),n===void 0&&(n=!1),this._cache=n?null:new H_,this.origOptions=bl(t);var a=L_(t).parsedOptions;this.options=a}return e.parseText=function(t,n){return yl(t,n)},e.fromText=function(t,n){return I_(t,n)},e.fromString=function(t){return new e(e.parseString(t)||void 0)},e.prototype._iter=function(t){return wl(t,this.options)},e.prototype._cacheGet=function(t,n){return!!this._cache&&this._cache._cacheGet(t,n)},e.prototype._cacheAdd=function(t,n,a){if(this._cache)return this._cache._cacheAdd(t,n,a)},e.prototype.all=function(t){if(t)return this._iter(new Qo("all",{},t));var n=this._cacheGet("all");return n===!1&&(n=this._iter(new Zt("all",{})),this._cacheAdd("all",n)),n},e.prototype.between=function(t,n,a,i){if(a===void 0&&(a=!1),!Sn(t)||!Sn(n))throw new Error("Invalid date passed in to RRule.between");var r={before:n,after:t,inc:a};if(i)return this._iter(new Qo("between",r,i));var o=this._cacheGet("between",r);return o===!1&&(o=this._iter(new Zt("between",r)),this._cacheAdd("between",o,r)),o},e.prototype.before=function(t,n){if(n===void 0&&(n=!1),!Sn(t))throw new Error("Invalid date passed in to RRule.before");var a={dt:t,inc:n},i=this._cacheGet("before",a);return i===!1&&(i=this._iter(new Zt("before",a)),this._cacheAdd("before",i,a)),i},e.prototype.after=function(t,n){if(n===void 0&&(n=!1),!Sn(t))throw new Error("Invalid date passed in to RRule.after");var a={dt:t,inc:n},i=this._cacheGet("after",a);return i===!1&&(i=this._iter(new Zt("after",a)),this._cacheAdd("after",i,a)),i},e.prototype.count=function(){return this.all().length},e.prototype.toString=function(){return jr(this.origOptions)},e.prototype.toText=function(t,n,a){return function(i,r,o,l){return new ct(i,r,o,l).toString()}(this,t,n,a)},e.prototype.isFullyConvertibleToText=function(){return O_(this)},e.prototype.clone=function(){return new e(this.origOptions)},e.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],e.YEARLY=le.YEARLY,e.MONTHLY=le.MONTHLY,e.WEEKLY=le.WEEKLY,e.DAILY=le.DAILY,e.HOURLY=le.HOURLY,e.MINUTELY=le.MINUTELY,e.SECONDLY=le.SECONDLY,e.MO=Qe.MO,e.TU=Qe.TU,e.WE=Qe.WE,e.TH=Qe.TH,e.FR=Qe.FR,e.SA=Qe.SA,e.SU=Qe.SU,e.parseString=zr,e.optionsToString=jr,e}(),as={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function ru(e,t){var n=[],a=[],i=[],r=[],o=Ta(e),l=o.dtstart,s=o.tzid,d=function(c,u){if(u===void 0&&(u=!1),c=c&&c.trim(),!c)throw new Error("Invalid empty string");if(!u)return c.split(/\s/);for(var f=c.split(`
`),y=0;y<f.length;){var g=f[y]=f[y].replace(/\s+$/g,"");g?y>0&&g[0]===" "?(f[y-1]+=g.slice(1),f.splice(y,1)):y+=1:f.splice(y,1)}return f}(e,t.unfold);return d.forEach(function(c){var u;if(c){var f=function(v){var x=function(M){if(M.indexOf(":")===-1)return{name:"RRULE",value:M};var A=(k=M,E=":",D=1,C=k.split(E),D?C.slice(0,D).concat([C.slice(D).join(E)]):C),m=A[0],b=A[1],k,E,D,C;return{name:m,value:b}}(v),S=x.name,O=x.value,N=S.split(";");if(!N)throw new Error("empty property name");return{name:N[0].toUpperCase(),parms:N.slice(1),value:O}}(c),y=f.name,g=f.parms,h=f.value;switch(y.toUpperCase()){case"RRULE":if(g.length)throw new Error("unsupported RRULE parm: ".concat(g.join(",")));n.push(zr(c));break;case"RDATE":var p=((u=/RDATE(?:;TZID=([^:=]+))?/i.exec(c))!==null&&u!==void 0?u:[])[1];p&&!s&&(s=p),a=a.concat(rs(h,g));break;case"EXRULE":if(g.length)throw new Error("unsupported EXRULE parm: ".concat(g.join(",")));i.push(zr(h));break;case"EXDATE":r=r.concat(rs(h,g));break;case"DTSTART":break;default:throw new Error("unsupported property: "+y)}}}),{dtstart:l,tzid:s,rrulevals:n,rdatevals:a,exrulevals:i,exdatevals:r}}function Cn(e,t){return t===void 0&&(t={}),function(n,a){var i=ru(n,a),r=i.rrulevals,o=i.rdatevals,l=i.exrulevals,s=i.exdatevals,d=i.dtstart,c=i.tzid,u=a.cache===!1;if(a.compatible&&(a.forceset=!0,a.unfold=!0),a.forceset||r.length>1||o.length||l.length||s.length){var f=new iu(u);return f.dtstart(d),f.tzid(c||void 0),r.forEach(function(g){f.rrule(new q(Dr(g,d,c),u))}),o.forEach(function(g){f.rdate(g)}),l.forEach(function(g){f.exrule(new q(Dr(g,d,c),u))}),s.forEach(function(g){f.exdate(g)}),a.compatible&&a.dtstart&&f.rdate(d),f}var y=r[0]||{};return new q(Dr(y,y.dtstart||a.dtstart||d,y.tzid||a.tzid||c),u)}(e,function(n){var a=[],i=Object.keys(n),r=Object.keys(as);if(i.forEach(function(o){ce(r,o)||a.push(o)}),a.length)throw new Error("Invalid options: "+a.join(", "));return We(We({},as),n)}(t))}function Dr(e,t,n){return We(We({},e),{dtstart:t,tzid:n})}function rs(e,t){return function(n){n.forEach(function(a){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(a))throw new Error("unsupported RDATE/EXDATE parm: "+a)})}(t),e.split(",").map(function(n){return _i(n)})}function is(e){var t=this;return function(n){if(n!==void 0&&(t["_".concat(e)]=n),t["_".concat(e)]!==void 0)return t["_".concat(e)];for(var a=0;a<t._rrule.length;a++){var i=t._rrule[a].origOptions[e];if(i)return i}}}var iu=function(e){function t(n){n===void 0&&(n=!1);var a=e.call(this,{},n)||this;return a.dtstart=is.apply(a,["dtstart"]),a.tzid=is.apply(a,["tzid"]),a._rrule=[],a._rdate=[],a._exrule=[],a._exdate=[],a}return ui(t,e),t.prototype._iter=function(n){return function(a,i,r,o,l,s){var d={},c=a.accept;function u(h,p){r.forEach(function(v){v.between(h,p,!0).forEach(function(x){d[Number(x)]=!0})})}l.forEach(function(h){var p=new Aa(h,s).rezonedDate();d[Number(p)]=!0}),a.accept=function(h){var p=Number(h);return isNaN(p)?c.call(this,h):!(!d[p]&&(u(new Date(p-1),new Date(p+1)),!d[p]))||(d[p]=!0,c.call(this,h))},a.method==="between"&&(u(a.args.after,a.args.before),a.accept=function(h){var p=Number(h);return!!d[p]||(d[p]=!0,c.call(this,h))});for(var f=0;f<o.length;f++){var y=new Aa(o[f],s).rezonedDate();if(!a.accept(new Date(y.getTime())))break}i.forEach(function(h){wl(a,h.options)});var g=a._result;switch(Ln(g),a.method){case"all":case"between":return g;case"before":return g.length&&g[g.length-1]||null;default:return g.length&&g[0]||null}}(n,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},t.prototype.rrule=function(n){os(n,this._rrule)},t.prototype.exrule=function(n){os(n,this._exrule)},t.prototype.rdate=function(n){ss(n,this._rdate)},t.prototype.exdate=function(n){ss(n,this._exdate)},t.prototype.rrules=function(){return this._rrule.map(function(n){return Cn(n.toString())})},t.prototype.exrules=function(){return this._exrule.map(function(n){return Cn(n.toString())})},t.prototype.rdates=function(){return this._rdate.map(function(n){return new Date(n.getTime())})},t.prototype.exdates=function(){return this._exdate.map(function(n){return new Date(n.getTime())})},t.prototype.valueOf=function(){var n=[];return!this._rrule.length&&this._dtstart&&(n=n.concat(jr({dtstart:this._dtstart}))),this._rrule.forEach(function(a){n=n.concat(a.toString().split(`
`))}),this._exrule.forEach(function(a){n=n.concat(a.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&n.push(ls("RDATE",this._rdate,this.tzid())),this._exdate.length&&n.push(ls("EXDATE",this._exdate,this.tzid())),n},t.prototype.toString=function(){return this.valueOf().join(`
`)},t.prototype.clone=function(){var n=new t(!!this._cache);return this._rrule.forEach(function(a){return n.rrule(a.clone())}),this._exrule.forEach(function(a){return n.exrule(a.clone())}),this._rdate.forEach(function(a){return n.rdate(new Date(a.getTime()))}),this._exdate.forEach(function(a){return n.exdate(new Date(a.getTime()))}),n},t}(q);function os(e,t){if(!(e instanceof q))throw new TypeError(String(e)+" is not RRule instance");ce(t.map(String),String(e))||t.push(e)}function ss(e,t){if(!(e instanceof Date))throw new TypeError(String(e)+" is not Date instance");ce(t.map(Number),Number(e))||(t.push(e),Ln(t))}function ls(e,t,n){var a=!n||n.toUpperCase()==="UTC",i=a?"".concat(e,":"):"".concat(e,";TZID=").concat(n,":"),r=t.map(function(o){return ci(o.valueOf(),a)}).join(",");return"".concat(i).concat(r)}class ou{constructor(t){this._scheduler=t}getNode(){const t=this._scheduler;return this._tooltipNode||(this._tooltipNode=document.createElement("div"),this._tooltipNode.className="dhtmlXTooltip scheduler_tooltip tooltip",t._waiAria.tooltipAttr(this._tooltipNode)),t.config.rtl?this._tooltipNode.classList.add("dhtmlXTooltip_rtl"):this._tooltipNode.classList.remove("dhtmlXTooltip_rtl"),this._tooltipNode}setViewport(t){return this._root=t,this}show(t,n){const a=this._scheduler,i=a.$domHelpers,r=document.body,o=this.getNode();if(i.isChildOf(o,r)||(this.hide(),r.appendChild(o)),this._isLikeMouseEvent(t)){const l=this._calculateTooltipPosition(t);n=l.top,t=l.left}return o.style.top=n+"px",o.style.left=t+"px",a._waiAria.tooltipVisibleAttr(o),this}hide(){const t=this._scheduler,n=this.getNode();return n&&n.parentNode&&n.parentNode.removeChild(n),t._waiAria.tooltipHiddenAttr(n),this}setContent(t){return this.getNode().innerHTML=t,this}_isLikeMouseEvent(t){return!(!t||typeof t!="object")&&"clientX"in t&&"clientY"in t}_getViewPort(){return this._root||document.body}_calculateTooltipPosition(t){const n=this._scheduler,a=n.$domHelpers,i=this._getViewPortSize(),r=this.getNode(),o={top:0,left:0,width:r.offsetWidth,height:r.offsetHeight,bottom:0,right:0},l=n.config.tooltip_offset_x,s=n.config.tooltip_offset_y,d=document.body,c=a.getRelativeEventPosition(t,d),u=a.getNodePosition(d);c.y+=u.y,o.top=c.y,o.left=c.x,o.top+=s,o.left+=l,o.bottom=o.top+o.height,o.right=o.left+o.width;const f=window.scrollY+d.scrollTop;return o.top<i.top-f?(o.top=i.top,o.bottom=o.top+o.height):o.bottom>i.bottom&&(o.bottom=i.bottom,o.top=o.bottom-o.height),o.left<i.left?(o.left=i.left,o.right=i.left+o.width):o.right>i.right&&(o.right=i.right,o.left=o.right-o.width),c.x>=o.left&&c.x<=o.right&&(o.left=c.x-o.width-l,o.right=o.left+o.width),c.y>=o.top&&c.y<=o.bottom&&(o.top=c.y-o.height-s,o.bottom=o.top+o.height),o.left<0&&(o.left=0),o.right<0&&(o.right=0),o}_getViewPortSize(){const t=this._scheduler,n=t.$domHelpers,a=this._getViewPort();let i,r=a,o=window.scrollY+document.body.scrollTop,l=window.scrollX+document.body.scrollLeft;return a===t.$event_data?(r=t.$event,o=0,l=0,i=n.getNodePosition(t.$event)):i=n.getNodePosition(r),{left:i.x+l,top:i.y+o,width:i.width,height:i.height,bottom:i.y+i.height+o,right:i.x+i.width+l}}}class su{constructor(t){this._listeners={},this.tooltip=new ou(t),this._scheduler=t,this._domEvents=t._createDomEventScope(),this._initDelayedFunctions()}destructor(){this.tooltip.hide(),this._domEvents.detachAll()}hideTooltip(){this.delayHide()}attach(t){let n=document.body;const a=this._scheduler,i=a.$domHelpers;t.global||(n=a.$root);let r=null;const o=l=>{const s=i.getTargetNode(l),d=i.closest(s,t.selector);if(i.isChildOf(s,this.tooltip.getNode()))return;const c=()=>{r=d,t.onmouseenter(l,d)};a._mobile&&a.config.touch_tooltip&&(d?c():t.onmouseleave(l,d)),r?d&&d===r?t.onmousemove(l,d):(t.onmouseleave(l,r),r=null,d&&d!==r&&c()):d&&c()};this.detach(t.selector),this._domEvents.attach(n,"mousemove",o),this._listeners[t.selector]={node:n,handler:o}}detach(t){const n=this._listeners[t];n&&this._domEvents.detach(n.node,"mousemove",n.handler)}tooltipFor(t){const n=a=>{let i=a;return document.createEventObject&&!document.createEvent&&(i=document.createEventObject(a)),i};this._initDelayedFunctions(),this.attach({selector:t.selector,global:t.global,onmouseenter:(a,i)=>{const r=t.html(a,i);r&&this.delayShow(n(a),r)},onmousemove:(a,i)=>{const r=t.html(a,i);r?this.delayShow(n(a),r):(this.delayShow.$cancelTimeout(),this.delayHide())},onmouseleave:()=>{this.delayShow.$cancelTimeout(),this.delayHide()}})}_initDelayedFunctions(){const t=this._scheduler;this.delayShow&&this.delayShow.$cancelTimeout(),this.delayHide&&this.delayHide.$cancelTimeout(),this.tooltip.hide(),this.delayShow=Xe.delay((n,a)=>{t.callEvent("onBeforeTooltip",[n])===!1?this.tooltip.hide():(this.tooltip.setContent(a),this.tooltip.show(n))},t.config.tooltip_timeout||1),this.delayHide=Xe.delay(()=>{this.delayShow.$cancelTimeout(),this.tooltip.hide()},t.config.tooltip_hide_timeout||1)}}const lu={active_links:function(e){e.config.active_link_view="day",e._active_link_click=function(t){var n=t.target.getAttribute("data-link-date"),a=e.date.str_to_date(e.config.api_date,!1,!0);if(n)return e.setCurrentView(a(n),e.config.active_link_view),t&&t.preventDefault&&t.preventDefault(),!1},e.attachEvent("onTemplatesReady",function(){var t=function(a,i){i=i||a+"_scale_date",e.templates["_active_links_old_"+i]||(e.templates["_active_links_old_"+i]=e.templates[i]);var r=e.templates["_active_links_old_"+i],o=e.date.date_to_str(e.config.api_date);e.templates[i]=function(l){return"<a data-link-date='"+o(l)+"' href='#'>"+r(l)+"</a>"}};if(t("week"),t("","month_day"),this.matrix)for(var n in this.matrix)t(n);this._detachDomEvent(this._obj,"click",e._active_link_click),e.event(this._obj,"click",e._active_link_click)})},agenda_legacy:function(e){e.date.add_agenda_legacy=function(t){return e.date.add(t,1,"year")},e.templates.agenda_legacy_time=function(t,n,a){return a._timed?this.day_date(a.start_date,a.end_date,a)+" "+this.event_date(t):e.templates.day_date(t)+" &ndash; "+e.templates.day_date(n)},e.templates.agenda_legacy_text=function(t,n,a){return a.text},e.templates.agenda_legacy_date=function(){return""},e.date.agenda_legacy_start=function(){return e.date.date_part(e._currentDate())},e.attachEvent("onTemplatesReady",function(){var t=e.dblclick_dhx_cal_data;e.dblclick_dhx_cal_data=function(){if(this._mode=="agenda_legacy")!this.config.readonly&&this.config.dblclick_create&&this.addEventNow();else if(t)return t.apply(this,arguments)};var n=e.render_data;e.render_data=function(r){if(this._mode!="agenda_legacy")return n.apply(this,arguments);i()};var a=e.render_view_data;function i(){var r=e.get_visible_events();r.sort(function(v,x){return v.start_date>x.start_date?1:-1});for(var o,l="<div class='dhx_agenda_area' "+e._waiAria.agendaDataAttrString()+">",s=0;s<r.length;s++){var d=r[s],c=d.color?"--dhx-scheduler-event-background:"+d.color+";":"",u=d.textColor?"--dhx-scheduler-event-color:"+d.textColor+";":"",f=e.templates.event_class(d.start_date,d.end_date,d);o=e._waiAria.agendaEventAttrString(d);var y=e._waiAria.agendaDetailsBtnString();l+="<div "+o+" class='dhx_agenda_line"+(f?" "+f:"")+"' event_id='"+d.id+"' "+e.config.event_attribute+"='"+d.id+"' style='"+u+c+(d._text_style||"")+"'><div class='dhx_agenda_event_time'>"+(e.config.rtl?e.templates.agenda_time(d.end_date,d.start_date,d):e.templates.agenda_time(d.start_date,d.end_date,d))+"</div>",l+=`<div ${y} class='dhx_event_icon icon_details'><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
			<path d="M15.4444 16.4H4.55556V7.6H15.4444V16.4ZM13.1111 2V3.6H6.88889V2H5.33333V3.6H4.55556C3.69222 3.6 3 4.312 3 5.2V16.4C3 16.8243 3.16389 17.2313 3.45561 17.5314C3.74733 17.8314 4.143 18 4.55556 18H15.4444C15.857 18 16.2527 17.8314 16.5444 17.5314C16.8361 17.2313 17 16.8243 17 16.4V5.2C17 4.312 16.3 3.6 15.4444 3.6H14.6667V2H13.1111ZM13.8889 10.8H10V14.8H13.8889V10.8Z" fill="#A1A4A6"/>
			</svg></div>`,l+="<span>"+e.templates.agenda_text(d.start_date,d.end_date,d)+"</span></div>"}l+="<div class='dhx_v_border'></div></div>",e._els.dhx_cal_data[0].innerHTML=l,e._els.dhx_cal_data[0].childNodes[0].scrollTop=e._agendaScrollTop||0;var g=e._els.dhx_cal_data[0].childNodes[0];g.childNodes[g.childNodes.length-1].style.height=g.offsetHeight<e._els.dhx_cal_data[0].offsetHeight?"100%":g.offsetHeight+"px";var h=e._els.dhx_cal_data[0].firstChild.childNodes,p=e._getNavDateElement();for(p&&(p.innerHTML=e.templates.agenda_date(e._min_date,e._max_date,e._mode)),e._rendered=[],s=0;s<h.length-1;s++)e._rendered[s]=h[s]}e.render_view_data=function(){return this._mode=="agenda_legacy"&&(e._agendaScrollTop=e._els.dhx_cal_data[0].childNodes[0].scrollTop,e._els.dhx_cal_data[0].childNodes[0].scrollTop=0),a.apply(this,arguments)},e.agenda_legacy_view=function(r){e._min_date=e.config.agenda_start||e.date.agenda_legacy_start(e._date),e._max_date=e.config.agenda_end||e.date.add_agenda_legacy(e._min_date,1),function(o){if(o){var l=e.locale.labels,s=e._waiAria.agendaHeadAttrString(),d=e._waiAria.agendaHeadDateString(l.date),c=e._waiAria.agendaHeadDescriptionString(l.description);e._els.dhx_cal_header[0].innerHTML="<div "+s+" class='dhx_agenda_line dhx_agenda_line_header'><div "+d+">"+l.date+"</div><span class = 'description_header' style='padding-left:25px' "+c+">"+l.description+"</span></div>",e._table_view=!0,e.set_sizes()}}(r),r?(e._cols=null,e._colsS=null,e._table_view=!0,i()):e._table_view=!1}})},agenda_view:function(e){e.date.add_agenda=function(i,r){return e.date.add(i,1*r,"month")},e.templates.agenda_time=function(i,r,o){return o._timed?`${this.event_date(i)} - ${this.event_date(r)}`:e.locale.labels.full_day},e.templates.agenda_text=function(i,r,o){return o.text};const t=e.date.date_to_str("%F %j"),n=e.date.date_to_str("%l");e.templates.agenda_day=function(i){return`<div class="dhx_agenda_day_date">${t(i)}</div>
		<div class="dhx_agenda_day_dow">${n(i)}</div>`},e.templates.agenda_date=function(i,r){return e.templates.month_date(e.getState().date)},e.date.agenda_start=function(i){return e.date.month_start(new Date(i))};let a=0;e.attachEvent("onTemplatesReady",function(){var i=e.dblclick_dhx_cal_data;e.dblclick_dhx_cal_data=function(){if(this._mode=="agenda")!this.config.readonly&&this.config.dblclick_create&&this.addEventNow();else if(i)return i.apply(this,arguments)};var r=e.render_data;e.render_data=function(d){if(this._mode!="agenda")return r.apply(this,arguments);l()};var o=e.render_view_data;function l(){const d=e.get_visible_events();d.sort(function(p,v){return p.start_date>v.start_date?1:-1});const c={};let u=e.getState().min_date;const f=e.getState().max_date;for(;u.valueOf()<f.valueOf();)c[u.valueOf()]=[],u=e.date.add(u,1,"day");let y=!1;if(d.forEach(p=>{let v=e.date.day_start(new Date(p.start_date));for(;v.valueOf()<p.end_date.valueOf();)c[v.valueOf()]&&(c[v.valueOf()].push(p),y=!0),v=e.date.day_start(e.date.add(v,1,"day"))}),y){let p="";for(let v in c)e.ignore_agenda&&e.ignore_agenda(new Date(1*v))||(p+=s(new Date(1*v),c[v]));e._els.dhx_cal_data[0].innerHTML=p}else e._els.dhx_cal_data[0].innerHTML=`<div class="dhx_cal_agenda_no_events">${e.locale.labels.agenda_tab}</div>`;e._els.dhx_cal_data[0].scrollTop=a;let g=e._els.dhx_cal_data[0].querySelectorAll(".dhx_cal_agenda_event_line");e._rendered=[];for(var h=0;h<g.length-1;h++)e._rendered[h]=g[h]}function s(d,c){if(!c.length)return"";let u=`
<div class="dhx_cal_agenda_day" data-date="${e.templates.format_date(d)}" data-day="${d.getDay()}">
	<div class="dhx_cal_agenda_day_header">${e.templates.agenda_day(d)}</div>
	<div class="dhx_cal_agenda_day_events">
`;return c.forEach(f=>{u+=function(y,g){const h=e.templates.agenda_time(g.start_date,g.end_date,g),p=e.getState().select_id,v=e.templates.event_class(g.start_date,g.end_date,g),x=e.templates.agenda_text(g.start_date,g.end_date,g);let S="";return(g.color||g.textColor)&&(S=` style="${g.color?"--dhx-scheduler-event-background:"+g.color+";":""}${g.textColor?"--dhx-scheduler-event-color:"+g.textColor+";":""}" `),`<div class="dhx_cal_agenda_event_line ${v||""} ${g.id==p?"dhx_cal_agenda_event_line_selected":""}" ${S} ${e.config.event_attribute}="${g.id}">
	<div class="dhx_cal_agenda_event_line_marker"></div>
	<div class="dhx_cal_agenda_event_line_time">${h}</div>
	<div class="dhx_cal_agenda_event_line_text">${x}</div>
</div>`}(0,f)}),u+="</div></div>",u}e.render_view_data=function(){return this._mode=="agenda"&&(a=e._els.dhx_cal_data[0].scrollTop,e._els.dhx_cal_data[0].scrollTop=0),o.apply(this,arguments)},e.agenda_view=function(d){d?(e._min_date=e.config.agenda_start||e.date.agenda_start(e._date),e._max_date=e.config.agenda_end||e.date.add_agenda(e._min_date,1),e._cols=null,e._colsS=null,e._table_view=!0,e._getNavDateElement().innerHTML=e.templates.agenda_date(e._date),l()):e._table_view=!1}})},all_timed:function(e){e.config.all_timed="short",e.config.all_timed_month=!1,e.ext.allTimed={isMainAreaEvent:function(l){return!!(l._timed||e.config.all_timed===!0||e.config.all_timed=="short"&&t(l))}};var t=function(l){return!((l.end_date-l.start_date)/36e5>=24)||e._drag_mode=="resize"&&e._drag_id==l.id};e._safe_copy=function(l){var s=null,d=e._copy_event(l);return l.event_pid&&(s=e.getEvent(l.event_pid)),s&&s.isPrototypeOf(l)&&(delete d.event_length,delete d.event_pid,delete d.rec_pattern,delete d.rec_type),d};var n=e._pre_render_events_line,a=e._pre_render_events_table,i=function(l,s){return this._table_view?a.call(this,l,s):n.call(this,l,s)};e._pre_render_events_line=e._pre_render_events_table=function(l,s){if(!this.config.all_timed||this._table_view&&this._mode!="month"||this._mode=="month"&&!this.config.all_timed_month)return i.call(this,l,s);for(var d=0;d<l.length;d++){var c=l[d];if(!c._timed)if(this.config.all_timed!="short"||t(c)){var u=this._safe_copy(c);c._virtual?u._first_chunk=!1:u._first_chunk=!0,u._drag_resize=!1,u._virtual=!0,u.start_date=new Date(u.start_date),h(c)?(u.end_date=p(u.start_date),this.config.last_hour!=24&&(u.end_date=v(u.start_date,this.config.last_hour))):u.end_date=new Date(c.end_date);var f=!1;u.start_date<this._max_date&&u.end_date>this._min_date&&u.start_date<u.end_date&&(l[d]=u,f=!0);var y=this._safe_copy(c);if(y._virtual=!0,y.end_date=new Date(y.end_date),y.start_date<this._min_date?y.start_date=v(this._min_date,this.config.first_hour):y.start_date=v(p(c.start_date),this.config.first_hour),y.start_date<this._max_date&&y.start_date<y.end_date){if(!f){l[d--]=y;continue}l.splice(d+1,0,y),y._last_chunk=!1}else u._last_chunk=!0,u._drag_resize=!0}else this._mode!="month"&&l.splice(d--,1)}var g=this._drag_mode!="move"&&s;return i.call(this,l,g);function h(x){var S=p(x.start_date);return+x.end_date>+S}function p(x){var S=e.date.add(x,1,"day");return S=e.date.date_part(S)}function v(x,S){var O=e.date.date_part(new Date(x));return O.setHours(S),O}};var r=e.get_visible_events;e.get_visible_events=function(l){return this.config.all_timed&&this.config.multi_day?r.call(this,!1):r.call(this,l)},e.attachEvent("onBeforeViewChange",function(l,s,d,c){return e._allow_dnd=d=="day"||d=="week"||e.getView(d),!0}),e._is_main_area_event=function(l){return e.ext.allTimed.isMainAreaEvent(l)};var o=e.updateEvent;e.updateEvent=function(l){var s,d,c=e.getEvent(l);c&&(s=e.config.all_timed&&!(e.isOneDayEvent(e._events[l])||e.getState().drag_id))&&(d=e.config.update_render,e.config.update_render=!0),o.apply(e,arguments),c&&s&&(e.config.update_render=d)}},collision:function(e){let t,n;function a(i){e._get_section_view()&&i&&(t=e.getEvent(i)[e._get_section_property()])}e.config.collision_limit=1,e.attachEvent("onBeforeDrag",function(i){return a(i),!0}),e.attachEvent("onBeforeLightbox",function(i){const r=e.getEvent(i);return n=[r.start_date,r.end_date],a(i),!0}),e.attachEvent("onEventChanged",function(i){if(!i||!e.getEvent(i))return!0;const r=e.getEvent(i);if(!e.checkCollision(r)){if(!n)return!1;r.start_date=n[0],r.end_date=n[1],r._timed=this.isOneDayEvent(r)}return!0}),e.attachEvent("onBeforeEventChanged",function(i,r,o){return e.checkCollision(i)}),e.attachEvent("onEventAdded",function(i,r){e.checkCollision(r)||e.deleteEvent(i)}),e.attachEvent("onEventSave",function(i,r,o){if((r=e._lame_clone(r)).id=i,!r.start_date||!r.end_date){const l=e.getEvent(i);r.start_date=new Date(l.start_date),r.end_date=new Date(l.end_date)}return(r.rrule&&!r.recurring_event_id||r.rec_type)&&e._roll_back_dates(r),e.checkCollision(r)}),e._check_sections_collision=function(i,r){const o=e._get_section_property();return i[o]==r[o]&&i.id!=r.id},e.checkCollision=function(i){let r=[];const o=e.config.collision_limit;if(i.rec_type){let c=e.getRecDates(i);for(let u=0;u<c.length;u++){let f=e.getEvents(c[u].start_date,c[u].end_date);for(let y=0;y<f.length;y++)(f[y].event_pid||f[y].id)!=i.id&&r.push(f[y])}}else if(i.rrule){let c=e.getRecDates(i);for(let u=0;u<c.length;u++){let f=e.getEvents(c[u].start_date,c[u].end_date);for(let y=0;y<f.length;y++)(String(f[y].id).split("#")[0]||f[y].id)!=i.id&&r.push(f[y])}}else{r=e.getEvents(i.start_date,i.end_date);for(let c=0;c<r.length;c++){let u=r[c];if(u.id==i.id||u.event_length&&[u.event_pid,u.event_length].join("#")==i.id){r.splice(c,1);break}if(u.recurring_event_id&&[u.recurring_event_id,u._pid_time].join("#")==i.id){r.splice(c,1);break}}}const l=e._get_section_view(),s=e._get_section_property();let d=!0;if(l){let c=0;for(let u=0;u<r.length;u++)r[u].id!=i.id&&this._check_sections_collision(r[u],i)&&c++;c>=o&&(d=!1)}else r.length>=o&&(d=!1);if(!d){let c=!e.callEvent("onEventCollision",[i,r]);return c||(i[s]=t||i[s]),c}return d}},container_autoresize:function(e){e.config.container_autoresize=!0,e.config.month_day_min_height=90,e.config.min_grid_size=25,e.config.min_map_size=400;var t=e._pre_render_events,n=!0,a=0,i=0;e._pre_render_events=function(c,u){if(!e.config.container_autoresize||!n)return t.apply(this,arguments);var f=this.xy.bar_height,y=this._colsS.heights,g=this._colsS.heights=[0,0,0,0,0,0,0],h=this._els.dhx_cal_data[0];if(c=this._table_view?this._pre_render_events_table(c,u):this._pre_render_events_line(c,u),this._table_view)if(u)this._colsS.heights=y;else{var p=h.firstChild;const A=p.querySelectorAll(".dhx_cal_month_row");if(A&&A.length){for(var v=0;v<A.length;v++){if(g[v]++,g[v]*f>this._colsS.height-this.xy.month_head_height){var x=A[v].querySelectorAll(".dhx_cal_month_cell"),S=this._colsS.height-this.xy.month_head_height;1*this.config.max_month_events!==this.config.max_month_events||g[v]<=this.config.max_month_events?S=g[v]*f:(this.config.max_month_events+1)*f>this._colsS.height-this.xy.month_head_height&&(S=(this.config.max_month_events+1)*f),A[v].style.height=S+this.xy.month_head_height+"px";for(var O=0;O<x.length;O++)x[O].childNodes[1].style.height=S+"px";g[v]=(g[v-1]||0)+x[0].offsetHeight}g[v]=(g[v-1]||0)+A[v].querySelectorAll(".dhx_cal_month_cell")[0].offsetHeight}g.unshift(0),p.parentNode.offsetHeight<p.parentNode.scrollHeight&&p._h_fix}else if(c.length||this._els.dhx_multi_day[0].style.visibility!="visible"||(g[0]=-1),c.length||g[0]==-1){var N=(g[0]+1)*f+1;i!=N+1&&(this._obj.style.height=a-i+N-1+"px"),N+="px";const m=this._els.dhx_cal_navline[0].offsetHeight,b=this._els.dhx_cal_header[0].offsetHeight;h.style.height=this._obj.offsetHeight-m-b-(this.xy.margin_top||0)+"px";var M=this._els.dhx_multi_day[0];M.style.height=N,M.style.visibility=g[0]==-1?"hidden":"visible",M.style.display=g[0]==-1?"none":"",(M=this._els.dhx_multi_day[1]).style.height=N,M.style.visibility=g[0]==-1?"hidden":"visible",M.style.display=g[0]==-1?"none":"",M.className=g[0]?"dhx_multi_day_icon":"dhx_multi_day_icon_small",this._dy_shift=(g[0]+1)*f,g[0]=0}}return c};var r=["dhx_cal_navline","dhx_cal_header","dhx_multi_day","dhx_cal_data"],o=function(c){a=0;for(var u=0;u<r.length;u++){var f=r[u],y=e._els[f]?e._els[f][0]:null,g=0;switch(f){case"dhx_cal_navline":case"dhx_cal_header":g=y.offsetHeight;break;case"dhx_multi_day":g=y?y.offsetHeight-1:0,i=g;break;case"dhx_cal_data":var h=e.getState().mode;if(y.childNodes[1]&&h!="month"){let D=0;for(let C=0;C<y.childNodes.length;C++)y.childNodes[C].offsetHeight>D&&(D=y.childNodes[C].offsetHeight);g=D}else g=Math.max(y.offsetHeight-1,y.scrollHeight);if(h=="month")e.config.month_day_min_height&&!c&&(g=y.querySelectorAll(".dhx_cal_month_row").length*e.config.month_day_min_height),c&&(y.style.height=g+"px");else if(h=="year")g=190*e.config.year_y;else if(h=="agenda"){if(g=0,y.children&&y.children.length)if(y.children.length===1&&y.children[0].classList.contains("dhx_cal_agenda_no_events"))g=300;else for(var p=0;p<y.children.length;p++)g+=y.children[p].offsetHeight;g+2<e.config.min_grid_size?g=e.config.min_grid_size:g+=2}else if(h=="week_agenda"){for(var v,x,S=e.xy.week_agenda_scale_height+e.config.min_grid_size,O=0;O<y.childNodes.length;O++)for(x=y.childNodes[O],p=0;p<x.childNodes.length;p++){for(var N=0,M=x.childNodes[p].childNodes[1],A=0;A<M.childNodes.length;A++)N+=M.childNodes[A].offsetHeight;v=N+e.xy.week_agenda_scale_height,(v=O!=1||p!=2&&p!=3?v:2*v)>S&&(S=v)}g=3*S}else if(h=="map"){g=0;var m=y.querySelectorAll(".dhx_map_line");for(p=0;p<m.length;p++)g+=m[p].offsetHeight;g+2<e.config.min_map_size?g=e.config.min_map_size:g+=2}else if(e._gridView)if(g=0,y.childNodes[1].childNodes[0].childNodes&&y.childNodes[1].childNodes[0].childNodes.length){for(m=y.childNodes[1].childNodes[0].childNodes[0].childNodes,p=0;p<m.length;p++)g+=m[p].offsetHeight;(g+=2)<e.config.min_grid_size&&(g=e.config.min_grid_size)}else g=e.config.min_grid_size;if(e.matrix&&e.matrix[h]){if(c)g+=0,y.style.height=g+"px";else{g=0;for(var b=e.matrix[h],k=b.y_unit,E=0;E<k.length;E++)g+=b.getSectionHeight(k[E].key);e.$container.clientWidth!=e.$container.scrollWidth&&(g+=d())}g-=1}(h=="day"||h=="week"||e._props&&e._props[h])&&(g+=2)}a+=g+=1}e._obj.style.height=a+"px",c||e.updateView()};function l(){n=!1,e.callEvent("onAfterSchedulerResize",[]),n=!0}var s=function(){if(!e.config.container_autoresize||!n)return!0;var c=e.getState().mode;if(!c)return!0;var u=window.requestAnimationFrame||window.setTimeout,f=document.documentElement.scrollTop;u(function(){!e.$destroyed&&e.$initialized&&o()}),e.matrix&&e.matrix[c]||c=="month"?u(function(){!e.$destroyed&&e.$initialized&&(o(!0),document.documentElement.scrollTop=f,l())},1):l()};function d(){var c=document.createElement("div");c.style.cssText="visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;",document.body.appendChild(c);var u=c.offsetWidth-c.clientWidth;return document.body.removeChild(c),u}e.attachEvent("onBeforeViewChange",function(){var c=e.config.container_autoresize;if(e.xy.$original_scroll_width||(e.xy.$original_scroll_width=e.xy.scroll_width),e.xy.scroll_width=c?0:e.xy.$original_scroll_width,e.matrix)for(var u in e.matrix){var f=e.matrix[u];f.$original_section_autoheight||(f.$original_section_autoheight=f.section_autoheight),f.section_autoheight=!c&&f.$original_section_autoheight}return!0}),e.attachEvent("onViewChange",s),e.attachEvent("onXLE",s),e.attachEvent("onEventChanged",s),e.attachEvent("onEventCreated",s),e.attachEvent("onEventAdded",s),e.attachEvent("onEventDeleted",s),e.attachEvent("onAfterSchedulerResize",s),e.attachEvent("onClearAll",s),e.attachEvent("onBeforeExpand",function(){return n=!1,!0}),e.attachEvent("onBeforeCollapse",function(){return n=!0,!0})},cookie:function(e){function t(i){return(i._obj.id||"scheduler")+"_settings"}var n=!0;e.attachEvent("onBeforeViewChange",function(i,r,o,l){if(n&&e._get_url_nav){var s=e._get_url_nav();(s.date||s.mode||s.event)&&(n=!1)}var d=t(e);if(n){n=!1;var c=function(f){var y=f+"=";if(document.cookie.length>0){var g=document.cookie.indexOf(y);if(g!=-1){g+=y.length;var h=document.cookie.indexOf(";",g);return h==-1&&(h=document.cookie.length),document.cookie.substring(g,h)}}return""}(d);if(c){e._min_date||(e._min_date=l),(c=unescape(c).split("@"))[0]=this._helpers.parseDate(c[0]);var u=this.isViewExists(c[1])?c[1]:o;return l=isNaN(+c[0])?l:c[0],window.setTimeout(function(){e.$destroyed||e.setCurrentView(l,u)},1),!1}}return!0}),e.attachEvent("onViewChange",function(i,r){var o,l,s=t(e),d=escape(this._helpers.formatDate(r)+"@"+i);l=s+"="+d+((o="expires=Sun, 31 Jan 9999 22:00:00 GMT")?"; "+o:""),document.cookie=l});var a=e._load;e._load=function(){var i=arguments;if(e._date)a.apply(this,i);else{var r=this;window.setTimeout(function(){a.apply(r,i)},1)}}},daytimeline:function(e){gt("Day Timeline",e.assert)},drag_between:function(e){gt("Drag Between",e.assert)},editors:function(e){e.form_blocks.combo={render:function(t){t.cached_options||(t.cached_options={});const n=t.height?`style='height:${t.height}px;'`:"";var a="";return a+=`<div class='${t.type}' ${n}></div>`},set_value:function(t,n,a,i){(function(){y();var f=e.attachEvent("onAfterLightbox",function(){y(),e.detachEvent(f)});function y(){if(t._combo&&t._combo.DOMParent){var g=t._combo;g.unload?g.unload():g.destructor&&g.destructor(),g.DOMParent=g.DOMelem=null}}})(),window.dhx_globalImgPath=i.image_path||"/",t._combo=new dhtmlXCombo(t,i.name,t.offsetWidth-8),i.onchange&&t._combo.attachEvent("onChange",i.onchange),i.options_height&&t._combo.setOptionHeight(i.options_height);var r=t._combo;if(r.enableFilteringMode(i.filtering,i.script_path||null,!!i.cache),i.script_path){var o=a[i.map_to];o?i.cached_options[o]?(r.addOption(o,i.cached_options[o]),r.disable(1),r.selectOption(0),r.disable(0)):e.ajax.get(i.script_path+"?id="+o+"&uid="+e.uid(),function(f){var y,g=f.xmlDoc.responseText;try{y=JSON.parse(g).options[0].text}catch{y=e.ajax.xpath("//option",f.xmlDoc)[0].childNodes[0].nodeValue}i.cached_options[o]=y,r.addOption(o,y),r.disable(1),r.selectOption(0),r.disable(0)}):r.setComboValue("")}else{for(var l=[],s=0;s<i.options.length;s++){var d=i.options[s],c=[d.key,d.label,d.css];l.push(c)}if(r.addOption(l),a[i.map_to]){var u=r.getIndexByValue(a[i.map_to]);r.selectOption(u)}}},get_value:function(t,n,a){var i=t._combo.getSelectedValue();return a.script_path&&(a.cached_options[i]=t._combo.getSelectedText()),i},focus:function(t){}},e.form_blocks.radio={render:function(t){var n="";n+=`<div class='dhx_cal_ltext dhx_cal_radio ${t.vertical?"dhx_cal_radio_vertical":""}' style='height:${t.height}px;'>`;for(var a=0;a<t.options.length;a++){var i=e.uid();n+="<label class='dhx_cal_radio_item' for='"+i+"'><input id='"+i+"' type='radio' name='"+t.name+"' value='"+t.options[a].key+"'><span> "+t.options[a].label+"</span></label>"}return n+="</div>"},set_value:function(t,n,a,i){for(var r=t.getElementsByTagName("input"),o=0;o<r.length;o++){r[o].checked=!1;var l=a[i.map_to]||n;r[o].value==l&&(r[o].checked=!0)}},get_value:function(t,n,a){for(var i=t.getElementsByTagName("input"),r=0;r<i.length;r++)if(i[r].checked)return i[r].value},focus:function(t){}},e.form_blocks.checkbox={render:function(t){return e.config.wide_form?'<div class="dhx_cal_wide_checkbox"></div>':""},set_value:function(t,n,a,i){t=e._lightbox.querySelector(`#${i.id}`),i.height&&(t.style.height=`${i.height}px`);var r=e.uid(),o=i.checked_value!==void 0?n==i.checked_value:!!n;t.className+=" dhx_cal_checkbox";var l="<input id='"+r+"' type='checkbox' value='true' name='"+i.name+"'"+(o?"checked='true'":"")+"'>",s="<label for='"+r+"'>"+(e.locale.labels["section_"+i.name]||i.name)+"</label>";if(e.config.wide_form?(t.innerHTML=s,t.nextSibling.innerHTML=l):t.innerHTML=l+s,i.handler){var d=t.getElementsByTagName("input")[0];if(d.$_eventAttached)return;d.$_eventAttached=!0,e.event(d,"click",i.handler)}},get_value:function(t,n,a){var i=(t=e._lightbox.querySelector(`#${a.id}`)).getElementsByTagName("input")[0];return i||(i=t.nextSibling.getElementsByTagName("input")[0]),i.checked?a.checked_value||!0:a.unchecked_value||!1},focus:function(t){}}},expand:function(e){e.ext.fullscreen={toggleIcon:null},e.expand=function(){if(e.callEvent("onBeforeExpand",[])){var t=e._obj;do t._position=t.style.position||"",t.style.position="static";while((t=t.parentNode)&&t.style);(t=e._obj).style.position="absolute",t._width=t.style.width,t._height=t.style.height,t.style.width=t.style.height="100%",t.style.top=t.style.left="0px";var n=document.body;n.scrollTop=0,(n=n.parentNode)&&(n.scrollTop=0),document.body._overflow=document.body.style.overflow||"",document.body.style.overflow="hidden",e._maximize(),e.callEvent("onExpand",[])}},e.collapse=function(){if(e.callEvent("onBeforeCollapse",[])){var t=e._obj;do t.style.position=t._position;while((t=t.parentNode)&&t.style);(t=e._obj).style.width=t._width,t.style.height=t._height,document.body.style.overflow=document.body._overflow,e._maximize(),e.callEvent("onCollapse",[])}},e.attachEvent("onTemplatesReady",function(){var t=document.createElement("div");t.className="dhx_expand_icon",e.ext.fullscreen.toggleIcon=t,t.innerHTML=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
	<g>
	<line x1="0.5" y1="5" x2="0.5" y2="3.0598e-08" stroke="var(--dhx-scheduler-base-colors-icons)"/>
	<line y1="0.5" x2="5" y2="0.5" stroke="var(--dhx-scheduler-base-colors-icons)"/>
	<line x1="0.5" y1="11" x2="0.5" y2="16" stroke="var(--dhx-scheduler-base-colors-icons)"/>
	<line y1="15.5" x2="5" y2="15.5" stroke="var(--dhx-scheduler-base-colors-icons)"/>
	<line x1="11" y1="0.5" x2="16" y2="0.5" stroke="var(--dhx-scheduler-base-colors-icons)"/>
	<line x1="15.5" y1="2.18557e-08" x2="15.5" y2="5" stroke="var(--dhx-scheduler-base-colors-icons)"/>
	<line x1="11" y1="15.5" x2="16" y2="15.5" stroke="var(--dhx-scheduler-base-colors-icons)"/>
	<line x1="15.5" y1="16" x2="15.5" y2="11" stroke="var(--dhx-scheduler-base-colors-icons)"/>
	</g>
	</svg>
	`,e._obj.appendChild(t),e.event(t,"click",function(){e.expanded?e.collapse():e.expand()})}),e._maximize=function(){this.expanded=!this.expanded,this.expanded?this.ext.fullscreen.toggleIcon.classList.add("dhx_expand_icon--expanded"):this.ext.fullscreen.toggleIcon.classList.remove("dhx_expand_icon--expanded");for(var t=["left","top"],n=0;n<t.length;n++){var a=e["_prev_margin_"+t[n]];e.xy["margin_"+t[n]]?(e["_prev_margin_"+t[n]]=e.xy["margin_"+t[n]],e.xy["margin_"+t[n]]=0):a&&(e.xy["margin_"+t[n]]=e["_prev_margin_"+t[n]],delete e["_prev_margin_"+t[n]])}e.setCurrentView()}},export_api:function(e){(function(){function t(a,i){for(var r in i)a[r]||(a[r]=i[r]);return a}function n(a,i){var r={};return(a=i._els[a])&&a[0]?(r.x=a[0].scrollWidth,r.y=a[0].scrollHeight):(r.x=0,r.y=0),r}window.dhtmlxAjax||(window.dhtmlxAjax={post:function(a,i,r){return window.dhx4.ajax.post(a,i,r)},get:function(a,i){return window.ajax.get(a,i)}}),function(a){function i(){var r=a.getState().mode;return a.matrix&&a.matrix[r]?a.matrix[r]:null}a.exportToPDF=function(r){(r=t(r||{},{name:"calendar.pdf",format:"A4",orientation:"landscape",dpi:96,zoom:1,rtl:a.config.rtl})).html=this._export_html(r),r.mode=this.getState().mode,this._send_to_export(r,"pdf")},a.exportToPNG=function(r){(r=t(r||{},{name:"calendar.png",format:"A4",orientation:"landscape",dpi:96,zoom:1,rtl:a.config.rtl})).html=this._export_html(r),r.mode=this.getState().mode,this._send_to_export(r,"png")},a.exportToICal=function(r){r=t(r||{},{name:"calendar.ical",data:this._serialize_plain(null,r)}),this._send_to_export(r,"ical")},a.exportToExcel=function(r){r=t(r||{},{name:"calendar.xlsx",title:"Events",data:this._serialize_plain(this.templates.xml_format,r),columns:this._serialize_columns()}),this._send_to_export(r,"excel")},a._ajax_to_export=function(r,o,l){delete r.callback;var s=r.server||"https://export.dhtmlx.com/scheduler";window.dhtmlxAjax.post(s,"type="+o+"&store=1&data="+encodeURIComponent(JSON.stringify(r)),function(d){var c=null;if(!(d.xmlDoc.status>400))try{c=JSON.parse(d.xmlDoc.responseText)}catch{}l(c)})},a._plain_export_copy=function(r,o){var l={};for(var s in r)l[s]=r[s];return l.start_date=o(l.start_date),l.end_date=o(l.end_date),l.$text=this.templates.event_text(r.start_date,r.end_date,r),l},a._serialize_plain=function(r,o){var l;r=r||a.date.date_to_str("%Y%m%dT%H%i%s",!0),l=o&&o.start&&o.end?a.getEvents(o.start,o.end):a.getEvents();for(var s=[],d=0;d<l.length;d++)s[d]=this._plain_export_copy(l[d],r);return s},a._serialize_columns=function(){return[{id:"start_date",header:"Start Date",width:30},{id:"end_date",header:"End Date",width:30},{id:"$text",header:"Text",width:100}]},a._send_to_export=function(r,o){if(r.version||(r.version=a.version),r.skin||(r.skin=a.skin),r.callback)return a._ajax_to_export(r,o,r.callback);var l=this._create_hidden_form();l.firstChild.action=r.server||"https://export.dhtmlx.com/scheduler",l.firstChild.childNodes[0].value=JSON.stringify(r),l.firstChild.childNodes[1].value=o,l.firstChild.submit()},a._create_hidden_form=function(){if(!this._hidden_export_form){var r=this._hidden_export_form=document.createElement("div");r.style.display="none",r.innerHTML="<form method='POST' target='_blank'><input type='text' name='data'><input type='hidden' name='type' value=''></form>",document.body.appendChild(r)}return this._hidden_export_form},a._get_export_size=function(r,o,l,s,d,c,u){s=parseInt(s)/25.4||4;var f={A5:{x:148,y:210},A4:{x:210,y:297},A3:{x:297,y:420},A2:{x:420,y:594},A1:{x:594,y:841},A0:{x:841,y:1189}},y=n("dhx_cal_data",this).x,g={y:n("dhx_cal_data",this).y+n("dhx_cal_header",this).y+n("dhx_multi_day",this).y};return g.x=r==="full"?y:Math.floor((o==="landscape"?f[r].y:f[r].x)*s),u&&(g.x*=parseFloat(u.x)||1,g.y*=parseFloat(u.y)||1),g},a._export_html=function(r){var o,l,s,d=(o=void 0,l=void 0,(s=i())&&(l=s.scrollable,o=s.smart_rendering),{nav_height:a.xy.nav_height,scroll_width:a.xy.scroll_width,style_width:a._obj.style.width,style_height:a._obj.style.height,timeline_scrollable:l,timeline_smart_rendering:o}),c=a._get_export_size(r.format,r.orientation,r.zoom,r.dpi,r.header,r.footer,r.scales),u="";try{(function(f,y){a._obj.style.width=f.x+"px",a._obj.style.height=f.y+"px",a.xy.nav_height=0,a.xy.scroll_width=0;var g=i();(y.timeline_scrollable||y.timeline_smart_rendering)&&(g.scrollable=!1,g.smart_rendering=!1)})(c,d),a.setCurrentView(),u=a._obj.innerHTML}catch(f){console.error(f)}finally{(function(f){a.xy.scroll_width=f.scroll_width,a.xy.nav_height=f.nav_height,a._obj.style.width=f.style_width,a._obj.style.height=f.style_height;var y=i();(f.timeline_scrollable||f.timeline_smart_rendering)&&(y.scrollable=f.timeline_scrollable,y.smart_rendering=f.timeline_smart_rendering)})(d),a.setCurrentView()}return u}}(e)})()},grid_view:function(e){gt("Grid",e.assert)},html_templates:function(e){e.attachEvent("onTemplatesReady",function(){for(var t=document.body.getElementsByTagName("DIV"),n=0;n<t.length;n++){var a=t[n].className||"";if((a=a.split(":")).length==2&&a[0]=="template"){var i='return "'+(t[n].innerHTML||"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/[\n\r]+/g,"")+'";';i=unescape(i).replace(/\{event\.([a-z]+)\}/g,function(r,o){return'"+ev.'+o+'+"'}),e.templates[a[1]]=Function("start","end","ev",i),t[n].style.display="none"}}})},key_nav:function(e){function t(n){var a={minicalButton:e.$keyboardNavigation.MinicalButton,minicalDate:e.$keyboardNavigation.MinicalCell,scheduler:e.$keyboardNavigation.SchedulerNode,dataArea:e.$keyboardNavigation.DataArea,timeSlot:e.$keyboardNavigation.TimeSlot,event:e.$keyboardNavigation.Event},i={};for(var r in a)i[r.toLowerCase()]=a[r];return i[n=(n+"").toLowerCase()]||a.scheduler}e.config.key_nav=!0,e.config.key_nav_step=30,e.addShortcut=function(n,a,i){var r=t(i);r&&r.prototype.bind(n,a)},e.getShortcutHandler=function(n,a){var i=t(a);if(i){var r=e.$keyboardNavigation.shortcuts.parse(n);if(r.length)return i.prototype.findHandler(r[0])}},e.removeShortcut=function(n,a){var i=t(a);i&&i.prototype.unbind(n)},e.focus=function(){if(e.config.key_nav){var n=e.$keyboardNavigation.dispatcher;n.enable();var a=n.getActiveNode();!a||a instanceof e.$keyboardNavigation.MinicalButton||a instanceof e.$keyboardNavigation.MinicalCell?n.setDefaultNode():n.focusNode(n.getActiveNode())}},e.$keyboardNavigation={},e._compose=function(){for(var n=Array.prototype.slice.call(arguments,0),a={},i=0;i<n.length;i++){var r=n[i];for(var o in typeof r=="function"&&(r=new r),r)a[o]=r[o]}return a},function(n){n.$keyboardNavigation.shortcuts={createCommand:function(){return{modifiers:{shift:!1,alt:!1,ctrl:!1,meta:!1},keyCode:null}},parse:function(a){for(var i=[],r=this.getExpressions(this.trim(a)),o=0;o<r.length;o++){for(var l=this.getWords(r[o]),s=this.createCommand(),d=0;d<l.length;d++)this.commandKeys[l[d]]?s.modifiers[l[d]]=!0:this.specialKeys[l[d]]?s.keyCode=this.specialKeys[l[d]]:s.keyCode=l[d].charCodeAt(0);i.push(s)}return i},getCommandFromEvent:function(a){var i=this.createCommand();i.modifiers.shift=!!a.shiftKey,i.modifiers.alt=!!a.altKey,i.modifiers.ctrl=!!a.ctrlKey,i.modifiers.meta=!!a.metaKey,i.keyCode=a.which||a.keyCode,i.keyCode>=96&&i.keyCode<=105&&(i.keyCode-=48);var r=String.fromCharCode(i.keyCode);return r&&(i.keyCode=r.toLowerCase().charCodeAt(0)),i},getHashFromEvent:function(a){return this.getHash(this.getCommandFromEvent(a))},getHash:function(a){var i=[];for(var r in a.modifiers)a.modifiers[r]&&i.push(r);return i.push(a.keyCode),i.join(this.junctionChar)},getExpressions:function(a){return a.split(this.junctionChar)},getWords:function(a){return a.split(this.combinationChar)},trim:function(a){return a.replace(/\s/g,"")},junctionChar:",",combinationChar:"+",commandKeys:{shift:16,alt:18,ctrl:17,meta:!0},specialKeys:{backspace:8,tab:9,enter:13,esc:27,space:32,up:38,down:40,left:37,right:39,home:36,end:35,pageup:33,pagedown:34,delete:46,insert:45,plus:107,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123}}}(e),function(n){n.$keyboardNavigation.EventHandler={_handlers:null,findHandler:function(a){this._handlers||(this._handlers={});var i=n.$keyboardNavigation.shortcuts.getHash(a);return this._handlers[i]},doAction:function(a,i){var r=this.findHandler(a);r&&(r.call(this,i),i.preventDefault?i.preventDefault():i.returnValue=!1)},bind:function(a,i){this._handlers||(this._handlers={});for(var r=n.$keyboardNavigation.shortcuts,o=r.parse(a),l=0;l<o.length;l++)this._handlers[r.getHash(o[l])]=i},unbind:function(a){for(var i=n.$keyboardNavigation.shortcuts,r=i.parse(a),o=0;o<r.length;o++)this._handlers[i.getHash(r[o])]&&delete this._handlers[i.getHash(r[o])]},bindAll:function(a){for(var i in a)this.bind(i,a[i])},initKeys:function(){this._handlers||(this._handlers={}),this.keys&&this.bindAll(this.keys)}}}(e),function(n){n.$keyboardNavigation.getFocusableNodes=n._getFocusableNodes,n.$keyboardNavigation.trapFocus=function(a,i){if(i.keyCode!=9)return!1;for(var r,o=n.$keyboardNavigation.getFocusableNodes(a),l=document.activeElement,s=-1,d=0;d<o.length;d++)if(o[d]==l){s=d;break}if(i.shiftKey){if(r=o[s<=0?o.length-1:s-1])return r.focus(),i.preventDefault(),!0}else if(r=o[s>=o.length-1?0:s+1])return r.focus(),i.preventDefault(),!0;return!1}}(e),function(n){n.$keyboardNavigation.marker={clear:function(){for(var a=n.$container.querySelectorAll(".dhx_focus_slot"),i=0;i<a.length;i++)a[i].parentNode.removeChild(a[i])},createElement:function(){var a=document.createElement("div");return a.setAttribute("tabindex",-1),a.className="dhx_focus_slot",a},renderMultiple:function(a,i,r){for(var o=[],l=new Date(a),s=new Date(Math.min(i.valueOf(),n.date.add(n.date.day_start(new Date(a)),1,"day").valueOf()));l.valueOf()<i.valueOf();)o=o.concat(r.call(this,l,new Date(Math.min(s.valueOf(),i.valueOf())))),l=n.date.day_start(n.date.add(l,1,"day")),s=n.date.day_start(n.date.add(l,1,"day")),s=new Date(Math.min(s.valueOf(),i.valueOf()));return o},render:function(a,i,r){this.clear();var o=[],l=n.$keyboardNavigation.TimeSlot.prototype._modes;switch(n.$keyboardNavigation.TimeSlot.prototype._getMode()){case l.units:o=this.renderVerticalMarker(a,i,r);break;case l.timeline:o=this.renderTimelineMarker(a,i,r);break;case l.year:o=o.concat(this.renderMultiple(a,i,this.renderYearMarker));break;case l.month:o=this.renderMonthMarker(a,i);break;case l.weekAgenda:o=o.concat(this.renderMultiple(a,i,this.renderWeekAgendaMarker));break;case l.list:o=this.renderAgendaMarker(a,i);break;case l.dayColumns:o=o.concat(this.renderMultiple(a,i,this.renderVerticalMarker))}this.addWaiAriaLabel(o,a,i,r),this.addDataAttributes(o,a,i,r);for(var s=o.length-1;s>=0;s--)if(o[s].offsetWidth)return o[s];return null},addDataAttributes:function(a,i,r,o){for(var l=n.date.date_to_str(n.config.api_date),s=l(i),d=l(r),c=0;c<a.length;c++)a[c].setAttribute("data-start-date",s),a[c].setAttribute("data-end-date",d),o&&a[c].setAttribute("data-section",o)},addWaiAriaLabel:function(a,i,r,o){var l="",s=n.getState().mode,d=!1;if(l+=n.templates.day_date(i),n.date.day_start(new Date(i)).valueOf()!=i.valueOf()&&(l+=" "+n.templates.hour_scale(i),d=!0),n.date.day_start(new Date(i)).valueOf()!=n.date.day_start(new Date(r)).valueOf()&&(l+=" - "+n.templates.day_date(r),(d||n.date.day_start(new Date(r)).valueOf()!=r.valueOf())&&(l+=" "+n.templates.hour_scale(r))),o){if(n.matrix&&n.matrix[s]){const u=n.matrix[s],f=u.y_unit[u.order[o]];l+=", "+n.templates[s+"_scale_label"](f.key,f.label,f)}else if(n._props&&n._props[s]){const u=n._props[s],f=u.options[u.order[o]];l+=", "+n.templates[s+"_scale_text"](f.key,f.label,f)}}for(var c=0;c<a.length;c++)n._waiAria.setAttributes(a[c],{"aria-label":l,"aria-live":"polite"})},renderWeekAgendaMarker:function(a,i){for(var r=n.$container.querySelectorAll(".dhx_wa_day_cont .dhx_wa_scale_bar"),o=n.date.week_start(new Date(n.getState().min_date)),l=-1,s=n.date.day_start(new Date(a)),d=0;d<r.length&&(l++,n.date.day_start(new Date(o)).valueOf()!=s.valueOf());d++)o=n.date.add(o,1,"day");return l!=-1?this._wrapDiv(r[l]):[]},_wrapDiv:function(a){var i=this.createElement();return i.style.top=a.offsetTop+"px",i.style.left=a.offsetLeft+"px",i.style.width=a.offsetWidth+"px",i.style.height=a.offsetHeight+"px",a.appendChild(i),[i]},renderYearMarker:function(a,i){var r=n._get_year_cell(a);r.style.position="relative";var o=this.createElement();return o.style.top="0px",o.style.left="0px",o.style.width="100%",o.style.height="100%",r.appendChild(o),[o]},renderAgendaMarker:function(a,i){var r=this.createElement();return r.style.height="1px",r.style.width="100%",r.style.opacity=1,r.style.top="0px",r.style.left="0px",n.$container.querySelector(".dhx_cal_data").appendChild(r),[r]},renderTimelineMarker:function(a,i,r){var o=n._lame_copy({},n.matrix[n._mode]),l=o._scales;o.round_position=!1;var s=[],d=a?new Date(a):n._min_date,c=i?new Date(i):n._max_date;if(d.valueOf()<n._min_date.valueOf()&&(d=new Date(n._min_date)),c.valueOf()>n._max_date.valueOf()&&(c=new Date(n._max_date)),!o._trace_x)return s;for(var u=0;u<o._trace_x.length&&!n._is_column_visible(o._trace_x[u]);u++);if(u==o._trace_x.length)return s;var f=l[r];if(!(d<i&&c>a))return s;var y=this.createElement();let g,h;function p(N,M){M.setDate(1),M.setFullYear(N.getFullYear()),M.setMonth(N.getMonth()),M.setDate(N.getDate())}if(n.getView().days){const N=new Date(a);p(n._min_date,N);const M=new Date(i);p(n._min_date,M),g=n._timeline_getX({start_date:N},!1,o),h=n._timeline_getX({start_date:M},!1,o)}else g=n._timeline_getX({start_date:a},!1,o),h=n._timeline_getX({start_date:i},!1,o);var v=o._section_height[r]-1||o.dy-1,x=0;n._isRender("cell")&&(x=f.offsetTop,g+=o.dx,h+=o.dx,f=n.$container.querySelector(".dhx_cal_data"));var S=Math.max(1,h-g-1);let O="left";return n.config.rtl&&(O="right"),y.style.cssText=`height:${v}px; ${O}:${g}px; width:${S}px; top:${x}px;`,f&&(f.appendChild(y),s.push(y)),s},renderMonthCell:function(a){for(var i=n.$container.querySelectorAll(".dhx_month_head"),r=[],o=0;o<i.length;o++)r.push(i[o].parentNode);var l=-1,s=0,d=-1,c=n.date.week_start(new Date(n.getState().min_date)),u=n.date.day_start(new Date(a));for(o=0;o<r.length&&(l++,d==6?(s++,d=0):d++,n.date.day_start(new Date(c)).valueOf()!=u.valueOf());o++)c=n.date.add(c,1,"day");if(l==-1)return[];var f=n._colsS[d],y=n._colsS.heights[s],g=this.createElement();g.style.top=y+"px",g.style.left=f+"px",g.style.width=n._cols[d]+"px",g.style.height=(n._colsS.heights[s+1]-y||n._colsS.height)+"px";var h=n.$container.querySelector(".dhx_cal_data"),p=h.querySelector(".dhx_cal_month_table");return p.nextSibling?h.insertBefore(g,p.nextSibling):h.appendChild(g),g},renderMonthMarker:function(a,i){for(var r=[],o=a;o.valueOf()<i.valueOf();)r.push(this.renderMonthCell(o)),o=n.date.add(o,1,"day");return r},renderVerticalMarker:function(a,i,r){var o=n.locate_holder_day(a),l=[],s=null,d=n.config;if(n._ignores[o])return l;if(n._props&&n._props[n._mode]&&r){var c=n._props[n._mode];o=c.order[r];var u=c.order[r];c.days>1?o=n.locate_holder_day(a)+u:(o=u,c.size&&o>c.position+c.size&&(o=0))}if(!(s=n.locate_holder(o))||s.querySelector(".dhx_scale_hour"))return document.createElement("div");var f=Math.max(60*a.getHours()+a.getMinutes(),60*d.first_hour),y=Math.min(60*i.getHours()+i.getMinutes(),60*d.last_hour);if(!y&&n.date.day_start(new Date(i)).valueOf()>n.date.day_start(new Date(a)).valueOf()&&(y=60*d.last_hour),y<=f)return[];var g=this.createElement(),h=n.config.hour_size_px*d.last_hour+1,p=36e5;return g.style.top=Math.round((60*f*1e3-n.config.first_hour*p)*n.config.hour_size_px/p)%h+"px",g.style.lineHeight=g.style.height=Math.max(Math.round(60*(y-f)*1e3*n.config.hour_size_px/p)%h,1)+"px",g.style.width="100%",s.appendChild(g),l.push(g),l[0]}}}(e),function(n){n.$keyboardNavigation.SchedulerNode=function(){},n.$keyboardNavigation.SchedulerNode.prototype=n._compose(n.$keyboardNavigation.EventHandler,{getDefaultNode:function(){var a=new n.$keyboardNavigation.TimeSlot;return a.isValid()||(a=a.fallback()),a},_modes:{month:"month",year:"year",dayColumns:"dayColumns",timeline:"timeline",units:"units",weekAgenda:"weekAgenda",list:"list"},getMode:function(){var a=n.getState().mode;return n.matrix&&n.matrix[a]?this._modes.timeline:n._props&&n._props[a]?this._modes.units:a=="month"?this._modes.month:a=="year"?this._modes.year:a=="week_agenda"?this._modes.weekAgenda:a=="map"||a=="agenda"||n._grid&&n["grid_"+a]?this._modes.list:this._modes.dayColumns},focus:function(){n.focus()},blur:function(){},disable:function(){n.$container.setAttribute("tabindex","0")},enable:function(){n.$container&&n.$container.removeAttribute("tabindex")},isEnabled:function(){return n.$container.hasAttribute("tabindex")},_compareEvents:function(a,i){return a.start_date.valueOf()==i.start_date.valueOf()?a.id>i.id?1:-1:a.start_date.valueOf()>i.start_date.valueOf()?1:-1},_pickEvent:function(a,i,r,o){var l=n.getState();a=new Date(Math.max(l.min_date.valueOf(),a.valueOf())),i=new Date(Math.min(l.max_date.valueOf(),i.valueOf()));var s=n.getEvents(a,i);s.sort(this._compareEvents),o&&(s=s.reverse());for(var d=!!r,c=0;c<s.length&&d;c++)s[c].id==r&&(d=!1),s.splice(c,1),c--;for(c=0;c<s.length;c++)if(new n.$keyboardNavigation.Event(s[c].id).getNode())return s[c];return null},nextEventHandler:function(a){var i=n.$keyboardNavigation.dispatcher.activeNode,r=a||i&&i.eventId,o=null;if(r&&n.getEvent(r)){var l=n.getEvent(r);o=n.$keyboardNavigation.SchedulerNode.prototype._pickEvent(l.start_date,n.date.add(l.start_date,1,"year"),l.id,!1)}if(!o&&!a){var s=n.getState();o=n.$keyboardNavigation.SchedulerNode.prototype._pickEvent(s.min_date,n.date.add(s.min_date,1,"year"),null,!1)}if(o){var d=new n.$keyboardNavigation.Event(o.id);d.isValid()?(i&&i.blur(),n.$keyboardNavigation.dispatcher.setActiveNode(d)):this.nextEventHandler(o.id)}},prevEventHandler:function(a){var i=n.$keyboardNavigation.dispatcher.activeNode,r=a||i&&i.eventId,o=null;if(r&&n.getEvent(r)){var l=n.getEvent(r);o=n.$keyboardNavigation.SchedulerNode.prototype._pickEvent(n.date.add(l.end_date,-1,"year"),l.end_date,l.id,!0)}if(!o&&!a){var s=n.getState();o=n.$keyboardNavigation.SchedulerNode.prototype._pickEvent(n.date.add(s.max_date,-1,"year"),s.max_date,null,!0)}if(o){var d=new n.$keyboardNavigation.Event(o.id);d.isValid()?(i&&i.blur(),n.$keyboardNavigation.dispatcher.setActiveNode(d)):this.prevEventHandler(o.id)}},keys:{"alt+1, alt+2, alt+3, alt+4, alt+5, alt+6, alt+7, alt+8, alt+9":function(a){var i=n.$keyboardNavigation.HeaderCell.prototype.getNodes(".dhx_cal_navline .dhx_cal_tab"),r=a.key;r===void 0&&(r=a.keyCode-48),i[1*r-1]&&i[1*r-1].click()},"ctrl+left,meta+left":function(a){n._click.dhx_cal_prev_button()},"ctrl+right,meta+right":function(a){n._click.dhx_cal_next_button()},"ctrl+up,meta+up":function(a){n.$container.querySelector(".dhx_cal_data").scrollTop-=20},"ctrl+down,meta+down":function(a){n.$container.querySelector(".dhx_cal_data").scrollTop+=20},e:function(){this.nextEventHandler()},home:function(){n.setCurrentView(new Date)},"shift+e":function(){this.prevEventHandler()},"ctrl+enter,meta+enter":function(){n.addEventNow({start_date:new Date(n.getState().date)})},"ctrl+c,meta+c":function(a){n._key_nav_copy_paste(a)},"ctrl+v,meta+v":function(a){n._key_nav_copy_paste(a)},"ctrl+x,meta+x":function(a){n._key_nav_copy_paste(a)}}}),n.$keyboardNavigation.SchedulerNode.prototype.bindAll(n.$keyboardNavigation.SchedulerNode.prototype.keys)}(e),function(n){n.$keyboardNavigation.KeyNavNode=function(){},n.$keyboardNavigation.KeyNavNode.prototype=n._compose(n.$keyboardNavigation.EventHandler,{isValid:function(){return!0},fallback:function(){return null},moveTo:function(a){n.$keyboardNavigation.dispatcher.setActiveNode(a)},compareTo:function(a){if(!a)return!1;for(var i in this){if(!!this[i]!=!!a[i])return!1;var r=!(!this[i]||!this[i].toString),o=!(!a[i]||!a[i].toString);if(o!=r)return!1;if(o&&r){if(a[i].toString()!=this[i].toString())return!1}else if(a[i]!=this[i])return!1}return!0},getNode:function(){},focus:function(){var a=this.getNode();a&&(a.setAttribute("tabindex","-1"),a.focus&&a.focus())},blur:function(){var a=this.getNode();a&&a.setAttribute("tabindex","-1")}})}(e),function(n){n.$keyboardNavigation.HeaderCell=function(a){this.index=a||0},n.$keyboardNavigation.HeaderCell.prototype=n._compose(n.$keyboardNavigation.KeyNavNode,{getNode:function(a){a=a||this.index||0;var i=this.getNodes();if(i[a])return i[a]},getNodes:function(a){a=a||[".dhx_cal_navline .dhx_cal_prev_button",".dhx_cal_navline .dhx_cal_next_button",".dhx_cal_navline .dhx_cal_today_button",".dhx_cal_navline .dhx_cal_tab"].join(", ");var i=Array.prototype.slice.call(n.$container.querySelectorAll(a));return i.sort(function(r,o){return r.offsetLeft-o.offsetLeft}),i},_handlers:null,isValid:function(){return!!this.getNode(this.index)},fallback:function(){var a=this.getNode(0);return a||(a=new n.$keyboardNavigation.TimeSlot),a},keys:{left:function(){var a=this.index-1;a<0&&(a=this.getNodes().length-1),this.moveTo(new n.$keyboardNavigation.HeaderCell(a))},right:function(){var a=this.index+1;a>=this.getNodes().length&&(a=0),this.moveTo(new n.$keyboardNavigation.HeaderCell(a))},down:function(){this.moveTo(new n.$keyboardNavigation.TimeSlot)},enter:function(){var a=this.getNode();a&&a.click()}}}),n.$keyboardNavigation.HeaderCell.prototype.bindAll(n.$keyboardNavigation.HeaderCell.prototype.keys)}(e),function(n){n.$keyboardNavigation.Event=function(a){if(this.eventId=null,n.getEvent(a)){var i=n.getEvent(a);this.start=new Date(i.start_date),this.end=new Date(i.end_date),this.section=this._getSection(i),this.eventId=a}},n.$keyboardNavigation.Event.prototype=n._compose(n.$keyboardNavigation.KeyNavNode,{_getNodes:function(){return Array.prototype.slice.call(n.$container.querySelectorAll("["+n.config.event_attribute+"]"))},_modes:n.$keyboardNavigation.SchedulerNode.prototype._modes,getMode:n.$keyboardNavigation.SchedulerNode.prototype.getMode,_handlers:null,isValid:function(){return!(!n.getEvent(this.eventId)||!this.getNode())},fallback:function(){var a=this._getNodes()[0],i=null;if(a&&n._locate_event(a)){var r=n._locate_event(a);i=new n.$keyboardNavigation.Event(r)}else i=new n.$keyboardNavigation.TimeSlot;return i},isScrolledIntoView:function(a){var i=a.getBoundingClientRect(),r=n.$container.querySelector(".dhx_cal_data").getBoundingClientRect();return!(i.bottom<r.top||i.top>r.bottom)},getNode:function(){var a="["+n.config.event_attribute+"='"+this.eventId+"']",i=n.$keyboardNavigation.dispatcher.getInlineEditor(this.eventId);if(i)return i;if(n.isMultisectionEvent&&n.isMultisectionEvent(n.getEvent(this.eventId))){for(var r=n.$container.querySelectorAll(a),o=0;o<r.length;o++)if(this.isScrolledIntoView(r[o]))return r[o];return r[0]}return n.$container.querySelector(a)},focus:function(){var a=n.getEvent(this.eventId),i=n.getState();(a.start_date.valueOf()>i.max_date.valueOf()||a.end_date.valueOf()<=i.min_date.valueOf())&&n.setCurrentView(a.start_date);var r=this.getNode();this.isScrolledIntoView(r)?n.$keyboardNavigation.dispatcher.keepScrollPosition((function(){n.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this)}).bind(this)):n.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this)},blur:function(){n.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this)},_getSection:function(a){var i=null,r=n.getState().mode;return n.matrix&&n.matrix[r]?i=a[n.matrix[n.getState().mode].y_property]:n._props&&n._props[r]&&(i=a[n._props[r].map_to]),i},_moveToSlot:function(a){var i=n.getEvent(this.eventId);if(i){var r=this._getSection(i),o=new n.$keyboardNavigation.TimeSlot(i.start_date,null,r);this.moveTo(o.nextSlot(o,a))}else this.moveTo(new n.$keyboardNavigation.TimeSlot)},keys:{left:function(){this._moveToSlot("left")},right:function(){this._moveToSlot("right")},down:function(){this.getMode()==this._modes.list?n.$keyboardNavigation.SchedulerNode.prototype.nextEventHandler():this._moveToSlot("down")},space:function(){var a=this.getNode();a&&a.click?a.click():this.moveTo(new n.$keyboardNavigation.TimeSlot)},up:function(){this.getMode()==this._modes.list?n.$keyboardNavigation.SchedulerNode.prototype.prevEventHandler():this._moveToSlot("up")},delete:function(){n.getEvent(this.eventId)?n._click.buttons.delete(this.eventId):this.moveTo(new n.$keyboardNavigation.TimeSlot)},enter:function(){n.getEvent(this.eventId)?n.showLightbox(this.eventId):this.moveTo(new n.$keyboardNavigation.TimeSlot)}}}),n.$keyboardNavigation.Event.prototype.bindAll(n.$keyboardNavigation.Event.prototype.keys)}(e),function(n){n.$keyboardNavigation.TimeSlot=function(a,i,r,o){var l=n.getState(),s=n.matrix&&n.matrix[l.mode];a||(a=this.getDefaultDate()),i||(i=s?n.date.add(a,s.x_step,s.x_unit):n.date.add(a,n.config.key_nav_step,"minute")),this.section=r||this._getDefaultSection(),this.start_date=new Date(a),this.end_date=new Date(i),this.movingDate=o||null},n.$keyboardNavigation.TimeSlot.prototype=n._compose(n.$keyboardNavigation.KeyNavNode,{_handlers:null,getDefaultDate:function(){var a,i=n.getState(),r=new Date(i.date);r.setSeconds(0),r.setMilliseconds(0);var o=new Date;o.setSeconds(0),o.setMilliseconds(0);var l=n.matrix&&n.matrix[i.mode],s=!1;if(r.valueOf()===o.valueOf()&&(s=!0),l)s?(l.x_unit==="day"?(o.setHours(0),o.setMinutes(0)):l.x_unit==="hour"&&o.setMinutes(0),a=o):a=n.date[l.name+"_start"](new Date(i.date)),a=this.findVisibleColumn(a);else if(a=new Date(n.getState().min_date),s&&(a=o),a=this.findVisibleColumn(a),s||a.setHours(n.config.first_hour),!n._table_view){var d=n.$container.querySelector(".dhx_cal_data");d.scrollTop&&a.setHours(n.config.first_hour+Math.ceil(d.scrollTop/n.config.hour_size_px))}return a},clone:function(a){return new n.$keyboardNavigation.TimeSlot(a.start_date,a.end_date,a.section,a.movingDate)},_getMultisectionView:function(){var a,i=n.getState();return n._props&&n._props[i.mode]?a=n._props[i.mode]:n.matrix&&n.matrix[i.mode]&&(a=n.matrix[i.mode]),a},_getDefaultSection:function(){var a=null;return this._getMultisectionView()&&!a&&(a=this._getNextSection()),a},_getNextSection:function(a,i){var r=this._getMultisectionView(),o=r.order[a],l=o;(l=o!==void 0?o+i:r.size&&r.position?r.position:0)<0&&(l=0);var s=r.options||r.y_unit;return l>=s.length&&(l=s.length-1),s[l]?s[l].key:null},isValid:function(){var a=n.getState();if(this.start_date.valueOf()<a.min_date.valueOf()||this.start_date.valueOf()>=a.max_date.valueOf()||!this.isVisible(this.start_date,this.end_date))return!1;var i=this._getMultisectionView();return!i||i.order[this.section]!==void 0},fallback:function(){var a=new n.$keyboardNavigation.TimeSlot;return a.isValid()?a:new n.$keyboardNavigation.DataArea},getNodes:function(){return Array.prototype.slice.call(n.$container.querySelectorAll(".dhx_focus_slot"))},getNode:function(){return this.getNodes()[0]},focus:function(){this.section&&n.getView()&&n.getView().smart_rendering&&n.getView().scrollTo&&!n.$container.querySelector(`[data-section-id="${this.section}"]`)&&n.getView().scrollTo({section:this.section}),n.$keyboardNavigation.marker.render(this.start_date,this.end_date,this.section),n.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this),n.$keyboardNavigation._pasteDate=this.start_date,n.$keyboardNavigation._pasteSection=this.section},blur:function(){n.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this),n.$keyboardNavigation.marker.clear()},_modes:n.$keyboardNavigation.SchedulerNode.prototype._modes,_getMode:n.$keyboardNavigation.SchedulerNode.prototype.getMode,addMonthDate:function(a,i,r){var o;switch(i){case"up":o=n.date.add(a,-1,"week");break;case"down":o=n.date.add(a,1,"week");break;case"left":o=n.date.day_start(n.date.add(a,-1,"day")),o=this.findVisibleColumn(o,-1);break;case"right":o=n.date.day_start(n.date.add(a,1,"day")),o=this.findVisibleColumn(o,1);break;default:o=n.date.day_start(new Date(a))}var l=n.getState();return(a.valueOf()<l.min_date.valueOf()||!r&&a.valueOf()>=l.max_date.valueOf())&&(o=new Date(l.min_date)),o},nextMonthSlot:function(a,i,r){var o,l;return(o=this.addMonthDate(a.start_date,i,r)).setHours(n.config.first_hour),(l=new Date(o)).setHours(n.config.last_hour),{start_date:o,end_date:l}},_alignTimeSlot:function(a,i,r,o){for(var l=new Date(i);l.valueOf()<a.valueOf();)l=n.date.add(l,o,r);return l.valueOf()>a.valueOf()&&(l=n.date.add(l,-o,r)),l},nextTimelineSlot:function(a,i,r){var o=n.getState(),l=n.matrix[o.mode],s=this._alignTimeSlot(a.start_date,n.date[l.name+"_start"](new Date(a.start_date)),l.x_unit,l.x_step),d=this._alignTimeSlot(a.end_date,n.date[l.name+"_start"](new Date(a.end_date)),l.x_unit,l.x_step);d.valueOf()<=s.valueOf()&&(d=n.date.add(s,l.x_step,l.x_unit));var c=this.clone(a);switch(c.start_date=s,c.end_date=d,c.section=a.section||this._getNextSection(),i){case"up":c.section=this._getNextSection(a.section,-1);break;case"down":c.section=this._getNextSection(a.section,1);break;case"left":c.start_date=this.findVisibleColumn(n.date.add(c.start_date,-l.x_step,l.x_unit),-1),c.end_date=n.date.add(c.start_date,l.x_step,l.x_unit);break;case"right":c.start_date=this.findVisibleColumn(n.date.add(c.start_date,l.x_step,l.x_unit),1),c.end_date=n.date.add(c.start_date,l.x_step,l.x_unit)}return(c.start_date.valueOf()<o.min_date.valueOf()||c.start_date.valueOf()>=o.max_date.valueOf())&&(r&&c.start_date.valueOf()>=o.max_date.valueOf()?c.start_date=new Date(o.max_date):(c.start_date=n.date[o.mode+"_start"](n.date.add(o.date,i=="left"?-1:1,o.mode)),c.end_date=n.date.add(c.start_date,l.x_step,l.x_unit))),c},nextUnitsSlot:function(a,i,r){var o=this.clone(a);o.section=a.section||this._getNextSection();var l=a.section||this._getNextSection(),s=n.getState(),d=n._props[s.mode];switch(i){case"left":l=this._getNextSection(a.section,-1);var c=d.size?d.size-1:d.options.length;d.days>1&&d.order[l]==c-1&&n.date.add(a.start_date,-1,"day").valueOf()>=s.min_date.valueOf()&&(o=this.nextDaySlot(a,i,r));break;case"right":l=this._getNextSection(a.section,1),d.days>1&&!d.order[l]&&n.date.add(a.start_date,1,"day").valueOf()<s.max_date.valueOf()&&(o=this.nextDaySlot(a,i,r));break;default:o=this.nextDaySlot(a,i,r),l=a.section}return o.section=l,o},_moveDate:function(a,i){var r=this.findVisibleColumn(n.date.add(a,i,"day"),i);return r.setHours(a.getHours()),r.setMinutes(a.getMinutes()),r},isBeforeLastHour:function(a,i){var r=a.getMinutes(),o=a.getHours(),l=n.config.last_hour;return o<l||!i&&(l==24||o==l)&&!r},isAfterFirstHour:function(a,i){var r=a.getMinutes(),o=a.getHours(),l=n.config.first_hour,s=n.config.last_hour;return o>=l||!i&&!r&&(!o&&s==24||o==s)},isInVisibleDayTime:function(a,i){return this.isBeforeLastHour(a,i)&&this.isAfterFirstHour(a,i)},nextDaySlot:function(a,i,r){var o,l,s=n.config.key_nav_step,d=this._alignTimeSlot(a.start_date,n.date.day_start(new Date(a.start_date)),"minute",s),c=a.start_date;switch(i){case"up":if(o=n.date.add(d,-s,"minute"),!this.isInVisibleDayTime(o,!0)&&(!r||this.isInVisibleDayTime(c,!0))){var u=!0;r&&n.date.date_part(new Date(o)).valueOf()!=n.date.date_part(new Date(c)).valueOf()&&(u=!1),u&&(o=this.findVisibleColumn(n.date.add(a.start_date,-1,"day"),-1)),o.setHours(n.config.last_hour),o.setMinutes(0),o=n.date.add(o,-s,"minute")}l=n.date.add(o,s,"minute");break;case"down":o=n.date.add(d,s,"minute");var f=r?o:n.date.add(o,s,"minute");this.isInVisibleDayTime(f,!1)||r&&!this.isInVisibleDayTime(c,!1)||(r?(u=!0,n.date.date_part(new Date(c)).valueOf()==c.valueOf()&&(u=!1),u&&(o=this.findVisibleColumn(n.date.add(a.start_date,1,"day"),1)),o.setHours(n.config.first_hour),o.setMinutes(0),o=n.date.add(o,s,"minute")):((o=this.findVisibleColumn(n.date.add(a.start_date,1,"day"),1)).setHours(n.config.first_hour),o.setMinutes(0))),l=n.date.add(o,s,"minute");break;case"left":o=this._moveDate(a.start_date,-1),l=this._moveDate(a.end_date,-1);break;case"right":o=this._moveDate(a.start_date,1),l=this._moveDate(a.end_date,1);break;default:o=d,l=n.date.add(o,s,"minute")}return{start_date:o,end_date:l}},nextWeekAgendaSlot:function(a,i){var r,o,l=n.getState();switch(i){case"down":case"left":r=n.date.day_start(n.date.add(a.start_date,-1,"day")),r=this.findVisibleColumn(r,-1);break;case"up":case"right":r=n.date.day_start(n.date.add(a.start_date,1,"day")),r=this.findVisibleColumn(r,1);break;default:r=n.date.day_start(a.start_date)}return(a.start_date.valueOf()<l.min_date.valueOf()||a.start_date.valueOf()>=l.max_date.valueOf())&&(r=new Date(l.min_date)),(o=new Date(r)).setHours(n.config.last_hour),{start_date:r,end_date:o}},nextAgendaSlot:function(a,i){return{start_date:a.start_date,end_date:a.end_date}},isDateVisible:function(a){if(!n._ignores_detected)return!0;var i,r=n.matrix&&n.matrix[n.getState().mode];return i=r?n._get_date_index(r,a):n.locate_holder_day(a),!n._ignores[i]},findVisibleColumn:function(a,i){var r=a;i=i||1;for(var o=n.getState();!this.isDateVisible(r)&&(i>0&&r.valueOf()<=o.max_date.valueOf()||i<0&&r.valueOf()>=o.min_date.valueOf());)r=this.nextDateColumn(r,i);return r},nextDateColumn:function(a,i){i=i||1;var r=n.matrix&&n.matrix[n.getState().mode];return r?n.date.add(a,i*r.x_step,r.x_unit):n.date.day_start(n.date.add(a,i,"day"))},isVisible:function(a,i){if(!n._ignores_detected)return!0;for(var r=new Date(a);r.valueOf()<i.valueOf();){if(this.isDateVisible(r))return!0;r=this.nextDateColumn(r)}return!1},nextSlot:function(a,i,r,o){var l;r=r||this._getMode();var s=n.$keyboardNavigation.TimeSlot.prototype.clone(a);switch(r){case this._modes.units:l=this.nextUnitsSlot(s,i,o);break;case this._modes.timeline:l=this.nextTimelineSlot(s,i,o);break;case this._modes.year:case this._modes.month:l=this.nextMonthSlot(s,i,o);break;case this._modes.weekAgenda:l=this.nextWeekAgendaSlot(s,i,o);break;case this._modes.list:l=this.nextAgendaSlot(s,i,o);break;case this._modes.dayColumns:l=this.nextDaySlot(s,i,o)}return l.start_date.valueOf()>=l.end_date.valueOf()&&(l=this.nextSlot(l,i,r)),n.$keyboardNavigation.TimeSlot.prototype.clone(l)},extendSlot:function(a,i){var r;switch(this._getMode()){case this._modes.units:r=i=="left"||i=="right"?this.nextUnitsSlot(a,i):this.extendUnitsSlot(a,i);break;case this._modes.timeline:r=i=="down"||i=="up"?this.nextTimelineSlot(a,i):this.extendTimelineSlot(a,i);break;case this._modes.year:case this._modes.month:r=this.extendMonthSlot(a,i);break;case this._modes.dayColumns:r=this.extendDaySlot(a,i);break;case this._modes.weekAgenda:r=this.extendWeekAgendaSlot(a,i);break;default:r=a}var o=n.getState();return r.start_date.valueOf()<o.min_date.valueOf()&&(r.start_date=this.findVisibleColumn(o.min_date),r.start_date.setHours(n.config.first_hour)),r.end_date.valueOf()>o.max_date.valueOf()&&(r.end_date=this.findVisibleColumn(o.max_date,-1)),n.$keyboardNavigation.TimeSlot.prototype.clone(r)},extendTimelineSlot:function(a,i){return this.extendGenericSlot({left:"start_date",right:"end_date"},a,i,"timeline")},extendWeekAgendaSlot:function(a,i){return this.extendGenericSlot({left:"start_date",right:"end_date"},a,i,"weekAgenda")},extendGenericSlot:function(a,i,r,o){var l,s=i.movingDate;if(s||(s=a[r]),!s||!a[r])return i;if(!r)return n.$keyboardNavigation.TimeSlot.prototype.clone(i);(l=this.nextSlot({start_date:i[s],section:i.section},r,o,!0)).start_date.valueOf()==i.start_date.valueOf()&&(l=this.nextSlot({start_date:l.start_date,section:l.section},r,o,!0)),l.movingDate=s;var d=this.extendSlotDates(i,l,l.movingDate);return d.end_date.valueOf()<=d.start_date.valueOf()&&(l.movingDate=l.movingDate=="end_date"?"start_date":"end_date"),d=this.extendSlotDates(i,l,l.movingDate),l.start_date=d.start_date,l.end_date=d.end_date,l},extendSlotDates:function(a,i,r){var o={start_date:null,end_date:null};return r=="start_date"?(o.start_date=i.start_date,o.end_date=a.end_date):(o.start_date=a.start_date,o.end_date=i.start_date),o},extendMonthSlot:function(a,i){return(a=this.extendGenericSlot({up:"start_date",down:"end_date",left:"start_date",right:"end_date"},a,i,"month")).start_date.setHours(n.config.first_hour),a.end_date=n.date.add(a.end_date,-1,"day"),a.end_date.setHours(n.config.last_hour),a},extendUnitsSlot:function(a,i){var r;switch(i){case"down":case"up":r=this.extendDaySlot(a,i);break;default:r=a}return r.section=a.section,r},extendDaySlot:function(a,i){return this.extendGenericSlot({up:"start_date",down:"end_date",left:"start_date",right:"end_date"},a,i,"dayColumns")},scrollSlot:function(a){var i=n.getState(),r=this.nextSlot(this,a);(r.start_date.valueOf()<i.min_date.valueOf()||r.start_date.valueOf()>=i.max_date.valueOf())&&n.setCurrentView(new Date(r.start_date)),this.moveTo(r)},keys:{left:function(){this.scrollSlot("left")},right:function(){this.scrollSlot("right")},down:function(){this._getMode()==this._modes.list?n.$keyboardNavigation.SchedulerNode.prototype.nextEventHandler():this.scrollSlot("down")},up:function(){this._getMode()==this._modes.list?n.$keyboardNavigation.SchedulerNode.prototype.prevEventHandler():this.scrollSlot("up")},"shift+down":function(){this.moveTo(this.extendSlot(this,"down"))},"shift+up":function(){this.moveTo(this.extendSlot(this,"up"))},"shift+right":function(){this.moveTo(this.extendSlot(this,"right"))},"shift+left":function(){this.moveTo(this.extendSlot(this,"left"))},enter:function(){var a={start_date:new Date(this.start_date),end_date:new Date(this.end_date)},i=n.getState().mode;n.matrix&&n.matrix[i]?a[n.matrix[n.getState().mode].y_property]=this.section:n._props&&n._props[i]&&(a[n._props[i].map_to]=this.section),n.addEventNow(a)}}}),n.$keyboardNavigation.TimeSlot.prototype.bindAll(n.$keyboardNavigation.TimeSlot.prototype.keys)}(e),function(n){n.$keyboardNavigation.MinicalButton=function(a,i){this.container=a,this.index=i||0},n.$keyboardNavigation.MinicalButton.prototype=n._compose(n.$keyboardNavigation.KeyNavNode,{isValid:function(){return!!this.container.offsetWidth},fallback:function(){var a=new n.$keyboardNavigation.TimeSlot;return a.isValid()?a:new n.$keyboardNavigation.DataArea},focus:function(){n.$keyboardNavigation.dispatcher.globalNode.disable(),this.container.removeAttribute("tabindex"),n.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this)},blur:function(){this.container.setAttribute("tabindex","0"),n.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this)},getNode:function(){return this.index?this.container.querySelector(".dhx_cal_next_button"):this.container.querySelector(".dhx_cal_prev_button")},keys:{right:function(a){this.moveTo(new n.$keyboardNavigation.MinicalButton(this.container,this.index?0:1))},left:function(a){this.moveTo(new n.$keyboardNavigation.MinicalButton(this.container,this.index?0:1))},down:function(){var a=new n.$keyboardNavigation.MinicalCell(this.container,0,0);a&&!a.isValid()&&(a=a.fallback()),this.moveTo(a)},enter:function(a){this.getNode().click()}}}),n.$keyboardNavigation.MinicalButton.prototype.bindAll(n.$keyboardNavigation.MinicalButton.prototype.keys)}(e),function(n){n.$keyboardNavigation.MinicalCell=function(a,i,r){this.container=a,this.row=i||0,this.col=r||0},n.$keyboardNavigation.MinicalCell.prototype=n._compose(n.$keyboardNavigation.KeyNavNode,{isValid:function(){var a=this._getGrid();return!(!a[this.row]||!a[this.row][this.col])},fallback:function(){var a=this.row,i=this.col,r=this._getGrid();r[a]||(a=0);var o=!0;if(a>r.length/2&&(o=!1),!r[a]){var l=new n.$keyboardNavigation.TimeSlot;return l.isValid()?l:new n.$keyboardNavigation.DataArea}if(o){for(var s=i;r[a]&&s<r[a].length;s++)if(r[a][s]||s!=r[a].length-1||(a++,i=0),r[a][s])return new n.$keyboardNavigation.MinicalCell(this.container,a,s)}else for(s=i;r[a]&&s<r[a].length;s--)if(r[a][s]||s||(i=r[--a].length-1),r[a][s])return new n.$keyboardNavigation.MinicalCell(this.container,a,s);return new n.$keyboardNavigation.MinicalButton(this.container,0)},focus:function(){n.$keyboardNavigation.dispatcher.globalNode.disable(),this.container.removeAttribute("tabindex"),n.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this)},blur:function(){this.container.setAttribute("tabindex","0"),n.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this)},_getNode:function(a,i){return this.container.querySelector(".dhx_year_body tr:nth-child("+(a+1)+") td:nth-child("+(i+1)+")")},getNode:function(){return this._getNode(this.row,this.col)},_getGrid:function(){for(var a=this.container.querySelectorAll(".dhx_year_body tr"),i=[],r=0;r<a.length;r++){i[r]=[];for(var o=a[r].querySelectorAll("td"),l=0;l<o.length;l++){var s=o[l],d=!0,c=n._getClassName(s);(c.indexOf("dhx_after")>-1||c.indexOf("dhx_before")>-1||c.indexOf("dhx_scale_ignore")>-1)&&(d=!1),i[r][l]=d}}return i},keys:{right:function(a){var i=this._getGrid(),r=this.row,o=this.col+1;i[r]&&i[r][o]||(i[r+1]?(r+=1,o=0):o=this.col);var l=new n.$keyboardNavigation.MinicalCell(this.container,r,o);l.isValid()||(l=l.fallback()),this.moveTo(l)},left:function(a){var i=this._getGrid(),r=this.row,o=this.col-1;i[r]&&i[r][o]||(o=i[r-1]?i[r-=1].length-1:this.col);var l=new n.$keyboardNavigation.MinicalCell(this.container,r,o);l.isValid()||(l=l.fallback()),this.moveTo(l)},down:function(){var a=this._getGrid(),i=this.row+1,r=this.col;a[i]&&a[i][r]||(i=this.row);var o=new n.$keyboardNavigation.MinicalCell(this.container,i,r);o.isValid()||(o=o.fallback()),this.moveTo(o)},up:function(){var a=this._getGrid(),i=this.row-1,r=this.col;if(a[i]&&a[i][r]){var o=new n.$keyboardNavigation.MinicalCell(this.container,i,r);o.isValid()||(o=o.fallback()),this.moveTo(o)}else{var l=0;this.col>a[this.row].length/2&&(l=1),this.moveTo(new n.$keyboardNavigation.MinicalButton(this.container,l))}},enter:function(a){this.getNode().querySelector(".dhx_month_head").click()}}}),n.$keyboardNavigation.MinicalCell.prototype.bindAll(n.$keyboardNavigation.MinicalCell.prototype.keys)}(e),function(n){n.$keyboardNavigation.DataArea=function(a){this.index=a||0},n.$keyboardNavigation.DataArea.prototype=n._compose(n.$keyboardNavigation.KeyNavNode,{getNode:function(a){return n.$container.querySelector(".dhx_cal_data")},_handlers:null,isValid:function(){return!0},fallback:function(){return this},keys:{"up,down,right,left":function(){this.moveTo(new n.$keyboardNavigation.TimeSlot)}}}),n.$keyboardNavigation.DataArea.prototype.bindAll(n.$keyboardNavigation.DataArea.prototype.keys)}(e),b_(e),function(n){n.$keyboardNavigation.dispatcher={isActive:!1,activeNode:null,globalNode:new n.$keyboardNavigation.SchedulerNode,keepScrollPosition:function(a){var i,r,o=n.$container.querySelector(".dhx_timeline_scrollable_data");o||(o=n.$container.querySelector(".dhx_cal_data")),o&&(i=o.scrollTop,r=o.scrollLeft),a(),o&&(o.scrollTop=i,o.scrollLeft=r)},enable:function(){if(n.$container){this.isActive=!0;var a=this;this.keepScrollPosition(function(){a.globalNode.enable(),a.setActiveNode(a.getActiveNode())})}},disable:function(){this.isActive=!1,this.globalNode.disable()},isEnabled:function(){return!!this.isActive},getDefaultNode:function(){return this.globalNode.getDefaultNode()},setDefaultNode:function(){this.setActiveNode(this.getDefaultNode())},getActiveNode:function(){var a=this.activeNode;return a&&!a.isValid()&&(a=a.fallback()),a},focusGlobalNode:function(){this.blurNode(this.globalNode),this.focusNode(this.globalNode)},setActiveNode:function(a){a&&a.isValid()&&(this.activeNode&&this.activeNode.compareTo(a)||this.isEnabled()&&(this.blurNode(this.activeNode),this.activeNode=a,this.focusNode(this.activeNode)))},focusNode:function(a){a&&a.focus&&(a.focus(),a.getNode&&document.activeElement!=a.getNode()&&this.setActiveNode(new n.$keyboardNavigation.DataArea))},blurNode:function(a){a&&a.blur&&a.blur()},getInlineEditor:function(a){var i=n.$container.querySelector(".dhx_cal_editor["+n.config.event_attribute+"='"+a+"'] textarea");return i&&i.offsetWidth?i:null},keyDownHandler:function(a){if(!a.defaultPrevented){var i=this.getActiveNode();if((!n.$keyboardNavigation.isModal()||i&&i.container&&n.utils.dom.locateCss({target:i.container},"dhx_minical_popup",!1))&&(!n.getState().editor_id||!this.getInlineEditor(n.getState().editor_id))&&this.isEnabled()){a=a||window.event;var r=this.globalNode,o=n.$keyboardNavigation.shortcuts.getCommandFromEvent(a);i?i.findHandler(o)?i.doAction(o,a):r.findHandler(o)&&r.doAction(o,a):this.setDefaultNode()}}},_timeout:null,delay:function(a,i){clearTimeout(this._timeout),this._timeout=setTimeout(a,i||1)}}}(e),w_(e),function(){x_(e),function(l){l.$keyboardNavigation._minicalendars=[],l.$keyboardNavigation.isMinical=function(s){for(var d=l.$keyboardNavigation._minicalendars,c=0;c<d.length;c++)if(this.isChildOf(s,d[c]))return!0;return!1},l.$keyboardNavigation.isChildOf=function(s,d){for(;s&&s!==d;)s=s.parentNode;return s===d},l.$keyboardNavigation.patchMinicalendar=function(){var s=l.$keyboardNavigation.dispatcher;function d(y){var g=y.target;s.enable(),s.setActiveNode(new l.$keyboardNavigation.MinicalButton(g,0))}function c(y){var g=y.target||y.srcElement,h=l.utils.dom.locateCss(y,"dhx_cal_prev_button",!1),p=l.utils.dom.locateCss(y,"dhx_cal_next_button",!1),v=l.utils.dom.locateCss(y,"dhx_year_body",!1),x=0,S=0;if(v){for(var O,N,M=g;M&&M.tagName.toLowerCase()!="td";)M=M.parentNode;if(M&&(O=(N=M).parentNode),O&&N){for(var A=O.parentNode.querySelectorAll("tr"),m=0;m<A.length;m++)if(A[m]==O){x=m;break}var b=O.querySelectorAll("td");for(m=0;m<b.length;m++)if(b[m]==N){S=m;break}}}var k=y.currentTarget;s.delay(function(){var E;(h||p||v)&&(h?(E=new l.$keyboardNavigation.MinicalButton(k,0),s.setActiveNode(new l.$keyboardNavigation.MinicalButton(k,0))):p?E=new l.$keyboardNavigation.MinicalButton(k,1):v&&(E=new l.$keyboardNavigation.MinicalCell(k,x,S)),E&&(s.enable(),E.isValid()&&(s.activeNode=null,s.setActiveNode(E))))})}if(l.renderCalendar){var u=l.renderCalendar;l.renderCalendar=function(){var y=u.apply(this,arguments),g=l.$keyboardNavigation._minicalendars;l.eventRemove(y,"click",c),l.event(y,"click",c),l.eventRemove(y,"focus",d),l.event(y,"focus",d);for(var h=!1,p=0;p<g.length;p++)if(g[p]==y){h=!0;break}if(h||g.push(y),s.isEnabled()){var v=s.getActiveNode();v&&v.container==y?s.focusNode(v):y.setAttribute("tabindex","0")}else y.setAttribute("tabindex","0");return y}}if(l.destroyCalendar){var f=l.destroyCalendar;l.destroyCalendar=function(y,g){y=y||(l._def_count?l._def_count.firstChild:null);var h=f.apply(this,arguments);if(!y||!y.parentNode)for(var p=l.$keyboardNavigation._minicalendars,v=0;v<p.length;v++)p[v]==y&&(l.eventRemove(p[v],"focus",d),p.splice(v,1),v--);return h}}}}(e);var n=e.$keyboardNavigation.dispatcher;if(e.$keyboardNavigation.attachSchedulerHandlers(),e.renderCalendar)e.$keyboardNavigation.patchMinicalendar();else var a=e.attachEvent("onSchedulerReady",function(){e.detachEvent(a),e.$keyboardNavigation.patchMinicalendar()});function i(){if(e.config.key_nav){var l=document.activeElement;return!(!l||e.utils.dom.locateCss(l,"dhx_cal_quick_info",!1))&&(e.$keyboardNavigation.isChildOf(l,e.$container)||e.$keyboardNavigation.isMinical(l))}}function r(l){l&&!n.isEnabled()?n.enable():!l&&n.isEnabled()&&n.disable()}const o=setInterval(function(){if(e.$container&&e.$keyboardNavigation.isChildOf(e.$container,document.body)){var l=i();l?r(l):!l&&n.isEnabled()&&setTimeout(function(){e.$destroyed||(e.config.key_nav?r(i()):e.$container.removeAttribute("tabindex"))},100)}},500);e.attachEvent("onDestroy",function(){clearInterval(o)})}()},layer:function(e){e.attachEvent("onTemplatesReady",function(){this.layers.sort(function(n,a){return n.zIndex-a.zIndex}),e._dp_init=function(n){n._methods=["_set_event_text_style","","changeEventId","deleteEvent"],this.attachEvent("onEventAdded",function(a){!this._loading&&this.validId(a)&&this.getEvent(a)&&this.getEvent(a).layer==n.layer&&n.setUpdated(a,!0,"inserted")}),this.attachEvent("onBeforeEventDelete",function(a){if(this.getEvent(a)&&this.getEvent(a).layer==n.layer){if(!this.validId(a))return;var i=n.getState(a);return i=="inserted"||this._new_event?(n.setUpdated(a,!1),!0):i!="deleted"&&(i=="true_deleted"||(n.setUpdated(a,!0,"deleted"),!1))}return!0}),this.attachEvent("onEventChanged",function(a){!this._loading&&this.validId(a)&&this.getEvent(a)&&this.getEvent(a).layer==n.layer&&n.setUpdated(a,!0,"updated")}),n._getRowData=function(a,i){var r=this.obj.getEvent(a),o={};for(var l in r)l.indexOf("_")!==0&&(r[l]&&r[l].getUTCFullYear?o[l]=this.obj._helpers.formatDate(r[l]):o[l]=r[l]);return o},n._clearUpdateFlag=function(){},n.attachEvent("insertCallback",e._update_callback),n.attachEvent("updateCallback",e._update_callback),n.attachEvent("deleteCallback",function(a,i){this.obj.setUserData(i,this.action_param,"true_deleted"),this.obj.deleteEvent(i)})},function(){var n=function(r){if(r===null||typeof r!="object")return r;var o=new r.constructor;for(var l in r)o[l]=n(r[l]);return o};e._dataprocessors=[],e._layers_zindex={};for(var a=0;a<e.layers.length;a++){if(e.config["lightbox_"+e.layers[a].name]={},e.config["lightbox_"+e.layers[a].name].sections=n(e.config.lightbox.sections),e._layers_zindex[e.layers[a].name]=e.config.initial_layer_zindex||5+3*a,e.layers[a].url){var i=e.createDataProcessor({url:e.layers[a].url});i.layer=e.layers[a].name,e._dataprocessors.push(i),e._dataprocessors[a].init(e)}e.layers[a].isDefault&&(e.defaultLayer=e.layers[a].name)}}(),e.showLayer=function(n){this.toggleLayer(n,!0)},e.hideLayer=function(n){this.toggleLayer(n,!1)},e.toggleLayer=function(n,a){var i=this.getLayer(n);i.visible=a!==void 0?!!a:!i.visible,this.setCurrentView(this._date,this._mode)},e.getLayer=function(n){var a,i;typeof n=="string"&&(i=n),typeof n=="object"&&(i=n.layer);for(var r=0;r<e.layers.length;r++)e.layers[r].name==i&&(a=e.layers[r]);return a},e.attachEvent("onBeforeLightbox",function(n){var a=this.getEvent(n);return this.config.lightbox.sections=this.config["lightbox_"+a.layer].sections,e.resetLightbox(),!0}),e.attachEvent("onClick",function(n,a){var i=e.getEvent(n);return!e.getLayer(i.layer).noMenu}),e.attachEvent("onEventCollision",function(n,a){var i=this.getLayer(n);if(!i.checkCollision)return!1;for(var r=0,o=0;o<a.length;o++)a[o].layer==i.name&&a[o].id!=n.id&&r++;return r>=e.config.collision_limit}),e.addEvent=function(n,a,i,r,o){var l=n;arguments.length!=1&&((l=o||{}).start_date=n,l.end_date=a,l.text=i,l.id=r,l.layer=this.defaultLayer),l.id=l.id||e.uid(),l.text=l.text||"",typeof l.start_date=="string"&&(l.start_date=this.templates.api_date(l.start_date)),typeof l.end_date=="string"&&(l.end_date=this.templates.api_date(l.end_date)),l._timed=this.isOneDayEvent(l);var s=!this._events[l.id];this._events[l.id]=l,this.event_updated(l),this._loading||this.callEvent(s?"onEventAdded":"onEventChanged",[l.id,l])},this._evs_layer={};for(var t=0;t<this.layers.length;t++)this._evs_layer[this.layers[t].name]=[];e.addEventNow=function(n,a,i){var r={};typeof n=="object"&&(r=n,n=null);var o=6e4*(this.config.event_duration||this.config.time_step);n||(n=Math.round(e._currentDate().valueOf()/o)*o);var l=new Date(n);if(!a){var s=this.config.first_hour;s>l.getHours()&&(l.setHours(s),n=l.valueOf()),a=n+o}r.start_date=r.start_date||l,r.end_date=r.end_date||new Date(a),r.text=r.text||this.locale.labels.new_event,r.id=this._drag_id=this.uid(),r.layer=this.defaultLayer,this._drag_mode="new-size",this._loading=!0,this.addEvent(r),this.callEvent("onEventCreated",[this._drag_id,i]),this._loading=!1,this._drag_event={},this._on_mouse_up(i)},e._t_render_view_data=function(n){if(this.config.multi_day&&!this._table_view){for(var a=[],i=[],r=0;r<n.length;r++)n[r]._timed?a.push(n[r]):i.push(n[r]);this._table_view=!0,this.render_data(i),this._table_view=!1,this.render_data(a)}else this.render_data(n)},e.render_view_data=function(){if(this._not_render)this._render_wait=!0;else{this._render_wait=!1,this.clear_view(),this._evs_layer={};for(var n=0;n<this.layers.length;n++)this._evs_layer[this.layers[n].name]=[];var a=this.get_visible_events();for(n=0;n<a.length;n++)this._evs_layer[a[n].layer]&&this._evs_layer[a[n].layer].push(a[n]);if(this._mode=="month"){var i=[];for(n=0;n<this.layers.length;n++)this.layers[n].visible&&(i=i.concat(this._evs_layer[this.layers[n].name]));this._t_render_view_data(i)}else for(n=0;n<this.layers.length;n++)if(this.layers[n].visible){var r=this._evs_layer[this.layers[n].name];this._t_render_view_data(r)}}},e._render_v_bar=function(n,a,i,r,o,l,s,d,c){var u=n.id;s.indexOf("<div class=")==-1&&(s=e.templates["event_header_"+n.layer]?e.templates["event_header_"+n.layer](n.start_date,n.end_date,n):s),d.indexOf("<div class=")==-1&&(d=e.templates["event_text_"+n.layer]?e.templates["event_text_"+n.layer](n.start_date,n.end_date,n):d);var f=document.createElement("div"),y="dhx_cal_event",g=e.templates["event_class_"+n.layer]?e.templates["event_class_"+n.layer](n.start_date,n.end_date,n):e.templates.event_class(n.start_date,n.end_date,n);g&&(y=y+" "+g);var h=e._border_box_events(),p=r-2,v=h?p:r-4,x=h?p:r-6,S=h?p:r-14,O=h?p-2:r-8,N=h?o-this.xy.event_header_height:o-30+1,M='<div event_id="'+u+'" '+e.config.event_attribute+'="'+u+'" class="'+y+'" style="position:absolute; top:'+i+"px; left:"+a+"px; width:"+v+"px; height:"+o+"px;"+(l||"")+'">';return M+='<div class="dhx_header" style=" width:'+x+'px;" >&nbsp;</div>',M+='<div class="dhx_title">'+s+"</div>",M+='<div class="dhx_body" style=" width:'+S+"px; height:"+N+'px;">'+d+"</div>",M+='<div class="dhx_footer" style=" width:'+O+"px;"+(c?" margin-top:-1px;":"")+'" ></div></div>',f.innerHTML=M,f.style.zIndex=100,f.firstChild},e.render_event_bar=function(n){var a=this._els.dhx_cal_data[0],i=this._colsS[n._sday],r=this._colsS[n._eday];r==i&&(r=this._colsS[n._eday+1]);var o=this.xy.bar_height,l=this._colsS.heights[n._sweek]+(this._colsS.height?this.xy.month_scale_height+2:2)+n._sorder*o,s=document.createElement("div"),d=n._timed?"dhx_cal_event_clear":"dhx_cal_event_line",c=e.templates["event_class_"+n.layer]?e.templates["event_class_"+n.layer](n.start_date,n.end_date,n):e.templates.event_class(n.start_date,n.end_date,n);c&&(d=d+" "+c);var u='<div event_id="'+n.id+'" '+this.config.event_attribute+'="'+n.id+'" class="'+d+'" style="position:absolute; top:'+l+"px; left:"+i+"px; width:"+(r-i-15)+"px;"+(n._text_style||"")+'">';n._timed&&(u+=e.templates["event_bar_date_"+n.layer]?e.templates["event_bar_date_"+n.layer](n.start_date,n.end_date,n):e.templates.event_bar_date(n.start_date,n.end_date,n)),u+=e.templates["event_bar_text_"+n.layer]?e.templates["event_bar_text_"+n.layer](n.start_date,n.end_date,n):e.templates.event_bar_text(n.start_date,n.end_date,n)+"</div>)",u+="</div>",s.innerHTML=u,this._rendered.push(s.firstChild),a.appendChild(s.firstChild)},e.render_event=function(n){var a=e.xy.menu_width;if(e.getLayer(n.layer).noMenu&&(a=0),!(n._sday<0)){var i=e.locate_holder(n._sday);if(i){var r=60*n.start_date.getHours()+n.start_date.getMinutes(),o=60*n.end_date.getHours()+n.end_date.getMinutes()||60*e.config.last_hour,l=Math.round((60*r*1e3-60*this.config.first_hour*60*1e3)*this.config.hour_size_px/36e5)%(24*this.config.hour_size_px)+1,s=Math.max(e.xy.min_event_height,(o-r)*this.config.hour_size_px/60)+1,d=Math.floor((i.clientWidth-a)/n._count),c=n._sorder*d+1;n._inner||(d*=n._count-n._sorder);var u=this._render_v_bar(n.id,a+c,l,d,s,n._text_style,e.templates.event_header(n.start_date,n.end_date,n),e.templates.event_text(n.start_date,n.end_date,n));if(this._rendered.push(u),i.appendChild(u),c=c+parseInt(i.style.left,10)+a,l+=this._dy_shift,u.style.zIndex=this._layers_zindex[n.layer],this._edit_id==n.id){u.style.zIndex=parseInt(u.style.zIndex)+1;var f=u.style.zIndex;d=Math.max(d-4,e.xy.editor_width),(u=document.createElement("div")).setAttribute("event_id",n.id),u.setAttribute(this.config.event_attribute,n.id),this.set_xy(u,d,s-20,c,l+14),u.className="dhx_cal_editor",u.style.zIndex=f;var y=document.createElement("div");this.set_xy(y,d-6,s-26),y.style.cssText+=";margin:2px 2px 2px 2px;overflow:hidden;",y.style.zIndex=f,u.appendChild(y),this._els.dhx_cal_data[0].appendChild(u),this._rendered.push(u),y.innerHTML="<textarea class='dhx_cal_editor'>"+n.text+"</textarea>",this._editor=y.firstChild,this._editor.addEventListener("keypress",function(x){if(x.shiftKey)return!0;var S=x.keyCode;S==e.keys.edit_save&&e.editStop(!0),S==e.keys.edit_cancel&&e.editStop(!1)}),this._editor.addEventListener("selectstart",function(x){return x.cancelBubble=!0,!0}),y.firstChild.focus(),this._els.dhx_cal_data[0].scrollLeft=0,y.firstChild.select()}if(this._select_id==n.id){u.style.zIndex=parseInt(u.style.zIndex)+1;for(var g=this.config["icons_"+(this._edit_id==n.id?"edit":"select")],h="",p=0;p<g.length;p++)h+="<div class='dhx_menu_icon "+g[p]+"' title='"+this.locale.labels[g[p]]+"'></div>";var v=this._render_v_bar(n.id,c-a+1,l,a,20*g.length+26,"","<div class='dhx_menu_head'></div>",h,!0);v.style.left=c-a+1,v.style.zIndex=u.style.zIndex,this._els.dhx_cal_data[0].appendChild(v),this._rendered.push(v)}}}},e.filter_agenda=function(n,a){var i=e.getLayer(a.layer);return i&&i.visible}})},limit:function(e){e.config.limit_start=null,e.config.limit_end=null,e.config.limit_view=!1,e.config.check_limits=!0,e._temp_limit_scope=function(){var t=null;e.attachEvent("onBeforeViewChange",function(n,a,i,r){function o(l,s){var d=e.config.limit_start,c=e.config.limit_end,u=e.date.add(l,1,s);return l.valueOf()>c.valueOf()||u<=d.valueOf()}return!e.config.limit_view||!o(r=r||a,i=i||n)||a.valueOf()==r.valueOf()||(setTimeout(function(){if(e.$destroyed)return!0;var l=o(a,i)?e.config.limit_start:a;e.setCurrentView(o(l,i)?null:l,i)},1),!1)}),e.attachEvent("onMouseDown",function(n){return n!="dhx_time_block"}),e.attachEvent("onBeforeDrag",function(n){return!n||e.checkLimitViolation(e.getEvent(n))}),e.attachEvent("onClick",function(n,a){return e.checkLimitViolation(e.getEvent(n))}),e.attachEvent("onBeforeLightbox",function(n){var a=e.getEvent(n);return t=[a.start_date,a.end_date],e.checkLimitViolation(a)}),e.attachEvent("onEventSave",function(n,a,i){if(!a.start_date||!a.end_date){var r=e.getEvent(n);a.start_date=new Date(r.start_date),a.end_date=new Date(r.end_date)}if(a.rec_type){var o=e._lame_clone(a);return e._roll_back_dates(o),e.checkLimitViolation(o)}return e.checkLimitViolation(a)}),e.attachEvent("onEventAdded",function(n){if(!n)return!0;var a=e.getEvent(n);return!e.checkLimitViolation(a)&&e.config.limit_start&&e.config.limit_end&&(a.start_date<e.config.limit_start&&(a.start_date=new Date(e.config.limit_start)),a.start_date.valueOf()>=e.config.limit_end.valueOf()&&(a.start_date=this.date.add(e.config.limit_end,-1,"day")),a.end_date<e.config.limit_start&&(a.end_date=new Date(e.config.limit_start)),a.end_date.valueOf()>=e.config.limit_end.valueOf()&&(a.end_date=this.date.add(e.config.limit_end,-1,"day")),a.start_date.valueOf()>=a.end_date.valueOf()&&(a.end_date=this.date.add(a.start_date,this.config.event_duration||this.config.time_step,"minute")),a._timed=this.isOneDayEvent(a)),!0}),e.attachEvent("onEventChanged",function(n){if(!n)return!0;var a=e.getEvent(n);if(!e.checkLimitViolation(a)){if(!t)return!1;a.start_date=t[0],a.end_date=t[1],a._timed=this.isOneDayEvent(a)}return!0}),e.attachEvent("onBeforeEventChanged",function(n,a,i){return e.checkLimitViolation(n)}),e.attachEvent("onBeforeEventCreated",function(n){var a=e.getActionData(n).date,i={_timed:!0,start_date:a,end_date:e.date.add(a,e.config.time_step,"minute")};return e.checkLimitViolation(i)}),e.attachEvent("onViewChange",function(){e._mark_now()}),e.attachEvent("onAfterSchedulerResize",function(){return window.setTimeout(function(){if(e.$destroyed)return!0;e._mark_now()},1),!0}),e.attachEvent("onTemplatesReady",function(){e._mark_now_timer=window.setInterval(function(){e._is_initialized()&&e._mark_now()},6e4)}),e.attachEvent("onDestroy",function(){clearInterval(e._mark_now_timer)})},e._temp_limit_scope()},map_view:function(e){let t=null,n=[];const a={googleMap:new k_(e),openStreetMaps:new E_(e),mapbox:new T_(e)};function i(o){t=o.ext.mapView.createAdapter(),n.push(e.attachEvent("onEventSave",function(l,s,d){let c=e.getEvent(l);return c&&c.event_location!=s.event_location&&(e._eventLocationChanged=!0),!0}),e.attachEvent("onEventChanged",(l,s)=>{const{start_date:d,end_date:c}=s,{min_date:u,max_date:f}=e.getState();return d.valueOf()<f.valueOf()&&c.valueOf()>u.valueOf()&&t&&(e.config.map_settings.resolve_event_location&&s.event_location&&!e._latLngUpdate?r(s,t):t.updateEventMarker(s)),e._latLngUpdate=!1,!0}),e.attachEvent("onEventIdChange",function(l,s){let d=e.getEvent(s);t==null||t.removeEventMarker(l),t==null||t.addEventMarker(d)}),e.attachEvent("onEventAdded",(l,s)=>{const{start_date:d,end_date:c}=s,{min_date:u,max_date:f}=e.getState();d.valueOf()<f.valueOf()&&c.valueOf()>u.valueOf()&&t&&(e.config.map_settings.resolve_event_location&&s.event_location&&e._eventLocationChanged?(r(s,t),e._eventLocationChanged=!1):(t.addEventMarker(s),t.onEventClick(s)))}),e.attachEvent("onClick",function(l,s){const d=e.getEvent(l);return t&&d&&t.onEventClick(d),!1}),e.attachEvent("onBeforeEventDelete",(l,s)=>(t&&t.removeEventMarker(l),!0)))}async function r(o,l){let s=await l.resolveAddress(o.event_location);return o.lat=s.lat,o.lng=s.lng,l.removeEventMarker(String(o.id)),l.addEventMarker(o),o}e.ext||(e.ext={}),e.ext.mapView={createAdapter:function(){return a[e.config.map_view_provider]},createMarker:function(o){return new google.maps.Marker(o)},currentAdapter:null,adapters:a},e._latLngUpdate=!1,e._eventLocationChanged=!1,e.config.map_view_provider="googleMap",e.config.map_settings={initial_position:{lat:48.724,lng:8.215},error_position:{lat:15,lng:15},initial_zoom:1,zoom_after_resolve:15,info_window_max_width:300,resolve_user_location:!0,resolve_event_location:!0,view_provider:"googleMap"},e.config.map_initial_position&&(e.config.map_settings.initial_position={lat:e.config.map_initial_position.lat(),lng:e.config.map_initial_position.lng()}),e.config.map_error_position&&(e.config.map_settings.error_position={lat:e.config.map_error_position.lat(),lng:e.config.map_error_position.lng()}),e.xy.map_date_width=188,e.xy.map_icon_width=25,e.xy.map_description_width=400,e.date.add_map=function(o,l,s){return new Date(o.valueOf())},e.templates.map_date=function(o,l,s){return""},e.templates.map_time=function(o,l,s){return e.config.rtl&&!s._timed?e.templates.day_date(l)+" &ndash; "+e.templates.day_date(o):s._timed?this.day_date(s.start_date,s.end_date,s)+" "+this.event_date(o):e.templates.day_date(o)+" &ndash; "+e.templates.day_date(l)},e.templates.map_text=function(o,l,s){return s.text},e.templates.map_info_content=function(o){return`<div><b>Event's text:</b> ${o.text}
				<div><b>Location:</b> ${o.event_location}</div>
				<div><b>Starts:</b> ${e.templates.tooltip_date_format(o.start_date)}</div>
				<div><b>Ends:</b> ${e.templates.tooltip_date_format(o.end_date)}</div>
			</div>`},e.date.map_start=function(o){return o},e.dblclick_dhx_map_area=function(o){let l=o.target.closest(`[${e.config.event_attribute}]`);if(l){let s=l.getAttribute(`${e.config.event_attribute}`);e.showLightbox(s)}this.config.readonly||!this.config.dblclick_create||l||this.addEventNow({start_date:e.config.map_start,end_date:e.date.add(e.config.map_start,e.config.time_step,"minute")})},e.attachEvent("onSchedulerReady",function(){e.config.map_initial_zoom!==void 0&&(e.config.map_settings.initial_zoom=e.config.map_initial_zoom),e.config.map_zoom_after_resolve!==void 0&&(e.config.map_settings.zoom_after_resolve=e.config.map_zoom_after_resolve),e.config.map_infowindow_max_width!==void 0&&(e.config.map_settings.info_window_max_width=e.config.map_infowindow_max_width),e.config.map_resolve_user_location!==void 0&&(e.config.map_settings.resolve_user_location=e.config.map_resolve_user_location),e.config.map_view_provider!==void 0&&(e.config.map_settings.view_provider=e.config.map_view_provider),e.config.map_type!==void 0&&(e.config.map_settings.type=e.config.map_type),e.config.map_resolve_event_location!==void 0&&(e.config.map_settings.resolve_event_location=e.config.map_resolve_event_location),e.ext.mapView.currentAdapter=e.config.map_view_provider;let o=document.createElement("div");o.className="mapContainer",o.id="mapContainer",o.style.display="none",o.style.zIndex="1",e._obj.appendChild(o);const l=e.render_data;function s(){let c=e.get_visible_events();c.sort(function(g,h){return g.start_date.valueOf()==h.start_date.valueOf()?g.id>h.id?1:-1:g.start_date>h.start_date?1:-1});let u="<div "+e._waiAria.mapAttrString()+" class='dhx_map_area'>";for(let g=0;g<c.length;g++){let h=c[g],p=h.id==e._selected_event_id?"dhx_map_line highlight":"dhx_map_line",v=h.color?"--dhx-scheduler-event-background:"+h.color+";":"",x=h.textColor?"--dhx-scheduler-event-color:"+h.textColor+";":"",S=e._waiAria.mapRowAttrString(h),O=e._waiAria.mapDetailsBtnString();u+="<div "+S+" class='"+p+"' event_id='"+h.id+"' "+e.config.event_attribute+"='"+h.id+"' style='"+v+x+(h._text_style||"")+" width: "+(e.xy.map_date_width+e.xy.map_description_width+2)+"px;'><div class='dhx_map_event_time' style='width: "+e.xy.map_date_width+"px;' >"+e.templates.map_time(h.start_date,h.end_date,h)+"</div>",u+=`<div ${O} class='dhx_event_icon icon_details'><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
			<path d="M15.4444 16.4H4.55556V7.6H15.4444V16.4ZM13.1111 2V3.6H6.88889V2H5.33333V3.6H4.55556C3.69222 3.6 3 4.312 3 5.2V16.4C3 16.8243 3.16389 17.2313 3.45561 17.5314C3.74733 17.8314 4.143 18 4.55556 18H15.4444C15.857 18 16.2527 17.8314 16.5444 17.5314C16.8361 17.2313 17 16.8243 17 16.4V5.2C17 4.312 16.3 3.6 15.4444 3.6H14.6667V2H13.1111ZM13.8889 10.8H10V14.8H13.8889V10.8Z" fill="#A1A4A6"/>
			</svg></div>`,u+="<div class='line_description' style='width:"+(e.xy.map_description_width-e.xy.map_icon_width)+"px;'>"+e.templates.map_text(h.start_date,h.end_date,h)+"</div></div>"}u+="<div class='dhx_v_border' style="+(e.config.rtl?"'right: ":"'left: ")+(e.xy.map_date_width-1)+"px;'></div><div class='dhx_v_border_description'></div></div>",e._els.dhx_cal_data[0].scrollTop=0,e._els.dhx_cal_data[0].innerHTML=u;let f=e._els.dhx_cal_data[0].firstChild.childNodes,y=e._getNavDateElement();y&&(y.innerHTML=e.templates[e._mode+"_date"](e._min_date,e._max_date,e._mode)),e._rendered=[];for(let g=0;g<f.length-2;g++)e._rendered[g]=f[g]}e.render_data=function(c,u){if(this._mode!="map")return l.apply(this,arguments);{s();let f=e.get_visible_events();t&&(t.clearEventMarkers(),f.forEach(y=>t==null?void 0:t.addEventMarker(y)))}},e.map_view=function(c){e._els.dhx_cal_data[0].style.width=e.xy.map_date_width+e.xy.map_description_width+1+"px",e._min_date=e.config.map_start||e._currentDate(),e._max_date=e.config.map_end||e.date.add(e._currentDate(),1,"year"),e._table_view=!0,function(g){if(g){const h=e.locale.labels;e._els.dhx_cal_header[0].innerHTML="<div class='dhx_map_head' style='width: "+(e.xy.map_date_width+e.xy.map_description_width+2)+"px;' ><div class='headline_date' style='width: "+e.xy.map_date_width+"px;'>"+h.date+"</div><div class='headline_description' style='width: "+e.xy.map_description_width+"px;'>"+h.description+"</div></div>",e._table_view=!0,e.set_sizes()}}(c);let u=document.getElementById("mapContainer");var f,y;(function(g){let h=document.getElementById(g);if(h){const p=e.$container.querySelector(".dhx_cal_navline").offsetHeight;let v=e.$container.querySelector(".dhx_cal_data").offsetHeight+e.$container.querySelector(".dhx_cal_header").offsetHeight;v<0&&(v=0);let x=e._x-e.xy.map_date_width-e.xy.map_description_width-1;x<0&&(x=0),h.style.height=v+"px",h.style.width=x+"px",h.style.position="absolute",h.style.top=p+"px",e.config.rtl?h.style.marginRight=e.xy.map_date_width+e.xy.map_description_width+1+"px":h.style.marginLeft=e.xy.map_date_width+e.xy.map_description_width+1+"px",h.style.marginTop=e.xy.nav_height+2+"px"}})("mapContainer"),c&&u?(o.style.display="block",s(),e.config.map_view_provider==e.ext.mapView.currentAdapter?(t==null||t.destroy(u),i(e),t==null||t.initialize(u,e.config.map_settings)):(t==null||t.destroy(u),i(e),t==null||t.initialize(u,e.config.map_settings),e.ext.mapView.currentAdapter=e.config.map_view_provider),t&&(f=e.config.map_settings,y=t,f.resolve_user_location?navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(g){y.setView(g.coords.latitude,g.coords.longitude,f.zoom_after_resolve||f.initial_zoom)}):y.setView(f.initial_position.lat,f.initial_position.lng,f.initial_zoom))):(o.style.display="none",e._els.dhx_cal_data[0].style.width="100%",t&&u&&(t.destroy(u),t=null,e.ext.mapView.currentAdapter=e.config.map_view_provider),n.forEach(g=>e.detachEvent(g)),n=[])},e.attachEvent("onLocationError",function(c){return alert("Location can't be found"),google.maps.LatLng(51.47784,-.001492)});let d=async function(c){if(t){const u=await t.resolveAddress(c.event_location);u.lat&&u.lng?(c.lat=+u.lat,c.lng=+u.lng):(e.callEvent("onLocationError",[c.id]),c.lng=e.config.map_settings.error_position.lng,c.lat=e.config.map_settings.error_position.lat),e._latLngUpdate=!0,e.callEvent("onEventChanged",[c.id,c])}};e._event_resolve_delay=1500,e.attachEvent("onEventLoading",function(c){return c.lat&&c.lng&&(c.lat=+c.lat,c.lng=+c.lng),e.config.map_settings.resolve_event_location&&c.event_location&&!c.lat&&!c.lng&&(e._event_resolve_delay+=1500,function(u,f,y,g){setTimeout(function(){if(e.$destroyed)return!0;let h=u.apply(f,y);return u=f=y=null,h},g||1)}(d,this,[c],e._event_resolve_delay)),!0})})},minical:function(e){const t=e._createDomEventScope();e.config.minicalendar={mark_events:!0},e._synced_minicalendars=[],e.renderCalendar=function(n,a,i){var r=null,o=n.date||e._currentDate();if(typeof o=="string"&&(o=this.templates.api_date(o)),a)r=this._render_calendar(a.parentNode,o,n,a),e.unmarkCalendar(r);else{var l=n.container,s=n.position;if(typeof l=="string"&&(l=document.getElementById(l)),typeof s=="string"&&(s=document.getElementById(s)),s&&s.left===void 0&&s.right===void 0){var d=e.$domHelpers.getOffset(s);s={top:d.top+s.offsetHeight,left:d.left}}l||(l=e._get_def_cont(s)),(r=this._render_calendar(l,o,n)).$_eventAttached||(r.$_eventAttached=!0,t.attach(r,"click",(function(x){var S=x.target||x.srcElement,O=e.$domHelpers;if(O.closest(S,".dhx_month_head")&&!O.closest(S,".dhx_after")&&!O.closest(S,".dhx_before")){var N=O.closest(S,"[data-cell-date]").getAttribute("data-cell-date"),M=e.templates.parse_date(N);e.unmarkCalendar(this),e.markCalendar(this,M,"dhx_calendar_click"),this._last_date=M,this.conf.events&&this.conf.events.onDateClick&&this.conf.events.onDateClick.call(this,M,x),this.conf.handler&&this.conf.handler.call(e,M,this)}}).bind(r)),t.attach(r,"mouseover",(function(x){const S=x.target;if(S.classList.contains("dhx_cal_month_cell")){var O=S.getAttribute("data-cell-date"),N=e.templates.parse_date(O);this.conf.events&&this.conf.events.onDateMouseOver&&this.conf.events.onDateMouseOver.call(this,N,x)}}).bind(r)))}if(e.config.minicalendar.mark_events)for(var c=e.date.month_start(o),u=e.date.add(c,1,"month"),f=this.getEvents(c,u),y=this["filter_"+this._mode],g={},h=0;h<f.length;h++){var p=f[h];if(!y||y(p.id,p)){var v=p.start_date;for(v.valueOf()<c.valueOf()&&(v=c),v=e.date.date_part(new Date(v.valueOf()));v<p.end_date&&(g[+v]||(g[+v]=!0,this.markCalendar(r,v,"dhx_year_event")),!((v=this.date.add(v,1,"day")).valueOf()>=u.valueOf())););}}return this._markCalendarCurrentDate(r),r.conf=n,n.sync&&!i&&this._synced_minicalendars.push(r),r.conf._on_xle_handler||(r.conf._on_xle_handler=e.attachEvent("onXLE",function(){e.updateCalendar(r,r.conf.date)})),this.config.wai_aria_attributes&&this.config.wai_aria_application_role&&r.setAttribute("role","application"),r},e._get_def_cont=function(n){return this._def_count||(this._def_count=document.createElement("div"),this._def_count.className="dhx_minical_popup",e.event(this._def_count,"click",function(a){a.cancelBubble=!0}),document.body.appendChild(this._def_count)),n.left&&(this._def_count.style.left=n.left+"px"),n.right&&(this._def_count.style.right=n.right+"px"),n.top&&(this._def_count.style.top=n.top+"px"),n.bottom&&(this._def_count.style.bottom=n.bottom+"px"),this._def_count._created=new Date,this._def_count},e._locateCalendar=function(n,a){if(typeof a=="string"&&(a=e.templates.api_date(a)),+a>+n._max_date||+a<+n._min_date)return null;for(var i=n.querySelector(".dhx_year_body").childNodes[0],r=0,o=new Date(n._min_date);+this.date.add(o,1,"week")<=+a;)o=this.date.add(o,1,"week"),r++;var l=e.config.start_on_monday,s=(a.getDay()||(l?7:0))-(l?1:0);const d=i.querySelector(`.dhx_cal_month_row:nth-child(${r+1}) .dhx_cal_month_cell:nth-child(${s+1})`);return d?d.firstChild:null},e.markCalendar=function(n,a,i){var r=this._locateCalendar(n,a);r&&(r.className+=" "+i)},e.unmarkCalendar=function(n,a,i){if(i=i||"dhx_calendar_click",a=a||n._last_date){var r=this._locateCalendar(n,a);r&&(r.className=(r.className||"").replace(RegExp(i,"g")))}},e._week_template=function(n){for(var a=n||250,i=0,r=document.createElement("div"),o=this.date.week_start(e._currentDate()),l=0;l<7;l++)this._cols[l]=Math.floor(a/(7-l)),this._render_x_header(l,i,o,r),o=this.date.add(o,1,"day"),a-=this._cols[l],i+=this._cols[l];return r.lastChild.className+=" dhx_scale_bar_last",r},e.updateCalendar=function(n,a){if(n.conf.date&&n.conf.events&&n.conf.events.onBeforeMonthChange&&n.conf.events.onBeforeMonthChange.call(n,n.conf.date,a,n)===!1)return;const i=n.conf.date;n.conf.date=a,this.renderCalendar(n.conf,n,!0),n.conf.events&&n.conf.events.onMonthChange&&n.conf.events.onMonthChange.call(n,i,a)},e._mini_cal_arrows=["&nbsp;","&nbsp;"],e._render_calendar=function(n,a,i,r){var o=e.templates,l=this._cols;this._cols=[];var s=this._mode;this._mode="calendar";var d=this._colsS;this._colsS={height:0};var c=new Date(this._min_date),u=new Date(this._max_date),f=new Date(e._date),y=o.month_day,g=this._ignores_detected;this._ignores_detected=0,o.month_day=o.calendar_date,a=this.date.month_start(a);var h,p=this._week_template(n.offsetWidth-1-this.config.minicalendar.padding);r?h=r:((h=document.createElement("div")).className="dhx_cal_container dhx_mini_calendar",this.config.rtl&&(h.className+=" dhx_cal_container_rtl")),h.setAttribute("date",this._helpers.formatDate(a)),h.innerHTML="<div class='dhx_year_month'></div><div class='dhx_year_grid"+(e.config.rtl?" dhx_grid_rtl'>":"'>")+"<div class='dhx_year_week'>"+(p?p.innerHTML:"")+"</div><div class='dhx_year_body'></div></div>";var v=h.querySelector(".dhx_year_month"),x=h.querySelector(".dhx_year_week"),S=h.querySelector(".dhx_year_body");if(v.innerHTML=this.templates.calendar_month(a),i.navigation)for(var O=function($,X){var te=e.date.add($._date,X,"month");e.updateCalendar($,te),e._date.getMonth()==$._date.getMonth()&&e._date.getFullYear()==$._date.getFullYear()&&e._markCalendarCurrentDate($)},N=["dhx_cal_prev_button","dhx_cal_next_button"],M=["left:1px;top:4px;position:absolute;","left:auto; right:1px;top:4px;position:absolute;"],A=[-1,1],m=function($){return function(){if(i.sync)for(var X=e._synced_minicalendars,te=0;te<X.length;te++)O(X[te],$);else e.config.rtl&&($=-$),O(h,$)}},b=[e.locale.labels.prev,e.locale.labels.next],k=0;k<2;k++){var E=document.createElement("div");E.className=N[k],e._waiAria.headerButtonsAttributes(E,b[k]),E.style.cssText=M[k],E.innerHTML=this._mini_cal_arrows[k],v.appendChild(E),t.attach(E,"click",m(A[k]))}h._date=new Date(a),h.week_start=(a.getDay()-(this.config.start_on_monday?1:0)+7)%7;var D=h._min_date=this.date.week_start(a);h._max_date=this.date.add(h._min_date,6,"week"),this._reset_month_scale(S,a,D,6),r||n.appendChild(h),x.style.height=x.childNodes[0].offsetHeight-1+"px";var C=e.uid();e._waiAria.minicalHeader(v,C),e._waiAria.minicalGrid(h.querySelector(".dhx_year_grid"),C),e._waiAria.minicalRow(x);for(var R=x.querySelectorAll(".dhx_scale_bar"),P=0;P<R.length;P++)e._waiAria.minicalHeadCell(R[P]);var F=S.querySelectorAll(".dhx_cal_month_cell"),z=new Date(D);for(P=0;P<F.length;P++)e._waiAria.minicalDayCell(F[P],new Date(z)),z=e.date.add(z,1,"day");return e._waiAria.minicalHeader(v,C),this._cols=l,this._mode=s,this._colsS=d,this._min_date=c,this._max_date=u,e._date=f,o.month_day=y,this._ignores_detected=g,h},e.destroyCalendar=function(n,a){!n&&this._def_count&&this._def_count.firstChild&&(a||new Date().valueOf()-this._def_count._created.valueOf()>500)&&(n=this._def_count.firstChild),n&&(t.detachAll(),n.innerHTML="",n.parentNode&&n.parentNode.removeChild(n),this._def_count&&(this._def_count.style.top="-1000px"),n.conf&&n.conf._on_xle_handler&&e.detachEvent(n.conf._on_xle_handler))},e.isCalendarVisible=function(){return!!(this._def_count&&parseInt(this._def_count.style.top,10)>0)&&this._def_count},e.attachEvent("onTemplatesReady",function(){e.event(document.body,"click",function(){e.destroyCalendar()})},{once:!0}),e.form_blocks.calendar_time={render:function(n){var a="<span class='dhx_minical_input_wrapper'><input class='dhx_readonly dhx_minical_input' type='text' readonly='true'></span>",i=e.config,r=this.date.date_part(e._currentDate()),o=1440,l=0;i.limit_time_select&&(l=60*i.first_hour,o=60*i.last_hour+1),r.setHours(l/60),n._time_values=[],a+=" <select class='dhx_lightbox_time_select'>";for(var s=l;s<o;s+=1*this.config.time_step)a+="<option value='"+s+"'>"+this.templates.time_picker(r)+"</option>",n._time_values.push(s),r=this.date.add(r,this.config.time_step,"minute");return"<div class='dhx_section_time dhx_lightbox_minical'>"+(a+="</select>")+"<span class='dhx_lightbox_minical_spacer'> &nbsp;&ndash;&nbsp; </span>"+a+"</div>"},set_value:function(n,a,i,r){var o,l,s=n.getElementsByTagName("input"),d=n.getElementsByTagName("select"),c=function(v,x,S){e.event(v,"click",function(){e.destroyCalendar(null,!0),e.renderCalendar({position:v,date:new Date(this._date),navigation:!0,handler:function(O){v.value=e.templates.calendar_time(O),v._date=new Date(O),e.destroyCalendar(),e.config.event_duration&&e.config.auto_end_date&&S===0&&g()}})})};if(e.config.full_day){if(!n._full_day){var u="<label class='dhx_fullday'><input type='checkbox' name='full_day' value='true'> "+e.locale.labels.full_day+"&nbsp;</label></input>";e.config.wide_form||(u=n.previousSibling.innerHTML+u),n.previousSibling.innerHTML=u,n._full_day=!0}var f=n.previousSibling.getElementsByTagName("input")[0],y=e.date.time_part(i.start_date)===0&&e.date.time_part(i.end_date)===0;f.checked=y,d[0].disabled=f.checked,d[1].disabled=f.checked,f.$_eventAttached||(f.$_eventAttached=!0,e.event(f,"click",function(){if(f.checked===!0){var v={};e.form_blocks.calendar_time.get_value(n,v),o=e.date.date_part(v.start_date),(+(l=e.date.date_part(v.end_date))==+o||+l>=+o&&(i.end_date.getHours()!==0||i.end_date.getMinutes()!==0))&&(l=e.date.add(l,1,"day"))}else o=null,l=null;var x=o||i.start_date,S=l||i.end_date;h(s[0],x),h(s[1],S),d[0].value=60*x.getHours()+x.getMinutes(),d[1].value=60*S.getHours()+S.getMinutes(),d[0].disabled=f.checked,d[1].disabled=f.checked}))}if(e.config.event_duration&&e.config.auto_end_date){var g=function(){e.config.auto_end_date&&e.config.event_duration&&(o=e.date.add(s[0]._date,d[0].value,"minute"),l=new Date(o.getTime()+60*e.config.event_duration*1e3),s[1].value=e.templates.calendar_time(l),s[1]._date=e.date.date_part(new Date(l)),d[1].value=60*l.getHours()+l.getMinutes())};d[0].$_eventAttached||d[0].addEventListener("change",g)}function h(v,x,S){c(v,x,S),v.value=e.templates.calendar_time(x),v._date=e.date.date_part(new Date(x))}function p(v){for(var x=r._time_values,S=60*v.getHours()+v.getMinutes(),O=S,N=!1,M=0;M<x.length;M++){var A=x[M];if(A===S){N=!0;break}A<S&&(O=A)}return N||O?N?S:O:-1}h(s[0],i.start_date,0),h(s[1],i.end_date,1),c=function(){},d[0].value=p(i.start_date),d[1].value=p(i.end_date)},get_value:function(n,a){var i=n.getElementsByTagName("input"),r=n.getElementsByTagName("select");return a.start_date=e.date.add(i[0]._date,r[0].value,"minute"),a.end_date=e.date.add(i[1]._date,r[1].value,"minute"),a.end_date<=a.start_date&&(a.end_date=e.date.add(a.start_date,e.config.time_step,"minute")),{start_date:new Date(a.start_date),end_date:new Date(a.end_date)}},focus:function(n){}},e.linkCalendar=function(n,a){var i=function(){var r=e._date,o=new Date(r.valueOf());return a&&(o=a(o)),o.setDate(1),e.updateCalendar(n,o),!0};e.attachEvent("onViewChange",i),e.attachEvent("onXLE",i),e.attachEvent("onEventAdded",i),e.attachEvent("onEventChanged",i),e.attachEvent("onEventDeleted",i),i()},e._markCalendarCurrentDate=function(n){var a=e.getState(),i=a.min_date,r=a.max_date,o=a.mode,l=e.date.month_start(new Date(n._date)),s=e.date.add(l,1,"month");if(!({month:!0,year:!0,agenda:!0,grid:!0}[o]||i.valueOf()<=l.valueOf()&&r.valueOf()>=s.valueOf()))for(var d=i;d.valueOf()<r.valueOf();)l.valueOf()<=d.valueOf()&&s>d&&e.markCalendar(n,d,"dhx_calendar_click"),d=e.date.add(d,1,"day")},e.attachEvent("onEventCancel",function(){e.destroyCalendar(null,!0)}),e.attachEvent("onDestroy",function(){e.destroyCalendar()})},monthheight:function(e){e.attachEvent("onTemplatesReady",function(){e.xy.scroll_width=0;var t=e.render_view_data;e.render_view_data=function(){var a=this._els.dhx_cal_data[0];a.firstChild._h_fix=!0,t.apply(e,arguments);var i=parseInt(a.style.height);a.style.height="1px",a.style.height=a.scrollHeight+"px",this._obj.style.height=this._obj.clientHeight+a.scrollHeight-i+"px"};var n=e._reset_month_scale;e._reset_month_scale=function(a,i,r,o){var l={clientHeight:100};n.apply(e,[l,i,r,o]),a.innerHTML=l.innerHTML}})},multisection:function(e){gt("Multisection",e.assert)},multiselect:function(e){e.form_blocks.multiselect={render:function(t){var n="dhx_multi_select_control dhx_multi_select_"+t.name;t.vertical&&(n+=" dhx_multi_select_control_vertical");for(var a="<div class='"+n+"' style='overflow: auto; height: "+t.height+"px; position: relative;' >",i=0;i<t.options.length;i++)a+="<label><input type='checkbox' value='"+t.options[i].key+"'/>"+t.options[i].label+"</label>";return a+="</div>"},set_value:function(t,n,a,i){for(var r=t.getElementsByTagName("input"),o=0;o<r.length;o++)r[o].checked=!1;function l(f){for(var y=t.getElementsByTagName("input"),g=0;g<y.length;g++)y[g].checked=!!f[y[g].value]}var s={};if(a[i.map_to]){var d=(a[i.map_to]+"").split(i.delimiter||e.config.section_delimiter||",");for(o=0;o<d.length;o++)s[d[o]]=!0;l(s)}else{if(e._new_event||!i.script_url)return;var c=document.createElement("div");c.className="dhx_loading",c.style.cssText="position: absolute; top: 40%; left: 40%;",t.appendChild(c);var u=[i.script_url,i.script_url.indexOf("?")==-1?"?":"&","dhx_crosslink_"+i.map_to+"="+a.id+"&uid="+e.uid()].join("");e.ajax.get(u,function(f){var y=function(g){try{for(var h=JSON.parse(g.xmlDoc.responseText),p={},v=0;v<h.length;v++){var x=h[v];p[x.value||x.key||x.id]=!0}return p}catch{return null}}(f);y||(y=function(g,h){for(var p=e.ajax.xpath("//data/item",g.xmlDoc),v={},x=0;x<p.length;x++)v[p[x].getAttribute(h.map_to)]=!0;return v}(f,i)),l(y),t.removeChild(c)})}},get_value:function(t,n,a){for(var i=[],r=t.getElementsByTagName("input"),o=0;o<r.length;o++)r[o].checked&&i.push(r[o].value);return i.join(a.delimiter||e.config.section_delimiter||",")},focus:function(t){}}},multisource:function(e){var t=e._load;e._load=function(n,a){if(typeof(n=n||this._load_url)=="object")for(var i=function(o){var l=function(){};return l.prototype=o,l}(this._loaded),r=0;r<n.length;r++)this._loaded=new i,t.call(this,n[r],a);else t.apply(this,arguments)}},mvc:function(e){var t,n={use_id:!1};function a(o){var l={};for(var s in o)s.indexOf("_")!==0&&(l[s]=o[s]);return n.use_id||delete l.id,l}function i(o){o._not_render=!1,o._render_wait&&o.render_view_data(),o._loading=!1,o.callEvent("onXLE",[])}function r(o){return n.use_id?o.id:o.cid}e.backbone=function(o,l){l&&(n=l),o.bind("change",function(c,u){var f=r(c),y=e._events[f]=c.toJSON();y.id=f,e._init_event(y),clearTimeout(t),t=setTimeout(function(){if(e.$destroyed)return!0;e.updateView()},1)}),o.bind("remove",function(c,u){var f=r(c);e._events[f]&&e.deleteEvent(f)});var s=[];function d(){if(e.$destroyed)return!0;s.length&&(e.parse(s,"json"),s=[])}o.bind("add",function(c,u){var f=r(c);if(!e._events[f]){var y=c.toJSON();y.id=f,e._init_event(y),s.push(y),s.length==1&&setTimeout(d,1)}}),o.bind("request",function(c){var u;c instanceof Backbone.Collection&&((u=e)._loading=!0,u._not_render=!0,u.callEvent("onXLS",[]))}),o.bind("sync",function(c){c instanceof Backbone.Collection&&i(e)}),o.bind("error",function(c){c instanceof Backbone.Collection&&i(e)}),e.attachEvent("onEventCreated",function(c){var u=new o.model(e.getEvent(c));return e._events[c]=u.toJSON(),e._events[c].id=c,!0}),e.attachEvent("onEventAdded",function(c){if(!o.get(c)){var u=a(e.getEvent(c)),f=new o.model(u),y=r(f);y!=c&&this.changeEventId(c,y),o.add(f),o.trigger("scheduler:add",f)}return!0}),e.attachEvent("onEventChanged",function(c){var u=o.get(c),f=a(e.getEvent(c));return u.set(f),o.trigger("scheduler:change",u),!0}),e.attachEvent("onEventDeleted",function(c){var u=o.get(c);return u&&(o.trigger("scheduler:remove",u),o.remove(c)),!0})}},outerdrag:function(e){e.attachEvent("onTemplatesReady",function(){var t,n=new dhtmlDragAndDropObject,a=n.stopDrag;function i(r,o,l,s){if(!e.checkEvent("onBeforeExternalDragIn")||e.callEvent("onBeforeExternalDragIn",[r,o,l,s,t])){var d=e.attachEvent("onEventCreated",function(g){e.callEvent("onExternalDragIn",[g,r,t])||(this._drag_mode=this._drag_id=null,this.deleteEvent(g))}),c=e.getActionData(t),u={start_date:new Date(c.date)};if(e.matrix&&e.matrix[e._mode]){var f=e.matrix[e._mode];u[f.y_property]=c.section;var y=e._locate_cell_timeline(t);u.start_date=f._trace_x[y.x],u.end_date=e.date.add(u.start_date,f.x_step,f.x_unit)}e._props&&e._props[e._mode]&&(u[e._props[e._mode].map_to]=c.section),e.addEventNow(u),e.detachEvent(d)}}n.stopDrag=function(r){return t=r,a.apply(this,arguments)},n.addDragLanding(e._els.dhx_cal_data[0],{_drag:function(r,o,l,s){i(r,o,l,s)},_dragIn:function(r,o){return r},_dragOut:function(r){return this}}),dhtmlx.DragControl&&dhtmlx.DragControl.addDrop(e._els.dhx_cal_data[0],{onDrop:function(r,o,l,s){var d=dhtmlx.DragControl.getMaster(r);t=s,i(r,d,o,s.target||s.srcElement)},onDragIn:function(r,o,l){return o}},!0)})},pdf:function(e){var t,n,a=new RegExp("<[^>]*>","g"),i=new RegExp("<br[^>]*>","g");function r(N){return N.replace(i,`
`).replace(a,"")}function o(N,M){N=parseFloat(N),M=parseFloat(M),isNaN(M)||(N-=M);var A=s(N);return N=N-A.width+A.cols*t,isNaN(N)?"auto":100*N/t}function l(N,M,A){N=parseFloat(N),M=parseFloat(M),!isNaN(M)&&A&&(N-=M);var m=s(N);return N=N-m.width+m.cols*t,isNaN(N)?"auto":100*N/(t-(isNaN(M)?0:M))}function s(N){for(var M=0,A=e._els.dhx_cal_header[0].childNodes,m=A[1]?A[1].childNodes:A[0].childNodes,b=0;b<m.length;b++){var k=m[b].style?m[b]:m[b].parentNode,E=parseFloat(k.style.width);if(!(N>E))break;N-=E+1,M+=E+1}return{width:M,cols:b}}function d(N){return N=parseFloat(N),isNaN(N)?"auto":100*N/n}function c(N,M){return(window.getComputedStyle?window.getComputedStyle(N,null)[M]:N.currentStyle?N.currentStyle[M]:null)||""}function u(N,M){for(var A=parseInt(N.style.left,10),m=0;m<e._cols.length;m++)if((A-=e._cols[m])<0)return m;return M}function f(N,M){for(var A=parseInt(N.style.top,10),m=0;m<e._colsS.heights.length;m++)if(e._colsS.heights[m]>A)return m;return M}function y(N){return N?"</"+N+">":""}function g(N,M,A,m){var b="<"+N+" profile='"+M+"'";return A&&(b+=" header='"+A+"'"),m&&(b+=" footer='"+m+"'"),b+=">"}function h(){var N="",M=e._mode;if(e.matrix&&e.matrix[e._mode]&&(M=e.matrix[e._mode].render=="cell"?"matrix":"timeline"),N+="<scale mode='"+M+"' today='"+e._els.dhx_cal_date[0].innerHTML+"'>",e._mode=="week_agenda")for(var A=e._els.dhx_cal_data[0].getElementsByTagName("DIV"),m=0;m<A.length;m++)A[m].className=="dhx_wa_scale_bar"&&(N+="<column>"+r(A[m].innerHTML)+"</column>");else if(e._mode=="agenda"||e._mode=="map")N+="<column>"+r((A=e._els.dhx_cal_header[0].childNodes[0].childNodes)[0].innerHTML)+"</column><column>"+r(A[1].innerHTML)+"</column>";else if(e._mode=="year")for(A=e._els.dhx_cal_data[0].childNodes,m=0;m<A.length;m++)N+="<month label='"+r(A[m].querySelector(".dhx_year_month").innerHTML)+"'>",N+=v(A[m].querySelector(".dhx_year_week").childNodes),N+=p(A[m].querySelector(".dhx_year_body")),N+="</month>";else{N+="<x>",N+=v(A=e._els.dhx_cal_header[0].childNodes),N+="</x>";var b=e._els.dhx_cal_data[0];if(e.matrix&&e.matrix[e._mode]){for(N+="<y>",m=0;m<b.firstChild.rows.length;m++)N+="<row><![CDATA["+r(b.firstChild.rows[m].cells[0].innerHTML)+"]]></row>";N+="</y>",n=b.firstChild.rows[0].cells[0].offsetHeight}else if(b.firstChild.tagName=="TABLE")N+=p(b);else{for(b=b.childNodes[b.childNodes.length-1];b.className.indexOf("dhx_scale_holder")==-1;)b=b.previousSibling;for(b=b.childNodes,N+="<y>",m=0;m<b.length;m++)N+=`
<row><![CDATA[`+r(b[m].innerHTML)+"]]></row>";N+="</y>",n=b[0].offsetHeight}}return N+="</scale>"}function p(N){for(var M="",A=N.querySelectorAll("tr"),m=0;m<A.length;m++){for(var b=[],k=A[m].querySelectorAll("td"),E=0;E<k.length;E++)b.push(k[E].querySelector(".dhx_month_head").innerHTML);M+=`
<row height='`+k[0].offsetHeight+"'><![CDATA["+r(b.join("|"))+"]]></row>",n=k[0].offsetHeight}return M}function v(N){var M,A="";e.matrix&&e.matrix[e._mode]&&(e.matrix[e._mode].second_scale&&(M=N[1].childNodes),N=N[0].childNodes);for(var m=0;m<N.length;m++)A+=`
<column><![CDATA[`+r(N[m].innerHTML)+"]]></column>";if(t=N[0].offsetWidth,M){var b=0,k=N[0].offsetWidth,E=1;for(m=0;m<M.length;m++)A+=`
<column second_scale='`+E+"'><![CDATA["+r(M[m].innerHTML)+"]]></column>",(b+=M[m].offsetWidth)>=k&&(k+=N[E]?N[E].offsetWidth:0,E++),t=M[0].offsetWidth}return A}function x(N){var M="",A=e._rendered,m=e.matrix&&e.matrix[e._mode];if(e._mode=="agenda"||e._mode=="map")for(var b=0;b<A.length;b++)M+="<event><head><![CDATA["+r(A[b].childNodes[0].innerHTML)+"]]></head><body><![CDATA["+r(A[b].childNodes[2].innerHTML)+"]]></body></event>";else if(e._mode=="week_agenda")for(b=0;b<A.length;b++)M+="<event day='"+A[b].parentNode.getAttribute("day")+"'><body>"+r(A[b].innerHTML)+"</body></event>";else if(e._mode=="year")for(A=e.get_visible_events(),b=0;b<A.length;b++){var k=A[b].start_date;for(k.valueOf()<e._min_date.valueOf()&&(k=e._min_date);k<A[b].end_date;){var E=k.getMonth()+12*(k.getFullYear()-e._min_date.getFullYear())-e.week_starts._month,D=e.week_starts[E]+k.getDate()-1,C=N?c(e._get_year_cell(k),"color"):"",R=N?c(e._get_year_cell(k),"backgroundColor"):"";if(M+="<event day='"+D%7+"' week='"+Math.floor(D/7)+"' month='"+E+"' backgroundColor='"+R+"' color='"+C+"'></event>",(k=e.date.add(k,1,"day")).valueOf()>=e._max_date.valueOf())break}}else if(m&&m.render=="cell")for(A=e._els.dhx_cal_data[0].getElementsByTagName("TD"),b=0;b<A.length;b++)C=N?c(A[b],"color"):"",M+=`
<event><body backgroundColor='`+(R=N?c(A[b],"backgroundColor"):"")+"' color='"+C+"'><![CDATA["+r(A[b].innerHTML)+"]]></body></event>";else for(b=0;b<A.length;b++){var P,F;if(e.matrix&&e.matrix[e._mode])P=o(A[b].style.left),F=o(A[b].offsetWidth)-1;else{var z=e.config.use_select_menu_space?0:26;P=l(A[b].style.left,z,!0),F=l(A[b].style.width,z)-1}if(!isNaN(1*F)){var $=d(A[b].style.top),X=d(A[b].style.height),te=A[b].className.split(" ")[0].replace("dhx_cal_","");if(te!=="dhx_tooltip_line"){var G=e.getEvent(A[b].getAttribute(e.config.event_attribute));if(G){D=G._sday;var W=G._sweek,J=G._length||0;if(e._mode=="month")X=parseInt(A[b].offsetHeight,10),$=parseInt(A[b].style.top,10)-e.xy.month_head_height,D=u(A[b],D),W=f(A[b],W);else if(e.matrix&&e.matrix[e._mode]){D=0,W=A[b].parentNode.parentNode.parentNode.rowIndex;var Z=n;n=A[b].parentNode.offsetHeight,$=d(A[b].style.top),$-=.2*$,n=Z}else{if(A[b].parentNode==e._els.dhx_cal_data[0])continue;var fe=e._els.dhx_cal_data[0].childNodes[0],Ve=parseFloat(fe.className.indexOf("dhx_scale_holder")!=-1?fe.style.left:0);P+=o(A[b].parentNode.style.left,Ve)}M+=`
<event week='`+W+"' day='"+D+"' type='"+te+"' x='"+P+"' y='"+$+"' width='"+F+"' height='"+X+"' len='"+J+"'>",te=="event"?(M+="<header><![CDATA["+r(A[b].childNodes[1].innerHTML)+"]]></header>",C=N?c(A[b].childNodes[2],"color"):"",M+="<body backgroundColor='"+(R=N?c(A[b].childNodes[2],"backgroundColor"):"")+"' color='"+C+"'><![CDATA["+r(A[b].childNodes[2].innerHTML)+"]]></body>"):(C=N?c(A[b],"color"):"",M+="<body backgroundColor='"+(R=N?c(A[b],"backgroundColor"):"")+"' color='"+C+"'><![CDATA["+r(A[b].innerHTML)+"]]></body>"),M+="</event>"}}}}return M}function S(N,M,A,m,b,k){var E=!1;m=="fullcolor"&&(E=!0,m="color"),m=m||"color";var D,C="";if(N){var R=e._date,P=e._mode;M=e.date[A+"_start"](M),M=e.date["get_"+A+"_end"]?e.date["get_"+A+"_end"](M):e.date.add(M,1,A),C=g("pages",m,b,k);for(var F=new Date(N);+F<+M;F=this.date.add(F,1,A))this.setCurrentView(F,A),C+=((D="page")?"<"+D+">":"")+h().replace("–","-")+x(E)+y("page");C+=y("pages"),this.setCurrentView(R,P)}else C=g("data",m,b,k)+h().replace("–","-")+x(E)+y("data");return C}function O(N,M,A,m,b,k,E){(function(D,C){var R=e.uid(),P=document.createElement("div");P.style.display="none",document.body.appendChild(P),P.innerHTML='<form id="'+R+'" method="post" target="_blank" action="'+C+'" accept-charset="utf-8" enctype="application/x-www-form-urlencoded"><input type="hidden" name="mycoolxmlbody"/> </form>',document.getElementById(R).firstChild.value=encodeURIComponent(D),document.getElementById(R).submit(),P.parentNode.removeChild(P)})(typeof b=="object"?function(D){for(var C="<data>",R=0;R<D.length;R++)C+=D[R].source.getPDFData(D[R].start,D[R].end,D[R].view,D[R].mode,D[R].header,D[R].footer);return C+="</data>",C}(b):S.apply(this,[N,M,A,b,k,E]),m)}e.getPDFData=S,e.toPDF=function(N,M,A,m){return O.apply(this,[null,null,null,N,M,A,m])},e.toPDFRange=function(N,M,A,m,b,k,E){return typeof N=="string"&&(N=e.templates.api_date(N),M=e.templates.api_date(M)),O.apply(this,arguments)}},quick_info:function(e){e.config.icons_select=["icon_form","icon_delete"],e.config.details_on_create=!0,e.config.show_quick_info=!0,e.xy.menu_width=0;let t=null;function n(i){const r=i.getBoundingClientRect(),o=e.$container.getBoundingClientRect().bottom-r.bottom;o<0&&(i.style.top=`${parseFloat(i.style.top)+o}px`)}function a(i){let r=0,o=0,l=i;for(;l&&l!=e._obj;)r+=l.offsetLeft,o+=l.offsetTop-l.scrollTop,l=l.offsetParent;return l?{left:r,top:o,dx:r+i.offsetWidth/2>e._x/2?1:0,dy:o+i.offsetHeight/2>e._y/2?1:0,width:i.offsetWidth,height:i.offsetHeight}:0}e.attachEvent("onSchedulerReady",function(){const i=e.$container;i._$quickInfoHandler||(i._$quickInfoHandler=!0,e.event(i,"mousedown",function(r){const o=r.target.closest(`[${e.config.event_attribute}]`);o&&(t={id:o.getAttribute(e.config.event_attribute),position:a(o)})}),e.attachEvent("onDestroy",()=>{delete i._$quickInfoHandler}))}),e.attachEvent("onClick",function(i){if(e.config.show_quick_info)return e.showQuickInfo(i),!0}),function(){for(var i=["onEmptyClick","onViewChange","onLightbox","onBeforeEventDelete","onBeforeDrag"],r=function(){return e.hideQuickInfo(!0),!0},o=0;o<i.length;o++)e.attachEvent(i[o],r)}(),e.templates.quick_info_title=function(i,r,o){return o.text.substr(0,50)},e.templates.quick_info_content=function(i,r,o){return o.details||""},e.templates.quick_info_date=function(i,r,o){return e.isOneDayEvent(o)&&e.config.rtl?e.templates.day_date(i,r,o)+" "+e.templates.event_header(r,i,o):e.isOneDayEvent(o)?e.templates.day_date(i,r,o)+" "+e.templates.event_header(i,r,o):e.config.rtl?e.templates.week_date(r,i,o):e.templates.week_date(i,r,o)},e.showQuickInfo=function(i){if(i==this._quick_info_box_id||(this.hideQuickInfo(!0),this.callEvent("onBeforeQuickInfo",[i])===!1))return;let r;r=t&&t.id==i?t.position:this._get_event_counter_part(i),r&&(this._quick_info_box=this._init_quick_info(r),this._fill_quick_data(i),this._show_quick_info(r),this.callEvent("onQuickInfo",[i]))},function(){function i(r){r=r||"";var o,l=parseFloat(r),s=r.match(/m?s/);switch(s&&(s=s[0]),s){case"s":o=1e3*l;break;case"ms":o=l;break;default:o=0}return o}e.hideQuickInfo=function(r){var o=this._quick_info_box,l=this._quick_info_box_id;if(this._quick_info_box_id=0,o&&o.parentNode){var s=o.offsetWidth;if(e.config.quick_info_detached)return this.callEvent("onAfterQuickInfo",[l]),o.parentNode.removeChild(o);if(o.style.right=="auto"?o.style.left=-s+"px":o.style.right=-s+"px",r)o.parentNode.removeChild(o);else{var d;window.getComputedStyle?d=window.getComputedStyle(o,null):o.currentStyle&&(d=o.currentStyle);var c=i(d["transition-delay"])+i(d["transition-duration"]);setTimeout(function(){o.parentNode&&o.parentNode.removeChild(o)},c)}this.callEvent("onAfterQuickInfo",[l])}}}(),e.event(window,"keydown",function(i){i.keyCode==27&&e.hideQuickInfo()}),e._show_quick_info=function(i){var r=e._quick_info_box;e._obj.appendChild(r);var o=r.offsetWidth,l=r.offsetHeight;if(e.config.quick_info_detached){var s=i.left-i.dx*(o-i.width);e.getView()&&e.getView()._x_scroll&&(e.config.rtl?s+=e.getView()._x_scroll:s-=e.getView()._x_scroll),s+o>window.innerWidth&&(s=window.innerWidth-o),s=Math.max(0,s),r.style.left=s+"px",r.style.top=i.top-(i.dy?l:-i.height)+"px"}else{const d=e.$container.querySelector(".dhx_cal_data").offsetTop;r.style.top=d+20+"px",i.dx==1?(r.style.right="auto",r.style.left=-o+"px",setTimeout(function(){r.style.left="-10px"},1)):(r.style.left="auto",r.style.right=-o+"px",setTimeout(function(){r.style.right="-10px"},1)),r.className=r.className.replace(" dhx_qi_left","").replace(" dhx_qi_right","")+" dhx_qi_"+(i.dx==1?"left":"right")}r.ontransitionend=()=>{n(r),r.ontransitionend=null},setTimeout(()=>{n(r)},1)},e.attachEvent("onTemplatesReady",function(){if(e.hideQuickInfo(),this._quick_info_box){var i=this._quick_info_box;i.parentNode&&i.parentNode.removeChild(i),this._quick_info_box=null}}),e._quick_info_onscroll_handler=function(i){e.hideQuickInfo()},e._init_quick_info=function(){if(!this._quick_info_box){var i=this._quick_info_box=document.createElement("div");this._waiAria.quickInfoAttr(i),i.className="dhx_cal_quick_info",e.$testmode&&(i.className+=" dhx_no_animate"),e.config.rtl&&(i.className+=" dhx_quick_info_rtl");var r=`
		<div class="dhx_cal_qi_tcontrols">
			<a class="dhx_cal_qi_close_btn scheduler_icon close"></a>
		</div>
		<div class="dhx_cal_qi_title" ${this._waiAria.quickInfoHeaderAttrString()}>
				
				<div class="dhx_cal_qi_tcontent"></div>
				<div class="dhx_cal_qi_tdate"></div>
			</div>
			<div class="dhx_cal_qi_content"></div>`;r+='<div class="dhx_cal_qi_controls">';for(var o=e.config.icons_select,l=0;l<o.length;l++)r+=`<div ${this._waiAria.quickInfoButtonAttrString(this.locale.labels[o[l]])} class="dhx_qi_big_icon ${o[l]}" title="${e.locale.labels[o[l]]}">
				<div class='dhx_menu_icon ${o[l]}'></div><div>${e.locale.labels[o[l]]}</div></div>`;r+="</div>",i.innerHTML=r,e.event(i,"click",function(s){e._qi_button_click(s.target||s.srcElement)}),e.config.quick_info_detached&&(e._detachDomEvent(e._els.dhx_cal_data[0],"scroll",e._quick_info_onscroll_handler),e.event(e._els.dhx_cal_data[0],"scroll",e._quick_info_onscroll_handler))}return this._quick_info_box},e._qi_button_click=function(i){var r=e._quick_info_box;if(i&&i!=r)if(i.closest(".dhx_cal_qi_close_btn"))e.hideQuickInfo();else{var o=e._getClassName(i);if(o.indexOf("_icon")!=-1){var l=e._quick_info_box_id;e._click.buttons[o.split(" ")[1].replace("icon_","")](l)}else e._qi_button_click(i.parentNode)}},e._get_event_counter_part=function(i){return a(e.getRenderedEvent(i))},e._fill_quick_data=function(i){var r=e.getEvent(i),o=e._quick_info_box;e._quick_info_box_id=i;var l={content:e.templates.quick_info_title(r.start_date,r.end_date,r),date:e.templates.quick_info_date(r.start_date,r.end_date,r)};o.querySelector(".dhx_cal_qi_tcontent").innerHTML=`<span>${l.content}</span>`,o.querySelector(".dhx_cal_qi_tdate").innerHTML=l.date,e._waiAria.quickInfoHeader(o,[l.content,l.date].join(" "));var s=o.querySelector(".dhx_cal_qi_content");const d=e.templates.quick_info_content(r.start_date,r.end_date,r);d?(s.classList.remove("dhx_hidden"),s.innerHTML=d):s.classList.add("dhx_hidden")}},readonly:function(e){e.attachEvent("onTemplatesReady",function(){var t;e.form_blocks.recurring&&(t=e.form_blocks.recurring.set_value);var n=e.config.buttons_left.slice(),a=e.config.buttons_right.slice();function i(l,s,d,c){for(var u=s.getElementsByTagName(l),f=d.getElementsByTagName(l),y=f.length-1;y>=0;y--)if(d=f[y],c){var g=document.createElement("span");g.className="dhx_text_disabled",g.innerHTML=c(u[y]),d.parentNode.insertBefore(g,d),d.parentNode.removeChild(d)}else d.disabled=!0,s.checked&&(d.checked=!0)}e.attachEvent("onBeforeLightbox",function(l){if(this.config.readonly_form||this.getEvent(l).readonly?this.config.readonly_active=!0:(this.config.readonly_active=!1,e.config.buttons_left=n.slice(),e.config.buttons_right=a.slice(),e.form_blocks.recurring&&(e.form_blocks.recurring.set_value=t)),this.config.readonly_active)for(var s=["dhx_delete_btn","dhx_save_btn"],d=[e.config.buttons_left,e.config.buttons_right],c=0;c<s.length;c++)for(var u=s[c],f=0;f<d.length;f++){for(var y=d[f],g=-1,h=0;h<y.length;h++)if(y[h]==u){g=h;break}g!=-1&&y.splice(g,1)}return this.resetLightbox(),!0});var r=e._fill_lightbox;e._fill_lightbox=function(){var l=this.getLightbox();this.config.readonly_active&&(l.style.visibility="hidden",l.style.display="block");var s=r.apply(this,arguments);if(this.config.readonly_active&&(l.style.visibility="",l.style.display="none"),this.config.readonly_active){var d=this.getLightbox(),c=this._lightbox_r=d.cloneNode(!0);c.id=e.uid(),c.className+=" dhx_cal_light_readonly",i("textarea",d,c,function(u){return u.value}),i("input",d,c,!1),i("select",d,c,function(u){return u.options.length?u.options[Math.max(u.selectedIndex||0,0)].text:""}),d.parentNode.insertBefore(c,d),this.showCover(c),e._lightbox&&e._lightbox.parentNode.removeChild(e._lightbox),this._lightbox=c,e.config.drag_lightbox&&e.event(c.firstChild,"mousedown",e._ready_to_dnd),e._init_lightbox_events(),this.setLightboxSize()}return s};var o=e.hide_lightbox;e.hide_lightbox=function(){return this._lightbox_r&&(this._lightbox_r.parentNode.removeChild(this._lightbox_r),this._lightbox_r=this._lightbox=null),o.apply(this,arguments)}})},recurring:function(e){function t(m){return new Date(m.getFullYear(),m.getMonth(),m.getDate(),m.getHours(),m.getMinutes(),m.getSeconds(),0)}function n(m){return!!m.rrule&&!m.recurring_event_id}function a(m){return new Date(Date.UTC(m.getFullYear(),m.getMonth(),m.getDate(),m.getHours(),m.getMinutes(),m.getSeconds()))}function i(m){m.rrule.includes(";UNTIL=")&&(m.rrule=m.rrule.split(";UNTIL=")[0]);let b=Cn(`RRULE:${m.rrule};UNTIL=${h(m._end_date||m.end_date)}`,{dtstart:m.start_date}),k=new q(b.origOptions).toString().replace("RRULE:","");k=k.split(`
`)[1],m.rrule=k}function r(m,b){b||(b=e.getEvent(m));let k=b.rrule.split(";"),E=[];for(let D=0;D<k.length;D++){let C=k[D].split("="),R=C[0],P=C[1];(R!=="BYDAY"||b.rrule.includes("WEEKLY")&&P.length>3)&&(E.push(R),E.push("="),E.push(P),E.push(";"))}E.pop(),b.rrule=E.join("")}var o;function l(m,b){m._end_date=m.end_date,e._isExceptionFirstOccurrence(b)?(m.start_date=b.start_date,m.end_date=new Date(b.start_date.valueOf()+1e3*m.duration),m._start_date=b.original_start,m._modified=!0):(m.end_date=new Date(b.start_date.valueOf()+1e3*m.duration),m.start_date=b.start_date,m._firstOccurrence=!0),m._thisAndFollowing=b.id}function s(m,b,k,E){const D=k._modified?E.id:m;e._events[D]={...E,text:b.text,duration:b.duration,start_date:b.start_date,rrule:b.rrule,end_date:E._end_date,_start_date:E.start_date,_thisAndFollowing:null,_end_date:null},k._modified&&delete e._events[m],e.callEvent("onEventChanged",[e._events[D].id,e._events[D]])}function d(m){for(const b in e._events)e._events[b].id==m.id&&delete e._events[b]}function c(m,b){for(let k in e._events){let E=e._events[k];(E.recurring_event_id==m||e._is_virtual_event(E.id)&&E.id.split("#")[0]==m)&&(E.text=b.text,e.updateEvent(E.id))}}function u(m,b){let k=m,E=new Date(b.original_start).valueOf();m=String(k).split("#")||b._pid_time||E;let D=e.uid(),C=m[1]?m[1]:b._pid_time||E,R=e._copy_event(b);R.id=D,R.recurring_event_id=b.recurring_event_id||m[0],R.original_start=new Date(Number(C)),R.deleted=!0,e.addEvent(R)}function f(){for(const m in e._events)m==="$dnd_recurring_placeholder"&&delete e._events[m];e.render()}function y(m,b){const k=e.locale;m.find(D=>D.checked)||(m[0].checked=!0);const E=m.reduce((D,C)=>(D[C.value]=C.callback,D),{});e.modalbox({text:`<div class="dhx_edit_recurrence_options">
				${m.map(D=>`<label class="dhx_styled_radio">
					<input type="radio" value="${D.value}" name="option" ${D.checked?"checked":""}>
					${D.label}
				</label>`).join("")}
			</div>`,type:"recurring_mode",title:k.labels.confirm_recurring,width:"auto",position:"middle",buttons:[{label:k.labels.message_ok,value:"ok",css:"rec_ok"},{label:k.labels.message_cancel,value:"cancel"}],callback:function(D,C){if(b&&b(D,C),D==="cancel")return;const R=C.target.closest(".scheduler_modal_box").querySelector("input[type='radio']:checked");let P;R&&(P=R.value),P&&E[P]()}})}function g(){const m={};for(const b in e._events){const k=e._events[b];k.recurring_event_id&&k.original_start&&(m[k.recurring_event_id]||(m[k.recurring_event_id]={}),m[k.recurring_event_id][k.original_start.valueOf()]=k)}return m}e._isFollowing=function(m){let b=e.getEvent(m);return!(!b||!b._thisAndFollowing)},e._isFirstOccurrence=function(m){if(e._is_virtual_event(m.id)){let b=m.id.split("#")[0];return e.getEvent(b).start_date.valueOf()===m.start_date.valueOf()}},e._isExceptionFirstOccurrence=function(m){if(e._is_modified_occurrence(m)){let b=m.recurring_event_id,k=e.getEvent(b);return!(!m.original_start||!m.original_start.valueOf()||m.original_start.valueOf()!==k.start_date.valueOf())}},e._rec_temp=[],e._rec_markers_pull={},e._rec_markers={},e._add_rec_marker=function(m,b){m._pid_time=b,this._rec_markers[m.id]=m,this._rec_markers_pull[m.event_pid]||(this._rec_markers_pull[m.event_pid]={}),this._rec_markers_pull[m.event_pid][b]=m},e._get_rec_marker=function(m,b){let k=this._rec_markers_pull[b];return k?k[m]:null},e._get_rec_markers=function(m){return this._rec_markers_pull[m]||[]},o=e.addEvent,e.addEvent=function(m,b,k,E,D){var C=o.apply(this,arguments);if(C&&e.getEvent(C)){var R=e.getEvent(C);R.start_date&&(R.start_date=t(R.start_date)),R.end_date&&(R.end_date=t(R.end_date))}return C},e.attachEvent("onEventLoading",function(m){return m.original_start&&!m.original_start.getFullYear&&(m.original_start=e.templates.parse_date(m.original_start)),!0}),e.attachEvent("onEventIdChange",function(m,b){if(!this._ignore_call){this._ignore_call=!0,e._rec_markers[m]&&(e._rec_markers[b]=e._rec_markers[m],delete e._rec_markers[m]),e._rec_markers_pull[m]&&(e._rec_markers_pull[b]=e._rec_markers_pull[m],delete e._rec_markers_pull[m]);for(var k=0;k<this._rec_temp.length;k++){var E=this._rec_temp[k];this._is_virtual_event(E.id)&&E.id.split("#")[0]==m&&(E.recurring_event_id=b,this.changeEventId(E.id,b+"#"+E.id.split("#")[1]))}for(var k in this._rec_markers)(E=this._rec_markers[k]).recurring_event_id==m&&(E.recurring_event_id=b,E._pid_changed=!0);var D=e._rec_markers[b];D&&D._pid_changed&&(delete D._pid_changed,setTimeout(function(){if(e.$destroyed)return!0;e.callEvent("onEventChanged",[b,e.getEvent(b)])},1)),delete this._ignore_call}}),e.attachEvent("onConfirmedBeforeEventDelete",function(m){var b=this.getEvent(m);if(this._is_virtual_event(m)||this._is_modified_occurrence(b)&&!function(D){return!!D.deleted}(b))u(m,b);else{n(b)&&this._lightbox_id&&this._roll_back_dates(b);var k=this._get_rec_markers(m);for(var E in k)k.hasOwnProperty(E)&&(m=k[E].id,this.getEvent(m)&&this.deleteEvent(m,!0))}return!0}),e.attachEvent("onEventDeleted",function(m,b){!this._is_virtual_event(m)&&this._is_modified_occurrence(b)&&(e._events[m]||(b.deleted=!0,this.setEvent(m,b),e.render()))}),e.attachEvent("onBeforeEventChanged",function(m,b,k,E){return!(!k&&m&&(e._is_virtual_event(m.id)||e._is_modified_occurrence(m))&&(E.start_date.getDate()!==m.start_date.getDate()?m._beforeEventChangedFlag="edit":m._beforeEventChangedFlag="ask",!e.config.collision_limit||e.checkCollision(m)))||(e._events.$dnd_recurring_placeholder=e._lame_clone(m),e._showRequiredModalBox(m.id,m._beforeEventChangedFlag),!1)}),e.attachEvent("onEventChanged",function(m,b){if(this._loading)return!0;let k=this.getEvent(m);if(this._is_virtual_event(m))(function(P){let F=P.id.split("#"),z=e.uid();e._not_render=!0;let $=e._copy_event(P);$.id=z,$.recurring_event_id=F[0];let X=F[1];$.original_start=new Date(Number(X)),e._add_rec_marker($,X),e.addEvent($),e._not_render=!1})(k);else{k.start_date&&(k.start_date=t(k.start_date)),k.end_date&&(k.end_date=t(k.end_date)),n(k)&&this._lightbox_id&&(k._removeFollowing||this._isFollowing(m)?k._removeFollowing=null:this._roll_back_dates(k));var E=this._get_rec_markers(m);for(var D in E)E.hasOwnProperty(D)&&(delete this._rec_markers[E[D].id],this.deleteEvent(E[D].id,!0));delete this._rec_markers_pull[m];for(var C=!1,R=0;R<this._rendered.length;R++)this._rendered[R].getAttribute(this.config.event_attribute)==m&&(C=!0);C||(this._select_id=null)}return f(),!0}),e.attachEvent("onEventAdded",function(m){if(!this._loading){var b=this.getEvent(m);n(b)&&this._roll_back_dates(b)}return!0}),e.attachEvent("onEventSave",function(m,b,k){let E=this.getEvent(m),D=e._lame_clone(E),C=b.rrule;if(E&&n(E)&&!k&&this._isFollowing(m)){if(E._removeFollowing){if(e.getEvent(E._thisAndFollowing)&&(E._firstOccurrence||E._modified))return e.hideLightbox(),e.deleteEvent(E.id),!1;if(E.end_date=new Date(E.start_date.valueOf()-1e3),E._end_date=E._shorten_end_date,E.start_date=E._start_date,E._shorten=!0,i(E),e.callEvent("onEventChanged",[E.id,E]),e.getEvent(E._thisAndFollowing))for(const R in e._events){let P=e._events[R];P.recurring_event_id===m&&P.start_date.valueOf()>D.start_date.valueOf()&&u(P.id,P)}return e.hideLightbox(),!1}{let R=e.getEvent(E._thisAndFollowing);if(R&&E._firstOccurrence)for(const P in e._events)e._events[P].id==E.id&&s(P,b,E,D);else if(R&&E._modified)for(const P in e._events){let F=e._events[P];F.recurring_event_id==m&&F.id==D._thisAndFollowing&&s(P,b,E,D)}else{e._is_modified_occurrence(R)&&d(R),E.end_date=E._shorten_end_date,E._end_date=E._shorten_end_date,E.start_date=E._start_date,E._shorten=!0,i(E),e.callEvent("onEventChanged",[E.id,E]);let P={...D};P.text=b.text,P.duration=b.duration,P.rrule=C,P._start_date=null,P.id=e.uid(),e.addEvent(P.start_date,P.end_date,P.text,P.id,P)}return k||c(m,b),e.hideLightbox(),!1}}return k||c(m,b),D._ocr&&D._beforeEventChangedFlag?(E.start_date=D.start_date,E.end_date=D.end_date,E._start_date=D._start_date,E._end_date=D._end_date,e.updateEvent(E.id),!0):(this._select_id=null,f(),!0)}),e.attachEvent("onEventCreated",function(m){var b=this.getEvent(m);return n(b)||function(k){k.rrule="",k.original_start=null,k.recurring_event_id=null,k.duration=null,k.deleted=null}(b),!0}),e.attachEvent("onEventCancel",function(m){var b=this.getEvent(m);n(b)&&(this._roll_back_dates(b),this.render_view_data()),f()}),e._roll_back_dates=function(m){m.start_date&&(m.start_date=t(m.start_date)),m.end_date&&(m.end_date=t(m.end_date)),m._end_date&&(m._shorten||(m.duration=Math.round((m.end_date.valueOf()-m.start_date.valueOf())/1e3)),m.end_date=m._end_date),m._start_date&&(m.start_date.setMonth(0),m.start_date.setDate(m._start_date.getDate()),m.start_date.setMonth(m._start_date.getMonth()),m.start_date.setFullYear(m._start_date.getFullYear()),this._isFollowing(m.id)&&(m.start_date.setHours(m._start_date.getHours()),m.start_date.setMinutes(m._start_date.getMinutes()),m.start_date.setSeconds(m._start_date.getSeconds()))),m._thisAndFollowing=null,m._shorten_end_date&&(m._shorten_end_date=null),m._removeFollowing&&(m._removeFollowing=null),m._firstOccurrence&&(m._firstOccurrence=null),m._modified&&(m._modified=null)},e._is_virtual_event=function(m){return m.toString().indexOf("#")!=-1},e._is_modified_occurrence=function(m){return m.recurring_event_id&&m.recurring_event_id!="0"},e.showLightbox_rec=e.showLightbox,e.showLightbox=function(m){const b=this.locale;let k=e.config.lightbox_recurring,E=this.getEvent(m),D=E.recurring_event_id,C=this._is_virtual_event(m);C&&(D=m.split("#")[0]);const R=function(P,F){const z=e.getEvent(P),$=e.getEvent(D),X=e.getView();if(X&&z[X.y_property]&&($[X.y_property]=z[X.y_property]),X&&z[X.property]&&($[X.property]=z[X.property]),F==="Occurrence")return e.showLightbox_rec(P);if(F==="Following"){if(e._isExceptionFirstOccurrence(z)||e._isFirstOccurrence(z))return l($,z),e.showLightbox_rec(D);{$._end_date=$.end_date;const te=z.original_start||z.start_date;return $._shorten_end_date=new Date(te.valueOf()-1e3),$.end_date=new Date(z.start_date.valueOf()+1e3*$.duration),$._start_date=$.start_date,$.start_date=z.start_date,$._thisAndFollowing=z.id,E._beforeEventChangedFlag&&($._beforeEventChangedFlag=E._beforeEventChangedFlag,$._shorten_end_date=new Date(te.valueOf()-1e3)),e.showLightbox_rec(D)}}if(F==="AllEvents"){if(e._isExceptionFirstOccurrence(z)||e._isFirstOccurrence(z))return l($,z),e.showLightbox_rec(D);const te=new Date($.start_date);return $._end_date=$.end_date,$._start_date=te,$.start_date.setHours(z.start_date.getHours()),$.start_date.setMinutes(z.start_date.getMinutes()),$.start_date.setSeconds(z.start_date.getSeconds()),$.end_date=new Date($.start_date.valueOf()+1e3*$.duration),$._thisAndFollowing=null,e.showLightbox_rec(D)}};if((D||1*D==0)&&n(E))return R(m,"AllEvents");if(!D||D==="0"||!b.labels.confirm_recurring||k=="instance"||k=="series"&&!C)return this.showLightbox_rec(m);if(k==="ask"){const P=e.locale;y([{value:"Occurrence",label:P.labels.button_edit_occurrence,checked:!0,callback:()=>R(m,"Occurrence")},{value:"Following",label:P.labels.button_edit_occurrence_and_following,callback:()=>R(m,"Following")},{value:"AllEvents",label:P.labels.button_edit_series,callback:()=>R(m,"AllEvents")}])}},e._showRequiredModalBox=function(m,b){let k;const E=e.locale;let D=e.getEvent(m),C=D.recurring_event_id;e._is_virtual_event(D.id)&&(C=D.id.split("#")[0]);let R=e.getEvent(C);const P=e.getView();let F,z,$=e._lame_clone(R);P&&D[P.y_property]&&($[P.y_property]=D[P.y_property]),P&&D[P.property]&&($[P.property]=D[P.property]),D&&D._beforeEventChangedFlag&&(F=D.start_date,z=D.end_date);const X={value:"AllEvents",label:E.labels.button_edit_series,callback:()=>function(W){let J=e._lame_clone(W);if(e._isExceptionFirstOccurrence(J)&&d(J),z&&F&&($.start_date.setHours(F.getHours()),$.start_date.setMinutes(F.getMinutes()),$.start_date.setSeconds(F.getSeconds()),$.duration=(+z-+F)/1e3),$._beforeEventChangedFlag=W._beforeEventChangedFlag,$._thisAndFollowing=null,!e.config.collision_limit||e.checkCollision($))for(const Z in e._events)e._events[Z].id==$.id&&(e._events[Z]={...$},e.callEvent("onEventChanged",[e._events[Z].id,e._events[Z]]))}(D)},te={value:"Following",label:E.labels.button_edit_occurrence_and_following,callback:()=>function(W){let J=e._lame_clone(W);if(z&&F&&(W._start_date=W.start_date,W.start_date=F,W.end_date=z),e._isFirstOccurrence(J)||e._isExceptionFirstOccurrence(J)){if(e._isExceptionFirstOccurrence(J)&&d(J),$._start_date=R.start_date,$.start_date=W.start_date,$.duration=(+W.end_date-+W.start_date)/1e3,$._beforeEventChangedFlag=W._beforeEventChangedFlag,$.rrule&&r($.id,$),!e.config.collision_limit||e.checkCollision($))for(const Z in e._events)e._events[Z].id==$.id&&(e._events[Z]={...$},e.callEvent("onEventChanged",[e._events[Z].id,e._events[Z]]))}else{$._end_date=R.end_date;const Z=W.original_start||e.date.date_part(new Date(W._start_date));$._shorten_end_date=new Date(Z.valueOf()-1e3),$.end_date=W.end_date,$._start_date=R.start_date,$.start_date=W.start_date,$._thisAndFollowing=W.id,$.rrule&&r($.id,$);let fe=$.end_date;if($.end_date=$._end_date,!e.config.collision_limit||e.checkCollision($)){$.end_date=fe;for(const Ve in e._events)e._events[Ve].id==$.id&&(e._events[Ve]={...$},e.callEvent("onEventSave",[e._events[Ve].id,e._events[Ve],e._new_event]),e.callEvent("onEventChanged",[e._events[Ve].id,e._events[Ve]]))}}}(D)},G={value:"Occurrence",label:E.labels.button_edit_occurrence,callback:()=>function(W){let J={...R,...e.getEvent("$dnd_recurring_placeholder")};if(z&&F&&(J.start_date=F,J.end_date=z,J._beforeEventChangedFlag=W._beforeEventChangedFlag,J._ocr=!0),!e.config.collision_limit||e.checkCollision(J))for(const Z in e._events){let fe=e._events[Z];Z!=="$dnd_recurring_placeholder"&&fe.id==J.id&&(e._events[Z]={...J},e.callEvent("onEventChanged",[e._events[Z].id,e._events[Z]]))}}(D),checked:!0};k=b==="ask"?[G,te,X]:[G,te],y(k,W=>{W==="cancel"&&f()})},e.get_visible_events_rec=e.get_visible_events,e.get_visible_events=function(m){for(var b=0;b<this._rec_temp.length;b++)delete this._events[this._rec_temp[b].id];this._rec_temp=[];const k=g();var E=this.get_visible_events_rec(m),D=[];for(b=0;b<E.length;b++)E[b].deleted||E[b].recurring_event_id||(n(E[b])?this.repeat_date(E[b],D,void 0,void 0,void 0,void 0,k):D.push(E[b]));return function(C){const R={};return C.forEach(P=>{const F=R[P.id];(!F||F._beforeEventChangedFlag||P._beforeEventChangedFlag)&&(R[P.id]=P)}),Object.values(R)}(D)},function(){var m=e.isOneDayEvent;e.isOneDayEvent=function(k){return!!n(k)||m.call(this,k)};var b=e.updateEvent;e.updateEvent=function(k){var E=e.getEvent(k);E&&n(E)&&!this._is_virtual_event(k)?e.update_view():b.call(this,k)}}();const h=e.date.date_to_str("%Y%m%dT%H%i%s");function p(m){const b=m.getDay(),k=m.getDate();return{dayOfWeek:b,dayNumber:Math.ceil(k/7)}}e.repeat_date=function(m,b,k,E,D,C,R){if(!m.rrule)return;let P=R?R[m.id]:g()[m.id];P||(P={}),E=a(E||new Date(e._min_date.valueOf()-6048e5)),D=a(D||new Date(e._max_date.valueOf()-1e3));const F=a(m.start_date);let z;z=Cn(C?`RRULE:${m.rrule};UNTIL=${h(m.end_date)};COUNT=${C}`:`RRULE:${m.rrule};UNTIL=${h(m.end_date)}`,{dtstart:F});const $=z.between(E,D,!0).map(G=>{const W=(J=G,new Date(J.getUTCFullYear(),J.getUTCMonth(),J.getUTCDate(),J.getUTCHours(),J.getUTCMinutes(),J.getUTCSeconds()));var J;return W.setHours(m.start_date.getHours()),W.setMinutes(m.start_date.getMinutes()),W.setSeconds(m.start_date.getSeconds()),W});let X=0;const te=m.duration;for(let G=0;G<$.length&&!(C&&X>=C);G++){const W=$[G];let J=P[W.valueOf()];if(J){if(J.deleted||J.end_date.valueOf()<e._min_date.valueOf()||!e.filter_event(J.id,J))continue;X++,b.push(J)}else{const Z=e._copy_event(m);if(Z.text=m.text,Z.start_date=W,Z.id=m.id+"#"+Math.ceil(W.valueOf()),Z.end_date=new Date(W.valueOf()+1e3*te),Z.end_date.valueOf()<e._min_date.valueOf()||(Z.end_date=e._fix_daylight_saving_date(Z.start_date,Z.end_date,m,W,Z.end_date),Z._timed=e.isOneDayEvent(Z),!Z._timed&&!e._table_view&&!e.config.multi_day))continue;b.push(Z),k||(e._events[Z.id]=Z,e._rec_temp.push(Z)),X++}}if(P&&$.length==0)for(let G in P){let W=P[G];if(W){if(W.deleted||W.end_date.valueOf()<e._min_date.valueOf()||!e.filter_event(W.id,W))continue;E&&D&&W.start_date<D&&W.end_date>E&&b.push(W)}}},e._fix_daylight_saving_date=function(m,b,k,E,D){var C=m.getTimezoneOffset()-b.getTimezoneOffset();return C?C>0?new Date(E.valueOf()+1e3*k.duration-60*C*1e3):new Date(b.valueOf()-60*C*1e3):new Date(D.valueOf())},e.getRecDates=function(m,b){var k=typeof m=="object"?m:e.getEvent(m),E=[];if(b=b||100,!n(k))return[{start_date:k.start_date,end_date:k.end_date}];if(k.deleted)return[];e.repeat_date(k,E,!0,k.start_date,k.end_date,b);for(var D=[],C=0;C<E.length;C++)E[C].deleted||D.push({start_date:E[C].start_date,end_date:E[C].end_date});return D},e.getEvents=function(m,b){var k=[];const E=g();for(var D in this._events){var C=this._events[D];if(!C.recurring_event_id)if(m&&b&&C.start_date<b&&C.end_date>m)if(n(C)){var R=[];this.repeat_date(C,R,!0,m,b,void 0,E),R.forEach(function(P){P.start_date<b&&P.end_date>m&&k.push(P)})}else this._is_virtual_event(C.id)||k.push(C);else m||b||this._is_virtual_event(C.id)||k.push(C)}return k},e._copy_dummy=function(m){var b=new Date(this.start_date),k=new Date(this.end_date);this.start_date=b,this.end_date=k,this.duration=this.rrule=null},e.config.include_end_by=!1,e.config.lightbox_recurring="ask",e.config.recurring_workdays=[q.MO.weekday,q.TU.weekday,q.WE.weekday,q.TH.weekday,q.FR.weekday],e.config.repeat_date="%m.%d.%Y",e.config.lightbox.sections=[{name:"description",map_to:"text",type:"textarea",focus:!0},{name:"recurring",type:"recurring",map_to:"rrule"},{name:"time",height:72,type:"time",map_to:"auto"}],e.attachEvent("onClearAll",function(){e._rec_markers={},e._rec_markers_pull={},e._rec_temp=[]});const v={0:"SU",1:"MO",2:"TU",3:"WE",4:"TH",5:"FR",6:"SA"},x={0:1,1:2,2:3,3:4,4:5,5:6,6:0};function S(m,b){const k=m.querySelector("[name='repeat_interval_value']");k&&(k.value=(b?b.interval:1)||1)}function O(m){switch(m){case 1:case 31:return`${m}st`;case 2:return`${m}nd`;case 3:return`${m}rd`;default:return`${m}th`}}e.templates.repeat_monthly_date=function(m,b){return`Every ${O(m.getDate())}`},e.templates.repeat_monthly_weekday=function(m,b){const k=p(m);return`Every ${O(k.dayNumber)} ${e.locale.date.day_full[k.dayOfWeek]}`},e.templates.repeat_yearly_month_date=function(m,b){const k=m.getDate(),E=e.locale.date.month_full[m.getMonth()];return`Every ${O(k)} day of ${E}`},e.templates.repeat_yearly_month_weekday=function(m,b){const k=p(m),E=e.locale.date.month_full[m.getMonth()];return`Every ${O(k.dayNumber)} ${e.locale.date.day_full[k.dayOfWeek]} of ${E}`};const N={MONTHLY:function(m){return{rrule:{freq:q.MONTHLY,interval:1,bymonthday:m.start.getDate()},until:new Date(9999,1,1)}},WEEKLY:function(m){let b=m.start.getDay()-1;return b==-1&&(b=6),{rrule:{freq:q.WEEKLY,interval:1,byweekday:[b]},until:new Date(9999,1,1)}},DAILY:function(m){return{rrule:{freq:q.DAILY,interval:1},until:new Date(9999,1,1)}},YEARLY:function(m){return{rrule:{freq:q.YEARLY,bymonth:m.start.getMonth()+1,interval:1,bymonthday:m.start.getDate()},until:new Date(9999,1,1)}},WORKDAYS:function(m){return{rrule:{freq:q.WEEKLY,interval:1,byweekday:e.config.recurring_workdays},until:new Date(9999,1,1)}},CUSTOM:function(m,b){const k={},E=b.querySelector('[name="repeat_interval_unit"]').value,D=Math.max(1,b.querySelector('[name="repeat_interval_value"]').value),C=b.querySelector('[name="dhx_custom_month_option"]')?b.querySelector('[name="dhx_custom_month_option"]').value:null,R=b.querySelector('[name="dhx_custom_year_option"]')?b.querySelector('[name="dhx_custom_year_option"]').value:null;let P,F;switch(k.interval=D,E){case"DAILY":k.freq=q.DAILY;break;case"WEEKLY":k.freq=q.WEEKLY,P=[],b.querySelectorAll('.dhx_form_repeat_custom_week [name="week_day"]').forEach(te=>{te.checked&&P.push(te.value)}),k.byweekday=P.map(te=>{switch(te){case"MO":return q.MO.weekday;case"TU":return q.TU.weekday;case"WE":return q.WE.weekday;case"TH":return q.TH.weekday;case"FR":return q.FR.weekday;case"SA":return q.SA.weekday;case"SU":return q.SU.weekday}});break;case"MONTHLY":k.freq=q.MONTHLY,C==="month_date"?k.bymonthday=m.start.getDate():(F=m.start.getDay()-1,F==-1&&(F=6),k.byweekday=[F],k.bysetpos=p(m.start).dayNumber);break;case"YEARLY":k.freq=q.YEARLY,k.bymonth=m.start.getMonth()+1,R=="month_date"?k.bymonthday=m.start.getDate():(F=m.start.getDay()-1,F==-1&&(F=6),k.byweekday=[F],k.bysetpos=p(m.start).dayNumber)}const z=e.date.str_to_date("%Y-%m-%d");let $=new Date(9999,1,1);const X=b.querySelector('[name="dhx_custom_repeat_ends"]');return X&&X.value==="ON"?($=z(b.querySelector('[name="dhx_form_repeat_ends_ondate"]').value),k.until=new Date($)):X&&X.value==="AFTER"&&(k.count=Math.max(1,b.querySelector('[name="dhx_form_repeat_ends_after"]').value)),{rrule:k,until:$}},NEVER:function(){}};function M(m,b,k){(function(E,D){S(E,D)})(m,b),function(E,D,C){if(S(E,D),E.querySelectorAll(".dhx_form_repeat_custom_week input").forEach(R=>R.checked=!1),D&&D.byweekday)D.byweekday.forEach(R=>{const P=x[R.weekday],F=v[P],z=E.querySelector(`.dhx_form_repeat_custom_week input[value="${F}"]`);z&&(z.checked=!0)});else{const R=v[C.start_date.getDay()],P=E.querySelector(`.dhx_form_repeat_custom_week input[value="${R}"]`);P&&(P.checked=!0)}}(m,b,k),function(E,D,C){S(E,D);const R=E.querySelector('.dhx_form_repeat_custom_month [value="month_date"]'),P=E.querySelector('.dhx_form_repeat_custom_month [value="month_nth_weekday"]');if(R&&P){R.innerText=e.templates.repeat_monthly_date(C.start_date,C),P.innerText=e.templates.repeat_monthly_weekday(C.start_date,C);const F=E.querySelector('[name="dhx_custom_month_option"]');F&&(F.value=!D||!D.bysetpos||D.byweekday&&D.byweekday.length?"month_nth_weekday":"month_date")}}(m,b,k),function(E,D,C){const R=E.querySelector('.dhx_form_repeat_custom_year [value="month_date"]'),P=E.querySelector('.dhx_form_repeat_custom_year [value="month_nth_weekday"]');R&&P&&(R.innerText=e.templates.repeat_yearly_month_date(C.start_date,C),P.innerText=e.templates.repeat_yearly_month_weekday(C.start_date,C),D&&(!D.bysetpos||D.byweekday&&D.byweekday.length)?E.querySelector('[name="dhx_custom_year_option"]').value="month_nth_weekday":E.querySelector('[name="dhx_custom_year_option"]').value="month_date")}(m,b,k),function(E,D,C){const R=E.querySelector('.dhx_form_repeat_ends_extra [name="dhx_form_repeat_ends_after"]'),P=E.querySelector('.dhx_form_repeat_ends_extra [name="dhx_form_repeat_ends_ondate"]'),F=E.querySelector("[name='dhx_custom_repeat_ends']");if(R&&P&&F){R.value=1;let z=e.date.date_to_str("%Y-%m-%d");e.config.repeat_date_of_end||(e.config.repeat_date_of_end=z(e.date.add(e._currentDate(),30,"day"))),P.value=e.config.repeat_date_of_end,D&&D.count?(F.value="AFTER",R.value=D.count):C._end_date&&C._end_date.getFullYear()!==9999?(F.value="ON",P.value=z(C._end_date)):F.value="NEVER",F.dispatchEvent(new Event("change"))}}(m,b,k)}function A(m){for(let b=0;b<e.config.lightbox.sections.length;b++){let k=e.config.lightbox.sections[b];if(k.type===m)return e.formSection(k.name)}return null}e.form_blocks.recurring={_get_node:function(m){if(typeof m=="string"){let b=e._lightbox.querySelector(`#${m}`);b||(b=document.getElementById(m)),m=b}return m.style.display=="none"&&(m.style.display=""),m},_outer_html:function(m){return m.outerHTML||(b=m,(E=document.createElement("div")).appendChild(b.cloneNode(!0)),k=E.innerHTML,E=null,k);var b,k,E},render:function(m){if(m.form){let k=e.form_blocks.recurring,E=k._get_node(m.form),D=k._outer_html(E);return E.style.display="none",D}let b=e.locale.labels;return`<div class="dhx_form_rrule">
		<div class="dhx_form_repeat_pattern">
			<select>
				<option value="NEVER">${b.repeat_never}</option>
				<option value="DAILY">${b.repeat_daily}</option>
				<option value="WEEKLY">${b.repeat_weekly}</option>
				<option value="MONTHLY">${b.repeat_monthly}</option>
				<option value="YEARLY">${b.repeat_yearly}</option>
				<option value="WORKDAYS">${b.repeat_workdays}</option>
				<option value="CUSTOM">${b.repeat_custom}</option>
			</select>
		</div>
		<div class="dhx_form_repeat_custom dhx_hidden">
			<div class="dhx_form_repeat_custom_interval">
				<input name="repeat_interval_value" type="number" min="1">
				<select name="repeat_interval_unit">
					<option value="DAILY">${b.repeat_freq_day}</option>
					<option value="WEEKLY">${b.repeat_freq_week}</option>
					<option value="MONTHLY">${b.repeat_freq_month}</option>
					<option value="YEARLY">${b.repeat_freq_year}</option>
				</select>
			</div>

			<div class="dhx_form_repeat_custom_additional">
				<div class="dhx_form_repeat_custom_week dhx_hidden">
					<label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="MO" />${b.day_for_recurring[1]}</label>
					<label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="TU" />${b.day_for_recurring[2]}</label>
					<label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="WE" />${b.day_for_recurring[3]}</label>
					<label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="TH" />${b.day_for_recurring[4]}</label>
					<label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="FR" />${b.day_for_recurring[5]}</label>
					<label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="SA" />${b.day_for_recurring[6]}</label>
					<label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="SU" />${b.day_for_recurring[0]}</label>
				</div>

				<div class="dhx_form_repeat_custom_month dhx_hidden">
					<select name="dhx_custom_month_option">
						<option value="month_date"></option>
						<option value="month_nth_weekday"></option>
					</select>
				</div>

				<div class="dhx_form_repeat_custom_year dhx_hidden">
					<select name="dhx_custom_year_option">
						<option value="month_date"></option>
						<option value="month_nth_weekday"></option>
					</select>
				</div>
			</div>

			<div class="dhx_form_repeat_ends">
				<div>${b.repeat_ends}</div>
				<div class="dhx_form_repeat_ends_options">
					<select name="dhx_custom_repeat_ends">
						<option value="NEVER">${b.repeat_never}</option>
						<option value="AFTER">${b.repeat_radio_end2}</option>
						<option value="ON">${b.repeat_on_date}</option>
					</select>
					<div class="dhx_form_repeat_ends_extra">
						<div class="dhx_form_repeat_ends_after dhx_hidden">
							<label><input type="number" min="1" name="dhx_form_repeat_ends_after">${b.repeat_text_occurrences_count}</label>
						</div>
						<div class="dhx_form_repeat_ends_on dhx_hidden">
							<input type="date" name="dhx_form_repeat_ends_ondate">
						</div>
					</div>
				</div>
			</div>

		</div>
	</div>`},_init_set_value:function(m,b,k){function E(F){F&&F.classList.add("dhx_hidden")}function D(F){F&&F.classList.remove("dhx_hidden")}e.form_blocks.recurring._ds={start:k.start_date,end:k.end_date};const C=m.querySelector(".dhx_form_repeat_pattern select");C&&C.addEventListener("change",function(){(function(F){const z=m.querySelector(".dhx_form_repeat_custom");F==="CUSTOM"?D(z):E(z)})(this.value)});const R=m.querySelector(".dhx_form_repeat_custom_interval [name='repeat_interval_unit']");R&&R.addEventListener("change",function(){(function(F){const z={weekly:m.querySelector(".dhx_form_repeat_custom_week"),monthly:m.querySelector(".dhx_form_repeat_custom_month"),yearly:m.querySelector(".dhx_form_repeat_custom_year")};switch(F){case"DAILY":E(z.weekly),E(z.monthly),E(z.yearly);break;case"WEEKLY":D(z.weekly),E(z.monthly),E(z.yearly);break;case"MONTHLY":E(z.weekly),D(z.monthly),E(z.yearly);break;case"YEARLY":E(z.weekly),E(z.monthly),D(z.yearly)}})(this.value)});const P=m.querySelector(".dhx_form_repeat_ends [name='dhx_custom_repeat_ends']");P&&P.addEventListener("change",function(){(function(F){const z={after:m.querySelector(".dhx_form_repeat_ends_extra .dhx_form_repeat_ends_after"),on:m.querySelector(".dhx_form_repeat_ends_extra .dhx_form_repeat_ends_on")};switch(F){case"NEVER":E(z.after),E(z.on);break;case"AFTER":D(z.after),E(z.on);break;case"ON":E(z.after),D(z.on)}})(this.value)}),e._lightbox._rec_init_done=!0},button_click:function(){},set_value:function(m,b,k){let E=e.form_blocks.recurring;e._lightbox._rec_init_done||E._init_set_value(m,b,k),m.open=!k.rrule,m.blocked=this._is_modified_occurrence(k);let D=E._ds;if(D.start=k.start_date,D.end=k._end_date,k.rrule){const R=Cn(k.rrule);M(m,R.origOptions,k);const P=function(F,z){const $=F.options,X=$.until||z;return $.count||X&&X.getFullYear()!==9999?"CUSTOM":$.freq!==q.DAILY||$.interval!==1||$.byweekday?$.freq!==q.WEEKLY||$.interval!==1||$.byweekday?$.freq!==q.MONTHLY||$.interval!==1||$.bysetpos?$.freq!==q.YEARLY||$.interval!==1||$.bysetpos?$.freq===q.DAILY&&$.byweekday&&$.byweekday.length===e.config.recurring_workdays.length&&$.byweekday.includes(q.MO)&&$.byweekday.includes(q.TU)&&$.byweekday.includes(q.WE)&&$.byweekday.includes(q.TH)&&$.byweekday.includes(q.FR)?"WORKDAYS":"CUSTOM":"YEARLY":"MONTHLY":"WEEKLY":"DAILY"}(R,k._end_date);if(m.querySelector(".dhx_form_repeat_pattern select").value=P,P==="CUSTOM"){let F;switch(R.origOptions.freq){case q.DAILY:F="DAILY";break;case q.WEEKLY:F="WEEKLY";break;case q.MONTHLY:F="MONTHLY";break;case q.YEARLY:F="YEARLY"}F&&(m.querySelector('[name="repeat_interval_unit"]').value=F,m.querySelector('[name="repeat_interval_unit"]').dispatchEvent(new Event("change")))}}else{M(m,null,k);const R=m.querySelector(".dhx_form_repeat_pattern select");R&&(R.value="NEVER")}const C=m.querySelector(".dhx_form_repeat_pattern select");C&&C.dispatchEvent(new Event("change"))},get_value:function(m,b){const k=m.querySelector(".dhx_form_repeat_pattern select");if(m.blocked||k&&k.value==="NEVER")b.rrule=b.rrule="",b._end_date=b.end_date;else{let E=e.form_blocks.recurring._ds,D={};(function(){let P=e.formSection("time");if(P||(P=A("time")),P||(P=A("calendar_time")),!P)throw new Error(["Can't calculate the recurring rule, the Recurring form block can't find the Time control. Make sure you have the time control in 'scheduler.config.lightbox.sections' config.","You can use either the default time control https://docs.dhtmlx.com/scheduler/time.html, or the datepicker https://docs.dhtmlx.com/scheduler/minicalendar.html, or a custom control. ",'In the latter case, make sure the control is named "time":',"","scheduler.config.lightbox.sections = [",'{name:"time", height:72, type:"YOU CONTROL", map_to:"auto" }];'].join(`
`));return P})().getValue(D),E.start=D.start_date;const C=k?k.value:"CUSTOM",R=N[C](E,m);b.rrule=new q(R.rrule).toString().replace("RRULE:",""),E.end=R.until,b.duration=Math.floor((D.end_date-D.start_date)/1e3),E._start?(b.start_date=new Date(E.start),b._start_date=new Date(E.start),E._start=!1):b._start_date=null,b._end_date=E.end}return b.rrule},focus:function(m){}}},recurring_legacy:function(e){function t(){var r=e.formSection("recurring");if(r||(r=n("recurring")),!r)throw new Error(["Can't locate the Recurring form section.","Make sure that you have the recurring control on the lightbox configuration https://docs.dhtmlx.com/scheduler/recurring_events.html#recurringlightbox ",'and that the recurring control has name "recurring":',"","scheduler.config.lightbox.sections = [",'	{name:"recurring", ... }',"];"].join(`
`));return r}function n(r){for(var o=0;o<e.config.lightbox.sections.length;o++){var l=e.config.lightbox.sections[o];if(l.type===r)return e.formSection(l.name)}return null}function a(r){return new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),0)}var i;e.config.occurrence_timestamp_in_utc=!1,e.config.recurring_workdays=[1,2,3,4,5],e.form_blocks.recurring={_get_node:function(r){if(typeof r=="string"){let o=e._lightbox.querySelector(`#${r}`);o||(o=document.getElementById(r)),r=o}return r.style.display=="none"&&(r.style.display=""),r},_outer_html:function(r){return r.outerHTML||(o=r,(s=document.createElement("div")).appendChild(o.cloneNode(!0)),l=s.innerHTML,s=null,l);var o,l,s},render:function(r){if(r.form){var o=e.form_blocks.recurring,l=o._get_node(r.form),s=o._outer_html(l);return l.style.display="none",s}var d=e.locale.labels;return'<div class="dhx_form_repeat"> <form> <div class="dhx_repeat_left"> <div><label><input class="dhx_repeat_radio" type="radio" name="repeat" value="day" />'+d.repeat_radio_day+'</label></div> <div><label><input class="dhx_repeat_radio" type="radio" name="repeat" value="week"/>'+d.repeat_radio_week+'</label></div> <div><label><input class="dhx_repeat_radio" type="radio" name="repeat" value="month" checked />'+d.repeat_radio_month+'</label></div> <div><label><input class="dhx_repeat_radio" type="radio" name="repeat" value="year" />'+d.repeat_radio_year+'</label></div> </div> <div class="dhx_repeat_divider"></div> <div class="dhx_repeat_center"> <div style="display:none;" id="dhx_repeat_day"> <div><label><input class="dhx_repeat_radio" type="radio" name="day_type" value="d"/>'+d.repeat_radio_day_type+'</label><label><input class="dhx_repeat_text" type="text" name="day_count" value="1" />'+d.repeat_text_day_count+'</label></div> <div><label><input class="dhx_repeat_radio" type="radio" name="day_type" checked value="w"/>'+d.repeat_radio_day_type2+'</label></div> </div> <div style="display:none;" id="dhx_repeat_week"><div><label>'+d.repeat_week+'<input class="dhx_repeat_text" type="text" name="week_count" value="1" /></label><span>'+d.repeat_text_week_count+'</span></div>  <table class="dhx_repeat_days"> <tr> <td><div><label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="1" />'+d.day_for_recurring[1]+'</label></div> <div><label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="4" />'+d.day_for_recurring[4]+'</label></div></td> <td><div><label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="2" />'+d.day_for_recurring[2]+'</label></div> <div><label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="5" />'+d.day_for_recurring[5]+'</label></div></td> <td><div><label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="3" />'+d.day_for_recurring[3]+'</label></div> <div><label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="6" />'+d.day_for_recurring[6]+'</label></div></td> <td><div><label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="0" />'+d.day_for_recurring[0]+'</label></div> </td> </tr> </table> </div> <div id="dhx_repeat_month"> <div><label class = "dhx_repeat_month_label"><input class="dhx_repeat_radio" type="radio" name="month_type" value="d"/>'+d.repeat_radio_month_type+'</label><label><input class="dhx_repeat_text" type="text" name="month_day" value="1" />'+d.repeat_text_month_day+'</label><label><input class="dhx_repeat_text" type="text" name="month_count" value="1" />'+d.repeat_text_month_count+'</label></div> <div><label class = "dhx_repeat_month_label"><input class="dhx_repeat_radio" type="radio" name="month_type" checked value="w"/>'+d.repeat_radio_month_start+'</label><input class="dhx_repeat_text" type="text" name="month_week2" value="1" /><label><select name="month_day2">	<option value="1" selected >'+e.locale.date.day_full[1]+'<option value="2">'+e.locale.date.day_full[2]+'<option value="3">'+e.locale.date.day_full[3]+'<option value="4">'+e.locale.date.day_full[4]+'<option value="5">'+e.locale.date.day_full[5]+'<option value="6">'+e.locale.date.day_full[6]+'<option value="0">'+e.locale.date.day_full[0]+"</select>"+d.repeat_text_month_count2_before+'</label><label><input class="dhx_repeat_text" type="text" name="month_count2" value="1" />'+d.repeat_text_month_count2_after+'</label></div> </div> <div style="display:none;" id="dhx_repeat_year"> <div><label class = "dhx_repeat_year_label"><input class="dhx_repeat_radio" type="radio" name="year_type" value="d"/>'+d.repeat_radio_day_type+'</label><label><input class="dhx_repeat_text" type="text" name="year_day" value="1" />'+d.repeat_text_year_day+'</label><label><select name="year_month"><option value="0" selected >'+d.month_for_recurring[0]+'<option value="1">'+d.month_for_recurring[1]+'<option value="2">'+d.month_for_recurring[2]+'<option value="3">'+d.month_for_recurring[3]+'<option value="4">'+d.month_for_recurring[4]+'<option value="5">'+d.month_for_recurring[5]+'<option value="6">'+d.month_for_recurring[6]+'<option value="7">'+d.month_for_recurring[7]+'<option value="8">'+d.month_for_recurring[8]+'<option value="9">'+d.month_for_recurring[9]+'<option value="10">'+d.month_for_recurring[10]+'<option value="11">'+d.month_for_recurring[11]+"</select>"+d.select_year_month+'</label></div> <div><label class = "dhx_repeat_year_label"><input class="dhx_repeat_radio" type="radio" name="year_type" checked value="w"/>'+d.repeat_year_label+'</label><input class="dhx_repeat_text" type="text" name="year_week2" value="1" /><select name="year_day2"><option value="1" selected >'+e.locale.date.day_full[1]+'<option value="2">'+e.locale.date.day_full[2]+'<option value="3">'+e.locale.date.day_full[3]+'<option value="4">'+e.locale.date.day_full[4]+'<option value="5">'+e.locale.date.day_full[5]+'<option value="6">'+e.locale.date.day_full[6]+'<option value="7">'+e.locale.date.day_full[0]+"</select>"+d.select_year_day2+'<select name="year_month2"><option value="0" selected >'+d.month_for_recurring[0]+'<option value="1">'+d.month_for_recurring[1]+'<option value="2">'+d.month_for_recurring[2]+'<option value="3">'+d.month_for_recurring[3]+'<option value="4">'+d.month_for_recurring[4]+'<option value="5">'+d.month_for_recurring[5]+'<option value="6">'+d.month_for_recurring[6]+'<option value="7">'+d.month_for_recurring[7]+'<option value="8">'+d.month_for_recurring[8]+'<option value="9">'+d.month_for_recurring[9]+'<option value="10">'+d.month_for_recurring[10]+'<option value="11">'+d.month_for_recurring[11]+'</select></div> </div> </div> <div class="dhx_repeat_divider"></div> <div class="dhx_repeat_right"> <div><label><input class="dhx_repeat_radio" type="radio" name="end" checked/>'+d.repeat_radio_end+'</label></div> <div><label><input class="dhx_repeat_radio" type="radio" name="end" />'+d.repeat_radio_end2+'</label><input class="dhx_repeat_text" type="text" name="occurences_count" value="1" />'+d.repeat_text_occurences_count+'</div> <div><label><input class="dhx_repeat_radio" type="radio" name="end" />'+d.repeat_radio_end3+'</label><input class="dhx_repeat_date" type="text" name="date_of_end" value="'+e.config.repeat_date_of_end+'" /></div> </div> </form> </div> </div>'},_ds:{},_get_form_node:function(r,o,l){var s=r[o];if(!s)return null;if(s.nodeName)return s;if(s.length){for(var d=0;d<s.length;d++)if(s[d].value==l)return s[d]}},_get_node_value:function(r,o,l){var s=r[o];if(!s)return"";if(s.length){if(l){for(var d=[],c=0;c<s.length;c++)s[c].checked&&d.push(s[c].value);return d}for(c=0;c<s.length;c++)if(s[c].checked)return s[c].value}return s.value?l?[s.value]:s.value:void 0},_get_node_numeric_value:function(r,o){return 1*e.form_blocks.recurring._get_node_value(r,o)||0},_set_node_value:function(r,o,l){var s=r[o];if(s){if(s.name==o)s.value=l;else if(s.length)for(var d=typeof l=="object",c=0;c<s.length;c++)(d||s[c].value==l)&&(s[c].checked=d?!!l[s[c].value]:!!l)}},_init_set_value:function(r,o,l){var s=e.form_blocks.recurring,d=s._get_node_value,c=s._set_node_value;e.form_blocks.recurring._ds={start:l.start_date,end:l._end_date};var u=e.date.str_to_date(e.config.repeat_date,!1,!0),f=e.date.date_to_str(e.config.repeat_date),y=r.getElementsByTagName("FORM")[0],g={};function h(m){for(var b=0;b<m.length;b++){var k=m[b];if(k.name)if(g[k.name])if(g[k.name].nodeType){var E=g[k.name];g[k.name]=[E,k]}else g[k.name].push(k);else g[k.name]=k}}if(h(y.getElementsByTagName("INPUT")),h(y.getElementsByTagName("SELECT")),!e.config.repeat_date_of_end){var p=e.date.date_to_str(e.config.repeat_date);e.config.repeat_date_of_end=p(e.date.add(e._currentDate(),30,"day"))}c(g,"date_of_end",e.config.repeat_date_of_end);var v=function(m){return e._lightbox.querySelector(`#${m}`)||{style:{}}};function x(){v("dhx_repeat_day").style.display="none",v("dhx_repeat_week").style.display="none",v("dhx_repeat_month").style.display="none",v("dhx_repeat_year").style.display="none",v("dhx_repeat_"+this.value).style.display="",e.setLightboxSize()}function S(m,b){var k=m.end;if(k.length)if(k[0].value&&k[0].value!="on")for(var E=0;E<k.length;E++)k[E].value==b&&(k[E].checked=!0);else{var D=0;switch(b){case"no":D=0;break;case"date_of_end":D=2;break;default:D=1}k[D].checked=!0}else k.value=b}e.form_blocks.recurring._get_repeat_code=function(m){var b=[d(g,"repeat")];for(O[b[0]](b,m);b.length<5;)b.push("");var k="",E=function(D){var C=D.end;if(C.length){for(var R=0;R<C.length;R++)if(C[R].checked)return C[R].value&&C[R].value!="on"?C[R].value:R?R==2?"date_of_end":"occurences_count":"no"}else if(C.value)return C.value;return"no"}(g);return E=="no"?(m.end=new Date(9999,1,1),k="no"):E=="date_of_end"?m.end=function(D){var C=u(D);return e.config.include_end_by&&(C=e.date.add(C,1,"day")),C}(d(g,"date_of_end")):(e.transpose_type(b.join("_")),k=Math.max(1,d(g,"occurences_count")),m.end=e.date["add_"+b.join("_")](new Date(m.start),k+0,{start_date:m.start})||m.start),b.join("_")+"#"+k};var O={month:function(m,b){var k=e.form_blocks.recurring._get_node_value,E=e.form_blocks.recurring._get_node_numeric_value;k(g,"month_type")=="d"?(m.push(Math.max(1,E(g,"month_count"))),b.start.setDate(k(g,"month_day"))):(m.push(Math.max(1,E(g,"month_count2"))),m.push(k(g,"month_day2")),m.push(Math.max(1,E(g,"month_week2"))),e.config.repeat_precise||b.start.setDate(1)),b._start=!0},week:function(m,b){var k=e.form_blocks.recurring._get_node_value,E=e.form_blocks.recurring._get_node_numeric_value;m.push(Math.max(1,E(g,"week_count"))),m.push(""),m.push("");for(var D=[],C=k(g,"week_day",!0),R=b.start.getDay(),P=!1,F=0;F<C.length;F++)D.push(C[F]),P=P||C[F]==R;D.length||(D.push(R),P=!0),D.sort(),e.config.repeat_precise?P||(e.transpose_day_week(b.start,D,1,7),b._start=!0):(b.start=e.date.week_start(b.start),b._start=!0),m.push(D.join(","))},day:function(m){var b=e.form_blocks.recurring._get_node_value,k=e.form_blocks.recurring._get_node_numeric_value;b(g,"day_type")=="d"?m.push(Math.max(1,k(g,"day_count"))):(m.push("week"),m.push(1),m.push(""),m.push(""),m.push(e.config.recurring_workdays.join(",")),m.splice(0,1))},year:function(m,b){var k=e.form_blocks.recurring._get_node_value;k(g,"year_type")=="d"?(m.push("1"),b.start.setMonth(0),b.start.setDate(k(g,"year_day")),b.start.setMonth(k(g,"year_month"))):(m.push("1"),m.push(k(g,"year_day2")),m.push(k(g,"year_week2")),b.start.setDate(1),b.start.setMonth(k(g,"year_month2"))),b._start=!0}},N={week:function(m,b){var k=e.form_blocks.recurring._set_node_value;k(g,"week_count",m[1]);for(var E=m[4].split(","),D={},C=0;C<E.length;C++)D[E[C]]=!0;k(g,"week_day",D)},month:function(m,b){var k=e.form_blocks.recurring._set_node_value;m[2]===""?(k(g,"month_type","d"),k(g,"month_count",m[1]),k(g,"month_day",b.start.getDate())):(k(g,"month_type","w"),k(g,"month_count2",m[1]),k(g,"month_week2",m[3]),k(g,"month_day2",m[2]))},day:function(m,b){var k=e.form_blocks.recurring._set_node_value;k(g,"day_type","d"),k(g,"day_count",m[1])},year:function(m,b){var k=e.form_blocks.recurring._set_node_value;m[2]===""?(k(g,"year_type","d"),k(g,"year_day",b.start.getDate()),k(g,"year_month",b.start.getMonth())):(k(g,"year_type","w"),k(g,"year_week2",m[3]),k(g,"year_day2",m[2]),k(g,"year_month2",b.start.getMonth()))}};e.form_blocks.recurring._set_repeat_code=function(m,b){var k=e.form_blocks.recurring._set_node_value,E=m.split("#");switch(m=E[0].split("_"),N[m[0]](m,b),E[1]){case"no":S(g,"no");break;case"":S(g,"date_of_end");var D=b.end;e.config.include_end_by&&(D=e.date.add(D,-1,"day")),k(g,"date_of_end",f(D));break;default:S(g,"occurences_count"),k(g,"occurences_count",E[1])}k(g,"repeat",m[0]);var C=e.form_blocks.recurring._get_form_node(g,"repeat",m[0]);C.nodeName=="SELECT"?(C.dispatchEvent(new Event("change")),C.dispatchEvent(new MouseEvent("click"))):C.dispatchEvent(new MouseEvent("click"))};for(var M=0;M<y.elements.length;M++){var A=y.elements[M];A.name==="repeat"&&(A.nodeName!="SELECT"||A.$_eventAttached?A.$_eventAttached||(A.$_eventAttached=!0,A.addEventListener("click",x)):(A.$_eventAttached=!0,A.addEventListener("change",x)))}e._lightbox._rec_init_done=!0},set_value:function(r,o,l){var s=e.form_blocks.recurring;e._lightbox._rec_init_done||s._init_set_value(r,o,l),r.open=!l.rec_type,r.blocked=this._is_modified_occurence(l);var d=s._ds;d.start=l.start_date,d.end=l._end_date,s._toggle_block(),o&&s._set_repeat_code(o,d)},get_value:function(r,o){if(r.open){var l=e.form_blocks.recurring._ds,s={};(function(){var d=e.formSection("time");if(d||(d=n("time")),d||(d=n("calendar_time")),!d)throw new Error(["Can't calculate the recurring rule, the Recurring form block can't find the Time control. Make sure you have the time control in 'scheduler.config.lightbox.sections' config.","You can use either the default time control https://docs.dhtmlx.com/scheduler/time.html, or the datepicker https://docs.dhtmlx.com/scheduler/minicalendar.html, or a custom control. ",'In the latter case, make sure the control is named "time":',"","scheduler.config.lightbox.sections = [",'{name:"time", height:72, type:"YOU CONTROL", map_to:"auto" }];'].join(`
`));return d})().getValue(s),l.start=s.start_date,o.rec_type=e.form_blocks.recurring._get_repeat_code(l),l._start?(o.start_date=new Date(l.start),o._start_date=new Date(l.start),l._start=!1):o._start_date=null,o._end_date=l.end,o.rec_pattern=o.rec_type.split("#")[0]}else o.rec_type=o.rec_pattern="",o._end_date=o.end_date;return o.rec_type},_get_button:function(){return t().header.firstChild.firstChild},_get_form:function(){return t().node},open:function(){var r=e.form_blocks.recurring;r._get_form().open||r._toggle_block()},close:function(){var r=e.form_blocks.recurring;r._get_form().open&&r._toggle_block()},_toggle_block:function(){var r=e.form_blocks.recurring,o=r._get_form(),l=r._get_button();o.open||o.blocked?(o.style.height="0px",l&&(l.style.backgroundPosition="-5px 20px",l.nextSibling.innerHTML=e.locale.labels.button_recurring)):(o.style.height="auto",l&&(l.style.backgroundPosition="-5px 0px",l.nextSibling.innerHTML=e.locale.labels.button_recurring_open)),o.open=!o.open,e.setLightboxSize()},focus:function(r){},button_click:function(r,o,l){e.form_blocks.recurring._get_form().blocked||e.form_blocks.recurring._toggle_block()}},e._rec_markers={},e._rec_markers_pull={},e._add_rec_marker=function(r,o){r._pid_time=o,this._rec_markers[r.id]=r,this._rec_markers_pull[r.event_pid]||(this._rec_markers_pull[r.event_pid]={}),this._rec_markers_pull[r.event_pid][o]=r},e._get_rec_marker=function(r,o){var l=this._rec_markers_pull[o];return l?l[r]:null},e._get_rec_markers=function(r){return this._rec_markers_pull[r]||[]},e._rec_temp=[],i=e.addEvent,e.addEvent=function(r,o,l,s,d){var c=i.apply(this,arguments);if(c&&e.getEvent(c)){var u=e.getEvent(c);u.start_date&&(u.start_date=a(u.start_date)),u.end_date&&(u.end_date=a(u.end_date)),this._is_modified_occurence(u)&&e._add_rec_marker(u,1e3*u.event_length),u.rec_type&&(u.rec_pattern=u.rec_type.split("#")[0])}return c},e.attachEvent("onEventIdChange",function(r,o){if(!this._ignore_call){this._ignore_call=!0,e._rec_markers[r]&&(e._rec_markers[o]=e._rec_markers[r],delete e._rec_markers[r]),e._rec_markers_pull[r]&&(e._rec_markers_pull[o]=e._rec_markers_pull[r],delete e._rec_markers_pull[r]);for(var l=0;l<this._rec_temp.length;l++)(s=this._rec_temp[l]).event_pid==r&&(s.event_pid=o,this.changeEventId(s.id,o+"#"+s.id.split("#")[1]));for(var l in this._rec_markers){var s;(s=this._rec_markers[l]).event_pid==r&&(s.event_pid=o,s._pid_changed=!0)}var d=e._rec_markers[o];d&&d._pid_changed&&(delete d._pid_changed,setTimeout(function(){if(e.$destroyed)return!0;e.callEvent("onEventChanged",[o,e.getEvent(o)])},1)),delete this._ignore_call}}),e.attachEvent("onConfirmedBeforeEventDelete",function(r){var o=this.getEvent(r);if(this._is_virtual_event(r)||this._is_modified_occurence(o)&&o.rec_type&&o.rec_type!="none"){r=r.split("#");var l=this.uid(),s=r[1]?r[1]:Math.round(o._pid_time/1e3),d=this._copy_event(o);d.id=l,d.event_pid=o.event_pid||r[0];var c=s;d.event_length=c,d.rec_type=d.rec_pattern="none",this.addEvent(d),this._add_rec_marker(d,1e3*c)}else{o.rec_type&&this._lightbox_id&&this._roll_back_dates(o);var u=this._get_rec_markers(r);for(var f in u)u.hasOwnProperty(f)&&(r=u[f].id,this.getEvent(r)&&this.deleteEvent(r,!0))}return!0}),e.attachEvent("onEventDeleted",function(r,o){!this._is_virtual_event(r)&&this._is_modified_occurence(o)&&(e._events[r]||(o.rec_type=o.rec_pattern="none",this.setEvent(r,o)))}),e.attachEvent("onEventChanged",function(r,o){if(this._loading)return!0;var l=this.getEvent(r);if(this._is_virtual_event(r)){r=r.split("#");var s=this.uid();this._not_render=!0;var d=this._copy_event(o);d.id=s,d.event_pid=r[0];var c=r[1];d.event_length=c,d.rec_type=d.rec_pattern="",this._add_rec_marker(d,1e3*c),this.addEvent(d),this._not_render=!1}else{l.start_date&&(l.start_date=a(l.start_date)),l.end_date&&(l.end_date=a(l.end_date)),l.rec_type&&this._lightbox_id&&this._roll_back_dates(l);var u=this._get_rec_markers(r);for(var f in u)u.hasOwnProperty(f)&&(delete this._rec_markers[u[f].id],this.deleteEvent(u[f].id,!0));delete this._rec_markers_pull[r];for(var y=!1,g=0;g<this._rendered.length;g++)this._rendered[g].getAttribute(this.config.event_attribute)==r&&(y=!0);y||(this._select_id=null)}return!0}),e.attachEvent("onEventAdded",function(r){if(!this._loading){var o=this.getEvent(r);o.rec_type&&!o.event_length&&this._roll_back_dates(o)}return!0}),e.attachEvent("onEventSave",function(r,o,l){return this.getEvent(r).rec_type||!o.rec_type||this._is_virtual_event(r)||(this._select_id=null),!0}),e.attachEvent("onEventCreated",function(r){var o=this.getEvent(r);return o.rec_type||(o.rec_type=o.rec_pattern=o.event_length=o.event_pid=""),!0}),e.attachEvent("onEventCancel",function(r){var o=this.getEvent(r);o.rec_type&&(this._roll_back_dates(o),this.render_view_data())}),e._roll_back_dates=function(r){r.start_date&&(r.start_date=a(r.start_date)),r.end_date&&(r.end_date=a(r.end_date)),r.event_length=Math.round((r.end_date.valueOf()-r.start_date.valueOf())/1e3),r.end_date=r._end_date,r._start_date&&(r.start_date.setMonth(0),r.start_date.setDate(r._start_date.getDate()),r.start_date.setMonth(r._start_date.getMonth()),r.start_date.setFullYear(r._start_date.getFullYear()))},e._is_virtual_event=function(r){return r.toString().indexOf("#")!=-1},e._is_modified_occurence=function(r){return r.event_pid&&r.event_pid!="0"},e.showLightbox_rec=e.showLightbox,e.showLightbox=function(r){var o=this.locale,l=e.config.lightbox_recurring,s=this.getEvent(r),d=s.event_pid,c=this._is_virtual_event(r);c&&(d=r.split("#")[0]);var u=function(y){var g=e.getEvent(y);return g._end_date=g.end_date,g.end_date=new Date(g.start_date.valueOf()+1e3*g.event_length),e.showLightbox_rec(y)};if((d||1*d==0)&&s.rec_type)return u(r);if(!d||d==="0"||!o.labels.confirm_recurring||l=="instance"||l=="series"&&!c)return this.showLightbox_rec(r);if(l=="ask"){var f=this;e.modalbox({text:o.labels.confirm_recurring,title:o.labels.title_confirm_recurring,width:"500px",position:"middle",buttons:[o.labels.button_edit_series,o.labels.button_edit_occurrence,o.labels.icon_cancel],callback:function(y){switch(+y){case 0:return u(d);case 1:return f.showLightbox_rec(r);case 2:return}}})}else u(d)},e.get_visible_events_rec=e.get_visible_events,e.get_visible_events=function(r){for(var o=0;o<this._rec_temp.length;o++)delete this._events[this._rec_temp[o].id];this._rec_temp=[];var l=this.get_visible_events_rec(r),s=[];for(o=0;o<l.length;o++)l[o].rec_type?l[o].rec_pattern!="none"&&this.repeat_date(l[o],s):s.push(l[o]);return s},function(){var r=e.isOneDayEvent;e.isOneDayEvent=function(l){return!!l.rec_type||r.call(this,l)};var o=e.updateEvent;e.updateEvent=function(l){var s=e.getEvent(l);s&&s.rec_type&&(s.rec_pattern=(s.rec_type||"").split("#")[0]),s&&s.rec_type&&!this._is_virtual_event(l)?e.update_view():o.call(this,l)}}(),e.transponse_size={day:1,week:7,month:1,year:12},e.date.day_week=function(r,o,l){r.setDate(1);var s=e.date.month_start(new Date(r)),d=1*o+(l=7*(l-1))-r.getDay()+1;r.setDate(d<=l?d+7:d);var c=e.date.month_start(new Date(r));return s.valueOf()===c.valueOf()},e.transpose_day_week=function(r,o,l,s,d){for(var c=(r.getDay()||(e.config.start_on_monday?7:0))-l,u=0;u<o.length;u++)if(o[u]>c)return r.setDate(r.getDate()+1*o[u]-c-(s?l:d));this.transpose_day_week(r,o,l+s,null,l)},e.transpose_type=function(r){var o="transpose_"+r;if(!this.date[o]){var l=r.split("_"),s="add_"+r,d=this.transponse_size[l[0]]*l[1];if(l[0]=="day"||l[0]=="week"){var c=null;if(l[4]&&(c=l[4].split(","),e.config.start_on_monday)){for(var u=0;u<c.length;u++)c[u]=1*c[u]||7;c.sort()}this.date[o]=function(f,y){var g=Math.floor((y.valueOf()-f.valueOf())/(864e5*d));return g>0&&f.setDate(f.getDate()+g*d),c&&e.transpose_day_week(f,c,1,d),f},this.date[s]=function(f,y){var g=new Date(f.valueOf());if(c)for(var h=0;h<y;h++)e.transpose_day_week(g,c,0,d);else g.setDate(g.getDate()+y*d);return g}}else l[0]!="month"&&l[0]!="year"||(this.date[o]=function(f,y,g){var h=Math.ceil((12*y.getFullYear()+1*y.getMonth()+1-(12*f.getFullYear()+1*f.getMonth()+1))/d-1);return h>=0&&(f.setDate(1),f.setMonth(f.getMonth()+h*d)),e.date[s](f,0,g)},this.date[s]=function(f,y,g,h){if(h?h++:h=1,h>12)return null;var p=new Date(f.valueOf());p.setDate(1),p.setMonth(p.getMonth()+y*d);var v=p.getMonth(),x=p.getFullYear();p.setDate(g.start_date.getDate()),l[3]&&e.date.day_week(p,l[2],l[3]);var S=e.config.recurring_overflow_instances;return p.getMonth()!=v&&S!="none"&&(p=S==="lastDay"?new Date(x,v+1,0,p.getHours(),p.getMinutes(),p.getSeconds(),p.getMilliseconds()):e.date[s](new Date(x,v+1,0),y||1,g,h)),p})}},e.repeat_date=function(r,o,l,s,d,c){s=s||this._min_date,d=d||this._max_date;var u=c||-1,f=new Date(r.start_date.valueOf()),y=f.getHours(),g=0;for(!r.rec_pattern&&r.rec_type&&(r.rec_pattern=r.rec_type.split("#")[0]),this.transpose_type(r.rec_pattern),f=e.date["transpose_"+r.rec_pattern](f,s,r);f&&(f<r.start_date||e._fix_daylight_saving_date(f,s,r,f,new Date(f.valueOf()+1e3*r.event_length)).valueOf()<=s.valueOf()||f.valueOf()+1e3*r.event_length<=s.valueOf());)f=this.date["add_"+r.rec_pattern](f,1,r);for(;f&&f<d&&f<r.end_date&&(u<0||g<u);){f.setHours(y);var h=e.config.occurrence_timestamp_in_utc?Date.UTC(f.getFullYear(),f.getMonth(),f.getDate(),f.getHours(),f.getMinutes(),f.getSeconds()):f.valueOf(),p=this._get_rec_marker(h,r.id);if(p)l&&(p.rec_type!="none"&&g++,o.push(p));else{var v=new Date(f.valueOf()+1e3*r.event_length),x=this._copy_event(r);if(x.text=r.text,x.start_date=f,x.event_pid=r.id,x.id=r.id+"#"+Math.round(h/1e3),x.end_date=v,x.end_date=e._fix_daylight_saving_date(x.start_date,x.end_date,r,f,x.end_date),x._timed=this.isOneDayEvent(x),!x._timed&&!this._table_view&&!this.config.multi_day)return;o.push(x),l||(this._events[x.id]=x,this._rec_temp.push(x)),g++}f=this.date["add_"+r.rec_pattern](f,1,r)}},e._fix_daylight_saving_date=function(r,o,l,s,d){var c=r.getTimezoneOffset()-o.getTimezoneOffset();return c?c>0?new Date(s.valueOf()+1e3*l.event_length-60*c*1e3):new Date(o.valueOf()-60*c*1e3):new Date(d.valueOf())},e.getRecDates=function(r,o){var l=typeof r=="object"?r:e.getEvent(r),s=[];if(o=o||100,!l.rec_type)return[{start_date:l.start_date,end_date:l.end_date}];if(l.rec_type=="none")return[];e.repeat_date(l,s,!0,l.start_date,l.end_date,o);for(var d=[],c=0;c<s.length;c++)s[c].rec_type!="none"&&d.push({start_date:s[c].start_date,end_date:s[c].end_date});return d},e.getEvents=function(r,o){var l=[];for(var s in this._events){var d=this._events[s];if(d&&d.start_date<o&&d.end_date>r)if(d.rec_pattern){if(d.rec_pattern=="none")continue;var c=[];this.repeat_date(d,c,!0,r,o);for(var u=0;u<c.length;u++)!c[u].rec_pattern&&c[u].start_date<o&&c[u].end_date>r&&!this._rec_markers[c[u].id]&&l.push(c[u])}else this._is_virtual_event(d.id)||l.push(d)}return l},e.config.repeat_date="%m.%d.%Y",e.config.lightbox.sections=[{name:"description",map_to:"text",type:"textarea",focus:!0},{name:"recurring",type:"recurring",map_to:"rec_type",button:"recurring"},{name:"time",height:72,type:"time",map_to:"auto"}],e._copy_dummy=function(r){var o=new Date(this.start_date),l=new Date(this.end_date);this.start_date=o,this.end_date=l,this.event_length=this.event_pid=this.rec_pattern=this.rec_type=null},e.config.include_end_by=!1,e.config.lightbox_recurring="ask",e.attachEvent("onClearAll",function(){e._rec_markers={},e._rec_markers_pull={},e._rec_temp=[]})},serialize:function(e){const t=hl(e);e.data_attributes=function(){var n=[],a=e._helpers.formatDate,i=t();for(var r in i){var o=i[r];for(var l in o)l.substr(0,1)!="_"&&n.push([l,l=="start_date"||l=="end_date"?a:null]);break}return n},e.toXML=function(n){var a=[],i=this.data_attributes(),r=t();for(var o in r){var l=r[o];a.push("<event>");for(var s=0;s<i.length;s++)a.push("<"+i[s][0]+"><![CDATA["+(i[s][1]?i[s][1](l[i[s][0]]):l[i[s][0]])+"]]></"+i[s][0]+">");a.push("</event>")}return(n||"")+"<data>"+a.join(`
`)+"</data>"},e._serialize_json_value=function(n){return n===null||typeof n=="boolean"?n=""+n:(n||n===0||(n=""),n='"'+n.toString().replace(/\n/g,"").replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'),n},e.toJSON=function(){return JSON.stringify(this.serialize())},e.toICal=function(n){var a=e.date.date_to_str("%Y%m%dT%H%i%s"),i=e.date.date_to_str("%Y%m%d"),r=[],o=t();for(var l in o){var s=o[l];r.push("BEGIN:VEVENT"),s._timed&&(s.start_date.getHours()||s.start_date.getMinutes())?r.push("DTSTART:"+a(s.start_date)):r.push("DTSTART:"+i(s.start_date)),s._timed&&(s.end_date.getHours()||s.end_date.getMinutes())?r.push("DTEND:"+a(s.end_date)):r.push("DTEND:"+i(s.end_date)),r.push("SUMMARY:"+s.text),r.push("END:VEVENT")}return`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//dhtmlXScheduler//NONSGML v2.2//EN
DESCRIPTION:`+(n||"")+`
`+r.join(`
`)+`
END:VCALENDAR`}},timeline:function(e){gt("Timeline",e.assert)},tooltip:function(e){e.config.tooltip_timeout=30,e.config.tooltip_offset_y=20,e.config.tooltip_offset_x=10,e.config.tooltip_hide_timeout=30;const t=new su(e);e.ext.tooltips=t,e.attachEvent("onSchedulerReady",function(){t.tooltipFor({selector:"["+e.config.event_attribute+"]",html:n=>{if(e._mobile&&!e.config.touch_tooltip)return;const a=e._locate_event(n.target);if(e.getEvent(a)){const i=e.getEvent(a);return e.templates.tooltip_text(i.start_date,i.end_date,i)}return null},global:!1})}),e.attachEvent("onDestroy",function(){t.destructor()}),e.attachEvent("onLightbox",function(){t.hideTooltip()}),e.attachEvent("onBeforeDrag",function(){return e._mobile&&e.config.touch_tooltip||t.hideTooltip(),!0}),e.attachEvent("onEventDeleted",function(){return t.hideTooltip(),!0})},treetimeline:function(e){gt("Tree Timeline",e.assert)},units:function(e){gt("Units",e.assert)},url:function(e){e._get_url_nav=function(){for(var t={},n=(document.location.hash||"").replace("#","").split(","),a=0;a<n.length;a++){var i=n[a].split("=");i.length==2&&(t[i[0]]=i[1])}return t},e.attachEvent("onTemplatesReady",function(){var t=!0,n=e.date.str_to_date("%Y-%m-%d"),a=e.date.date_to_str("%Y-%m-%d"),i=e._get_url_nav().event||null;function r(o){if(e.$destroyed)return!0;i=o,e.getEvent(o)&&e.showEvent(o)}e.attachEvent("onAfterEventDisplay",function(o){return i=null,!0}),e.attachEvent("onBeforeViewChange",function(o,l,s,d){if(t){t=!1;var c=e._get_url_nav();if(c.event)try{if(e.getEvent(c.event))return setTimeout(function(){r(c.event)}),!1;var u=e.attachEvent("onXLE",function(){setTimeout(function(){r(c.event)}),e.detachEvent(u)})}catch{}if(c.date||c.mode){try{this.setCurrentView(c.date?n(c.date):null,c.mode||null)}catch{this.setCurrentView(c.date?n(c.date):null,s)}return!1}}var f=["date="+a(d||l),"mode="+(s||o)];i&&f.push("event="+i);var y="#"+f.join(",");return document.location.hash=y,!0})})},week_agenda:function(e){gt("Week Agenda",e.assert)},wp:function(e){e.attachEvent("onLightBox",function(){if(this._cover)try{this._cover.style.height=this.expanded?"100%":(document.body.parentNode||document.body).scrollHeight+"px"}catch{}}),e.form_blocks.select.set_value=function(t,n,a){n!==void 0&&n!==""||(n=(t.firstChild.options[0]||{}).value),t.firstChild.value=n||""}},year_view:function(e){e.templates.year_date=function(l){return e.date.date_to_str(e.locale.labels.year_tab+" %Y")(l)},e.templates.year_month=e.date.date_to_str("%F"),e.templates.year_scale_date=e.date.date_to_str("%D"),e.templates.year_tooltip=function(l,s,d){return d.text};const t=function(){return e._mode=="year"},n=function(l){var s=e.$domHelpers.closest(l,"[data-cell-date]");return s&&s.hasAttribute("data-cell-date")?e.templates.parse_date(s.getAttribute("data-cell-date")):null};e.dblclick_dhx_year_grid=function(l){if(t()){const s=l.target;if(e.$domHelpers.closest(s,".dhx_before")||e.$domHelpers.closest(s,".dhx_after"))return!1;const d=n(s);if(d){const c=d,u=this.date.add(c,1,"day");!this.config.readonly&&this.config.dblclick_create&&this.addEventNow(c.valueOf(),u.valueOf(),l)}}},e.attachEvent("onEventIdChange",function(){t()&&this.year_view(!0)});var a=e.render_data;e.render_data=function(l){if(!t())return a.apply(this,arguments);for(var s=0;s<l.length;s++)this._year_render_event(l[s])};var i=e.clear_view;e.clear_view=function(){if(!t())return i.apply(this,arguments);var l=e._year_marked_cells;for(var s in l)l.hasOwnProperty(s)&&l[s].classList.remove("dhx_year_event","dhx_cal_datepicker_event");e._year_marked_cells={}},e._hideToolTip=function(){this._tooltip&&(this._tooltip.style.display="none",this._tooltip.date=new Date(9999,1,1))},e._showToolTip=function(l,s,d,c){if(this._tooltip){if(this._tooltip.date.valueOf()==l.valueOf())return;this._tooltip.innerHTML=""}else{var u=this._tooltip=document.createElement("div");u.className="dhx_year_tooltip",this.config.rtl&&(u.className+=" dhx_tooltip_rtl"),document.body.appendChild(u),u.addEventListener("click",e._click.dhx_cal_data),u.addEventListener("click",function(x){if(x.target.closest(`[${e.config.event_attribute}]`)){const S=x.target.closest(`[${e.config.event_attribute}]`).getAttribute(e.config.event_attribute);e.showLightbox(S)}})}for(var f=this.getEvents(l,this.date.add(l,1,"day")),y="",g=0;g<f.length;g++){var h=f[g];if(this.filter_event(h.id,h)){var p=h.color?"--dhx-scheduler-event-background:"+h.color+";":"",v=h.textColor?"--dhx-scheduler-event-color:"+h.textColor+";":"";y+="<div class='dhx_tooltip_line' style='"+p+v+"' event_id='"+f[g].id+"' "+this.config.event_attribute+"='"+f[g].id+"'>",y+="<div class='dhx_tooltip_date' style='"+p+v+"'>"+(f[g]._timed?this.templates.event_date(f[g].start_date):"")+"</div>",y+="<div class='dhx_event_icon icon_details'>&nbsp;</div>",y+=this.templates.year_tooltip(f[g].start_date,f[g].end_date,f[g])+"</div>"}}this._tooltip.style.display="",this._tooltip.style.top="0px",document.body.offsetWidth-s.left-this._tooltip.offsetWidth<0?this._tooltip.style.left=s.left-this._tooltip.offsetWidth+"px":this._tooltip.style.left=s.left+c.offsetWidth+"px",this._tooltip.date=l,this._tooltip.innerHTML=y,document.body.offsetHeight-s.top-this._tooltip.offsetHeight<0?this._tooltip.style.top=s.top-this._tooltip.offsetHeight+c.offsetHeight+"px":this._tooltip.style.top=s.top+"px"},e._year_view_tooltip_handler=function(l){if(t()){var s=l.target||l.srcElement;s.tagName.toLowerCase()=="a"&&(s=s.parentNode),e._getClassName(s).indexOf("dhx_year_event")!=-1?e._showToolTip(e.templates.parse_date(s.getAttribute("data-year-date")),e.$domHelpers.getOffset(s),l,s):e._hideToolTip()}},e._init_year_tooltip=function(){e._detachDomEvent(e._els.dhx_cal_data[0],"mouseover",e._year_view_tooltip_handler),e.event(e._els.dhx_cal_data[0],"mouseover",e._year_view_tooltip_handler)},e._get_year_cell=function(l){for(var s=e.templates.format_date(l),d=this.$root.querySelectorAll(`.dhx_cal_data .dhx_cal_datepicker_date[data-cell-date="${s}"]`),c=0;c<d.length;c++)if(!e.$domHelpers.closest(d[c],".dhx_after, .dhx_before"))return d[c];return null},e._year_marked_cells={},e._mark_year_date=function(l,s){var d=e.templates.format_date(l),c=this._get_year_cell(l);if(c){var u=this.templates.event_class(s.start_date,s.end_date,s);e._year_marked_cells[d]||(c.classList.add("dhx_year_event","dhx_cal_datepicker_event"),c.setAttribute("data-year-date",d),c.setAttribute("date",d),e._year_marked_cells[d]=c),u&&c.classList.add(u)}},e._unmark_year_date=function(l){var s=this._get_year_cell(l);s&&s.classList.remove("dhx_year_event","dhx_cal_datepicker_event")},e._year_render_event=function(l){var s=l.start_date;for(s=s.valueOf()<this._min_date.valueOf()?this._min_date:this.date.date_part(new Date(s));s<l.end_date;)if(this._mark_year_date(s,l),(s=this.date.add(s,1,"day")).valueOf()>=this._max_date.valueOf())return},e.year_view=function(l){if(e.set_sizes(),e._table_view=l,!this._load_mode||!this._load())if(l){if(e._init_year_tooltip(),e._reset_year_scale(),e._load_mode&&e._load())return void(e._render_wait=!0);e.render_view_data()}else e._hideToolTip()},e._reset_year_scale=function(){var l=this._els.dhx_cal_data[0];l.scrollTop=0,l.innerHTML="";let s=this.date.year_start(new Date(this._date));this._min_date=this.date.week_start(new Date(s));const d=document.createElement("div");d.classList.add("dhx_year_wrapper");let c=s;for(let y=0;y<12;y++){let g=document.createElement("div");g.className="dhx_year_box",g.setAttribute("date",this._helpers.formatDate(c)),g.setAttribute("data-month-date",this._helpers.formatDate(c)),g.innerHTML=`<div class='dhx_year_month'>${this.templates.year_month(c)}</div>
			<div class='dhx_year_grid'></div>`;const h=g.querySelector(".dhx_year_grid"),p=e._createDatePicker(null,{date:c,filterDays:e.ignore_year,minWeeks:6});p._renderDayGrid(h),p.destructor(),d.appendChild(g),c=this.date.add(c,1,"month")}l.appendChild(d);let u=this.date.add(s,1,"year");u.valueOf()!=this.date.week_start(new Date(u)).valueOf()&&(u=this.date.week_start(new Date(u)),u=this.date.add(u,1,"week")),this._max_date=u;var f=this._getNavDateElement();f&&(f.innerHTML=this.templates[this._mode+"_date"](s,u,this._mode))};var r=e.getActionData;e.getActionData=function(l){return t()?{date:n(l.target),section:null}:r.apply(e,arguments)};var o=e._locate_event;e._locate_event=function(l){var s=o.apply(e,arguments);if(!s){var d=n(l);if(!d)return null;var c=e.getEvents(d,e.date.add(d,1,"day"));if(!c.length)return null;s=c[0].id}return s},e.attachEvent("onDestroy",function(){e._hideToolTip()})}},qr=new class{constructor(e){this._seed=0,this._schedulerPlugins=[],this._bundledExtensions=e,this._extensionsManager=new y_(e)}plugin(e){this._schedulerPlugins.push(e),_t.scheduler&&e(_t.scheduler)}getSchedulerInstance(e){for(var t=v_(this._extensionsManager),n=0;n<this._schedulerPlugins.length;n++)this._schedulerPlugins[n](t);return t._internal_id=this._seed++,this.$syncFactory&&this.$syncFactory(t),e&&this._initFromConfig(t,e),t}_initFromConfig(e,t){if(t.plugins&&e.plugins(t.plugins),t.config&&e.mixin(e.config,t.config,!0),t.templates&&e.attachEvent("onTemplatesReady",function(){e.mixin(e.templates,t.templates,!0)},{once:!0}),t.events)for(const n in t.events)e.attachEvent(n,t.events[n]);t.locale&&e.i18n.setLocale(t.locale),Array.isArray(t.calendars)&&t.calendars.forEach(function(n){e.addCalendar(n)}),t.container?e.init(t.container):e.init(),t.data&&(typeof t.data=="string"?e.load(t.data):e.parse(t.data))}}(lu),Je=qr.getSchedulerInstance(),ds={plugin:Je.bind(qr.plugin,qr)};window.scheduler=Je,window.Scheduler=ds,window.$dhx||(window.$dhx={}),window.$dhx.scheduler=Je,window.$dhx.Scheduler=ds;const du=()=>{};var cs={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=function(e){const t=[];let n=0;for(let a=0;a<e.length;a++){let i=e.charCodeAt(a);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&a+1<e.length&&(e.charCodeAt(a+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++a)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},cu=function(e){const t=[];let n=0,a=0;for(;n<e.length;){const i=e[n++];if(i<128)t[a++]=String.fromCharCode(i);else if(i>191&&i<224){const r=e[n++];t[a++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=e[n++],o=e[n++],l=e[n++],s=((i&7)<<18|(r&63)<<12|(o&63)<<6|l&63)-65536;t[a++]=String.fromCharCode(55296+(s>>10)),t[a++]=String.fromCharCode(56320+(s&1023))}else{const r=e[n++],o=e[n++];t[a++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return t.join("")},kl={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let i=0;i<e.length;i+=3){const r=e[i],o=i+1<e.length,l=o?e[i+1]:0,s=i+2<e.length,d=s?e[i+2]:0,c=r>>2,u=(r&3)<<4|l>>4;let f=(l&15)<<2|d>>6,y=d&63;s||(y=64,o||(f=64)),a.push(n[c],n[u],n[f],n[y])}return a.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(xl(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):cu(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let i=0;i<e.length;){const r=n[e.charAt(i++)],l=i<e.length?n[e.charAt(i)]:0;++i;const d=i<e.length?n[e.charAt(i)]:64;++i;const u=i<e.length?n[e.charAt(i)]:64;if(++i,r==null||l==null||d==null||u==null)throw new _u;const f=r<<2|l>>4;if(a.push(f),d!==64){const y=l<<4&240|d>>2;if(a.push(y),u!==64){const g=d<<6&192|u;a.push(g)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class _u extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uu=function(e){const t=xl(e);return kl.encodeByteArray(t,!0)},Sa=function(e){return uu(e).replace(/\./g,"")},hu=function(e){try{return kl.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=()=>fu().__FIREBASE_DEFAULTS__,mu=()=>{if(typeof process>"u"||typeof cs>"u")return;const e=cs.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},gu=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&hu(e[1]);return t&&JSON.parse(t)},fi=()=>{try{return du()||pu()||mu()||gu()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},vu=e=>{var t,n;return(n=(t=fi())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},yu=e=>{const t=vu(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const a=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),a]:[t.substring(0,n),a]},El=()=>{var e;return(e=fi())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(e){return e.endsWith(".cloudworkstations.dev")}async function wu(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Sa(JSON.stringify(n)),Sa(JSON.stringify(o)),""].join(".")}const Nn={};function ku(){const e={prod:[],emulator:[]};for(const t of Object.keys(Nn))Nn[t]?e.emulator.push(t):e.prod.push(t);return e}function Eu(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let _s=!1;function Tu(e,t){if(typeof window>"u"||typeof document>"u"||!pi(window.location.host)||Nn[e]===t||Nn[e]||_s)return;Nn[e]=t;function n(f){return`__firebase__banner__${f}`}const a="__firebase__banner",r=ku().prod.length>0;function o(){const f=document.getElementById(a);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function s(f,y){f.setAttribute("width","24"),f.setAttribute("id",y),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function d(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{_s=!0,o()},f}function c(f,y){f.setAttribute("id",y),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function u(){const f=Eu(a),y=n("text"),g=document.getElementById(y)||document.createElement("span"),h=n("learnmore"),p=document.getElementById(h)||document.createElement("a"),v=n("preprendIcon"),x=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const S=f.element;l(S),c(p,h);const O=d();s(x,v),S.append(x,g,p,O),document.body.appendChild(S)}r?(g.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",u):u()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Su(){var e;const t=(e=fi())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Du(){return!Su()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Cu(){try{return typeof indexedDB=="object"}catch{return!1}}function Nu(){return new Promise((e,t)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(a);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(a),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var r;t(((r=i.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu="FirebaseError";class dn extends Error{constructor(t,n,a){super(n),this.code=t,this.customData=a,this.name=Mu,Object.setPrototypeOf(this,dn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tl.prototype.create)}}class Tl{constructor(t,n,a){this.service=t,this.serviceName=n,this.errors=a}create(t,...n){const a=n[0]||{},i=`${this.service}/${t}`,r=this.errors[t],o=r?Iu(r,a):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new dn(i,l,a)}}function Iu(e,t){return e.replace(Ou,(n,a)=>{const i=t[a];return i!=null?String(i):`<${a}?>`})}const Ou=/\{\$([^}]+)}/g;function Da(e,t){if(e===t)return!0;const n=Object.keys(e),a=Object.keys(t);for(const i of n){if(!a.includes(i))return!1;const r=e[i],o=t[i];if(us(r)&&us(o)){if(!Da(r,o))return!1}else if(r!==o)return!1}for(const i of a)if(!n.includes(i))return!1;return!0}function us(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(e){return e&&e._delegate?e._delegate:e}class Pn{constructor(t,n,a){this.name=t,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const a=new bu;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&a.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const a=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Pu(t))try{this.getOrInitializeService({instanceIdentifier:Rt})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});a.resolve(r)}catch{}}}}clearInstance(t=Rt){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Rt){return this.instances.has(t)}getOptions(t=Rt){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[r,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);a===l&&o.resolve(i)}return i}onInit(t,n){var a;const i=this.normalizeInstanceIdentifier(n),r=(a=this.onInitCallbacks.get(i))!==null&&a!==void 0?a:new Set;r.add(t),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&t(o,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const a=this.onInitCallbacks.get(n);if(a)for(const i of a)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let a=this.instances.get(t);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:Lu(t),options:n}),this.instances.set(t,a),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(a,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,a)}catch{}return a||null}normalizeInstanceIdentifier(t=Rt){return this.component?this.component.multipleInstances?t:Rt:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Lu(e){return e===Rt?void 0:e}function Pu(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Ru(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var re;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(re||(re={}));const $u={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},Hu=re.INFO,Fu={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},Uu=(e,t,...n)=>{if(t<e.logLevel)return;const a=new Date().toISOString(),i=Fu[t];if(i)console[i](`[${a}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Al{constructor(t){this.name=t,this._logLevel=Hu,this._logHandler=Uu,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in re))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?$u[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...t),this._logHandler(this,re.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...t),this._logHandler(this,re.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,re.INFO,...t),this._logHandler(this,re.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,re.WARN,...t),this._logHandler(this,re.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...t),this._logHandler(this,re.ERROR,...t)}}const zu=(e,t)=>t.some(n=>e instanceof n);let hs,fs;function ju(){return hs||(hs=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qu(){return fs||(fs=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Sl=new WeakMap,Br=new WeakMap,Dl=new WeakMap,Cr=new WeakMap,mi=new WeakMap;function Bu(e){const t=new Promise((n,a)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{n(wt(e.result)),i()},o=()=>{a(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&Sl.set(n,e)}).catch(()=>{}),mi.set(t,e),t}function Yu(e){if(Br.has(e))return;const t=new Promise((n,a)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{a(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)});Br.set(e,t)}let Yr={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Br.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Dl.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wt(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Wu(e){Yr=e(Yr)}function Ku(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const a=e.call(Nr(this),t,...n);return Dl.set(a,t.sort?t.sort():[t]),wt(a)}:qu().includes(e)?function(...t){return e.apply(Nr(this),t),wt(Sl.get(this))}:function(...t){return wt(e.apply(Nr(this),t))}}function Ju(e){return typeof e=="function"?Ku(e):(e instanceof IDBTransaction&&Yu(e),zu(e,ju())?new Proxy(e,Yr):e)}function wt(e){if(e instanceof IDBRequest)return Bu(e);if(Cr.has(e))return Cr.get(e);const t=Ju(e);return t!==e&&(Cr.set(e,t),mi.set(t,e)),t}const Nr=e=>mi.get(e);function Gu(e,t,{blocked:n,upgrade:a,blocking:i,terminated:r}={}){const o=indexedDB.open(e,t),l=wt(o);return a&&o.addEventListener("upgradeneeded",s=>{a(wt(o.result),s.oldVersion,s.newVersion,wt(o.transaction),s)}),n&&o.addEventListener("blocked",s=>n(s.oldVersion,s.newVersion,s)),l.then(s=>{r&&s.addEventListener("close",()=>r()),i&&s.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const Qu=["get","getKey","getAll","getAllKeys","count"],Xu=["put","add","delete","clear"],Mr=new Map;function ps(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Mr.get(t))return Mr.get(t);const n=t.replace(/FromIndex$/,""),a=t!==n,i=Xu.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(i||Qu.includes(n)))return;const r=async function(o,...l){const s=this.transaction(o,i?"readwrite":"readonly");let d=s.store;return a&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&s.done]))[0]};return Mr.set(t,r),r}Wu(e=>({...e,get:(t,n,a)=>ps(t,n)||e.get(t,n,a),has:(t,n)=>!!ps(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(eh(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function eh(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Wr="@firebase/app",ms="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut=new Al("@firebase/app"),th="@firebase/app-compat",nh="@firebase/analytics-compat",ah="@firebase/analytics",rh="@firebase/app-check-compat",ih="@firebase/app-check",oh="@firebase/auth",sh="@firebase/auth-compat",lh="@firebase/database",dh="@firebase/data-connect",ch="@firebase/database-compat",_h="@firebase/functions",uh="@firebase/functions-compat",hh="@firebase/installations",fh="@firebase/installations-compat",ph="@firebase/messaging",mh="@firebase/messaging-compat",gh="@firebase/performance",vh="@firebase/performance-compat",yh="@firebase/remote-config",bh="@firebase/remote-config-compat",wh="@firebase/storage",xh="@firebase/storage-compat",kh="@firebase/firestore",Eh="@firebase/ai",Th="@firebase/firestore-compat",Ah="firebase",Sh="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="[DEFAULT]",Dh={[Wr]:"fire-core",[th]:"fire-core-compat",[ah]:"fire-analytics",[nh]:"fire-analytics-compat",[ih]:"fire-app-check",[rh]:"fire-app-check-compat",[oh]:"fire-auth",[sh]:"fire-auth-compat",[lh]:"fire-rtdb",[dh]:"fire-data-connect",[ch]:"fire-rtdb-compat",[_h]:"fire-fn",[uh]:"fire-fn-compat",[hh]:"fire-iid",[fh]:"fire-iid-compat",[ph]:"fire-fcm",[mh]:"fire-fcm-compat",[gh]:"fire-perf",[vh]:"fire-perf-compat",[yh]:"fire-rc",[bh]:"fire-rc-compat",[wh]:"fire-gcs",[xh]:"fire-gcs-compat",[kh]:"fire-fst",[Th]:"fire-fst-compat",[Eh]:"fire-vertex","fire-js":"fire-js",[Ah]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new Map,Ch=new Map,Jr=new Map;function gs(e,t){try{e.container.addComponent(t)}catch(n){ut.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Na(e){const t=e.name;if(Jr.has(t))return ut.debug(`There were multiple attempts to register component ${t}.`),!1;Jr.set(t,e);for(const n of Ca.values())gs(n,e);for(const n of Ch.values())gs(n,e);return!0}function Nh(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Mh(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xt=new Tl("app","Firebase",Ih);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(t,n,a){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Pn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw xt.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh=Sh;function Cl(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const a=Object.assign({name:Kr,automaticDataCollectionEnabled:!0},t),i=a.name;if(typeof i!="string"||!i)throw xt.create("bad-app-name",{appName:String(i)});if(n||(n=El()),!n)throw xt.create("no-options");const r=Ca.get(i);if(r){if(Da(n,r.options)&&Da(a,r.config))return r;throw xt.create("duplicate-app",{appName:i})}const o=new Vu(i);for(const s of Jr.values())o.addComponent(s);const l=new Oh(n,a,o);return Ca.set(i,l),l}function Lh(e=Kr){const t=Ca.get(e);if(!t&&e===Kr&&El())return Cl();if(!t)throw xt.create("no-app",{appName:e});return t}function tn(e,t,n){var a;let i=(a=Dh[e])!==null&&a!==void 0?a:e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const l=[`Unable to register library "${i}" with version "${t}":`];r&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&l.push("and"),o&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ut.warn(l.join(" "));return}Na(new Pn(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph="firebase-heartbeat-database",Vh=1,Vn="firebase-heartbeat-store";let Ir=null;function Nl(){return Ir||(Ir=Gu(Ph,Vh,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Vn)}catch(n){console.warn(n)}}}}).catch(e=>{throw xt.create("idb-open",{originalErrorMessage:e.message})})),Ir}async function $h(e){try{const n=(await Nl()).transaction(Vn),a=await n.objectStore(Vn).get(Ml(e));return await n.done,a}catch(t){if(t instanceof dn)ut.warn(t.message);else{const n=xt.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ut.warn(n.message)}}}async function vs(e,t){try{const a=(await Nl()).transaction(Vn,"readwrite");await a.objectStore(Vn).put(t,Ml(e)),await a.done}catch(n){if(n instanceof dn)ut.warn(n.message);else{const a=xt.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ut.warn(a.message)}}}function Ml(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh=1024,Fh=30;class Uh{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jh(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ys();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>Fh){const o=qh(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){ut.warn(a)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ys(),{heartbeatsToSend:a,unsentEntries:i}=zh(this._heartbeatsCache.heartbeats),r=Sa(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return ut.warn(n),""}}}function ys(){return new Date().toISOString().substring(0,10)}function zh(e,t=Hh){const n=[];let a=e.slice();for(const i of e){const r=n.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),bs(n)>t){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),bs(n)>t){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class jh{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Cu()?Nu().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $h(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return vs(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return vs(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function bs(e){return Sa(JSON.stringify({version:2,heartbeats:e})).length}function qh(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let a=1;a<e.length;a++)e[a].date<n&&(n=e[a].date,t=a);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(e){Na(new Pn("platform-logger",t=>new Zu(t),"PRIVATE")),Na(new Pn("heartbeat",t=>new Uh(t),"PRIVATE")),tn(Wr,ms,e),tn(Wr,ms,"esm2017"),tn("fire-js","")}Bh("");var Yh="firebase",Wh="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tn(Yh,Wh,"app");var ws=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gi;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(A,m){function b(){}b.prototype=m.prototype,A.D=m.prototype,A.prototype=new b,A.prototype.constructor=A,A.C=function(k,E,D){for(var C=Array(arguments.length-2),R=2;R<arguments.length;R++)C[R-2]=arguments[R];return m.prototype[E].apply(k,C)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(a,n),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,m,b){b||(b=0);var k=Array(16);if(typeof m=="string")for(var E=0;16>E;++E)k[E]=m.charCodeAt(b++)|m.charCodeAt(b++)<<8|m.charCodeAt(b++)<<16|m.charCodeAt(b++)<<24;else for(E=0;16>E;++E)k[E]=m[b++]|m[b++]<<8|m[b++]<<16|m[b++]<<24;m=A.g[0],b=A.g[1],E=A.g[2];var D=A.g[3],C=m+(D^b&(E^D))+k[0]+3614090360&4294967295;m=b+(C<<7&4294967295|C>>>25),C=D+(E^m&(b^E))+k[1]+3905402710&4294967295,D=m+(C<<12&4294967295|C>>>20),C=E+(b^D&(m^b))+k[2]+606105819&4294967295,E=D+(C<<17&4294967295|C>>>15),C=b+(m^E&(D^m))+k[3]+3250441966&4294967295,b=E+(C<<22&4294967295|C>>>10),C=m+(D^b&(E^D))+k[4]+4118548399&4294967295,m=b+(C<<7&4294967295|C>>>25),C=D+(E^m&(b^E))+k[5]+1200080426&4294967295,D=m+(C<<12&4294967295|C>>>20),C=E+(b^D&(m^b))+k[6]+2821735955&4294967295,E=D+(C<<17&4294967295|C>>>15),C=b+(m^E&(D^m))+k[7]+4249261313&4294967295,b=E+(C<<22&4294967295|C>>>10),C=m+(D^b&(E^D))+k[8]+1770035416&4294967295,m=b+(C<<7&4294967295|C>>>25),C=D+(E^m&(b^E))+k[9]+2336552879&4294967295,D=m+(C<<12&4294967295|C>>>20),C=E+(b^D&(m^b))+k[10]+4294925233&4294967295,E=D+(C<<17&4294967295|C>>>15),C=b+(m^E&(D^m))+k[11]+2304563134&4294967295,b=E+(C<<22&4294967295|C>>>10),C=m+(D^b&(E^D))+k[12]+1804603682&4294967295,m=b+(C<<7&4294967295|C>>>25),C=D+(E^m&(b^E))+k[13]+4254626195&4294967295,D=m+(C<<12&4294967295|C>>>20),C=E+(b^D&(m^b))+k[14]+2792965006&4294967295,E=D+(C<<17&4294967295|C>>>15),C=b+(m^E&(D^m))+k[15]+1236535329&4294967295,b=E+(C<<22&4294967295|C>>>10),C=m+(E^D&(b^E))+k[1]+4129170786&4294967295,m=b+(C<<5&4294967295|C>>>27),C=D+(b^E&(m^b))+k[6]+3225465664&4294967295,D=m+(C<<9&4294967295|C>>>23),C=E+(m^b&(D^m))+k[11]+643717713&4294967295,E=D+(C<<14&4294967295|C>>>18),C=b+(D^m&(E^D))+k[0]+3921069994&4294967295,b=E+(C<<20&4294967295|C>>>12),C=m+(E^D&(b^E))+k[5]+3593408605&4294967295,m=b+(C<<5&4294967295|C>>>27),C=D+(b^E&(m^b))+k[10]+38016083&4294967295,D=m+(C<<9&4294967295|C>>>23),C=E+(m^b&(D^m))+k[15]+3634488961&4294967295,E=D+(C<<14&4294967295|C>>>18),C=b+(D^m&(E^D))+k[4]+3889429448&4294967295,b=E+(C<<20&4294967295|C>>>12),C=m+(E^D&(b^E))+k[9]+568446438&4294967295,m=b+(C<<5&4294967295|C>>>27),C=D+(b^E&(m^b))+k[14]+3275163606&4294967295,D=m+(C<<9&4294967295|C>>>23),C=E+(m^b&(D^m))+k[3]+4107603335&4294967295,E=D+(C<<14&4294967295|C>>>18),C=b+(D^m&(E^D))+k[8]+1163531501&4294967295,b=E+(C<<20&4294967295|C>>>12),C=m+(E^D&(b^E))+k[13]+2850285829&4294967295,m=b+(C<<5&4294967295|C>>>27),C=D+(b^E&(m^b))+k[2]+4243563512&4294967295,D=m+(C<<9&4294967295|C>>>23),C=E+(m^b&(D^m))+k[7]+1735328473&4294967295,E=D+(C<<14&4294967295|C>>>18),C=b+(D^m&(E^D))+k[12]+2368359562&4294967295,b=E+(C<<20&4294967295|C>>>12),C=m+(b^E^D)+k[5]+4294588738&4294967295,m=b+(C<<4&4294967295|C>>>28),C=D+(m^b^E)+k[8]+2272392833&4294967295,D=m+(C<<11&4294967295|C>>>21),C=E+(D^m^b)+k[11]+1839030562&4294967295,E=D+(C<<16&4294967295|C>>>16),C=b+(E^D^m)+k[14]+4259657740&4294967295,b=E+(C<<23&4294967295|C>>>9),C=m+(b^E^D)+k[1]+2763975236&4294967295,m=b+(C<<4&4294967295|C>>>28),C=D+(m^b^E)+k[4]+1272893353&4294967295,D=m+(C<<11&4294967295|C>>>21),C=E+(D^m^b)+k[7]+4139469664&4294967295,E=D+(C<<16&4294967295|C>>>16),C=b+(E^D^m)+k[10]+3200236656&4294967295,b=E+(C<<23&4294967295|C>>>9),C=m+(b^E^D)+k[13]+681279174&4294967295,m=b+(C<<4&4294967295|C>>>28),C=D+(m^b^E)+k[0]+3936430074&4294967295,D=m+(C<<11&4294967295|C>>>21),C=E+(D^m^b)+k[3]+3572445317&4294967295,E=D+(C<<16&4294967295|C>>>16),C=b+(E^D^m)+k[6]+76029189&4294967295,b=E+(C<<23&4294967295|C>>>9),C=m+(b^E^D)+k[9]+3654602809&4294967295,m=b+(C<<4&4294967295|C>>>28),C=D+(m^b^E)+k[12]+3873151461&4294967295,D=m+(C<<11&4294967295|C>>>21),C=E+(D^m^b)+k[15]+530742520&4294967295,E=D+(C<<16&4294967295|C>>>16),C=b+(E^D^m)+k[2]+3299628645&4294967295,b=E+(C<<23&4294967295|C>>>9),C=m+(E^(b|~D))+k[0]+4096336452&4294967295,m=b+(C<<6&4294967295|C>>>26),C=D+(b^(m|~E))+k[7]+1126891415&4294967295,D=m+(C<<10&4294967295|C>>>22),C=E+(m^(D|~b))+k[14]+2878612391&4294967295,E=D+(C<<15&4294967295|C>>>17),C=b+(D^(E|~m))+k[5]+4237533241&4294967295,b=E+(C<<21&4294967295|C>>>11),C=m+(E^(b|~D))+k[12]+1700485571&4294967295,m=b+(C<<6&4294967295|C>>>26),C=D+(b^(m|~E))+k[3]+2399980690&4294967295,D=m+(C<<10&4294967295|C>>>22),C=E+(m^(D|~b))+k[10]+4293915773&4294967295,E=D+(C<<15&4294967295|C>>>17),C=b+(D^(E|~m))+k[1]+2240044497&4294967295,b=E+(C<<21&4294967295|C>>>11),C=m+(E^(b|~D))+k[8]+1873313359&4294967295,m=b+(C<<6&4294967295|C>>>26),C=D+(b^(m|~E))+k[15]+4264355552&4294967295,D=m+(C<<10&4294967295|C>>>22),C=E+(m^(D|~b))+k[6]+2734768916&4294967295,E=D+(C<<15&4294967295|C>>>17),C=b+(D^(E|~m))+k[13]+1309151649&4294967295,b=E+(C<<21&4294967295|C>>>11),C=m+(E^(b|~D))+k[4]+4149444226&4294967295,m=b+(C<<6&4294967295|C>>>26),C=D+(b^(m|~E))+k[11]+3174756917&4294967295,D=m+(C<<10&4294967295|C>>>22),C=E+(m^(D|~b))+k[2]+718787259&4294967295,E=D+(C<<15&4294967295|C>>>17),C=b+(D^(E|~m))+k[9]+3951481745&4294967295,A.g[0]=A.g[0]+m&4294967295,A.g[1]=A.g[1]+(E+(C<<21&4294967295|C>>>11))&4294967295,A.g[2]=A.g[2]+E&4294967295,A.g[3]=A.g[3]+D&4294967295}a.prototype.u=function(A,m){m===void 0&&(m=A.length);for(var b=m-this.blockSize,k=this.B,E=this.h,D=0;D<m;){if(E==0)for(;D<=b;)i(this,A,D),D+=this.blockSize;if(typeof A=="string"){for(;D<m;)if(k[E++]=A.charCodeAt(D++),E==this.blockSize){i(this,k),E=0;break}}else for(;D<m;)if(k[E++]=A[D++],E==this.blockSize){i(this,k),E=0;break}}this.h=E,this.o+=m},a.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var m=1;m<A.length-8;++m)A[m]=0;var b=8*this.o;for(m=A.length-8;m<A.length;++m)A[m]=b&255,b/=256;for(this.u(A),A=Array(16),m=b=0;4>m;++m)for(var k=0;32>k;k+=8)A[b++]=this.g[m]>>>k&255;return A};function r(A,m){var b=l;return Object.prototype.hasOwnProperty.call(b,A)?b[A]:b[A]=m(A)}function o(A,m){this.h=m;for(var b=[],k=!0,E=A.length-1;0<=E;E--){var D=A[E]|0;k&&D==m||(b[E]=D,k=!1)}this.g=b}var l={};function s(A){return-128<=A&&128>A?r(A,function(m){return new o([m|0],0>m?-1:0)}):new o([A|0],0>A?-1:0)}function d(A){if(isNaN(A)||!isFinite(A))return u;if(0>A)return p(d(-A));for(var m=[],b=1,k=0;A>=b;k++)m[k]=A/b|0,b*=4294967296;return new o(m,0)}function c(A,m){if(A.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(A.charAt(0)=="-")return p(c(A.substring(1),m));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=d(Math.pow(m,8)),k=u,E=0;E<A.length;E+=8){var D=Math.min(8,A.length-E),C=parseInt(A.substring(E,E+D),m);8>D?(D=d(Math.pow(m,D)),k=k.j(D).add(d(C))):(k=k.j(b),k=k.add(d(C)))}return k}var u=s(0),f=s(1),y=s(16777216);e=o.prototype,e.m=function(){if(h(this))return-p(this).m();for(var A=0,m=1,b=0;b<this.g.length;b++){var k=this.i(b);A+=(0<=k?k:4294967296+k)*m,m*=4294967296}return A},e.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(g(this))return"0";if(h(this))return"-"+p(this).toString(A);for(var m=d(Math.pow(A,6)),b=this,k="";;){var E=O(b,m).g;b=v(b,E.j(m));var D=((0<b.g.length?b.g[0]:b.h)>>>0).toString(A);if(b=E,g(b))return D+k;for(;6>D.length;)D="0"+D;k=D+k}},e.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function g(A){if(A.h!=0)return!1;for(var m=0;m<A.g.length;m++)if(A.g[m]!=0)return!1;return!0}function h(A){return A.h==-1}e.l=function(A){return A=v(this,A),h(A)?-1:g(A)?0:1};function p(A){for(var m=A.g.length,b=[],k=0;k<m;k++)b[k]=~A.g[k];return new o(b,~A.h).add(f)}e.abs=function(){return h(this)?p(this):this},e.add=function(A){for(var m=Math.max(this.g.length,A.g.length),b=[],k=0,E=0;E<=m;E++){var D=k+(this.i(E)&65535)+(A.i(E)&65535),C=(D>>>16)+(this.i(E)>>>16)+(A.i(E)>>>16);k=C>>>16,D&=65535,C&=65535,b[E]=C<<16|D}return new o(b,b[b.length-1]&-2147483648?-1:0)};function v(A,m){return A.add(p(m))}e.j=function(A){if(g(this)||g(A))return u;if(h(this))return h(A)?p(this).j(p(A)):p(p(this).j(A));if(h(A))return p(this.j(p(A)));if(0>this.l(y)&&0>A.l(y))return d(this.m()*A.m());for(var m=this.g.length+A.g.length,b=[],k=0;k<2*m;k++)b[k]=0;for(k=0;k<this.g.length;k++)for(var E=0;E<A.g.length;E++){var D=this.i(k)>>>16,C=this.i(k)&65535,R=A.i(E)>>>16,P=A.i(E)&65535;b[2*k+2*E]+=C*P,x(b,2*k+2*E),b[2*k+2*E+1]+=D*P,x(b,2*k+2*E+1),b[2*k+2*E+1]+=C*R,x(b,2*k+2*E+1),b[2*k+2*E+2]+=D*R,x(b,2*k+2*E+2)}for(k=0;k<m;k++)b[k]=b[2*k+1]<<16|b[2*k];for(k=m;k<2*m;k++)b[k]=0;return new o(b,0)};function x(A,m){for(;(A[m]&65535)!=A[m];)A[m+1]+=A[m]>>>16,A[m]&=65535,m++}function S(A,m){this.g=A,this.h=m}function O(A,m){if(g(m))throw Error("division by zero");if(g(A))return new S(u,u);if(h(A))return m=O(p(A),m),new S(p(m.g),p(m.h));if(h(m))return m=O(A,p(m)),new S(p(m.g),m.h);if(30<A.g.length){if(h(A)||h(m))throw Error("slowDivide_ only works with positive integers.");for(var b=f,k=m;0>=k.l(A);)b=N(b),k=N(k);var E=M(b,1),D=M(k,1);for(k=M(k,2),b=M(b,2);!g(k);){var C=D.add(k);0>=C.l(A)&&(E=E.add(b),D=C),k=M(k,1),b=M(b,1)}return m=v(A,E.j(m)),new S(E,m)}for(E=u;0<=A.l(m);){for(b=Math.max(1,Math.floor(A.m()/m.m())),k=Math.ceil(Math.log(b)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),D=d(b),C=D.j(m);h(C)||0<C.l(A);)b-=k,D=d(b),C=D.j(m);g(D)&&(D=f),E=E.add(D),A=v(A,C)}return new S(E,A)}e.A=function(A){return O(this,A).h},e.and=function(A){for(var m=Math.max(this.g.length,A.g.length),b=[],k=0;k<m;k++)b[k]=this.i(k)&A.i(k);return new o(b,this.h&A.h)},e.or=function(A){for(var m=Math.max(this.g.length,A.g.length),b=[],k=0;k<m;k++)b[k]=this.i(k)|A.i(k);return new o(b,this.h|A.h)},e.xor=function(A){for(var m=Math.max(this.g.length,A.g.length),b=[],k=0;k<m;k++)b[k]=this.i(k)^A.i(k);return new o(b,this.h^A.h)};function N(A){for(var m=A.g.length+1,b=[],k=0;k<m;k++)b[k]=A.i(k)<<1|A.i(k-1)>>>31;return new o(b,A.h)}function M(A,m){var b=m>>5;m%=32;for(var k=A.g.length-b,E=[],D=0;D<k;D++)E[D]=0<m?A.i(D+b)>>>m|A.i(D+b+1)<<32-m:A.i(D+b);return new o(E,A.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=c,gi=o}).apply(typeof ws<"u"?ws:typeof self<"u"?self:typeof window<"u"?window:{});var fa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Il,Dn,Ol,ya,Gr,Rl,Ll,Pl;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(_,w,T){return _==Array.prototype||_==Object.prototype||(_[w]=T.value),_};function n(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof fa=="object"&&fa];for(var w=0;w<_.length;++w){var T=_[w];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var a=n(this);function i(_,w){if(w)e:{var T=a;_=_.split(".");for(var I=0;I<_.length-1;I++){var V=_[I];if(!(V in T))break e;T=T[V]}_=_[_.length-1],I=T[_],w=w(I),w!=I&&w!=null&&t(T,_,{configurable:!0,writable:!0,value:w})}}function r(_,w){_ instanceof String&&(_+="");var T=0,I=!1,V={next:function(){if(!I&&T<_.length){var H=T++;return{value:w(H,_[H]),done:!1}}return I=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(_){return _||function(){return r(this,function(w,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function s(_){var w=typeof _;return w=w!="object"?w:_?Array.isArray(_)?"array":w:"null",w=="array"||w=="object"&&typeof _.length=="number"}function d(_){var w=typeof _;return w=="object"&&_!=null||w=="function"}function c(_,w,T){return _.call.apply(_.bind,arguments)}function u(_,w,T){if(!_)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,I),_.apply(w,V)}}return function(){return _.apply(w,arguments)}}function f(_,w,T){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:u,f.apply(null,arguments)}function y(_,w){var T=Array.prototype.slice.call(arguments,1);return function(){var I=T.slice();return I.push.apply(I,arguments),_.apply(this,I)}}function g(_,w){function T(){}T.prototype=w.prototype,_.aa=w.prototype,_.prototype=new T,_.prototype.constructor=_,_.Qb=function(I,V,H){for(var B=Array(arguments.length-2),de=2;de<arguments.length;de++)B[de-2]=arguments[de];return w.prototype[V].apply(I,B)}}function h(_){const w=_.length;if(0<w){const T=Array(w);for(let I=0;I<w;I++)T[I]=_[I];return T}return[]}function p(_,w){for(let T=1;T<arguments.length;T++){const I=arguments[T];if(s(I)){const V=_.length||0,H=I.length||0;_.length=V+H;for(let B=0;B<H;B++)_[V+B]=I[B]}else _.push(I)}}class v{constructor(w,T){this.i=w,this.j=T,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function x(_){return/^[\s\xa0]*$/.test(_)}function S(){var _=l.navigator;return _&&(_=_.userAgent)?_:""}function O(_){return O[" "](_),_}O[" "]=function(){};var N=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function M(_,w,T){for(const I in _)w.call(T,_[I],I,_)}function A(_,w){for(const T in _)w.call(void 0,_[T],T,_)}function m(_){const w={};for(const T in _)w[T]=_[T];return w}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(_,w){let T,I;for(let V=1;V<arguments.length;V++){I=arguments[V];for(T in I)_[T]=I[T];for(let H=0;H<b.length;H++)T=b[H],Object.prototype.hasOwnProperty.call(I,T)&&(_[T]=I[T])}}function E(_){var w=1;_=_.split(":");const T=[];for(;0<w&&_.length;)T.push(_.shift()),w--;return _.length&&T.push(_.join(":")),T}function D(_){l.setTimeout(()=>{throw _},0)}function C(){var _=X;let w=null;return _.g&&(w=_.g,_.g=_.g.next,_.g||(_.h=null),w.next=null),w}class R{constructor(){this.h=this.g=null}add(w,T){const I=P.get();I.set(w,T),this.h?this.h.next=I:this.g=I,this.h=I}}var P=new v(()=>new F,_=>_.reset());class F{constructor(){this.next=this.g=this.h=null}set(w,T){this.h=w,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let z,$=!1,X=new R,te=()=>{const _=l.Promise.resolve(void 0);z=()=>{_.then(G)}};var G=()=>{for(var _;_=C();){try{_.h.call(_.g)}catch(T){D(T)}var w=P;w.j(_),100>w.h&&(w.h++,_.next=w.g,w.g=_)}$=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(_,w){this.type=_,this.g=this.target=w,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var _=!1,w=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const T=()=>{};l.addEventListener("test",T,w),l.removeEventListener("test",T,w)}catch{}return _}();function fe(_,w){if(J.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_){var T=this.type=_.type,I=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;if(this.target=_.target||_.srcElement,this.g=w,w=_.relatedTarget){if(N){e:{try{O(w.nodeName);var V=!0;break e}catch{}V=!1}V||(w=null)}}else T=="mouseover"?w=_.fromElement:T=="mouseout"&&(w=_.toElement);this.relatedTarget=w,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=typeof _.pointerType=="string"?_.pointerType:Ve[_.pointerType]||"",this.state=_.state,this.i=_,_.defaultPrevented&&fe.aa.h.call(this)}}g(fe,J);var Ve={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Jn="closure_listenable_"+(1e6*Math.random()|0),Hd=0;function Fd(_,w,T,I,V){this.listener=_,this.proxy=null,this.src=w,this.type=T,this.capture=!!I,this.ha=V,this.key=++Hd,this.da=this.fa=!1}function Gn(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function Qn(_){this.src=_,this.g={},this.h=0}Qn.prototype.add=function(_,w,T,I,V){var H=_.toString();_=this.g[H],_||(_=this.g[H]=[],this.h++);var B=nr(_,w,I,V);return-1<B?(w=_[B],T||(w.fa=!1)):(w=new Fd(w,this.src,H,!!I,V),w.fa=T,_.push(w)),w};function tr(_,w){var T=w.type;if(T in _.g){var I=_.g[T],V=Array.prototype.indexOf.call(I,w,void 0),H;(H=0<=V)&&Array.prototype.splice.call(I,V,1),H&&(Gn(w),_.g[T].length==0&&(delete _.g[T],_.h--))}}function nr(_,w,T,I){for(var V=0;V<_.length;++V){var H=_[V];if(!H.da&&H.listener==w&&H.capture==!!T&&H.ha==I)return V}return-1}var ar="closure_lm_"+(1e6*Math.random()|0),rr={};function Bi(_,w,T,I,V){if(Array.isArray(w)){for(var H=0;H<w.length;H++)Bi(_,w[H],T,I,V);return null}return T=Ki(T),_&&_[Jn]?_.K(w,T,d(I)?!!I.capture:!1,V):Ud(_,w,T,!1,I,V)}function Ud(_,w,T,I,V,H){if(!w)throw Error("Invalid event type");var B=d(V)?!!V.capture:!!V,de=or(_);if(de||(_[ar]=de=new Qn(_)),T=de.add(w,T,I,B,H),T.proxy)return T;if(I=zd(),T.proxy=I,I.src=_,I.listener=T,_.addEventListener)Z||(V=B),V===void 0&&(V=!1),_.addEventListener(w.toString(),I,V);else if(_.attachEvent)_.attachEvent(Wi(w.toString()),I);else if(_.addListener&&_.removeListener)_.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return T}function zd(){function _(T){return w.call(_.src,_.listener,T)}const w=jd;return _}function Yi(_,w,T,I,V){if(Array.isArray(w))for(var H=0;H<w.length;H++)Yi(_,w[H],T,I,V);else I=d(I)?!!I.capture:!!I,T=Ki(T),_&&_[Jn]?(_=_.i,w=String(w).toString(),w in _.g&&(H=_.g[w],T=nr(H,T,I,V),-1<T&&(Gn(H[T]),Array.prototype.splice.call(H,T,1),H.length==0&&(delete _.g[w],_.h--)))):_&&(_=or(_))&&(w=_.g[w.toString()],_=-1,w&&(_=nr(w,T,I,V)),(T=-1<_?w[_]:null)&&ir(T))}function ir(_){if(typeof _!="number"&&_&&!_.da){var w=_.src;if(w&&w[Jn])tr(w.i,_);else{var T=_.type,I=_.proxy;w.removeEventListener?w.removeEventListener(T,I,_.capture):w.detachEvent?w.detachEvent(Wi(T),I):w.addListener&&w.removeListener&&w.removeListener(I),(T=or(w))?(tr(T,_),T.h==0&&(T.src=null,w[ar]=null)):Gn(_)}}}function Wi(_){return _ in rr?rr[_]:rr[_]="on"+_}function jd(_,w){if(_.da)_=!0;else{w=new fe(w,this);var T=_.listener,I=_.ha||_.src;_.fa&&ir(_),_=T.call(I,w)}return _}function or(_){return _=_[ar],_ instanceof Qn?_:null}var sr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ki(_){return typeof _=="function"?_:(_[sr]||(_[sr]=function(w){return _.handleEvent(w)}),_[sr])}function Ce(){W.call(this),this.i=new Qn(this),this.M=this,this.F=null}g(Ce,W),Ce.prototype[Jn]=!0,Ce.prototype.removeEventListener=function(_,w,T,I){Yi(this,_,w,T,I)};function $e(_,w){var T,I=_.F;if(I)for(T=[];I;I=I.F)T.push(I);if(_=_.M,I=w.type||w,typeof w=="string")w=new J(w,_);else if(w instanceof J)w.target=w.target||_;else{var V=w;w=new J(I,_),k(w,V)}if(V=!0,T)for(var H=T.length-1;0<=H;H--){var B=w.g=T[H];V=Xn(B,I,!0,w)&&V}if(B=w.g=_,V=Xn(B,I,!0,w)&&V,V=Xn(B,I,!1,w)&&V,T)for(H=0;H<T.length;H++)B=w.g=T[H],V=Xn(B,I,!1,w)&&V}Ce.prototype.N=function(){if(Ce.aa.N.call(this),this.i){var _=this.i,w;for(w in _.g){for(var T=_.g[w],I=0;I<T.length;I++)Gn(T[I]);delete _.g[w],_.h--}}this.F=null},Ce.prototype.K=function(_,w,T,I){return this.i.add(String(_),w,!1,T,I)},Ce.prototype.L=function(_,w,T,I){return this.i.add(String(_),w,!0,T,I)};function Xn(_,w,T,I){if(w=_.i.g[String(w)],!w)return!0;w=w.concat();for(var V=!0,H=0;H<w.length;++H){var B=w[H];if(B&&!B.da&&B.capture==T){var de=B.listener,Ee=B.ha||B.src;B.fa&&tr(_.i,B),V=de.call(Ee,I)!==!1&&V}}return V&&!I.defaultPrevented}function Ji(_,w,T){if(typeof _=="function")T&&(_=f(_,T));else if(_&&typeof _.handleEvent=="function")_=f(_.handleEvent,_);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:l.setTimeout(_,w||0)}function Gi(_){_.g=Ji(()=>{_.g=null,_.i&&(_.i=!1,Gi(_))},_.l);const w=_.h;_.h=null,_.m.apply(null,w)}class qd extends W{constructor(w,T){super(),this.m=w,this.l=T,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Gi(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _n(_){W.call(this),this.h=_,this.g={}}g(_n,W);var Qi=[];function Xi(_){M(_.g,function(w,T){this.g.hasOwnProperty(T)&&ir(w)},_),_.g={}}_n.prototype.N=function(){_n.aa.N.call(this),Xi(this)},_n.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lr=l.JSON.stringify,Bd=l.JSON.parse,Yd=class{stringify(_){return l.JSON.stringify(_,void 0)}parse(_){return l.JSON.parse(_,void 0)}};function dr(){}dr.prototype.h=null;function Zi(_){return _.h||(_.h=_.i())}function eo(){}var un={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cr(){J.call(this,"d")}g(cr,J);function _r(){J.call(this,"c")}g(_r,J);var Nt={},to=null;function Zn(){return to=to||new Ce}Nt.La="serverreachability";function no(_){J.call(this,Nt.La,_)}g(no,J);function hn(_){const w=Zn();$e(w,new no(w))}Nt.STAT_EVENT="statevent";function ao(_,w){J.call(this,Nt.STAT_EVENT,_),this.stat=w}g(ao,J);function He(_){const w=Zn();$e(w,new ao(w,_))}Nt.Ma="timingevent";function ro(_,w){J.call(this,Nt.Ma,_),this.size=w}g(ro,J);function fn(_,w){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){_()},w)}function pn(){this.g=!0}pn.prototype.xa=function(){this.g=!1};function Wd(_,w,T,I,V,H){_.info(function(){if(_.g)if(H)for(var B="",de=H.split("&"),Ee=0;Ee<de.length;Ee++){var oe=de[Ee].split("=");if(1<oe.length){var Ne=oe[0];oe=oe[1];var Me=Ne.split("_");B=2<=Me.length&&Me[1]=="type"?B+(Ne+"="+oe+"&"):B+(Ne+"=redacted&")}}else B=null;else B=H;return"XMLHTTP REQ ("+I+") [attempt "+V+"]: "+w+`
`+T+`
`+B})}function Kd(_,w,T,I,V,H,B){_.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+V+"]: "+w+`
`+T+`
`+H+" "+B})}function Bt(_,w,T,I){_.info(function(){return"XMLHTTP TEXT ("+w+"): "+Gd(_,T)+(I?" "+I:"")})}function Jd(_,w){_.info(function(){return"TIMEOUT: "+w})}pn.prototype.info=function(){};function Gd(_,w){if(!_.g)return w;if(!w)return null;try{var T=JSON.parse(w);if(T){for(_=0;_<T.length;_++)if(Array.isArray(T[_])){var I=T[_];if(!(2>I.length)){var V=I[1];if(Array.isArray(V)&&!(1>V.length)){var H=V[0];if(H!="noop"&&H!="stop"&&H!="close")for(var B=1;B<V.length;B++)V[B]=""}}}}return lr(T)}catch{return w}}var ea={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},io={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ur;function ta(){}g(ta,dr),ta.prototype.g=function(){return new XMLHttpRequest},ta.prototype.i=function(){return{}},ur=new ta;function ht(_,w,T,I){this.j=_,this.i=w,this.l=T,this.R=I||1,this.U=new _n(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new oo}function oo(){this.i=null,this.g="",this.h=!1}var so={},hr={};function fr(_,w,T){_.L=1,_.v=ia(lt(w)),_.m=T,_.P=!0,lo(_,null)}function lo(_,w){_.F=Date.now(),na(_),_.A=lt(_.v);var T=_.A,I=_.R;Array.isArray(I)||(I=[String(I)]),ko(T.i,"t",I),_.C=0,T=_.j.J,_.h=new oo,_.g=Uo(_.j,T?w:null,!_.m),0<_.O&&(_.M=new qd(f(_.Y,_,_.g),_.O)),w=_.U,T=_.g,I=_.ca;var V="readystatechange";Array.isArray(V)||(V&&(Qi[0]=V.toString()),V=Qi);for(var H=0;H<V.length;H++){var B=Bi(T,V[H],I||w.handleEvent,!1,w.h||w);if(!B)break;w.g[B.key]=B}w=_.H?m(_.H):{},_.m?(_.u||(_.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.A,_.u,_.m,w)):(_.u="GET",_.g.ea(_.A,_.u,null,w)),hn(),Wd(_.i,_.u,_.A,_.l,_.R,_.m)}ht.prototype.ca=function(_){_=_.target;const w=this.M;w&&dt(_)==3?w.j():this.Y(_)},ht.prototype.Y=function(_){try{if(_==this.g)e:{const Me=dt(this.g);var w=this.g.Ba();const Kt=this.g.Z();if(!(3>Me)&&(Me!=3||this.g&&(this.h.h||this.g.oa()||No(this.g)))){this.J||Me!=4||w==7||(w==8||0>=Kt?hn(3):hn(2)),pr(this);var T=this.g.Z();this.X=T;t:if(co(this)){var I=No(this.g);_="";var V=I.length,H=dt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mt(this),mn(this);var B="";break t}this.h.i=new l.TextDecoder}for(w=0;w<V;w++)this.h.h=!0,_+=this.h.i.decode(I[w],{stream:!(H&&w==V-1)});I.length=0,this.h.g+=_,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=T==200,Kd(this.i,this.u,this.A,this.l,this.R,Me,T),this.o){if(this.T&&!this.K){t:{if(this.g){var de,Ee=this.g;if((de=Ee.g?Ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(de)){var oe=de;break t}}oe=null}if(T=oe)Bt(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mr(this,T);else{this.o=!1,this.s=3,He(12),Mt(this),mn(this);break e}}if(this.P){T=!0;let Ge;for(;!this.J&&this.C<B.length;)if(Ge=Qd(this,B),Ge==hr){Me==4&&(this.s=4,He(14),T=!1),Bt(this.i,this.l,null,"[Incomplete Response]");break}else if(Ge==so){this.s=4,He(15),Bt(this.i,this.l,B,"[Invalid Chunk]"),T=!1;break}else Bt(this.i,this.l,Ge,null),mr(this,Ge);if(co(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||B.length!=0||this.h.h||(this.s=1,He(16),T=!1),this.o=this.o&&T,!T)Bt(this.i,this.l,B,"[Invalid Chunked Response]"),Mt(this),mn(this);else if(0<B.length&&!this.W){this.W=!0;var Ne=this.j;Ne.g==this&&Ne.ba&&!Ne.M&&(Ne.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),xr(Ne),Ne.M=!0,He(11))}}else Bt(this.i,this.l,B,null),mr(this,B);Me==4&&Mt(this),this.o&&!this.J&&(Me==4?Vo(this.j,this):(this.o=!1,na(this)))}else fc(this.g),T==400&&0<B.indexOf("Unknown SID")?(this.s=3,He(12)):(this.s=0,He(13)),Mt(this),mn(this)}}}catch{}finally{}};function co(_){return _.g?_.u=="GET"&&_.L!=2&&_.j.Ca:!1}function Qd(_,w){var T=_.C,I=w.indexOf(`
`,T);return I==-1?hr:(T=Number(w.substring(T,I)),isNaN(T)?so:(I+=1,I+T>w.length?hr:(w=w.slice(I,I+T),_.C=I+T,w)))}ht.prototype.cancel=function(){this.J=!0,Mt(this)};function na(_){_.S=Date.now()+_.I,_o(_,_.I)}function _o(_,w){if(_.B!=null)throw Error("WatchDog timer not null");_.B=fn(f(_.ba,_),w)}function pr(_){_.B&&(l.clearTimeout(_.B),_.B=null)}ht.prototype.ba=function(){this.B=null;const _=Date.now();0<=_-this.S?(Jd(this.i,this.A),this.L!=2&&(hn(),He(17)),Mt(this),this.s=2,mn(this)):_o(this,this.S-_)};function mn(_){_.j.G==0||_.J||Vo(_.j,_)}function Mt(_){pr(_);var w=_.M;w&&typeof w.ma=="function"&&w.ma(),_.M=null,Xi(_.U),_.g&&(w=_.g,_.g=null,w.abort(),w.ma())}function mr(_,w){try{var T=_.j;if(T.G!=0&&(T.g==_||gr(T.h,_))){if(!_.K&&gr(T.h,_)&&T.G==3){try{var I=T.Da.g.parse(w)}catch{I=null}if(Array.isArray(I)&&I.length==3){var V=I;if(V[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<_.F)_a(T),da(T);else break e;wr(T),He(18)}}else T.za=V[1],0<T.za-T.T&&37500>V[2]&&T.F&&T.v==0&&!T.C&&(T.C=fn(f(T.Za,T),6e3));if(1>=fo(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Ot(T,11)}else if((_.K||T.g==_)&&_a(T),!x(w))for(V=T.Da.g.parse(w),w=0;w<V.length;w++){let oe=V[w];if(T.T=oe[0],oe=oe[1],T.G==2)if(oe[0]=="c"){T.K=oe[1],T.ia=oe[2];const Ne=oe[3];Ne!=null&&(T.la=Ne,T.j.info("VER="+T.la));const Me=oe[4];Me!=null&&(T.Aa=Me,T.j.info("SVER="+T.Aa));const Kt=oe[5];Kt!=null&&typeof Kt=="number"&&0<Kt&&(I=1.5*Kt,T.L=I,T.j.info("backChannelRequestTimeoutMs_="+I)),I=T;const Ge=_.g;if(Ge){const ha=Ge.g?Ge.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ha){var H=I.h;H.g||ha.indexOf("spdy")==-1&&ha.indexOf("quic")==-1&&ha.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(vr(H,H.h),H.h=null))}if(I.D){const kr=Ge.g?Ge.g.getResponseHeader("X-HTTP-Session-Id"):null;kr&&(I.ya=kr,ue(I.I,I.D,kr))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-_.F,T.j.info("Handshake RTT: "+T.R+"ms")),I=T;var B=_;if(I.qa=Fo(I,I.J?I.ia:null,I.W),B.K){po(I.h,B);var de=B,Ee=I.L;Ee&&(de.I=Ee),de.B&&(pr(de),na(de)),I.g=B}else Lo(I);0<T.i.length&&ca(T)}else oe[0]!="stop"&&oe[0]!="close"||Ot(T,7);else T.G==3&&(oe[0]=="stop"||oe[0]=="close"?oe[0]=="stop"?Ot(T,7):br(T):oe[0]!="noop"&&T.l&&T.l.ta(oe),T.v=0)}}hn(4)}catch{}}var Xd=class{constructor(_,w){this.g=_,this.map=w}};function uo(_){this.l=_||10,l.PerformanceNavigationTiming?(_=l.performance.getEntriesByType("navigation"),_=0<_.length&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ho(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function fo(_){return _.h?1:_.g?_.g.size:0}function gr(_,w){return _.h?_.h==w:_.g?_.g.has(w):!1}function vr(_,w){_.g?_.g.add(w):_.h=w}function po(_,w){_.h&&_.h==w?_.h=null:_.g&&_.g.has(w)&&_.g.delete(w)}uo.prototype.cancel=function(){if(this.i=mo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function mo(_){if(_.h!=null)return _.i.concat(_.h.D);if(_.g!=null&&_.g.size!==0){let w=_.i;for(const T of _.g.values())w=w.concat(T.D);return w}return h(_.i)}function Zd(_){if(_.V&&typeof _.V=="function")return _.V();if(typeof Map<"u"&&_ instanceof Map||typeof Set<"u"&&_ instanceof Set)return Array.from(_.values());if(typeof _=="string")return _.split("");if(s(_)){for(var w=[],T=_.length,I=0;I<T;I++)w.push(_[I]);return w}w=[],T=0;for(I in _)w[T++]=_[I];return w}function ec(_){if(_.na&&typeof _.na=="function")return _.na();if(!_.V||typeof _.V!="function"){if(typeof Map<"u"&&_ instanceof Map)return Array.from(_.keys());if(!(typeof Set<"u"&&_ instanceof Set)){if(s(_)||typeof _=="string"){var w=[];_=_.length;for(var T=0;T<_;T++)w.push(T);return w}w=[],T=0;for(const I in _)w[T++]=I;return w}}}function go(_,w){if(_.forEach&&typeof _.forEach=="function")_.forEach(w,void 0);else if(s(_)||typeof _=="string")Array.prototype.forEach.call(_,w,void 0);else for(var T=ec(_),I=Zd(_),V=I.length,H=0;H<V;H++)w.call(void 0,I[H],T&&T[H],_)}var vo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tc(_,w){if(_){_=_.split("&");for(var T=0;T<_.length;T++){var I=_[T].indexOf("="),V=null;if(0<=I){var H=_[T].substring(0,I);V=_[T].substring(I+1)}else H=_[T];w(H,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function It(_){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,_ instanceof It){this.h=_.h,aa(this,_.j),this.o=_.o,this.g=_.g,ra(this,_.s),this.l=_.l;var w=_.i,T=new yn;T.i=w.i,w.g&&(T.g=new Map(w.g),T.h=w.h),yo(this,T),this.m=_.m}else _&&(w=String(_).match(vo))?(this.h=!1,aa(this,w[1]||"",!0),this.o=gn(w[2]||""),this.g=gn(w[3]||"",!0),ra(this,w[4]),this.l=gn(w[5]||"",!0),yo(this,w[6]||"",!0),this.m=gn(w[7]||"")):(this.h=!1,this.i=new yn(null,this.h))}It.prototype.toString=function(){var _=[],w=this.j;w&&_.push(vn(w,bo,!0),":");var T=this.g;return(T||w=="file")&&(_.push("//"),(w=this.o)&&_.push(vn(w,bo,!0),"@"),_.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&_.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&_.push("/"),_.push(vn(T,T.charAt(0)=="/"?rc:ac,!0))),(T=this.i.toString())&&_.push("?",T),(T=this.m)&&_.push("#",vn(T,oc)),_.join("")};function lt(_){return new It(_)}function aa(_,w,T){_.j=T?gn(w,!0):w,_.j&&(_.j=_.j.replace(/:$/,""))}function ra(_,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);_.s=w}else _.s=null}function yo(_,w,T){w instanceof yn?(_.i=w,sc(_.i,_.h)):(T||(w=vn(w,ic)),_.i=new yn(w,_.h))}function ue(_,w,T){_.i.set(w,T)}function ia(_){return ue(_,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),_}function gn(_,w){return _?w?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function vn(_,w,T){return typeof _=="string"?(_=encodeURI(_).replace(w,nc),T&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function nc(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var bo=/[#\/\?@]/g,ac=/[#\?:]/g,rc=/[#\?]/g,ic=/[#\?@]/g,oc=/#/g;function yn(_,w){this.h=this.g=null,this.i=_||null,this.j=!!w}function ft(_){_.g||(_.g=new Map,_.h=0,_.i&&tc(_.i,function(w,T){_.add(decodeURIComponent(w.replace(/\+/g," ")),T)}))}e=yn.prototype,e.add=function(_,w){ft(this),this.i=null,_=Yt(this,_);var T=this.g.get(_);return T||this.g.set(_,T=[]),T.push(w),this.h+=1,this};function wo(_,w){ft(_),w=Yt(_,w),_.g.has(w)&&(_.i=null,_.h-=_.g.get(w).length,_.g.delete(w))}function xo(_,w){return ft(_),w=Yt(_,w),_.g.has(w)}e.forEach=function(_,w){ft(this),this.g.forEach(function(T,I){T.forEach(function(V){_.call(w,V,I,this)},this)},this)},e.na=function(){ft(this);const _=Array.from(this.g.values()),w=Array.from(this.g.keys()),T=[];for(let I=0;I<w.length;I++){const V=_[I];for(let H=0;H<V.length;H++)T.push(w[I])}return T},e.V=function(_){ft(this);let w=[];if(typeof _=="string")xo(this,_)&&(w=w.concat(this.g.get(Yt(this,_))));else{_=Array.from(this.g.values());for(let T=0;T<_.length;T++)w=w.concat(_[T])}return w},e.set=function(_,w){return ft(this),this.i=null,_=Yt(this,_),xo(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[w]),this.h+=1,this},e.get=function(_,w){return _?(_=this.V(_),0<_.length?String(_[0]):w):w};function ko(_,w,T){wo(_,w),0<T.length&&(_.i=null,_.g.set(Yt(_,w),h(T)),_.h+=T.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],w=Array.from(this.g.keys());for(var T=0;T<w.length;T++){var I=w[T];const H=encodeURIComponent(String(I)),B=this.V(I);for(I=0;I<B.length;I++){var V=H;B[I]!==""&&(V+="="+encodeURIComponent(String(B[I]))),_.push(V)}}return this.i=_.join("&")};function Yt(_,w){return w=String(w),_.j&&(w=w.toLowerCase()),w}function sc(_,w){w&&!_.j&&(ft(_),_.i=null,_.g.forEach(function(T,I){var V=I.toLowerCase();I!=V&&(wo(this,I),ko(this,V,T))},_)),_.j=w}function lc(_,w){const T=new pn;if(l.Image){const I=new Image;I.onload=y(pt,T,"TestLoadImage: loaded",!0,w,I),I.onerror=y(pt,T,"TestLoadImage: error",!1,w,I),I.onabort=y(pt,T,"TestLoadImage: abort",!1,w,I),I.ontimeout=y(pt,T,"TestLoadImage: timeout",!1,w,I),l.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=_}else w(!1)}function dc(_,w){const T=new pn,I=new AbortController,V=setTimeout(()=>{I.abort(),pt(T,"TestPingServer: timeout",!1,w)},1e4);fetch(_,{signal:I.signal}).then(H=>{clearTimeout(V),H.ok?pt(T,"TestPingServer: ok",!0,w):pt(T,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(V),pt(T,"TestPingServer: error",!1,w)})}function pt(_,w,T,I,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),I(T)}catch{}}function cc(){this.g=new Yd}function _c(_,w,T){const I=T||"";try{go(_,function(V,H){let B=V;d(V)&&(B=lr(V)),w.push(I+H+"="+encodeURIComponent(B))})}catch(V){throw w.push(I+"type="+encodeURIComponent("_badmap")),V}}function oa(_){this.l=_.Ub||null,this.j=_.eb||!1}g(oa,dr),oa.prototype.g=function(){return new sa(this.l,this.j)},oa.prototype.i=function(_){return function(){return _}}({});function sa(_,w){Ce.call(this),this.D=_,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(sa,Ce),e=sa.prototype,e.open=function(_,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=_,this.A=w,this.readyState=1,wn(this)},e.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};_&&(w.body=_),(this.D||l).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bn(this)),this.readyState=0},e.Sa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,wn(this)),this.g&&(this.readyState=3,wn(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Eo(this)}else _.text().then(this.Ra.bind(this),this.ga.bind(this))};function Eo(_){_.j.read().then(_.Pa.bind(_)).catch(_.ga.bind(_))}e.Pa=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var w=_.value?_.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!_.done}))&&(this.response=this.responseText+=w)}_.done?bn(this):wn(this),this.readyState==3&&Eo(this)}},e.Ra=function(_){this.g&&(this.response=this.responseText=_,bn(this))},e.Qa=function(_){this.g&&(this.response=_,bn(this))},e.ga=function(){this.g&&bn(this)};function bn(_){_.readyState=4,_.l=null,_.j=null,_.v=null,wn(_)}e.setRequestHeader=function(_,w){this.u.append(_,w)},e.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],w=this.h.entries();for(var T=w.next();!T.done;)T=T.value,_.push(T[0]+": "+T[1]),T=w.next();return _.join(`\r
`)};function wn(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(sa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function To(_){let w="";return M(_,function(T,I){w+=I,w+=":",w+=T,w+=`\r
`}),w}function yr(_,w,T){e:{for(I in T){var I=!1;break e}I=!0}I||(T=To(T),typeof _=="string"?T!=null&&encodeURIComponent(String(T)):ue(_,w,T))}function pe(_){Ce.call(this),this.headers=new Map,this.o=_||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(pe,Ce);var uc=/^https?$/i,hc=["POST","PUT"];e=pe.prototype,e.Ha=function(_){this.J=_},e.ea=function(_,w,T,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);w=w?w.toUpperCase():"GET",this.D=_,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ur.g(),this.v=this.o?Zi(this.o):Zi(ur),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(w,String(_),!0),this.B=!1}catch(H){Ao(this,H);return}if(_=T||"",T=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var V in I)T.set(V,I[V]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const H of I.keys())T.set(H,I.get(H));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(T.keys()).find(H=>H.toLowerCase()=="content-type"),V=l.FormData&&_ instanceof l.FormData,!(0<=Array.prototype.indexOf.call(hc,w,void 0))||I||V||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,B]of T)this.g.setRequestHeader(H,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Co(this),this.u=!0,this.g.send(_),this.u=!1}catch(H){Ao(this,H)}};function Ao(_,w){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=w,_.m=5,So(_),la(_)}function So(_){_.A||(_.A=!0,$e(_,"complete"),$e(_,"error"))}e.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=_||7,$e(this,"complete"),$e(this,"abort"),la(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),la(this,!0)),pe.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Do(this):this.bb())},e.bb=function(){Do(this)};function Do(_){if(_.h&&typeof o<"u"&&(!_.v[1]||dt(_)!=4||_.Z()!=2)){if(_.u&&dt(_)==4)Ji(_.Ea,0,_);else if($e(_,"readystatechange"),dt(_)==4){_.h=!1;try{const B=_.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var T;if(!(T=w)){var I;if(I=B===0){var V=String(_.D).match(vo)[1]||null;!V&&l.self&&l.self.location&&(V=l.self.location.protocol.slice(0,-1)),I=!uc.test(V?V.toLowerCase():"")}T=I}if(T)$e(_,"complete"),$e(_,"success");else{_.m=6;try{var H=2<dt(_)?_.g.statusText:""}catch{H=""}_.l=H+" ["+_.Z()+"]",So(_)}}finally{la(_)}}}}function la(_,w){if(_.g){Co(_);const T=_.g,I=_.v[0]?()=>{}:null;_.g=null,_.v=null,w||$e(_,"ready");try{T.onreadystatechange=I}catch{}}}function Co(_){_.I&&(l.clearTimeout(_.I),_.I=null)}e.isActive=function(){return!!this.g};function dt(_){return _.g?_.g.readyState:0}e.Z=function(){try{return 2<dt(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(_){if(this.g){var w=this.g.responseText;return _&&w.indexOf(_)==0&&(w=w.substring(_.length)),Bd(w)}};function No(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.H){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function fc(_){const w={};_=(_.g&&2<=dt(_)&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<_.length;I++){if(x(_[I]))continue;var T=E(_[I]);const V=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const H=w[V]||[];w[V]=H,H.push(T)}A(w,function(I){return I.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xn(_,w,T){return T&&T.internalChannelParams&&T.internalChannelParams[_]||w}function Mo(_){this.Aa=0,this.i=[],this.j=new pn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xn("failFast",!1,_),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xn("baseRetryDelayMs",5e3,_),this.cb=xn("retryDelaySeedMs",1e4,_),this.Wa=xn("forwardChannelMaxRetries",2,_),this.wa=xn("forwardChannelRequestTimeoutMs",2e4,_),this.pa=_&&_.xmlHttpFactory||void 0,this.Xa=_&&_.Tb||void 0,this.Ca=_&&_.useFetchStreams||!1,this.L=void 0,this.J=_&&_.supportsCrossDomainXhr||!1,this.K="",this.h=new uo(_&&_.concurrentRequestLimit),this.Da=new cc,this.P=_&&_.fastHandshake||!1,this.O=_&&_.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=_&&_.Rb||!1,_&&_.xa&&this.j.xa(),_&&_.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&_&&_.detectBufferingProxy||!1,this.ja=void 0,_&&_.longPollingTimeout&&0<_.longPollingTimeout&&(this.ja=_.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Mo.prototype,e.la=8,e.G=1,e.connect=function(_,w,T,I){He(0),this.W=_,this.H=w||{},T&&I!==void 0&&(this.H.OSID=T,this.H.OAID=I),this.F=this.X,this.I=Fo(this,null,this.W),ca(this)};function br(_){if(Io(_),_.G==3){var w=_.U++,T=lt(_.I);if(ue(T,"SID",_.K),ue(T,"RID",w),ue(T,"TYPE","terminate"),kn(_,T),w=new ht(_,_.j,w),w.L=2,w.v=ia(lt(T)),T=!1,l.navigator&&l.navigator.sendBeacon)try{T=l.navigator.sendBeacon(w.v.toString(),"")}catch{}!T&&l.Image&&(new Image().src=w.v,T=!0),T||(w.g=Uo(w.j,null),w.g.ea(w.v)),w.F=Date.now(),na(w)}Ho(_)}function da(_){_.g&&(xr(_),_.g.cancel(),_.g=null)}function Io(_){da(_),_.u&&(l.clearTimeout(_.u),_.u=null),_a(_),_.h.cancel(),_.s&&(typeof _.s=="number"&&l.clearTimeout(_.s),_.s=null)}function ca(_){if(!ho(_.h)&&!_.s){_.s=!0;var w=_.Ga;z||te(),$||(z(),$=!0),X.add(w,_),_.B=0}}function pc(_,w){return fo(_.h)>=_.h.j-(_.s?1:0)?!1:_.s?(_.i=w.D.concat(_.i),!0):_.G==1||_.G==2||_.B>=(_.Va?0:_.Wa)?!1:(_.s=fn(f(_.Ga,_,w),$o(_,_.B)),_.B++,!0)}e.Ga=function(_){if(this.s)if(this.s=null,this.G==1){if(!_){this.U=Math.floor(1e5*Math.random()),_=this.U++;const V=new ht(this,this.j,_);let H=this.o;if(this.S&&(H?(H=m(H),k(H,this.S)):H=this.S),this.m!==null||this.O||(V.H=H,H=null),this.P)e:{for(var w=0,T=0;T<this.i.length;T++){t:{var I=this.i[T];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(w+=I,4096<w){w=T;break e}if(w===4096||T===this.i.length-1){w=T+1;break e}}w=1e3}else w=1e3;w=Ro(this,V,w),T=lt(this.I),ue(T,"RID",_),ue(T,"CVER",22),this.D&&ue(T,"X-HTTP-Session-Id",this.D),kn(this,T),H&&(this.O?w="headers="+encodeURIComponent(String(To(H)))+"&"+w:this.m&&yr(T,this.m,H)),vr(this.h,V),this.Ua&&ue(T,"TYPE","init"),this.P?(ue(T,"$req",w),ue(T,"SID","null"),V.T=!0,fr(V,T,null)):fr(V,T,w),this.G=2}}else this.G==3&&(_?Oo(this,_):this.i.length==0||ho(this.h)||Oo(this))};function Oo(_,w){var T;w?T=w.l:T=_.U++;const I=lt(_.I);ue(I,"SID",_.K),ue(I,"RID",T),ue(I,"AID",_.T),kn(_,I),_.m&&_.o&&yr(I,_.m,_.o),T=new ht(_,_.j,T,_.B+1),_.m===null&&(T.H=_.o),w&&(_.i=w.D.concat(_.i)),w=Ro(_,T,1e3),T.I=Math.round(.5*_.wa)+Math.round(.5*_.wa*Math.random()),vr(_.h,T),fr(T,I,w)}function kn(_,w){_.H&&M(_.H,function(T,I){ue(w,I,T)}),_.l&&go({},function(T,I){ue(w,I,T)})}function Ro(_,w,T){T=Math.min(_.i.length,T);var I=_.l?f(_.l.Na,_.l,_):null;e:{var V=_.i;let H=-1;for(;;){const B=["count="+T];H==-1?0<T?(H=V[0].g,B.push("ofs="+H)):H=0:B.push("ofs="+H);let de=!0;for(let Ee=0;Ee<T;Ee++){let oe=V[Ee].g;const Ne=V[Ee].map;if(oe-=H,0>oe)H=Math.max(0,V[Ee].g-100),de=!1;else try{_c(Ne,B,"req"+oe+"_")}catch{I&&I(Ne)}}if(de){I=B.join("&");break e}}}return _=_.i.splice(0,T),w.D=_,I}function Lo(_){if(!_.g&&!_.u){_.Y=1;var w=_.Fa;z||te(),$||(z(),$=!0),X.add(w,_),_.v=0}}function wr(_){return _.g||_.u||3<=_.v?!1:(_.Y++,_.u=fn(f(_.Fa,_),$o(_,_.v)),_.v++,!0)}e.Fa=function(){if(this.u=null,Po(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var _=2*this.R;this.j.info("BP detection timer enabled: "+_),this.A=fn(f(this.ab,this),_)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,He(10),da(this),Po(this))};function xr(_){_.A!=null&&(l.clearTimeout(_.A),_.A=null)}function Po(_){_.g=new ht(_,_.j,"rpc",_.Y),_.m===null&&(_.g.H=_.o),_.g.O=0;var w=lt(_.qa);ue(w,"RID","rpc"),ue(w,"SID",_.K),ue(w,"AID",_.T),ue(w,"CI",_.F?"0":"1"),!_.F&&_.ja&&ue(w,"TO",_.ja),ue(w,"TYPE","xmlhttp"),kn(_,w),_.m&&_.o&&yr(w,_.m,_.o),_.L&&(_.g.I=_.L);var T=_.g;_=_.ia,T.L=1,T.v=ia(lt(w)),T.m=null,T.P=!0,lo(T,_)}e.Za=function(){this.C!=null&&(this.C=null,da(this),wr(this),He(19))};function _a(_){_.C!=null&&(l.clearTimeout(_.C),_.C=null)}function Vo(_,w){var T=null;if(_.g==w){_a(_),xr(_),_.g=null;var I=2}else if(gr(_.h,w))T=w.D,po(_.h,w),I=1;else return;if(_.G!=0){if(w.o)if(I==1){T=w.m?w.m.length:0,w=Date.now()-w.F;var V=_.B;I=Zn(),$e(I,new ro(I,T)),ca(_)}else Lo(_);else if(V=w.s,V==3||V==0&&0<w.X||!(I==1&&pc(_,w)||I==2&&wr(_)))switch(T&&0<T.length&&(w=_.h,w.i=w.i.concat(T)),V){case 1:Ot(_,5);break;case 4:Ot(_,10);break;case 3:Ot(_,6);break;default:Ot(_,2)}}}function $o(_,w){let T=_.Ta+Math.floor(Math.random()*_.cb);return _.isActive()||(T*=2),T*w}function Ot(_,w){if(_.j.info("Error code "+w),w==2){var T=f(_.fb,_),I=_.Xa;const V=!I;I=new It(I||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||aa(I,"https"),ia(I),V?lc(I.toString(),T):dc(I.toString(),T)}else He(2);_.G=0,_.l&&_.l.sa(w),Ho(_),Io(_)}e.fb=function(_){_?(this.j.info("Successfully pinged google.com"),He(2)):(this.j.info("Failed to ping google.com"),He(1))};function Ho(_){if(_.G=0,_.ka=[],_.l){const w=mo(_.h);(w.length!=0||_.i.length!=0)&&(p(_.ka,w),p(_.ka,_.i),_.h.i.length=0,h(_.i),_.i.length=0),_.l.ra()}}function Fo(_,w,T){var I=T instanceof It?lt(T):new It(T);if(I.g!="")w&&(I.g=w+"."+I.g),ra(I,I.s);else{var V=l.location;I=V.protocol,w=w?w+"."+V.hostname:V.hostname,V=+V.port;var H=new It(null);I&&aa(H,I),w&&(H.g=w),V&&ra(H,V),T&&(H.l=T),I=H}return T=_.D,w=_.ya,T&&w&&ue(I,T,w),ue(I,"VER",_.la),kn(_,I),I}function Uo(_,w,T){if(w&&!_.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=_.Ca&&!_.pa?new pe(new oa({eb:T})):new pe(_.pa),w.Ha(_.J),w}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function zo(){}e=zo.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function ua(){}ua.prototype.g=function(_,w){return new je(_,w)};function je(_,w){Ce.call(this),this.g=new Mo(w),this.l=_,this.h=w&&w.messageUrlParams||null,_=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(_?_["X-WebChannel-Content-Type"]=w.messageContentType:_={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(_?_["X-WebChannel-Client-Profile"]=w.va:_={"X-WebChannel-Client-Profile":w.va}),this.g.S=_,(_=w&&w.Sb)&&!x(_)&&(this.g.m=_),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!x(w)&&(this.g.D=w,_=this.h,_!==null&&w in _&&(_=this.h,w in _&&delete _[w])),this.j=new Wt(this)}g(je,Ce),je.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},je.prototype.close=function(){br(this.g)},je.prototype.o=function(_){var w=this.g;if(typeof _=="string"){var T={};T.__data__=_,_=T}else this.u&&(T={},T.__data__=lr(_),_=T);w.i.push(new Xd(w.Ya++,_)),w.G==3&&ca(w)},je.prototype.N=function(){this.g.l=null,delete this.j,br(this.g),delete this.g,je.aa.N.call(this)};function jo(_){cr.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var w=_.__sm__;if(w){e:{for(const T in w){_=T;break e}_=void 0}(this.i=_)&&(_=this.i,w=w!==null&&_ in w?w[_]:void 0),this.data=w}else this.data=_}g(jo,cr);function qo(){_r.call(this),this.status=1}g(qo,_r);function Wt(_){this.g=_}g(Wt,zo),Wt.prototype.ua=function(){$e(this.g,"a")},Wt.prototype.ta=function(_){$e(this.g,new jo(_))},Wt.prototype.sa=function(_){$e(this.g,new qo)},Wt.prototype.ra=function(){$e(this.g,"b")},ua.prototype.createWebChannel=ua.prototype.g,je.prototype.send=je.prototype.o,je.prototype.open=je.prototype.m,je.prototype.close=je.prototype.close,Pl=function(){return new ua},Ll=function(){return Zn()},Rl=Nt,Gr={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ea.NO_ERROR=0,ea.TIMEOUT=8,ea.HTTP_ERROR=6,ya=ea,io.COMPLETE="complete",Ol=io,eo.EventType=un,un.OPEN="a",un.CLOSE="b",un.ERROR="c",un.MESSAGE="d",Ce.prototype.listen=Ce.prototype.K,Dn=eo,pe.prototype.listenOnce=pe.prototype.L,pe.prototype.getLastError=pe.prototype.Ka,pe.prototype.getLastErrorCode=pe.prototype.Ba,pe.prototype.getStatus=pe.prototype.Z,pe.prototype.getResponseJson=pe.prototype.Oa,pe.prototype.getResponseText=pe.prototype.oa,pe.prototype.send=pe.prototype.ea,pe.prototype.setWithCredentials=pe.prototype.Ha,Il=pe}).apply(typeof fa<"u"?fa:typeof self<"u"?self:typeof window<"u"?window:{});const xs="@firebase/firestore",ks="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Le.UNAUTHENTICATED=new Le(null),Le.GOOGLE_CREDENTIALS=new Le("google-credentials-uid"),Le.FIRST_PARTY=new Le("first-party-uid"),Le.MOCK_USER=new Le("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cn="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht=new Al("@firebase/firestore");function Qt(){return Ht.logLevel}function K(e,...t){if(Ht.logLevel<=re.DEBUG){const n=t.map(vi);Ht.debug(`Firestore (${cn}): ${e}`,...n)}}function Ft(e,...t){if(Ht.logLevel<=re.ERROR){const n=t.map(vi);Ht.error(`Firestore (${cn}): ${e}`,...n)}}function ja(e,...t){if(Ht.logLevel<=re.WARN){const n=t.map(vi);Ht.warn(`Firestore (${cn}): ${e}`,...n)}}function vi(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(e,t,n){let a="Unexpected state";typeof t=="string"?a=t:n=t,Vl(e,a,n)}function Vl(e,t,n){let a=`FIRESTORE (${cn}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw Ft(a),new Error(a)}function ge(e,t,n,a){let i="Unexpected state";typeof n=="string"?i=n:a=n,e||Vl(t,i,a)}function _e(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends dn{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Kh{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Le.UNAUTHENTICATED))}shutdown(){}}class Jh{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Gh{constructor(t){this.t=t,this.currentUser=Le.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ge(this.o===void 0,42304);let a=this.i;const i=s=>this.i!==a?(a=this.i,n(s)):Promise.resolve();let r=new Vt;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Vt,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const s=r;t.enqueueRetryable(async()=>{await s.promise,await i(this.currentUser)})},l=s=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=s,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(s=>l(s)),setTimeout(()=>{if(!this.auth){const s=this.t.getImmediate({optional:!0});s?l(s):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Vt)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(a=>this.i!==t?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(ge(typeof a.accessToken=="string",31837,{l:a}),new $l(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ge(t===null||typeof t=="string",2055,{h:t}),new Le(t)}}class Qh{constructor(t,n,a){this.P=t,this.T=n,this.I=a,this.type="FirstParty",this.user=Le.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Xh{constructor(t,n,a){this.P=t,this.T=n,this.I=a}getToken(){return Promise.resolve(new Qh(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(Le.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Es{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zh{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mh(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ge(this.o===void 0,3512);const a=r=>{r.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>a(r))};const i=r=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>i(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?i(r):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Es(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Es(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let a=0;a<e;a++)n[a]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const i=ef(40);for(let r=0;r<i.length;++r)a.length<20&&i[r]<n&&(a+=t.charAt(i[r]%62))}return a}}function ie(e,t){return e<t?-1:e>t?1:0}function Qr(e,t){let n=0;for(;n<e.length&&n<t.length;){const a=e.codePointAt(n),i=t.codePointAt(n);if(a!==i){if(a<128&&i<128)return ie(a,i);{const r=tf(),o=nf(r.encode(Ts(e,n)),r.encode(Ts(t,n)));return o!==0?o:ie(a,i)}}n+=a>65535?2:1}return ie(e.length,t.length)}function Ts(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function nf(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return ie(e[n],t[n]);return ie(e.length,t.length)}function an(e,t,n){return e.length===t.length&&e.every((a,i)=>n(a,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=-62135596800,Ss=1e6;class be{static now(){return be.fromMillis(Date.now())}static fromDate(t){return be.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),a=Math.floor((t-1e3*n)*Ss);return new be(n,a)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<As)throw new Q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ss}_compareTo(t){return this.seconds===t.seconds?ie(this.nanoseconds,t.nanoseconds):ie(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-As;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{static fromTimestamp(t){return new he(t)}static min(){return new he(new be(0,0))}static max(){return new he(new be(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="__name__";class nt{constructor(t,n,a){n===void 0?n=0:n>t.length&&ne(637,{offset:n,range:t.length}),a===void 0?a=t.length-n:a>t.length-n&&ne(1746,{length:a,range:t.length-n}),this.segments=t,this.offset=n,this.len=a}get length(){return this.len}isEqual(t){return nt.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof nt?t.forEach(a=>{n.push(a)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,a=this.limit();n<a;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const a=Math.min(t.length,n.length);for(let i=0;i<a;i++){const r=nt.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return ie(t.length,n.length)}static compareSegments(t,n){const a=nt.isNumericId(t),i=nt.isNumericId(n);return a&&!i?-1:!a&&i?1:a&&i?nt.extractNumericId(t).compare(nt.extractNumericId(n)):Qr(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return gi.fromString(t.substring(4,t.length-2))}}class me extends nt{construct(t,n,a){return new me(t,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const a of t){if(a.indexOf("//")>=0)throw new Q(j.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter(i=>i.length>0))}return new me(n)}static emptyPath(){return new me([])}}const af=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Se extends nt{construct(t,n,a){return new Se(t,n,a)}static isValidIdentifier(t){return af.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Se.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ds}static keyField(){return new Se([Ds])}static fromServerFormat(t){const n=[];let a="",i=0;const r=()=>{if(a.length===0)throw new Q(j.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let o=!1;for(;i<t.length;){const l=t[i];if(l==="\\"){if(i+1===t.length)throw new Q(j.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const s=t[i+1];if(s!=="\\"&&s!=="."&&s!=="`")throw new Q(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);a+=s,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(a+=l,i++):(r(),i++)}if(r(),o)throw new Q(j.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Se(n)}static emptyPath(){return new Se([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(t){this.path=t}static fromPath(t){return new ee(me.fromString(t))}static fromName(t){return new ee(me.fromString(t).popFirst(5))}static empty(){return new ee(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&me.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return me.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ee(new me(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n=-1;function rf(e,t){const n=e.toTimestamp().seconds,a=e.toTimestamp().nanoseconds+1,i=he.fromTimestamp(a===1e9?new be(n+1,0):new be(n,a));return new Tt(i,ee.empty(),t)}function of(e){return new Tt(e.readTime,e.key,$n)}class Tt{constructor(t,n,a){this.readTime=t,this.documentKey=n,this.largestBatchId=a}static min(){return new Tt(he.min(),ee.empty(),$n)}static max(){return new Tt(he.max(),ee.empty(),$n)}}function sf(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=ee.comparator(e.documentKey,t.documentKey),n!==0?n:ie(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class df{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yi(e){if(e.code!==j.FAILED_PRECONDITION||e.message!==lf)throw e;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new U((a,i)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(a,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(a,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):U.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):U.reject(n)}static resolve(t){return new U((n,a)=>{n(t)})}static reject(t){return new U((n,a)=>{a(t)})}static waitFor(t){return new U((n,a)=>{let i=0,r=0,o=!1;t.forEach(l=>{++i,l.next(()=>{++r,o&&r===i&&n()},s=>a(s))}),o=!0,r===i&&n()})}static or(t){let n=U.resolve(!1);for(const a of t)n=n.next(i=>i?U.resolve(i):a());return n}static forEach(t,n){const a=[];return t.forEach((i,r)=>{a.push(n.call(this,i,r))}),this.waitFor(a)}static mapArray(t,n){return new U((a,i)=>{const r=t.length,o=new Array(r);let l=0;for(let s=0;s<r;s++){const d=s;n(t[d]).next(c=>{o[d]=c,++l,l===r&&a(o)},c=>i(c))}})}static doWhile(t,n){return new U((a,i)=>{const r=()=>{t()===!0?n().next(()=>{r()},i):a()};r()})}}function cf(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function qn(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=a=>this.ue(a),this.ce=a=>n.writeSequenceNumber(a))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}bi.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=-1;function xi(e){return e==null}function Ma(e){return e===0&&1/e==-1/0}function _f(e){return typeof e=="number"&&Number.isInteger(e)&&!Ma(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl="";function uf(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Cs(t)),t=hf(e.get(n),t);return Cs(t)}function hf(e,t){let n=t;const a=e.length;for(let i=0;i<a;i++){const r=e.charAt(i);switch(r){case"\0":n+="";break;case Fl:n+="";break;default:n+=r}}return n}function Cs(e){return e+Fl+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function jt(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ul(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(t,n){this.comparator=t,this.root=n||Te.EMPTY}insert(t,n){return new ze(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Te.BLACK,null,null))}remove(t){return new ze(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Te.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(t,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(t){let n=0,a=this.root;for(;!a.isEmpty();){const i=this.comparator(t,a.key);if(i===0)return n+a.left.size;i<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,a)=>(t(n,a),!1))}toString(){const t=[];return this.inorderTraversal((n,a)=>(t.push(`${n}:${a}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new pa(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new pa(this.root,t,this.comparator,!1)}getReverseIterator(){return new pa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new pa(this.root,t,this.comparator,!0)}}class pa{constructor(t,n,a,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?a(t.key,n):1,n&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Te{constructor(t,n,a,i,r){this.key=t,this.value=n,this.color=a??Te.RED,this.left=i??Te.EMPTY,this.right=r??Te.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,a,i,r){return new Te(t??this.key,n??this.value,a??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,a){let i=this;const r=a(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,n,a),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,a)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Te.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let a,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Te.EMPTY;a=i.right.min(),i=i.copy(a.key,a.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Te.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Te.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw ne(27949);return t+(this.isRed()?0:1)}}Te.EMPTY=null,Te.RED=!0,Te.BLACK=!1;Te.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(t,n,a,i,r){return this}insert(t,n,a){return new Te(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(t){this.comparator=t,this.data=new ze(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,a)=>(t(n),!1))}forEachInRange(t,n){const a=this.data.getIteratorFrom(t[0]);for(;a.hasNext();){const i=a.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!t(a.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ms(this.data.getIterator())}getIteratorFrom(t){return new Ms(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(a=>{n=n.add(a)}),n}isEqual(t){if(!(t instanceof De)||this.size!==t.size)return!1;const n=this.data.getIterator(),a=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=a.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new De(this.comparator);return n.data=t,n}}class Ms{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t){this.fields=t,t.sort(Se.comparator)}static empty(){return new Ye([])}unionWith(t){let n=new De(Se.comparator);for(const a of this.fields)n=n.add(a);for(const a of t)n=n.add(a);return new Ye(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return an(this.fields,t.fields,(n,a)=>n.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new ff("Invalid base64 string: "+r):r}}(t);return new it(n)}static fromUint8Array(t){const n=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(t);return new it(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const a=new Uint8Array(n.length);for(let i=0;i<n.length;i++)a[i]=n.charCodeAt(i);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ie(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}it.EMPTY_BYTE_STRING=new it("");const pf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ut(e){if(ge(!!e,39018),typeof e=="string"){let t=0;const n=pf.exec(e);if(ge(!!n,46558,{timestamp:e}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const a=new Date(e);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:Ae(e.seconds),nanos:Ae(e.nanos)}}function Ae(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function rn(e){return typeof e=="string"?it.fromBase64String(e):it.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl="server_timestamp",jl="__type__",ql="__previous_value__",Bl="__local_write_time__";function ki(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[jl])===null||n===void 0?void 0:n.stringValue)===zl}function Ei(e){const t=e.mapValue.fields[ql];return ki(t)?Ei(t):t}function Ia(e){const t=Ut(e.mapValue.fields[Bl].timestampValue);return new be(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(t,n,a,i,r,o,l,s,d,c){this.databaseId=t,this.appId=n,this.persistenceKey=a,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=s,this.useFetchStreams=d,this.isUsingEmulator=c}}const Oa="(default)";class Ra{constructor(t,n){this.projectId=t,this.database=n||Oa}static empty(){return new Ra("","")}get isDefaultDatabase(){return this.database===Oa}isEqual(t){return t instanceof Ra&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl="__type__",gf="__max__",ma={mapValue:{}},Wl="__vector__",Xr="value";function zt(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ki(e)?4:yf(e)?9007199254740991:vf(e)?10:11:ne(28295,{value:e})}function ot(e,t){if(e===t)return!0;const n=zt(e);if(n!==zt(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ia(e).isEqual(Ia(t));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=Ut(i.timestampValue),l=Ut(r.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,r){return rn(i.bytesValue).isEqual(rn(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,r){return Ae(i.geoPointValue.latitude)===Ae(r.geoPointValue.latitude)&&Ae(i.geoPointValue.longitude)===Ae(r.geoPointValue.longitude)}(e,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Ae(i.integerValue)===Ae(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=Ae(i.doubleValue),l=Ae(r.doubleValue);return o===l?Ma(o)===Ma(l):isNaN(o)&&isNaN(l)}return!1}(e,t);case 9:return an(e.arrayValue.values||[],t.arrayValue.values||[],ot);case 10:case 11:return function(i,r){const o=i.mapValue.fields||{},l=r.mapValue.fields||{};if(Ns(o)!==Ns(l))return!1;for(const s in o)if(o.hasOwnProperty(s)&&(l[s]===void 0||!ot(o[s],l[s])))return!1;return!0}(e,t);default:return ne(52216,{left:e})}}function Hn(e,t){return(e.values||[]).find(n=>ot(n,t))!==void 0}function on(e,t){if(e===t)return 0;const n=zt(e),a=zt(t);if(n!==a)return ie(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(e.booleanValue,t.booleanValue);case 2:return function(r,o){const l=Ae(r.integerValue||r.doubleValue),s=Ae(o.integerValue||o.doubleValue);return l<s?-1:l>s?1:l===s?0:isNaN(l)?isNaN(s)?0:-1:1}(e,t);case 3:return Is(e.timestampValue,t.timestampValue);case 4:return Is(Ia(e),Ia(t));case 5:return Qr(e.stringValue,t.stringValue);case 6:return function(r,o){const l=rn(r),s=rn(o);return l.compareTo(s)}(e.bytesValue,t.bytesValue);case 7:return function(r,o){const l=r.split("/"),s=o.split("/");for(let d=0;d<l.length&&d<s.length;d++){const c=ie(l[d],s[d]);if(c!==0)return c}return ie(l.length,s.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,o){const l=ie(Ae(r.latitude),Ae(o.latitude));return l!==0?l:ie(Ae(r.longitude),Ae(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Os(e.arrayValue,t.arrayValue);case 10:return function(r,o){var l,s,d,c;const u=r.fields||{},f=o.fields||{},y=(l=u[Xr])===null||l===void 0?void 0:l.arrayValue,g=(s=f[Xr])===null||s===void 0?void 0:s.arrayValue,h=ie(((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0,((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0);return h!==0?h:Os(y,g)}(e.mapValue,t.mapValue);case 11:return function(r,o){if(r===ma.mapValue&&o===ma.mapValue)return 0;if(r===ma.mapValue)return 1;if(o===ma.mapValue)return-1;const l=r.fields||{},s=Object.keys(l),d=o.fields||{},c=Object.keys(d);s.sort(),c.sort();for(let u=0;u<s.length&&u<c.length;++u){const f=Qr(s[u],c[u]);if(f!==0)return f;const y=on(l[s[u]],d[c[u]]);if(y!==0)return y}return ie(s.length,c.length)}(e.mapValue,t.mapValue);default:throw ne(23264,{Pe:n})}}function Is(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ie(e,t);const n=Ut(e),a=Ut(t),i=ie(n.seconds,a.seconds);return i!==0?i:ie(n.nanos,a.nanos)}function Os(e,t){const n=e.values||[],a=t.values||[];for(let i=0;i<n.length&&i<a.length;++i){const r=on(n[i],a[i]);if(r)return r}return ie(n.length,a.length)}function sn(e){return Zr(e)}function Zr(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const a=Ut(n);return`time(${a.seconds},${a.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return rn(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return ee.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let a="[",i=!0;for(const r of n.values||[])i?i=!1:a+=",",a+=Zr(r);return a+"]"}(e.arrayValue):"mapValue"in e?function(n){const a=Object.keys(n.fields||{}).sort();let i="{",r=!0;for(const o of a)r?r=!1:i+=",",i+=`${o}:${Zr(n.fields[o])}`;return i+"}"}(e.mapValue):ne(61005,{value:e})}function ba(e){switch(zt(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Ei(e);return t?16+ba(t):16;case 5:return 2*e.stringValue.length;case 6:return rn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((i,r)=>i+ba(r),0)}(e.arrayValue);case 10:case 11:return function(a){let i=0;return jt(a.fields,(r,o)=>{i+=r.length+ba(o)}),i}(e.mapValue);default:throw ne(13486,{value:e})}}function ei(e){return!!e&&"integerValue"in e}function Ti(e){return!!e&&"arrayValue"in e}function wa(e){return!!e&&"mapValue"in e}function vf(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Yl])===null||n===void 0?void 0:n.stringValue)===Wl}function Mn(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return jt(e.mapValue.fields,(n,a)=>t.mapValue.fields[n]=Mn(a)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Mn(e.arrayValue.values[n]);return t}return Object.assign({},e)}function yf(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===gf}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(t){this.value=t}static empty(){return new qe({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let a=0;a<t.length-1;++a)if(n=(n.mapValue.fields||{})[t.get(a)],!wa(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Mn(n)}setAll(t){let n=Se.emptyPath(),a={},i=[];t.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const s=this.getFieldsMap(n);this.applyChanges(s,a,i),a={},i=[],n=l.popLast()}o?a[l.lastSegment()]=Mn(o):i.push(l.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,a,i)}delete(t){const n=this.field(t.popLast());wa(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ot(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<t.length;++a){let i=n.mapValue.fields[t.get(a)];wa(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(a)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,a){jt(n,(i,r)=>t[i]=r);for(const i of a)delete t[i]}clone(){return new qe(Mn(this.value))}}function Kl(e){const t=[];return jt(e.fields,(n,a)=>{const i=new Se([n]);if(wa(a)){const r=Kl(a.mapValue).fields;if(r.length===0)t.push(i);else for(const o of r)t.push(i.child(o))}else t.push(i)}),new Ye(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t,n,a,i,r,o,l){this.key=t,this.documentType=n,this.version=a,this.readTime=i,this.createTime=r,this.data=o,this.documentState=l}static newInvalidDocument(t){return new Ze(t,0,he.min(),he.min(),he.min(),qe.empty(),0)}static newFoundDocument(t,n,a,i){return new Ze(t,1,n,he.min(),a,i,0)}static newNoDocument(t,n){return new Ze(t,2,n,he.min(),he.min(),qe.empty(),0)}static newUnknownDocument(t,n){return new Ze(t,3,n,he.min(),he.min(),qe.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=qe.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=qe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ze&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ze(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(t,n){this.position=t,this.inclusive=n}}function Rs(e,t,n){let a=0;for(let i=0;i<e.position.length;i++){const r=t[i],o=e.position[i];if(r.field.isKeyField()?a=ee.comparator(ee.fromName(o.referenceValue),n.key):a=on(o,n.data.field(r.field)),r.dir==="desc"&&(a*=-1),a!==0)break}return a}function Ls(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ot(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(t,n="asc"){this.field=t,this.dir=n}}function bf(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{}class ke extends Jl{constructor(t,n,a){super(),this.field=t,this.op=n,this.value=a}static create(t,n,a){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,a):new xf(t,n,a):n==="array-contains"?new Tf(t,a):n==="in"?new Af(t,a):n==="not-in"?new Sf(t,a):n==="array-contains-any"?new Df(t,a):new ke(t,n,a)}static createKeyFieldInFilter(t,n,a){return n==="in"?new kf(t,a):new Ef(t,a)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(on(n,this.value)):n!==null&&zt(this.value)===zt(n)&&this.matchesComparison(on(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class At extends Jl{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new At(t,n)}matches(t){return Gl(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Gl(e){return e.op==="and"}function Ql(e){return wf(e)&&Gl(e)}function wf(e){for(const t of e.filters)if(t instanceof At)return!1;return!0}function ti(e){if(e instanceof ke)return e.field.canonicalString()+e.op.toString()+sn(e.value);if(Ql(e))return e.filters.map(t=>ti(t)).join(",");{const t=e.filters.map(n=>ti(n)).join(",");return`${e.op}(${t})`}}function Xl(e,t){return e instanceof ke?function(a,i){return i instanceof ke&&a.op===i.op&&a.field.isEqual(i.field)&&ot(a.value,i.value)}(e,t):e instanceof At?function(a,i){return i instanceof At&&a.op===i.op&&a.filters.length===i.filters.length?a.filters.reduce((r,o,l)=>r&&Xl(o,i.filters[l]),!0):!1}(e,t):void ne(19439)}function Zl(e){return e instanceof ke?function(n){return`${n.field.canonicalString()} ${n.op} ${sn(n.value)}`}(e):e instanceof At?function(n){return n.op.toString()+" {"+n.getFilters().map(Zl).join(" ,")+"}"}(e):"Filter"}class xf extends ke{constructor(t,n,a){super(t,n,a),this.key=ee.fromName(a.referenceValue)}matches(t){const n=ee.comparator(t.key,this.key);return this.matchesComparison(n)}}class kf extends ke{constructor(t,n){super(t,"in",n),this.keys=ed("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class Ef extends ke{constructor(t,n){super(t,"not-in",n),this.keys=ed("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function ed(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(a=>ee.fromName(a.referenceValue))}class Tf extends ke{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Ti(n)&&Hn(n.arrayValue,this.value)}}class Af extends ke{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Hn(this.value.arrayValue,n)}}class Sf extends ke{constructor(t,n){super(t,"not-in",n)}matches(t){if(Hn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Hn(this.value.arrayValue,n)}}class Df extends ke{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Ti(n)||!n.arrayValue.values)&&n.arrayValue.values.some(a=>Hn(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(t,n=null,a=[],i=[],r=null,o=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=a,this.filters=i,this.limit=r,this.startAt=o,this.endAt=l,this.Ie=null}}function Ps(e,t=null,n=[],a=[],i=null,r=null,o=null){return new Cf(e,t,n,a,i,r,o)}function Ai(e){const t=_e(e);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(a=>ti(a)).join(","),n+="|ob:",n+=t.orderBy.map(a=>function(r){return r.field.canonicalString()+r.dir}(a)).join(","),xi(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(a=>sn(a)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(a=>sn(a)).join(",")),t.Ie=n}return t.Ie}function Si(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!bf(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Xl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ls(e.startAt,t.startAt)&&Ls(e.endAt,t.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(t,n=null,a=[],i=[],r=null,o="F",l=null,s=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=i,this.limit=r,this.limitType=o,this.startAt=l,this.endAt=s,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Nf(e,t,n,a,i,r,o,l){return new qa(e,t,n,a,i,r,o,l)}function Mf(e){return new qa(e)}function Vs(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function If(e){return e.collectionGroup!==null}function In(e){const t=_e(e);if(t.Ee===null){t.Ee=[];const n=new Set;for(const r of t.explicitOrderBy)t.Ee.push(r),n.add(r.field.canonicalString());const a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new De(Se.comparator);return o.filters.forEach(s=>{s.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.Ee.push(new Pa(r,a))}),n.has(Se.keyField().canonicalString())||t.Ee.push(new Pa(Se.keyField(),a))}return t.Ee}function $t(e){const t=_e(e);return t.de||(t.de=Of(t,In(e))),t.de}function Of(e,t){if(e.limitType==="F")return Ps(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const r=i.dir==="desc"?"asc":"desc";return new Pa(i.field,r)});const n=e.endAt?new La(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new La(e.startAt.position,e.startAt.inclusive):null;return Ps(e.path,e.collectionGroup,t,e.filters,e.limit,n,a)}}function ni(e,t,n){return new qa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function td(e,t){return Si($t(e),$t(t))&&e.limitType===t.limitType}function nd(e){return`${Ai($t(e))}|lt:${e.limitType}`}function Tn(e){return`Query(target=${function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map(i=>Zl(i)).join(", ")}]`),xi(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map(i=>sn(i)).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map(i=>sn(i)).join(",")),`Target(${a})`}($t(e))}; limitType=${e.limitType})`}function Di(e,t){return t.isFoundDocument()&&function(a,i){const r=i.key.path;return a.collectionGroup!==null?i.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(r):ee.isDocumentKey(a.path)?a.path.isEqual(r):a.path.isImmediateParentOf(r)}(e,t)&&function(a,i){for(const r of In(a))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(e,t)&&function(a,i){for(const r of a.filters)if(!r.matches(i))return!1;return!0}(e,t)&&function(a,i){return!(a.startAt&&!function(o,l,s){const d=Rs(o,l,s);return o.inclusive?d<=0:d<0}(a.startAt,In(a),i)||a.endAt&&!function(o,l,s){const d=Rs(o,l,s);return o.inclusive?d>=0:d>0}(a.endAt,In(a),i))}(e,t)}function Rf(e){return(t,n)=>{let a=!1;for(const i of In(e)){const r=Lf(i,t,n);if(r!==0)return r;a=a||i.field.isKeyField()}return 0}}function Lf(e,t,n){const a=e.field.isKeyField()?ee.comparator(t.key,n.key):function(r,o,l){const s=o.data.field(r),d=l.data.field(r);return s!==null&&d!==null?on(s,d):ne(42886)}(e.field,t,n);switch(e.dir){case"asc":return a;case"desc":return-1*a;default:return ne(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),a=this.inner[n];if(a!==void 0){for(const[i,r]of a)if(this.equalsFn(i,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const a=this.mapKeyFn(t),i=this.inner[a];if(i===void 0)return this.inner[a]=[[t,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),a=this.inner[n];if(a===void 0)return!1;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],t))return a.length===1?delete this.inner[n]:a.splice(i,1),this.innerSize--,!0;return!1}forEach(t){jt(this.inner,(n,a)=>{for(const[i,r]of a)t(i,r)})}isEmpty(){return Ul(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=new ze(ee.comparator);function Va(){return Pf}const ad=new ze(ee.comparator);function ga(...e){let t=ad;for(const n of e)t=t.insert(n.key,n);return t}function rd(e){let t=ad;return e.forEach((n,a)=>t=t.insert(n,a.overlayedDocument)),t}function Lt(){return On()}function id(){return On()}function On(){return new qt(e=>e.toString(),(e,t)=>e.isEqual(t))}const Vf=new ze(ee.comparator),$f=new De(ee.comparator);function Pe(...e){let t=$f;for(const n of e)t=t.add(n);return t}const Hf=new De(ie);function Ff(){return Hf}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ma(t)?"-0":t}}function od(e){return{integerValue:""+e}}function Uf(e,t){return _f(t)?od(t):Ci(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(){this._=void 0}}function zf(e,t,n){return e instanceof $a?function(i,r){const o={fields:{[jl]:{stringValue:zl},[Bl]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&ki(r)&&(r=Ei(r)),r&&(o.fields[ql]=r),{mapValue:o}}(n,t):e instanceof Fn?ld(e,t):e instanceof Un?dd(e,t):function(i,r){const o=sd(i,r),l=$s(o)+$s(i.Re);return ei(o)&&ei(i.Re)?od(l):Ci(i.serializer,l)}(e,t)}function jf(e,t,n){return e instanceof Fn?ld(e,t):e instanceof Un?dd(e,t):n}function sd(e,t){return e instanceof Ha?function(a){return ei(a)||function(r){return!!r&&"doubleValue"in r}(a)}(t)?t:{integerValue:0}:null}class $a extends Ba{}class Fn extends Ba{constructor(t){super(),this.elements=t}}function ld(e,t){const n=cd(t);for(const a of e.elements)n.some(i=>ot(i,a))||n.push(a);return{arrayValue:{values:n}}}class Un extends Ba{constructor(t){super(),this.elements=t}}function dd(e,t){let n=cd(t);for(const a of e.elements)n=n.filter(i=>!ot(i,a));return{arrayValue:{values:n}}}class Ha extends Ba{constructor(t,n){super(),this.serializer=t,this.Re=n}}function $s(e){return Ae(e.integerValue||e.doubleValue)}function cd(e){return Ti(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function qf(e,t){return e.field.isEqual(t.field)&&function(a,i){return a instanceof Fn&&i instanceof Fn||a instanceof Un&&i instanceof Un?an(a.elements,i.elements,ot):a instanceof Ha&&i instanceof Ha?ot(a.Re,i.Re):a instanceof $a&&i instanceof $a}(e.transform,t.transform)}class Bf{constructor(t,n){this.version=t,this.transformResults=n}}class et{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new et}static exists(t){return new et(void 0,t)}static updateTime(t){return new et(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function xa(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Ya{}function _d(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Ni(e.key,et.none()):new Bn(e.key,e.data,et.none());{const n=e.data,a=qe.empty();let i=new De(Se.comparator);for(let r of t.fields)if(!i.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?a.delete(r):a.set(r,o),i=i.add(r)}return new Ct(e.key,a,new Ye(i.toArray()),et.none())}}function Yf(e,t,n){e instanceof Bn?function(i,r,o){const l=i.value.clone(),s=Fs(i.fieldTransforms,r,o.transformResults);l.setAll(s),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):e instanceof Ct?function(i,r,o){if(!xa(i.precondition,r))return void r.convertToUnknownDocument(o.version);const l=Fs(i.fieldTransforms,r,o.transformResults),s=r.data;s.setAll(ud(i)),s.setAll(l),r.convertToFoundDocument(o.version,s).setHasCommittedMutations()}(e,t,n):function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function Rn(e,t,n,a){return e instanceof Bn?function(r,o,l,s){if(!xa(r.precondition,o))return l;const d=r.value.clone(),c=Us(r.fieldTransforms,s,o);return d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(e,t,n,a):e instanceof Ct?function(r,o,l,s){if(!xa(r.precondition,o))return l;const d=Us(r.fieldTransforms,s,o),c=o.data;return c.setAll(ud(r)),c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(u=>u.field))}(e,t,n,a):function(r,o,l){return xa(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(e,t,n)}function Wf(e,t){let n=null;for(const a of e.fieldTransforms){const i=t.data.field(a.field),r=sd(a.transform,i||null);r!=null&&(n===null&&(n=qe.empty()),n.set(a.field,r))}return n||null}function Hs(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(a,i){return a===void 0&&i===void 0||!(!a||!i)&&an(a,i,(r,o)=>qf(r,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Bn extends Ya{constructor(t,n,a,i=[]){super(),this.key=t,this.value=n,this.precondition=a,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ct extends Ya{constructor(t,n,a,i,r=[]){super(),this.key=t,this.data=n,this.fieldMask=a,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function ud(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const a=e.data.field(n);t.set(n,a)}}),t}function Fs(e,t,n){const a=new Map;ge(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let i=0;i<n.length;i++){const r=e[i],o=r.transform,l=t.data.field(r.field);a.set(r.field,jf(o,l,n[i]))}return a}function Us(e,t,n){const a=new Map;for(const i of e){const r=i.transform,o=n.data.field(i.field);a.set(i.field,zf(r,o,t))}return a}class Ni extends Ya{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Kf extends Ya{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(t,n,a,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=a,this.mutations=i}applyToRemoteDocument(t,n){const a=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(t.key)&&Yf(r,t,a[i])}}applyToLocalView(t,n){for(const a of this.baseMutations)a.key.isEqual(t.key)&&(n=Rn(a,t,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(t.key)&&(n=Rn(a,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const a=id();return this.mutations.forEach(i=>{const r=t.get(i.key),o=r.overlayedDocument;let l=this.applyToLocalView(o,r.mutatedFields);l=n.has(i.key)?null:l;const s=_d(o,l);s!==null&&a.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(he.min())}),a}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Pe())}isEqual(t){return this.batchId===t.batchId&&an(this.mutations,t.mutations,(n,a)=>Hs(n,a))&&an(this.baseMutations,t.baseMutations,(n,a)=>Hs(n,a))}}class Mi{constructor(t,n,a,i){this.batch=t,this.commitVersion=n,this.mutationResults=a,this.docVersions=i}static from(t,n,a){ge(t.mutations.length===a.length,58842,{fe:t.mutations.length,ge:a.length});let i=function(){return Vf}();const r=t.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,a[o].version);return new Mi(t,n,a,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve,ae;function Qf(e){switch(e){case j.OK:return ne(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return ne(15467,{code:e})}}function Xf(e){if(e===void 0)return Ft("GRPC error has no .code"),j.UNKNOWN;switch(e){case ve.OK:return j.OK;case ve.CANCELLED:return j.CANCELLED;case ve.UNKNOWN:return j.UNKNOWN;case ve.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case ve.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case ve.INTERNAL:return j.INTERNAL;case ve.UNAVAILABLE:return j.UNAVAILABLE;case ve.UNAUTHENTICATED:return j.UNAUTHENTICATED;case ve.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case ve.NOT_FOUND:return j.NOT_FOUND;case ve.ALREADY_EXISTS:return j.ALREADY_EXISTS;case ve.PERMISSION_DENIED:return j.PERMISSION_DENIED;case ve.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case ve.ABORTED:return j.ABORTED;case ve.OUT_OF_RANGE:return j.OUT_OF_RANGE;case ve.UNIMPLEMENTED:return j.UNIMPLEMENTED;case ve.DATA_LOSS:return j.DATA_LOSS;default:return ne(39323,{code:e})}}(ae=ve||(ve={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new gi([4294967295,4294967295],0);class Zf{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function ai(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ep(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function tp(e,t){return ai(e,t.toTimestamp())}function nn(e){return ge(!!e,49232),he.fromTimestamp(function(n){const a=Ut(n);return new be(a.seconds,a.nanos)}(e))}function hd(e,t){return ri(e,t).canonicalString()}function ri(e,t){const n=function(i){return new me(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function np(e){const t=me.fromString(e);return ge(cp(t),10190,{key:t.toString()}),t}function ii(e,t){return hd(e.databaseId,t.path)}function ap(e){const t=np(e);return t.length===4?me.emptyPath():ip(t)}function rp(e){return new me(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ip(e){return ge(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function zs(e,t,n){return{name:ii(e,t),fields:n.value.mapValue.fields}}function op(e,t){let n;if(t instanceof Bn)n={update:zs(e,t.key,t.value)};else if(t instanceof Ni)n={delete:ii(e,t.key)};else if(t instanceof Ct)n={update:zs(e,t.key,t.data),updateMask:dp(t.fieldMask)};else{if(!(t instanceof Kf))return ne(16599,{ft:t.type});n={verify:ii(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(a=>function(r,o){const l=o.transform;if(l instanceof $a)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Fn)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Un)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ha)return{fieldPath:o.field.canonicalString(),increment:l.Re};throw ne(20930,{transform:o.transform})}(0,a))),t.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:tp(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:ne(27497)}(e,t.precondition)),n}function sp(e,t){return e&&e.length>0?(ge(t!==void 0,14353),e.map(n=>function(i,r){let o=i.updateTime?nn(i.updateTime):nn(r);return o.isEqual(he.min())&&(o=nn(r)),new Bf(o,i.transformResults||[])}(n,t))):[]}function lp(e){let t=ap(e.parent);const n=e.structuredQuery,a=n.from?n.from.length:0;let i=null;if(a>0){ge(a===1,65062);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let r=[];n.where&&(r=function(u){const f=fd(u);return f instanceof At&&Ql(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(u){return u.map(f=>function(g){return new Pa(Xt(g.field),function(p){switch(p){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(f))}(n.orderBy));let l=null;n.limit&&(l=function(u){let f;return f=typeof u=="object"?u.value:u,xi(f)?null:f}(n.limit));let s=null;n.startAt&&(s=function(u){const f=!!u.before,y=u.values||[];return new La(y,f)}(n.startAt));let d=null;return n.endAt&&(d=function(u){const f=!u.before,y=u.values||[];return new La(y,f)}(n.endAt)),Nf(t,i,o,r,l,"F",s,d)}function fd(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=Xt(n.unaryFilter.field);return ke.create(a,"==",{doubleValue:NaN});case"IS_NULL":const i=Xt(n.unaryFilter.field);return ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Xt(n.unaryFilter.field);return ke.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Xt(n.unaryFilter.field);return ke.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(e):e.fieldFilter!==void 0?function(n){return ke.create(Xt(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return At.create(n.compositeFilter.filters.map(a=>fd(a)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(n.compositeFilter.op))}(e):ne(30097,{filter:e})}function Xt(e){return Se.fromServerFormat(e.fieldPath)}function dp(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function cp(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(t){this.wt=t}}function up(e){const t=lp({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?ni(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(){this.Cn=new fp}addToCollectionParentIndex(t,n){return this.Cn.add(n),U.resolve()}getCollectionParents(t,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return U.resolve()}deleteFieldIndex(t,n){return U.resolve()}deleteAllFieldIndexes(t){return U.resolve()}createTargetIndexes(t,n){return U.resolve()}getDocumentsMatchingTarget(t,n){return U.resolve(null)}getIndexType(t,n){return U.resolve(0)}getFieldIndexes(t,n){return U.resolve([])}getNextCollectionGroupToUpdate(t){return U.resolve(null)}getMinOffset(t,n){return U.resolve(Tt.min())}getMinOffsetFromCollectionGroup(t,n){return U.resolve(Tt.min())}updateCollectionGroup(t,n,a){return U.resolve()}updateIndexEntries(t,n){return U.resolve()}}class fp{constructor(){this.index={}}add(t){const n=t.lastSegment(),a=t.popLast(),i=this.index[n]||new De(me.comparator),r=!i.has(a);return this.index[n]=i.add(a),r}has(t){const n=t.lastSegment(),a=t.popLast(),i=this.index[n];return i&&i.has(a)}getEntries(t){return(this.index[t]||new De(me.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pd=41943040;class Ue{static withCacheSize(t){return new Ue(t,Ue.DEFAULT_COLLECTION_PERCENTILE,Ue.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,a){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ue.DEFAULT_COLLECTION_PERCENTILE=10,Ue.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ue.DEFAULT=new Ue(pd,Ue.DEFAULT_COLLECTION_PERCENTILE,Ue.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ue.DISABLED=new Ue(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new ln(0)}static lr(){return new ln(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="LruGarbageCollector",pp=1048576;function Bs([e,t],[n,a]){const i=ie(e,n);return i===0?ie(t,a):i}class mp{constructor(t){this.Er=t,this.buffer=new De(Bs),this.dr=0}Ar(){return++this.dr}Rr(t){const n=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();Bs(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class gp{constructor(t,n,a){this.garbageCollector=t,this.asyncQueue=n,this.localStore=a,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){K(qs,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){qn(n)?K(qs,"Ignoring IndexedDB error during garbage collection: ",n):await yi(n)}await this.mr(3e5)})}}class vp{constructor(t,n){this.gr=t,this.params=n}calculateTargetCount(t,n){return this.gr.pr(t).next(a=>Math.floor(n/100*a))}nthSequenceNumber(t,n){if(n===0)return U.resolve(bi.le);const a=new mp(n);return this.gr.forEachTarget(t,i=>a.Rr(i.sequenceNumber)).next(()=>this.gr.yr(t,i=>a.Rr(i))).next(()=>a.maxValue)}removeTargets(t,n,a){return this.gr.removeTargets(t,n,a)}removeOrphanedDocuments(t,n){return this.gr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(js)):this.getCacheSize(t).next(a=>a<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),js):this.wr(t,n))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,n){let a,i,r,o,l,s,d;const c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(u=>(u>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${u}`),i=this.params.maximumSequenceNumbersToCollect):i=u,o=Date.now(),this.nthSequenceNumber(t,i))).next(u=>(a=u,l=Date.now(),this.removeTargets(t,a,n))).next(u=>(r=u,s=Date.now(),this.removeOrphanedDocuments(t,a))).next(u=>(d=Date.now(),Qt()<=re.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${r} targets in `+(s-l)+`ms
	Removed ${u} documents in `+(d-s)+`ms
Total Duration: ${d-c}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:u})))}}function yp(e,t){return new vp(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(){this.changes=new qt(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ze.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?U.resolve(a):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(t,n,a,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=i}getDocument(t,n){let a=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(a=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(a!==null&&Rn(a.mutation,i,Ye.empty(),be.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(a=>this.getLocalViewOfDocuments(t,a,Pe()).next(()=>a))}getLocalViewOfDocuments(t,n,a=Pe()){const i=Lt();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,a).next(r=>{let o=ga();return r.forEach((l,s)=>{o=o.insert(l,s.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const a=Lt();return this.populateOverlays(t,a,n).next(()=>this.computeViews(t,n,a,Pe()))}populateOverlays(t,n,a){const i=[];return a.forEach(r=>{n.has(r)||i.push(r)}),this.documentOverlayCache.getOverlays(t,i).next(r=>{r.forEach((o,l)=>{n.set(o,l)})})}computeViews(t,n,a,i){let r=Va();const o=On(),l=function(){return On()}();return n.forEach((s,d)=>{const c=a.get(d.key);i.has(d.key)&&(c===void 0||c.mutation instanceof Ct)?r=r.insert(d.key,d):c!==void 0?(o.set(d.key,c.mutation.getFieldMask()),Rn(c.mutation,d,c.mutation.getFieldMask(),be.now())):o.set(d.key,Ye.empty())}),this.recalculateAndSaveOverlays(t,r).next(s=>(s.forEach((d,c)=>o.set(d,c)),n.forEach((d,c)=>{var u;return l.set(d,new wp(c,(u=o.get(d))!==null&&u!==void 0?u:null))}),l))}recalculateAndSaveOverlays(t,n){const a=On();let i=new ze((o,l)=>o-l),r=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const l of o)l.keys().forEach(s=>{const d=n.get(s);if(d===null)return;let c=a.get(s)||Ye.empty();c=l.applyToLocalView(d,c),a.set(s,c);const u=(i.get(l.batchId)||Pe()).add(s);i=i.insert(l.batchId,u)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const s=l.getNext(),d=s.key,c=s.value,u=id();c.forEach(f=>{if(!r.has(f)){const y=_d(n.get(f),a.get(f));y!==null&&u.set(f,y),r=r.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,d,u))}return U.waitFor(o)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(a=>this.recalculateAndSaveOverlays(t,a))}getDocumentsMatchingQuery(t,n,a,i){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):If(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,a,i):this.getDocumentsMatchingCollectionQuery(t,n,a,i)}getNextDocuments(t,n,a,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,a,i).next(r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,a.largestBatchId,i-r.size):U.resolve(Lt());let l=$n,s=r;return o.next(d=>U.forEach(d,(c,u)=>(l<u.largestBatchId&&(l=u.largestBatchId),r.get(c)?U.resolve():this.remoteDocumentCache.getEntry(t,c).next(f=>{s=s.insert(c,f)}))).next(()=>this.populateOverlays(t,d,r)).next(()=>this.computeViews(t,s,d,Pe())).next(c=>({batchId:l,changes:rd(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ee(n)).next(a=>{let i=ga();return a.isFoundDocument()&&(i=i.insert(a.key,a)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,a,i){const r=n.collectionGroup;let o=ga();return this.indexManager.getCollectionParents(t,r).next(l=>U.forEach(l,s=>{const d=function(u,f){return new qa(f,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,s.child(r));return this.getDocumentsMatchingCollectionQuery(t,d,a,i).next(c=>{c.forEach((u,f)=>{o=o.insert(u,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,a,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,a.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,a,r,i))).next(o=>{r.forEach((s,d)=>{const c=d.getKey();o.get(c)===null&&(o=o.insert(c,Ze.newInvalidDocument(c)))});let l=ga();return o.forEach((s,d)=>{const c=r.get(s);c!==void 0&&Rn(c.mutation,d,Ye.empty(),be.now()),Di(n,d)&&(l=l.insert(s,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,n){return U.resolve(this.kr.get(n))}saveBundleMetadata(t,n){return this.kr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:nn(i.createTime)}}(n)),U.resolve()}getNamedQuery(t,n){return U.resolve(this.qr.get(n))}saveNamedQuery(t,n){return this.qr.set(n.name,function(i){return{name:i.name,query:up(i.bundledQuery),readTime:nn(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(){this.overlays=new ze(ee.comparator),this.Qr=new Map}getOverlay(t,n){return U.resolve(this.overlays.get(n))}getOverlays(t,n){const a=Lt();return U.forEach(n,i=>this.getOverlay(t,i).next(r=>{r!==null&&a.set(i,r)})).next(()=>a)}saveOverlays(t,n,a){return a.forEach((i,r)=>{this.St(t,n,r)}),U.resolve()}removeOverlaysForBatchId(t,n,a){const i=this.Qr.get(a);return i!==void 0&&(i.forEach(r=>this.overlays=this.overlays.remove(r)),this.Qr.delete(a)),U.resolve()}getOverlaysForCollection(t,n,a){const i=Lt(),r=n.length+1,o=new ee(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const s=l.getNext().value,d=s.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===r&&s.largestBatchId>a&&i.set(s.getKey(),s)}return U.resolve(i)}getOverlaysForCollectionGroup(t,n,a,i){let r=new ze((d,c)=>d-c);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>a){let c=r.get(d.largestBatchId);c===null&&(c=Lt(),r=r.insert(d.largestBatchId,c)),c.set(d.getKey(),d)}}const l=Lt(),s=r.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach((d,c)=>l.set(d,c)),!(l.size()>=i)););return U.resolve(l)}St(t,n,a){const i=this.overlays.get(a.key);if(i!==null){const o=this.Qr.get(i.largestBatchId).delete(a.key);this.Qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(a.key,new Gf(n,a));let r=this.Qr.get(n);r===void 0&&(r=Pe(),this.Qr.set(n,r)),this.Qr.set(n,r.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(t){return U.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(){this.$r=new De(we.Ur),this.Kr=new De(we.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,n){const a=new we(t,n);this.$r=this.$r.add(a),this.Kr=this.Kr.add(a)}Gr(t,n){t.forEach(a=>this.addReference(a,n))}removeReference(t,n){this.zr(new we(t,n))}jr(t,n){t.forEach(a=>this.removeReference(a,n))}Hr(t){const n=new ee(new me([])),a=new we(n,t),i=new we(n,t+1),r=[];return this.Kr.forEachInRange([a,i],o=>{this.zr(o),r.push(o.key)}),r}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const n=new ee(new me([])),a=new we(n,t),i=new we(n,t+1);let r=Pe();return this.Kr.forEachInRange([a,i],o=>{r=r.add(o.key)}),r}containsKey(t){const n=new we(t,0),a=this.$r.firstAfterOrEqual(n);return a!==null&&t.isEqual(a.key)}}class we{constructor(t,n){this.key=t,this.Zr=n}static Ur(t,n){return ee.comparator(t.key,n.key)||ie(t.Zr,n.Zr)}static Wr(t,n){return ie(t.Zr,n.Zr)||ee.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new De(we.Ur)}checkEmpty(t){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,a,i){const r=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Jf(r,n,a,i);this.mutationQueue.push(o);for(const l of i)this.Xr=this.Xr.add(new we(l.key,r)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(t,n){return U.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(t,n){const a=n+1,i=this.ti(a),r=i<0?0:i;return U.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?wi:this.nr-1)}getAllMutationBatches(t){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const a=new we(n,0),i=new we(n,Number.POSITIVE_INFINITY),r=[];return this.Xr.forEachInRange([a,i],o=>{const l=this.ei(o.Zr);r.push(l)}),U.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let a=new De(ie);return n.forEach(i=>{const r=new we(i,0),o=new we(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([r,o],l=>{a=a.add(l.Zr)})}),U.resolve(this.ni(a))}getAllMutationBatchesAffectingQuery(t,n){const a=n.path,i=a.length+1;let r=a;ee.isDocumentKey(r)||(r=r.child(""));const o=new we(new ee(r),0);let l=new De(ie);return this.Xr.forEachWhile(s=>{const d=s.key.path;return!!a.isPrefixOf(d)&&(d.length===i&&(l=l.add(s.Zr)),!0)},o),U.resolve(this.ni(l))}ni(t){const n=[];return t.forEach(a=>{const i=this.ei(a);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ge(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Xr;return U.forEach(n.mutations,i=>{const r=new we(i.key,n.batchId);return a=a.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Xr=a})}sr(t){}containsKey(t,n){const a=new we(n,0),i=this.Xr.firstAfterOrEqual(a);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,U.resolve()}ri(t,n){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const n=this.ti(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(t){this.ii=t,this.docs=function(){return new ze(ee.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const a=n.key,i=this.docs.get(a),r=i?i.size:0,o=this.ii(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,a.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const a=this.docs.get(n);return U.resolve(a?a.document.mutableCopy():Ze.newInvalidDocument(n))}getEntries(t,n){let a=Va();return n.forEach(i=>{const r=this.docs.get(i);a=a.insert(i,r?r.document.mutableCopy():Ze.newInvalidDocument(i))}),U.resolve(a)}getDocumentsMatchingQuery(t,n,a,i){let r=Va();const o=n.path,l=new ee(o.child("__id-9223372036854775808__")),s=this.docs.getIteratorFrom(l);for(;s.hasNext();){const{key:d,value:{document:c}}=s.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||sf(of(c),a)<=0||(i.has(c.key)||Di(n,c))&&(r=r.insert(c.key,c.mutableCopy()))}return U.resolve(r)}getAllFromCollectionGroup(t,n,a,i){ne(9500)}si(t,n){return U.forEach(this.docs,a=>n(a))}newChangeBuffer(t){return new Dp(this)}getSize(t){return U.resolve(this.size)}}class Dp extends bp{constructor(t){super(),this.Br=t}applyChanges(t){const n=[];return this.changes.forEach((a,i)=>{i.isValidDocument()?n.push(this.Br.addEntry(t,i)):this.Br.removeEntry(a)}),U.waitFor(n)}getFromCache(t,n){return this.Br.getEntry(t,n)}getAllFromCache(t,n){return this.Br.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(t){this.persistence=t,this.oi=new qt(n=>Ai(n),Si),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this._i=0,this.ai=new Ii,this.targetCount=0,this.ui=ln.cr()}forEachTarget(t,n){return this.oi.forEach((a,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(t){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return U.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(t,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this._i&&(this._i=n),U.resolve()}Tr(t){this.oi.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ui=new ln(n),this.highestTargetId=n),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,n){return this.Tr(n),this.targetCount+=1,U.resolve()}updateTargetData(t,n){return this.Tr(n),U.resolve()}removeTargetData(t,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(t,n,a){let i=0;const r=[];return this.oi.forEach((o,l)=>{l.sequenceNumber<=n&&a.get(l.targetId)===null&&(this.oi.delete(o),r.push(this.removeMatchingKeysForTargetId(t,l.targetId)),i++)}),U.waitFor(r).next(()=>i)}getTargetCount(t){return U.resolve(this.targetCount)}getTargetData(t,n){const a=this.oi.get(n)||null;return U.resolve(a)}addMatchingKeys(t,n,a){return this.ai.Gr(n,a),U.resolve()}removeMatchingKeys(t,n,a){this.ai.jr(n,a);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach(o=>{r.push(i.markPotentiallyOrphaned(t,o))}),U.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this.ai.Hr(n),U.resolve()}getMatchingKeysForTargetId(t,n){const a=this.ai.Yr(n);return U.resolve(a)}containsKey(t,n){return U.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(t,n){this.ci={},this.overlays={},this.li=new bi(0),this.hi=!1,this.hi=!0,this.Pi=new Tp,this.referenceDelegate=t(this),this.Ti=new Cp(this),this.indexManager=new hp,this.remoteDocumentCache=function(i){return new Sp(i)}(a=>this.referenceDelegate.Ii(a)),this.serializer=new _p(n),this.Ei=new kp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Ep,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let a=this.ci[t.toKey()];return a||(a=new Ap(n,this.referenceDelegate),this.ci[t.toKey()]=a),a}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,n,a){K("MemoryPersistence","Starting transaction:",t);const i=new Np(this.li.next());return this.referenceDelegate.di(),a(i).next(r=>this.referenceDelegate.Ai(i).next(()=>r)).toPromise().then(r=>(i.raiseOnCommittedEvent(),r))}Ri(t,n){return U.or(Object.values(this.ci).map(a=>()=>a.containsKey(t,n)))}}class Np extends df{constructor(t){super(),this.currentSequenceNumber=t}}class Oi{constructor(t){this.persistence=t,this.Vi=new Ii,this.mi=null}static fi(t){return new Oi(t)}get gi(){if(this.mi)return this.mi;throw ne(60996)}addReference(t,n,a){return this.Vi.addReference(a,n),this.gi.delete(a.toString()),U.resolve()}removeReference(t,n,a){return this.Vi.removeReference(a,n),this.gi.add(a.toString()),U.resolve()}markPotentiallyOrphaned(t,n){return this.gi.add(n.toString()),U.resolve()}removeTarget(t,n){this.Vi.Hr(n.targetId).forEach(i=>this.gi.add(i.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(r=>this.gi.add(r.toString()))}).next(()=>a.removeTargetData(t,n))}di(){this.mi=new Set}Ai(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.gi,a=>{const i=ee.fromPath(a);return this.pi(t,i).next(r=>{r||n.removeEntry(i,he.min())})}).next(()=>(this.mi=null,n.apply(t)))}updateLimboDocument(t,n){return this.pi(t,n).next(a=>{a?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(t){return 0}pi(t,n){return U.or([()=>U.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ri(t,n)])}}class Fa{constructor(t,n){this.persistence=t,this.yi=new qt(a=>uf(a.path),(a,i)=>a.isEqual(i)),this.garbageCollector=yp(this,n)}static fi(t,n){return new Fa(t,n)}di(){}Ai(t){return U.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}pr(t){const n=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(a=>n.next(i=>a+i))}br(t){let n=0;return this.yr(t,a=>{n++}).next(()=>n)}yr(t,n){return U.forEach(this.yi,(a,i)=>this.Dr(t,a,i).next(r=>r?U.resolve():n(i)))}removeTargets(t,n,a){return this.persistence.getTargetCache().removeTargets(t,n,a)}removeOrphanedDocuments(t,n){let a=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.si(t,o=>this.Dr(t,o,n).next(l=>{l||(a++,r.removeEntry(o,he.min()))})).next(()=>r.apply(t)).next(()=>a)}markPotentiallyOrphaned(t,n){return this.yi.set(n,t.currentSequenceNumber),U.resolve()}removeTarget(t,n){const a=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,a)}addReference(t,n,a){return this.yi.set(a,t.currentSequenceNumber),U.resolve()}removeReference(t,n,a){return this.yi.set(a,t.currentSequenceNumber),U.resolve()}updateLimboDocument(t,n){return this.yi.set(n,t.currentSequenceNumber),U.resolve()}Ii(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=ba(t.data.value)),n}Dr(t,n,a){return U.or([()=>this.persistence.Ri(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.yi.get(n);return U.resolve(i!==void 0&&i>a)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(t,n,a,i){this.targetId=t,this.fromCache=n,this.ds=a,this.As=i}static Rs(t,n){let a=Pe(),i=Pe();for(const r of n.docChanges)switch(r.type){case 0:a=a.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Ri(t,n.fromCache,a,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return Du()?8:cf(Au())>0?6:4}()}initialize(t,n){this.ys=t,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(t,n,a,i){const r={result:null};return this.ws(t,n).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.bs(t,n,i,a).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new Mp;return this.Ss(t,n,o).next(l=>{if(r.result=l,this.fs)return this.Ds(t,n,o,l.size)})}).next(()=>r.result)}Ds(t,n,a,i){return a.documentReadCount<this.gs?(Qt()<=re.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Tn(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),U.resolve()):(Qt()<=re.DEBUG&&K("QueryEngine","Query:",Tn(n),"scans",a.documentReadCount,"local documents and returns",i,"documents as results."),a.documentReadCount>this.ps*i?(Qt()<=re.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Tn(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,$t(n))):U.resolve())}ws(t,n){if(Vs(n))return U.resolve(null);let a=$t(n);return this.indexManager.getIndexType(t,a).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ni(n,null,"F"),a=$t(n)),this.indexManager.getDocumentsMatchingTarget(t,a).next(r=>{const o=Pe(...r);return this.ys.getDocuments(t,o).next(l=>this.indexManager.getMinOffset(t,a).next(s=>{const d=this.vs(n,l);return this.Cs(n,d,o,s.readTime)?this.ws(t,ni(n,null,"F")):this.Fs(t,d,n,s)}))})))}bs(t,n,a,i){return Vs(n)||i.isEqual(he.min())?U.resolve(null):this.ys.getDocuments(t,a).next(r=>{const o=this.vs(n,r);return this.Cs(n,o,a,i)?U.resolve(null):(Qt()<=re.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Tn(n)),this.Fs(t,o,n,rf(i,$n)).next(l=>l))})}vs(t,n){let a=new De(Rf(t));return n.forEach((i,r)=>{Di(t,r)&&(a=a.add(r))}),a}Cs(t,n,a,i){if(t.limit===null)return!1;if(a.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ss(t,n,a){return Qt()<=re.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Tn(n)),this.ys.getDocumentsMatchingQuery(t,n,Tt.min(),a)}Fs(t,n,a,i){return this.ys.getDocumentsMatchingQuery(t,a,i).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="LocalStore";class Rp{constructor(t,n,a,i){this.persistence=t,this.Ms=n,this.serializer=i,this.xs=new ze(ie),this.Os=new qt(r=>Ai(r),Si),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(a)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new xp(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.xs))}}function Lp(e,t,n,a){return new Rp(e,t,n,a)}async function gd(e,t){const n=_e(e);return await n.persistence.runTransaction("Handle user change","readonly",a=>{let i;return n.mutationQueue.getAllMutationBatches(a).next(r=>(i=r,n.Ls(t),n.mutationQueue.getAllMutationBatches(a))).next(r=>{const o=[],l=[];let s=Pe();for(const d of i){o.push(d.batchId);for(const c of d.mutations)s=s.add(c.key)}for(const d of r){l.push(d.batchId);for(const c of d.mutations)s=s.add(c.key)}return n.localDocuments.getDocuments(a,s).next(d=>({ks:d,removedBatchIds:o,addedBatchIds:l}))})})}function Pp(e,t){const n=_e(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const i=t.batch.keys(),r=n.Bs.newChangeBuffer({trackRemovals:!0});return function(l,s,d,c){const u=d.batch,f=u.keys();let y=U.resolve();return f.forEach(g=>{y=y.next(()=>c.getEntry(s,g)).next(h=>{const p=d.docVersions.get(g);ge(p!==null,48541),h.version.compareTo(p)<0&&(u.applyToRemoteDocument(h,d),h.isValidDocument()&&(h.setReadTime(d.commitVersion),c.addEntry(h)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(s,u))}(n,a,t,r).next(()=>r.apply(a)).next(()=>n.mutationQueue.performConsistencyCheck(a)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(a,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(l){let s=Pe();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(s=s.add(l.batch.mutations[d].key));return s}(t))).next(()=>n.localDocuments.getDocuments(a,i))})}function Vp(e){const t=_e(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ti.getLastRemoteSnapshotVersion(n))}function $p(e,t){const n=_e(e);return n.persistence.runTransaction("Get next mutation batch","readonly",a=>(t===void 0&&(t=wi),n.mutationQueue.getNextMutationBatchAfterBatchId(a,t)))}class Ys{constructor(){this.activeTargetIds=Ff()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Hp{constructor(){this.xo=new Ys,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,a){}addLocalQueryTarget(t,n=!0){return n&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,n,a){this.Oo[t]=n}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new Ys,Promise.resolve()}handleUserChange(t,n,a){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="ConnectivityMonitor";class Ks{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){K(Ws,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){K(Ws,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let va=null;function oi(){return va===null?va=function(){return 268435456+Math.round(2147483648*Math.random())}():va++,"0x"+va.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="RestConnection",Up={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zp{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+t.host,this.Wo=`projects/${a}/databases/${i}`,this.Go=this.databaseId.database===Oa?`project_id=${a}`:`project_id=${a}&database_id=${i}`}zo(t,n,a,i,r){const o=oi(),l=this.jo(t,n.toUriEncodedString());K(Or,`Sending RPC '${t}' ${o}:`,l,a);const s={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(s,i,r);const{host:d}=new URL(l),c=pi(d);return this.Jo(t,l,s,a,c).then(u=>(K(Or,`Received RPC '${t}' ${o}: `,u),u),u=>{throw ja(Or,`RPC '${t}' ${o} failed with error: `,u,"url: ",l,"request:",a),u})}Yo(t,n,a,i,r,o){return this.zo(t,n,a,i,r)}Ho(t,n,a){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cn}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,r)=>t[r]=i),a&&a.headers.forEach((i,r)=>t[r]=i)}jo(t,n){const a=Up[t];return`${this.Ko}/v1/${n}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie="WebChannelConnection";class qp extends zp{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,a,i,r){const o=oi();return new Promise((l,s)=>{const d=new Il;d.setWithCredentials(!0),d.listenOnce(Ol.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ya.NO_ERROR:const u=d.getResponseJson();K(Ie,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(u)),l(u);break;case ya.TIMEOUT:K(Ie,`RPC '${t}' ${o} timed out`),s(new Q(j.DEADLINE_EXCEEDED,"Request time out"));break;case ya.HTTP_ERROR:const f=d.getStatus();if(K(Ie,`RPC '${t}' ${o} failed with status:`,f,"response text:",d.getResponseText()),f>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const g=y==null?void 0:y.error;if(g&&g.status&&g.message){const h=function(v){const x=v.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(x)>=0?x:j.UNKNOWN}(g.status);s(new Q(h,g.message))}else s(new Q(j.UNKNOWN,"Server responded with status "+d.getStatus()))}else s(new Q(j.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{h_:t,streamId:o,P_:d.getLastErrorCode(),T_:d.getLastError()})}}finally{K(Ie,`RPC '${t}' ${o} completed.`)}});const c=JSON.stringify(i);K(Ie,`RPC '${t}' ${o} sending request:`,i),d.send(n,"POST",c,a,15)})}I_(t,n,a){const i=oi(),r=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Pl(),l=Ll(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(s.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Ho(s.initMessageHeaders,n,a),s.encodeInitMessageHeaders=!0;const c=r.join("");K(Ie,`Creating RPC '${t}' stream ${i}: ${c}`,s);const u=o.createWebChannel(c,s);this.E_(u);let f=!1,y=!1;const g=new jp({Zo:p=>{y?K(Ie,`Not sending because RPC '${t}' stream ${i} is closed:`,p):(f||(K(Ie,`Opening RPC '${t}' stream ${i} transport.`),u.open(),f=!0),K(Ie,`RPC '${t}' stream ${i} sending:`,p),u.send(p))},Xo:()=>u.close()}),h=(p,v,x)=>{p.listen(v,S=>{try{x(S)}catch(O){setTimeout(()=>{throw O},0)}})};return h(u,Dn.EventType.OPEN,()=>{y||(K(Ie,`RPC '${t}' stream ${i} transport opened.`),g.__())}),h(u,Dn.EventType.CLOSE,()=>{y||(y=!0,K(Ie,`RPC '${t}' stream ${i} transport closed`),g.u_(),this.d_(u))}),h(u,Dn.EventType.ERROR,p=>{y||(y=!0,ja(Ie,`RPC '${t}' stream ${i} transport errored. Name:`,p.name,"Message:",p.message),g.u_(new Q(j.UNAVAILABLE,"The operation could not be completed")))}),h(u,Dn.EventType.MESSAGE,p=>{var v;if(!y){const x=p.data[0];ge(!!x,16349);const S=x,O=(S==null?void 0:S.error)||((v=S[0])===null||v===void 0?void 0:v.error);if(O){K(Ie,`RPC '${t}' stream ${i} received error:`,O);const N=O.status;let M=function(b){const k=ve[b];if(k!==void 0)return Xf(k)}(N),A=O.message;M===void 0&&(M=j.INTERNAL,A="Unknown error status: "+N+" with message "+O.message),y=!0,g.u_(new Q(M,A)),u.close()}else K(Ie,`RPC '${t}' stream ${i} received:`,x),g.c_(x)}}),h(l,Rl.STAT_EVENT,p=>{p.stat===Gr.PROXY?K(Ie,`RPC '${t}' stream ${i} detected buffering proxy`):p.stat===Gr.NOPROXY&&K(Ie,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.a_()},0),g}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(n=>n===t)}}function Rr(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(e){return new Zf(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(t,n,a=1e3,i=1.5,r=6e4){this.xi=t,this.timerId=n,this.A_=a,this.R_=i,this.V_=r,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const n=Math.floor(this.m_+this.w_()),a=Math.max(0,Date.now()-this.g_),i=Math.max(0,n-a);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="PersistentStream";class Bp{constructor(t,n,a,i,r,o,l,s){this.xi=t,this.S_=a,this.D_=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=s,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new vd(t,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Ft(n.toString()),Ft("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(n)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,i])=>{this.v_===n&&this.z_(a,i)},a=>{t(()=>{const i=new Q(j.UNKNOWN,"Fetching auth token failed: "+a.message);return this.j_(i)})})}z_(t,n){const a=this.G_(this.v_);this.stream=this.H_(t,n),this.stream.e_(()=>{a(()=>this.listener.e_())}),this.stream.n_(()=>{a(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{a(()=>this.j_(i))}),this.stream.onMessage(i=>{a(()=>++this.M_==1?this.J_(i):this.onNext(i))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return K(Js,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return n=>{this.xi.enqueueAndForget(()=>this.v_===t?n():(K(Js,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Yp extends Bp{constructor(t,n,a,i,r,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,i,o),this.serializer=r}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(t,n){return this.connection.I_("Write",t,n)}J_(t){return ge(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ge(!t.writeResults||t.writeResults.length===0,55816),this.listener.na()}onNext(t){ge(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.x_.reset();const n=sp(t.writeResults,t.commitTime),a=nn(t.commitTime);return this.listener.ra(a,n)}ia(){const t={};t.database=rp(this.serializer),this.Q_(t)}ta(t){const n={streamToken:this.lastStreamToken,writes:t.map(a=>op(this.serializer,a))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{}class Kp extends Wp{constructor(t,n,a,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=a,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new Q(j.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,n,a,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.zo(t,ri(n,a),i,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Q(j.UNKNOWN,r.toString())})}Yo(t,n,a,i,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Yo(t,ri(n,a),i,o,l,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(j.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class Jp{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Ft(n),this.ua=!1):K("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn="RemoteStore";class Gp{constructor(t,n,a,i,r){this.localStore=t,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=r,this.Ra.No(o=>{a.enqueueAndForget(async()=>{Kn(this)&&(K(Yn,"Restarting streams for network reachability change."),await async function(s){const d=_e(s);d.da.add(4),await Wn(d),d.Va.set("Unknown"),d.da.delete(4),await Ka(d)}(this))})}),this.Va=new Jp(a,i)}}async function Ka(e){if(Kn(e))for(const t of e.Aa)await t(!0)}async function Wn(e){for(const t of e.Aa)await t(!1)}function Kn(e){return _e(e).da.size===0}async function yd(e,t,n){if(!qn(t))throw t;e.da.add(1),await Wn(e),e.Va.set("Offline"),n||(n=()=>Vp(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{K(Yn,"Retrying IndexedDB access"),await n(),e.da.delete(1),await Ka(e)})}function bd(e,t){return t().catch(n=>yd(e,n,t))}async function Ja(e){const t=_e(e),n=St(t);let a=t.Ia.length>0?t.Ia[t.Ia.length-1].batchId:wi;for(;Qp(t);)try{const i=await $p(t.localStore,a);if(i===null){t.Ia.length===0&&n.k_();break}a=i.batchId,Xp(t,i)}catch(i){await yd(t,i)}wd(t)&&xd(t)}function Qp(e){return Kn(e)&&e.Ia.length<10}function Xp(e,t){e.Ia.push(t);const n=St(e);n.N_()&&n.ea&&n.ta(t.mutations)}function wd(e){return Kn(e)&&!St(e).O_()&&e.Ia.length>0}function xd(e){St(e).start()}async function Zp(e){St(e).ia()}async function em(e){const t=St(e);for(const n of e.Ia)t.ta(n.mutations)}async function tm(e,t,n){const a=e.Ia.shift(),i=Mi.from(a,t,n);await bd(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Ja(e)}async function nm(e,t){t&&St(e).ea&&await async function(a,i){if(function(o){return Qf(o)&&o!==j.ABORTED}(i.code)){const r=a.Ia.shift();St(a).L_(),await bd(a,()=>a.remoteSyncer.rejectFailedWrite(r.batchId,i)),await Ja(a)}}(e,t),wd(e)&&xd(e)}async function Gs(e,t){const n=_e(e);n.asyncQueue.verifyOperationInProgress(),K(Yn,"RemoteStore received new credentials");const a=Kn(n);n.da.add(3),await Wn(n),a&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.da.delete(3),await Ka(n)}async function am(e,t){const n=_e(e);t?(n.da.delete(2),await Ka(n)):t||(n.da.add(2),await Wn(n),n.Va.set("Unknown"))}function St(e){return e.ga||(e.ga=function(n,a,i){const r=_e(n);return r.oa(),new Yp(a,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(e.datastore,e.asyncQueue,{e_:()=>Promise.resolve(),n_:Zp.bind(null,e),i_:nm.bind(null,e),na:em.bind(null,e),ra:tm.bind(null,e)}),e.Aa.push(async t=>{t?(e.ga.L_(),await Ja(e)):(await e.ga.stop(),e.Ia.length>0&&(K(Yn,`Stopping write stream with ${e.Ia.length} pending writes`),e.Ia=[]))})),e.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(t,n,a,i,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=a,this.op=i,this.removalCallback=r,this.deferred=new Vt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,a,i,r){const o=Date.now()+a,l=new Li(t,n,o,i,r);return l.start(a),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(j.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kd(e,t){if(Ft("AsyncQueue",`${t}: ${e}`),qn(e))return new Q(j.UNAVAILABLE,`${t}: ${e}`);throw e}class rm{constructor(){this.queries=Qs(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,a){const i=_e(n),r=i.queries;i.queries=Qs(),r.forEach((o,l)=>{for(const s of l.Sa)s.onError(a)})})(this,new Q(j.ABORTED,"Firestore shutting down"))}}function Qs(){return new qt(e=>nd(e),td)}function im(e){e.Ca.forEach(t=>{t.next()})}var Xs,Zs;(Zs=Xs||(Xs={})).xa="default",Zs.Cache="cache";const om="SyncEngine";class sm{constructor(t,n,a,i,r,o){this.localStore=t,this.remoteStore=n,this.eventManager=a,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new qt(l=>nd(l),td),this.Pu=new Map,this.Tu=new Set,this.Iu=new ze(ee.comparator),this.Eu=new Map,this.du=new Ii,this.Au={},this.Ru=new Map,this.Vu=ln.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function lm(e,t,n){const a=um(e);try{const i=await function(o,l){const s=_e(o),d=be.now(),c=l.reduce((y,g)=>y.add(g.key),Pe());let u,f;return s.persistence.runTransaction("Locally write mutations","readwrite",y=>{let g=Va(),h=Pe();return s.Bs.getEntries(y,c).next(p=>{g=p,g.forEach((v,x)=>{x.isValidDocument()||(h=h.add(v))})}).next(()=>s.localDocuments.getOverlayedDocuments(y,g)).next(p=>{u=p;const v=[];for(const x of l){const S=Wf(x,u.get(x.key).overlayedDocument);S!=null&&v.push(new Ct(x.key,S,Kl(S.value.mapValue),et.exists(!0)))}return s.mutationQueue.addMutationBatch(y,d,v,l)}).next(p=>{f=p;const v=p.applyToLocalDocumentSet(u,h);return s.documentOverlayCache.saveOverlays(y,p.batchId,v)})}).then(()=>({batchId:f.batchId,changes:rd(u)}))}(a.localStore,t);a.sharedClientState.addPendingMutation(i.batchId),function(o,l,s){let d=o.Au[o.currentUser.toKey()];d||(d=new ze(ie)),d=d.insert(l,s),o.Au[o.currentUser.toKey()]=d}(a,i.batchId,n),await Ga(a,i.changes),await Ja(a.remoteStore)}catch(i){const r=kd(i,"Failed to persist write");n.reject(r)}}function el(e,t,n){const a=_e(e);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const i=[];a.hu.forEach((r,o)=>{const l=o.view.Fa(t);l.snapshot&&i.push(l.snapshot)}),function(o,l){const s=_e(o);s.onlineState=l;let d=!1;s.queries.forEach((c,u)=>{for(const f of u.Sa)f.Fa(l)&&(d=!0)}),d&&im(s)}(a.eventManager,t),i.length&&a.lu.Y_(i),a.onlineState=t,a.isPrimaryClient&&a.sharedClientState.setOnlineState(t)}}async function dm(e,t){const n=_e(e),a=t.batch.batchId;try{const i=await Pp(n.localStore,t);Td(n,a,null),Ed(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await Ga(n,i)}catch(i){await yi(i)}}async function cm(e,t,n){const a=_e(e);try{const i=await function(o,l){const s=_e(o);return s.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let c;return s.mutationQueue.lookupMutationBatch(d,l).next(u=>(ge(u!==null,37113),c=u.keys(),s.mutationQueue.removeMutationBatch(d,u))).next(()=>s.mutationQueue.performConsistencyCheck(d)).next(()=>s.documentOverlayCache.removeOverlaysForBatchId(d,c,l)).next(()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,c)).next(()=>s.localDocuments.getDocuments(d,c))})}(a.localStore,t);Td(a,t,n),Ed(a,t),a.sharedClientState.updateMutationState(t,"rejected",n),await Ga(a,i)}catch(i){await yi(i)}}function Ed(e,t){(e.Ru.get(t)||[]).forEach(n=>{n.resolve()}),e.Ru.delete(t)}function Td(e,t,n){const a=_e(e);let i=a.Au[a.currentUser.toKey()];if(i){const r=i.get(t);r&&(n?r.reject(n):r.resolve(),i=i.remove(t)),a.Au[a.currentUser.toKey()]=i}}async function Ga(e,t,n){const a=_e(e),i=[],r=[],o=[];a.hu.isEmpty()||(a.hu.forEach((l,s)=>{o.push(a.fu(s,t,n).then(d=>{var c;if((d||n)&&a.isPrimaryClient){const u=d?!d.fromCache:(c=void 0)===null||c===void 0?void 0:c.current;a.sharedClientState.updateQueryState(s.targetId,u?"current":"not-current")}if(d){i.push(d);const u=Ri.Rs(s.targetId,d);r.push(u)}}))}),await Promise.all(o),a.lu.Y_(i),await async function(s,d){const c=_e(s);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>U.forEach(d,f=>U.forEach(f.ds,y=>c.persistence.referenceDelegate.addReference(u,f.targetId,y)).next(()=>U.forEach(f.As,y=>c.persistence.referenceDelegate.removeReference(u,f.targetId,y)))))}catch(u){if(!qn(u))throw u;K(Op,"Failed to update sequence numbers: "+u)}for(const u of d){const f=u.targetId;if(!u.fromCache){const y=c.xs.get(f),g=y.snapshotVersion,h=y.withLastLimboFreeSnapshotVersion(g);c.xs=c.xs.insert(f,h)}}}(a.localStore,r))}async function _m(e,t){const n=_e(e);if(!n.currentUser.isEqual(t)){K(om,"User change. New user:",t.toKey());const a=await gd(n.localStore,t);n.currentUser=t,function(r,o){r.Ru.forEach(l=>{l.forEach(s=>{s.reject(new Q(j.CANCELLED,o))})}),r.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,a.removedBatchIds,a.addedBatchIds),await Ga(n,a.ks)}}function um(e){const t=_e(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=dm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=cm.bind(null,t),t}class Ua{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Wa(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,n){return null}Cu(t,n){return null}Du(t){return Lp(this.persistence,new Ip,t.initialUser,this.serializer)}Su(t){return new md(Oi.fi,this.serializer)}bu(t){return new Hp}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ua.provider={build:()=>new Ua};class hm extends Ua{constructor(t){super(),this.cacheSizeBytes=t}vu(t,n){ge(this.persistence.referenceDelegate instanceof Fa,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new gp(a,t.asyncQueue,n)}Su(t){const n=this.cacheSizeBytes!==void 0?Ue.withCacheSize(this.cacheSizeBytes):Ue.DEFAULT;return new md(a=>Fa.fi(a,n),this.serializer)}}class si{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>el(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=_m.bind(null,this.syncEngine),await am(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new rm}()}createDatastore(t){const n=Wa(t.databaseInfo.databaseId),a=function(r){return new qp(r)}(t.databaseInfo);return function(r,o,l,s){return new Kp(r,o,l,s)}(t.authCredentials,t.appCheckCredentials,a,n)}createRemoteStore(t){return function(a,i,r,o,l){return new Gp(a,i,r,o,l)}(this.localStore,this.datastore,t.asyncQueue,n=>el(this.syncEngine,n,0),function(){return Ks.C()?new Ks:new Fp}())}createSyncEngine(t,n){return function(i,r,o,l,s,d,c){const u=new sm(i,r,o,l,s,d);return c&&(u.mu=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(i){const r=_e(i);K(Yn,"RemoteStore shutting down."),r.da.add(5),await Wn(r),r.Ra.shutdown(),r.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}si.provider={build:()=>new si};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt="FirestoreClient";class fm{constructor(t,n,a,i,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=a,this.databaseInfo=i,this.user=Le.UNAUTHENTICATED,this.clientId=Hl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(a,async o=>{K(Dt,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(a,o=>(K(Dt,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Vt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const a=kd(n,"Failed to shutdown persistence");t.reject(a)}}),t.promise}}async function Lr(e,t){e.asyncQueue.verifyOperationInProgress(),K(Dt,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let a=n.initialUser;e.setCredentialChangeListener(async i=>{a.isEqual(i)||(await gd(t.localStore,i),a=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function tl(e,t){e.asyncQueue.verifyOperationInProgress();const n=await pm(e);K(Dt,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(a=>Gs(t.remoteStore,a)),e.setAppCheckTokenChangeListener((a,i)=>Gs(t.remoteStore,i)),e._onlineComponents=t}async function pm(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){K(Dt,"Using user provided OfflineComponentProvider");try{await Lr(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ja("Error using user provided cache. Falling back to memory cache: "+n),await Lr(e,new Ua)}}else K(Dt,"Using default OfflineComponentProvider"),await Lr(e,new hm(void 0));return e._offlineComponents}async function mm(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(K(Dt,"Using user provided OnlineComponentProvider"),await tl(e,e._uninitializedComponentsProvider._online)):(K(Dt,"Using default OnlineComponentProvider"),await tl(e,new si))),e._onlineComponents}function gm(e){return mm(e).then(t=>t.syncEngine)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(e,t,n){if(!n)throw new Q(j.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function vm(e,t,n,a){if(t===!0&&a===!0)throw new Q(j.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function al(e){if(!ee.isDocumentKey(e))throw new Q(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function rl(e){if(ee.isDocumentKey(e))throw new Q(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Pi(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(a){return a.constructor?a.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":ne(12329,{type:typeof e})}function zn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Q(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pi(e);throw new Q(j.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="firestore.googleapis.com",il=!0;class ol{constructor(t){var n,a;if(t.host===void 0){if(t.ssl!==void 0)throw new Q(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Dd,this.ssl=il}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:il;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=pd;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<pp)throw new Q(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}vm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ad((a=t.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(a,i){return a.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Qa{constructor(t,n,a,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=a,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ol({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Q(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ol(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new Kh;switch(a.type){case"firstParty":return new Xh(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Q(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const a=nl.get(n);a&&(K("ComponentProvider","Removing Datastore"),nl.delete(n),a.terminate())}(this),Promise.resolve()}}function ym(e,t,n,a={}){var i;e=zn(e,Qa);const r=pi(t),o=e._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:e._getEmulatorOptions()}),s=`${t}:${n}`;r&&(wu(`https://${s}`),Tu("Firestore",!0)),o.host!==Dd&&o.host!==s&&ja("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:s,ssl:r,emulatorOptions:a});if(!Da(d,l)&&(e._setSettings(d),a.mockUserToken)){let c,u;if(typeof a.mockUserToken=="string")c=a.mockUserToken,u=Le.MOCK_USER;else{c=xu(a.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);const f=a.mockUserToken.sub||a.mockUserToken.user_id;if(!f)throw new Q(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Le(f)}e._authCredentials=new Jh(new $l(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(t,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=t}withConverter(t){return new Vi(this.firestore,t,this._query)}}class rt{constructor(t,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kt(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new rt(this.firestore,t,this._key)}}class kt extends Vi{constructor(t,n,a){super(t,n,Mf(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new rt(this.firestore,null,new ee(t))}withConverter(t){return new kt(this.firestore,t,this._path)}}function bm(e,t,...n){if(e=Et(e),Sd("collection","path",t),e instanceof Qa){const a=me.fromString(t,...n);return rl(a),new kt(e,null,a)}{if(!(e instanceof rt||e instanceof kt))throw new Q(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=e._path.child(me.fromString(t,...n));return rl(a),new kt(e.firestore,null,a)}}function $i(e,t,...n){if(e=Et(e),arguments.length===1&&(t=Hl.newId()),Sd("doc","path",t),e instanceof Qa){const a=me.fromString(t,...n);return al(a),new rt(e,null,new ee(a))}{if(!(e instanceof rt||e instanceof kt))throw new Q(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=e._path.child(me.fromString(t,...n));return al(a),new rt(e.firestore,e instanceof kt?e.converter:null,new ee(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl="AsyncQueue";class ll{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new vd(this,"async_queue_retry"),this.rc=()=>{const a=Rr();a&&K(sl,"Visibility state changed to "+a.visibilityState),this.x_.b_()},this.sc=t;const n=Rr();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const n=Rr();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Vt;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!qn(t))throw t;K(sl,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const n=this.sc.then(()=>(this.ec=!0,t().catch(a=>{throw this.Xu=a,this.ec=!1,Ft("INTERNAL UNHANDLED ERROR: ",dl(a)),a}).then(a=>(this.ec=!1,a))));return this.sc=n,n}enqueueAfterDelay(t,n,a){this.oc(),this.nc.indexOf(t)>-1&&(n=0);const i=Li.createAndSchedule(this,t,n,a,r=>this.uc(r));return this.Zu.push(i),i}oc(){this.Xu&&ne(47125,{cc:dl(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const n of this.Zu)if(n.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((n,a)=>n.targetTimeMs-a.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const n=this.Zu.indexOf(t);this.Zu.splice(n,1)}}function dl(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Xa extends Qa{constructor(t,n,a,i){super(t,n,a,i),this.type="firestore",this._queue=new ll,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new ll(t),this._firestoreClient=void 0,await t}}}function wm(e,t){const n=typeof e=="object"?e:Lh(),a=typeof e=="string"?e:Oa,i=Nh(n,"firestore").getImmediate({identifier:a});if(!i._initialized){const r=yu("firestore");r&&ym(i,...r)}return i}function xm(e){if(e._terminated)throw new Q(j.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||km(e),e._firestoreClient}function km(e){var t,n,a;const i=e._freezeSettings(),r=function(l,s,d,c){return new mf(l,s,d,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Ad(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((a=i.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new fm(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(l){const s=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(s),_online:s}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new jn(it.fromBase64String(t))}catch(n){throw new Q(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new jn(it.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Q(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Se(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Q(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Q(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ie(this._lat,t._lat)||ie(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(a,i){if(a.length!==i.length)return!1;for(let r=0;r<a.length;++r)if(a[r]!==i[r])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em=/^__.*__$/;class Tm{constructor(t,n,a){this.data=t,this.fieldMask=n,this.fieldTransforms=a}toMutation(t,n){return this.fieldMask!==null?new Ct(t,this.data,this.fieldMask,n,this.fieldTransforms):new Bn(t,this.data,n,this.fieldTransforms)}}class Md{constructor(t,n,a){this.data=t,this.fieldMask=n,this.fieldTransforms=a}toMutation(t,n){return new Ct(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function Id(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ic:e})}}class Ui{constructor(t,n,a,i,r,o){this.settings=t,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=i,r===void 0&&this.Ec(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new Ui(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var n;const a=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.dc({path:a,Rc:!1});return i.Vc(t),i}mc(t){var n;const a=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.dc({path:a,Rc:!1});return i.Ec(),i}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return za(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(Id(this.Ic)&&Em.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class Am{constructor(t,n,a){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=a||Wa(t)}bc(t,n,a,i=!1){return new Ui({Ic:t,methodName:n,wc:a,path:Se.emptyPath(),Rc:!1,yc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Od(e){const t=e._freezeSettings(),n=Wa(e._databaseId);return new Am(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Sm(e,t,n,a,i,r={}){const o=e.bc(r.merge||r.mergeFields?2:0,t,n,i);zi("Data must be an object, but it was:",o,a);const l=Rd(a,o);let s,d;if(r.merge)s=new Ye(o.fieldMask),d=o.fieldTransforms;else if(r.mergeFields){const c=[];for(const u of r.mergeFields){const f=li(t,u,n);if(!o.contains(f))throw new Q(j.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Vd(c,f)||c.push(f)}s=new Ye(c),d=o.fieldTransforms.filter(u=>s.covers(u.field))}else s=null,d=o.fieldTransforms;return new Tm(new qe(l),s,d)}class Za extends Fi{_toFieldTransform(t){if(t.Ic!==2)throw t.Ic===1?t.gc(`${this._methodName}() can only appear at the top level of your update data`):t.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Za}}function Dm(e,t,n,a){const i=e.bc(1,t,n);zi("Data must be an object, but it was:",i,a);const r=[],o=qe.empty();jt(a,(s,d)=>{const c=Pd(t,s,n);d=Et(d);const u=i.mc(c);if(d instanceof Za)r.push(c);else{const f=er(d,u);f!=null&&(r.push(c),o.set(c,f))}});const l=new Ye(r);return new Md(o,l,i.fieldTransforms)}function Cm(e,t,n,a,i,r){const o=e.bc(1,t,n),l=[li(t,a,n)],s=[i];if(r.length%2!=0)throw new Q(j.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<r.length;f+=2)l.push(li(t,r[f])),s.push(r[f+1]);const d=[],c=qe.empty();for(let f=l.length-1;f>=0;--f)if(!Vd(d,l[f])){const y=l[f];let g=s[f];g=Et(g);const h=o.mc(y);if(g instanceof Za)d.push(y);else{const p=er(g,h);p!=null&&(d.push(y),c.set(y,p))}}const u=new Ye(d);return new Md(c,u,o.fieldTransforms)}function er(e,t){if(Ld(e=Et(e)))return zi("Unsupported field value:",t,e),Rd(e,t);if(e instanceof Fi)return function(a,i){if(!Id(i.Ic))throw i.gc(`${a._methodName}() can only be used with update() and set()`);if(!i.path)throw i.gc(`${a._methodName}() is not currently supported inside arrays`);const r=a._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(a,i){const r=[];let o=0;for(const l of a){let s=er(l,i.fc(o));s==null&&(s={nullValue:"NULL_VALUE"}),r.push(s),o++}return{arrayValue:{values:r}}}(e,t)}return function(a,i){if((a=Et(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return Uf(i.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const r=be.fromDate(a);return{timestampValue:ai(i.serializer,r)}}if(a instanceof be){const r=new be(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:ai(i.serializer,r)}}if(a instanceof Cd)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof jn)return{bytesValue:ep(i.serializer,a._byteString)};if(a instanceof rt){const r=i.databaseId,o=a.firestore._databaseId;if(!o.isEqual(r))throw i.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:hd(a.firestore._databaseId||i.databaseId,a._key.path)}}if(a instanceof Nd)return function(o,l){return{mapValue:{fields:{[Yl]:{stringValue:Wl},[Xr]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.gc("VectorValues must only contain numeric values.");return Ci(l.serializer,d)})}}}}}}(a,i);throw i.gc(`Unsupported field value: ${Pi(a)}`)}(e,t)}function Rd(e,t){const n={};return Ul(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):jt(e,(a,i)=>{const r=er(i,t.Ac(a));r!=null&&(n[a]=r)}),{mapValue:{fields:n}}}function Ld(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof be||e instanceof Cd||e instanceof jn||e instanceof rt||e instanceof Fi||e instanceof Nd)}function zi(e,t,n){if(!Ld(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const a=Pi(n);throw a==="an object"?t.gc(e+" a custom object"):t.gc(e+" "+a)}}function li(e,t,n){if((t=Et(t))instanceof Hi)return t._internalPath;if(typeof t=="string")return Pd(e,t);throw za("Field path arguments must be of type string or ",e,!1,void 0,n)}const Nm=new RegExp("[~\\*/\\[\\]]");function Pd(e,t,n){if(t.search(Nm)>=0)throw za(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Hi(...t.split("."))._internalPath}catch{throw za(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function za(e,t,n,a,i){const r=a&&!a.isEmpty(),o=i!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let s="";return(r||o)&&(s+=" (found",r&&(s+=` in field ${a}`),o&&(s+=` in document ${i}`),s+=")"),new Q(j.INVALID_ARGUMENT,l+e+s)}function Vd(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(e,t,n){let a;return a=e?e.toFirestore(t):t,a}function Im(e,t,n,...a){e=zn(e,rt);const i=zn(e.firestore,Xa),r=Od(i);let o;return o=typeof(t=Et(t))=="string"||t instanceof Hi?Cm(r,"updateDoc",e._key,t,n,a):Dm(r,"updateDoc",e._key,t),ji(i,[o.toMutation(e._key,et.exists(!0))])}function Om(e){return ji(zn(e.firestore,Xa),[new Ni(e._key,et.none())])}function Rm(e,t){const n=zn(e.firestore,Xa),a=$i(e),i=Mm(e.converter,t);return ji(n,[Sm(Od(e.firestore),"addDoc",a._key,i,e.converter!==null,{}).toMutation(a._key,et.exists(!1))]).then(()=>a)}function ji(e,t){return function(a,i){const r=new Vt;return a.asyncQueue.enqueueAndForget(async()=>lm(await gm(a),i,r)),r.promise}(xm(e),t)}(function(t,n=!0){(function(i){cn=i})(Rh),Na(new Pn("firestore",(a,{instanceIdentifier:i,options:r})=>{const o=a.getProvider("app").getImmediate(),l=new Xa(new Gh(a.getProvider("auth-internal")),new Zh(o,a.getProvider("app-check-internal")),function(d,c){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Q(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ra(d.options.projectId,c)}(o,i),o);return r=Object.assign({useFetchStreams:n},r),l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),tn(xs,ks,t),tn(xs,ks,"esm2017")})();const Lm={apiKey:"AIzaSyBZtEdhST7BD-yIw2buJelAtnJ9uFT3WiA",authDomain:"scheduler-with-firebase.firebaseapp.com",projectId:"scheduler-with-firebase",storageBucket:"scheduler-with-firebase.firebasestorage.app",messagingSenderId:"512323964322",appId:"1:512323964322:web:9b3478a50226fae4f936fb",measurementId:"G-90JM6QYPJ9"},Pm=Cl(Lm),qi=wm(Pm);Je.config.details_on_dblclick=!0;Je.config.details_on_create=!0;Je.config.header=["day","week","month","date","prev","today","next"];Je.init("scheduler_here",new Date(2022,3,20),"week");Je.parse([{start_date:"2022-04-18 09:00",end_date:"2022-04-18 12:00",text:"English lesson"},{start_date:"2022-04-20 10:00",end_date:"2022-04-21 16:00",text:"Math exam"},{start_date:"2022-04-21 10:00",end_date:"2022-04-21 14:00",text:"Science lesson"},{start_date:"2022-04-23 16:00",end_date:"2022-04-23 17:00",text:"English lesson"},{start_date:"2022-04-22 09:00",end_date:"2022-04-22 17:00",text:"Usual event"}]);const Vm=bm(qi,"events"),$d=e=>({text:e.text,start_date:be.fromDate(new Date(e.start_date)),end_date:be.fromDate(new Date(e.end_date))});Je.attachEvent("onEventAdded",async(e,t)=>{if(t._remote)return!0;const{id:n,...a}=t,i=await Rm(Vm,$d(a));return Je.changeEventId(n,i.id),!0});Je.attachEvent("onEventChanged",(e,t)=>t._remote?!0:Im($i(qi,"events",e),$d(t)));Je.attachEvent("onEventDeleted",e=>Om($i(qi,"events",e)));
